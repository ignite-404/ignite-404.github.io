"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8172],{23806:function(L,D,n){var P=n(1288),r=n(85893);D.Z=function(a){var t=a.model,i=a.fallback;if(t==null||t==null)return null;var u=t==null?void 0:t.CreationTime,m=t==null?void 0:t.LastModificationTime;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{style:{},children:[(0,r.jsx)("div",{children:(0,r.jsx)(P.Z,{prefix:(0,r.jsx)("span",{children:"\u521B\u5EFA\uFF1A"}),onlyDate:!0,timeStr:u,fallback:i})}),(0,r.jsx)("div",{children:(0,r.jsx)(P.Z,{prefix:(0,r.jsx)("span",{children:"\u4FEE\u6539\uFF1A"}),onlyDate:!0,timeStr:m,fallback:i})})]})})}},1288:function(L,D,n){var P=n(78957),r=n(83062),a=n(46629),t=n(85893);D.Z=function(i){var u,m=i.timeStr,e=i.fallback,E=i.onlyDate,f=i.prefix,l=(u=(0,a.mg)(m))===null||u===void 0?void 0:u.add(a.Mg,"hour");if(!l)return e||null;var x=(0,a.ND)().utc().add(a.Mg,"hour"),_=l.isSame(x,"year"),B=l.diff(x,"day"),W=_?l.format(a.AK):l.format(a.vc),T=function(){return(0,t.jsxs)("div",{children:[(0,t.jsxs)(P.Z,{direction:"horizontal",children:[(0,t.jsx)("div",{children:l.fromNow()}),(0,t.jsx)("div",{children:l.format(a.On)})]}),(0,t.jsx)("div",{children:l.format(a.t9)})]})};return(0,t.jsx)(r.Z,{title:T(),children:(0,t.jsxs)(P.Z,{direction:"horizontal",children:[f,(0,t.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:E?l.format(a.vc):l.format(a.dq)})]})})}},55529:function(L,D,n){var P=n(83062),r=n(66309),a=n(78957),t=n(46629),i=n(25619),u=n(85893);D.Z=function(m){var e=m.start,E=m.end,f=function(x){var _=(0,t.mg)(x);return _?(_=_.add(t.Mg,"hour"),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(P.Z,{title:_.format(t.dq),children:(0,u.jsxs)("div",{className:"border-0 border-blue-500 bg-gray-100 p-[0.5] hover:border-1",children:[(0,u.jsxs)("div",{className:"text-blue-500",children:[_.fromNow(),"\uFF0C",_.format(t.On)]}),(0,u.jsx)(r.Z,{icon:(0,u.jsx)(i.Z,{stroke:1}),color:"blue",children:_.format(t.bF)})]})})})):(0,u.jsx)("span",{children:"--"})};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(a.Z,{size:"small",direction:"horizontal",split:(0,u.jsx)("span",{className:"text-slate-400",children:"\u5230"}),children:[f(e),f(E)]})})}},51551:function(L,D,n){n.r(D);var P=n(97857),r=n.n(P),a=n(5574),t=n.n(a),i=n(30699),u=n(4393),m=n(78957),e=n(72269),E=n(67294),f=n(66557),l=n(66419),x=n(85893);D.default=function(){var _=(0,E.useState)(!0),B=t()(_,2),W=B[0],T=B[1],A=(0,E.useState)({OrderToService:!0}),F=t()(A,2),h=F[0],k=F[1],Z=(0,E.useState)({}),b=t()(Z,2),R=b[0],Q=b[1],S=function(y){T(!0),i.x1.mallManager.pickupQueryPaging(r()({},y)).then(function(s){(0,l._y)(s,function(){Q(s.data||{})})}).finally(function(){T(!1)})};return(0,E.useEffect)(function(){S(h)},[]),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(u.Z,{loading:W,title:"\u81EA\u63D0",extra:(0,x.jsxs)(m.Z,{direction:"horizontal",children:[(0,x.jsx)(e.Z,{checked:h.OrderToService||!1,onChange:function(y){var s=r()(r()({},h),{},{Page:1,OrderToService:y});k(s),S(s)}}),(0,x.jsx)("span",{children:"\u53EA\u5C55\u793A\u5F85\u670D\u52A1\u8BA2\u5355\u76F8\u5173\u81EA\u63D0"})]}),children:(0,x.jsx)(f.Z,{data:R.Items||[],pagination:{total:R.TotalCount,pageSize:R.PageSize,current:h.Page,onChange:function(y){var s=r()(r()({},h),{},{Page:y});k(s),S(s)}},refresh:function(){S(r()({},h))}})})})}},66557:function(L,D,n){n.d(D,{Z:function(){return y}});var P=n(5574),r=n.n(P),a=n(40411),t=n(66309),i=n(14726),u=n(80799),m=n(67294),e=n(85893),E=function(s){var v=s.data,o=v;return v.ReservationApproved==null?(0,e.jsx)(a.Z,{status:"default",text:"\u5F85\u5BA1\u6279"}):o.ReservationApproved?o.Prepared?o.Picked?(0,e.jsx)(a.Z,{status:"success",text:"\u5DF2\u53D6\u8D27"}):(0,e.jsx)(a.Z,{status:"processing",text:"\u5F85\u53D6\u8D27"}):(0,e.jsx)(a.Z,{status:"warning",text:"\u51C6\u5907\u4E2D"}):(0,e.jsx)(a.Z,{status:"error",text:"\u5BA1\u6279\u672A\u901A\u8FC7"})},f=n(26412),l=n(45360),x=n(22181),_=n(32983),B=n(78957),W=n(85576),T=n(57381),A=n(1288),F=n(55529),h=n(30699),k=n(46629),Z=n(66419),b=function(v){var o=v.data;return(0,e.jsxs)(f.Z,{bordered:!0,children:[(0,e.jsx)(f.Z.Item,{label:"\u671F\u671B\u914D\u9001\u65F6\u95F4",children:(0,e.jsx)(F.Z,{start:o.PreferPickupStartTime,end:o.PreferPickupEndTime})}),(0,e.jsx)(f.Z.Item,{label:"\u6821\u9A8C\u7801",children:(0,e.jsx)("b",{children:o.SecurityCode||"--"})}),(0,e.jsx)(f.Z.Item,{label:"\u914D\u9001\u72B6\u6001",children:(0,e.jsx)(E,{data:o})}),(0,e.jsx)(f.Z.Item,{label:"\u5BA1\u6279\u65F6\u95F4",children:(0,e.jsx)(A.Z,{timeStr:o.ReservationApprovedTime})}),(0,e.jsx)(f.Z.Item,{label:"\u51C6\u5907\u5B8C\u6BD5\u65F6\u95F4",children:(0,e.jsx)(A.Z,{timeStr:o.PreparedTime})}),(0,e.jsx)(f.Z.Item,{label:"\u53D6\u8D27\u65F6\u95F4",children:(0,e.jsx)(A.Z,{timeStr:o.PickedTime})}),(0,e.jsx)(f.Z.Item,{label:"\u521B\u5EFA\u65F6\u95F4",span:2,children:(0,e.jsx)(A.Z,{timeStr:o.CreationTime})})]})},R=function(v){var o=v.data;return(0,e.jsx)(u.Z,{pagination:!1})},Q=function(s){var v=s.detailId,o=s.hide,$=(0,m.useState)(!1),z=r()($,2),O=z[0],g=z[1],H=(0,m.useState)({}),N=r()(H,2),d=N[0],V=N[1],G=!(0,Z.Wq)(v),X=function(j,I){confirm("\u786E\u8BA4\u5BA1\u6279\uFF1F")&&(g(!0),h.x1.mallManager.pickupApproveOrNot({Key:j.Id,Value:I}).then(function(ee){(0,Z._y)(ee,function(){l.ZP.success("\u4FDD\u5B58\u6210\u529F"),c(v)})}).finally(function(){g(!1)}))},p=function(j){confirm("\u786E\u8BA4\u8D27\u54C1\u5DF2\u7ECF\u51C6\u5907\u5B8C\u6210\uFF1F")&&(g(!0),h.x1.mallManager.pickupSetPrepared({Id:j.Id}).then(function(I){(0,Z._y)(I,function(){l.ZP.success("\u4FDD\u5B58\u6210\u529F"),c(v)})}).finally(function(){g(!1)}))},M=function(j){g(!0),h.x1.mallManager.pickupSetPicked({Id:j.Id}).then(function(I){(0,Z._y)(I,function(){l.ZP.success("\u53D1\u8D27\u6210\u529F"),c(v)})}).finally(function(){g(!1)})},c=function(j){(0,Z.Wq)(j)||(g(!0),h.x1.mallManager.pickupQueryById({Id:j}).then(function(I){V(I.data.Data||{})}).finally(function(){g(!1)}))};(0,m.useEffect)(function(){c(v)},[v]);var U=function(){return d.ReservationApproved!=null||d.ReservationApprovedTime!=null?null:(0,e.jsxs)(i.ZP.Group,{children:[(0,e.jsx)(i.ZP,{loading:O,type:"primary",onClick:function(){X(d,!0)},children:"\u6279\u51C6\u9884\u7EA6"}),(0,e.jsx)(i.ZP,{loading:O,type:"primary",danger:!0,onClick:function(){X(d,!1)},children:"\u62D2\u7EDD\u9884\u7EA6"})]})},J=function(){return!d.ReservationApproved||d.Prepared?null:(0,e.jsx)(i.ZP.Group,{children:(0,e.jsx)(i.ZP,{loading:O,type:"primary",onClick:function(){p(d)},children:"\u8D27\u54C1\u5DF2\u7ECF\u51C6\u5907\u5B8C\u6210"})})},Y=function(){return!d.Prepared||d.Picked?null:(0,e.jsx)(i.ZP.Group,{children:(0,e.jsx)(i.ZP,{loading:O,type:"link",onClick:function(){M(d)},children:"\u53D6\u8D27\u5B8C\u6210"})})},w=function(){return d.Picked?(0,e.jsx)(x.ZP,{status:"success",title:"\u63D0\u8D27\u5DF2\u7ECF\u5B8C\u6210",subTitle:"\u63D0\u8D27\u5355\uFF1A".concat(d.Id,"\u5DF2\u7ECF\u4E8E").concat((0,k.Gl)(d.PickedTime),"\u5B8C\u6210\u63D0\u8D27")}):null},q=function(){return(0,Z.Wq)(d.Id)?(0,e.jsx)(_.Z,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(b,{data:d}),(0,e.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:20},children:(0,e.jsxs)(B.Z,{direction:"horizontal",children:[U(),J(),Y(),w()]})}),(0,e.jsx)(R,{data:d})]})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(W.Z,{width:"90%",title:"\u81EA\u63D0\u5355",open:G,footer:!1,onCancel:function(){o()},onOk:function(){},children:(0,e.jsx)(T.Z,{spinning:O,children:q()})})})},S=n(23806),K=n(35291),y=function(s){var v=s.data,o=s.pagination,$=s.refresh,z=m.useState(!1),O=r()(z,2),g=O[0],H=O[1],N=(0,m.useState)(""),d=r()(N,2),V=d[0],G=d[1],X=[{title:"\u8BA2\u5355\u72B6\u6001",render:function(M,c){var U=(0,K.wk)(c.Order);return(0,e.jsx)(a.Z,{status:U?"success":"default",text:U?"\u53EF\u670D\u52A1":"\u7B49\u5F85\u8BA2\u5355\u72B6\u6001"})}},{title:"\u914D\u9001\u65F6\u95F4",render:function(M,c){return(0,e.jsx)("div",{children:(0,e.jsx)(F.Z,{start:c.PreferPickupStartTime,end:c.PreferPickupEndTime})})}},{title:"\u6821\u9A8C\u7801",render:function(M,c){return(0,e.jsx)(t.Z,{children:c.SecurityCode})}},{title:"\u72B6\u6001",render:function(M,c){return(0,e.jsx)(E,{data:c})}},{title:"\u65F6\u95F4",render:function(M,c){return(0,e.jsx)(S.Z,{model:c})}},{title:"\u64CD\u4F5C",render:function(M,c){return(0,e.jsx)(i.ZP.Group,{children:(0,e.jsx)(i.ZP,{type:"link",onClick:function(){G(c.Id||"")},children:"\u67E5\u770B"})})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Q,{detailId:V,hide:function(){G(""),$()}}),(0,e.jsx)(u.Z,{loading:g,dataSource:v,columns:X,rowKey:function(M){return M.Id||""},pagination:o})]})}}}]);
