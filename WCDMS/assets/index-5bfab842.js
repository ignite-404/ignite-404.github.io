import{A as U,d as j,W as V,a as v,D as y,j as le,v as ae,o as r,c as k,J as u,e as F,ab as te,ae as se,p as M,r as m,h as oe,t as P,Q as S,i as G,X as ne,b as ue,M as de,T as ie,$ as C,f as I,w as g,F as re,N as ce,af as pe,a1 as J,V as E,H,Y as K,a2 as ve,a3 as me,aj as ye}from"./index-a9e193d8.js";import{T as he}from"./index2-db67ae5b.js";const R=j({name:"LaySelectOption",__name:"index",props:{label:{default:""},value:{},disabled:{type:Boolean,default:!1},keyword:{default:""}},setup(T){const t=T,s=V("searchValue"),N=V("selectRef"),d=V("searchMethod"),c=V("selectedValue"),i=V("multiple"),_=v(),B=()=>{var n;i.value?t.disabled||(n=_.value)==null||n.toggle():t.disabled||(N.value.hide(),c.value=t.value)},w=y(()=>i.value?c.value.indexOf(t.value)!=-1:c.value===t.value),h=v(!0),f=y(()=>{var n,p;return d&&!h.value?d(s.value,t):(h.value=!1,((n=t.keyword)==null?void 0:n.toString().indexOf(s.value))>-1||((p=t.label)==null?void 0:p.toString().indexOf(s.value))>-1)}),$=y(()=>["layui-select-option",{"layui-this":w.value,"layui-disabled":t.disabled}]);return(n,p)=>le((r(),k("dd",{class:S($.value),onClick:B},[u(i)?(r(),F(se,{key:0,skin:"primary",ref_key:"checkboxRef",ref:_,modelValue:u(c),"onUpdate:modelValue":p[0]||(p[0]=z=>te(c)?c.value=z:null),disabled:n.disabled,value:n.value},null,8,["modelValue","disabled","value"])):M("",!0),m(n.$slots,"default",{},()=>[oe(P(n.label),1)])],2)),[[ae,f.value]])}}),ke=U(R),fe={class:"layui-select-option-group"},be={class:"layui-select-option-group-label"},X=j({name:"LaySelectOptionGroup",__name:"index",props:{label:{default:"Group Name"}},setup:T=>(t,s)=>(r(),k("div",fe,[G("dt",be,P(t.label),1),m(t.$slots,"default")]))});U(X);const ge={class:"layui-select-content"},we={key:0,class:"layui-select-content__header"},Ce={key:2,class:"layui-select-content__footer"},_e=U(j({name:"LaySelect",__name:"index",props:{name:{},disabled:{type:Boolean,default:!1},placeholder:{},searchPlaceholder:{},searchMethod:{},modelValue:{default:null},multiple:{type:Boolean,default:!1},options:{},autoFitWidth:{type:Boolean,default:!0},size:{},collapseTagsTooltip:{type:Boolean,default:!0},minCollapsedNum:{default:3},allowClear:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!1},contentClass:{},contentStyle:{type:[Boolean,null,String,Object,Array]}},emits:["update:modelValue","change","search","remove-tag","clear"],setup(T,{emit:t}){const s=T,{size:N}=function(e){return{size:y(()=>{const a=V("LayForm",{});return e.size||a.size||"md"})}}(s),d=ne(),c=v(),i=v(""),_=v(""),B=v([]),w=t,h=v(!1),f=v([]),$=v(!1);var n;const p=(e,a)=>{e==null||e.map(l=>{if(ye(l,l.children))p(l.children,a);else{if(l.type.name==R.name){if(l.children){const b=l.children.default()[0].children;typeof b=="string"&&(l.props.label=b)}a.push(l.props)}l.type.name==X.name&&l.children&&p(l.children.default(),a)}})},z=()=>{const e=[];d.default&&p(d.default(),e),Object.assign(e,s.options),JSON.stringify(e)!=JSON.stringify(f.value)&&(f.value=e)},Y=y(()=>s.options),q=e=>{Array.isArray(o.value)&&(o.value=o.value.filter(a=>a!==e),w("remove-tag",e))},Q=()=>{$.value=!0},Z=e=>{$.value=!1,A(e.target.value)};ue(()=>{z(),n=setInterval(z,500),de([o,f],()=>{var e,a;if(O.value)try{B.value=(e=o.value)==null?void 0:e.map(l=>{var b=f.value.find(x=>(x.disabled==""||x.disabled==1?x.closable=!1:x.closable=!0,x.value===l));return b==null&&(b={label:l,value:l,closable:!0}),b})}catch{throw new Error("v-model / model-value is not an array type")}else i.value="",_.value=(a=f.value.find(l=>l.value===o.value))==null?void 0:a.label},{immediate:!0,deep:!0})}),ie(()=>{clearInterval(n)});const o=y({get:()=>s.multiple&&s.modelValue==null?[]:s.modelValue,set(e){w("update:modelValue",e),w("change",e)}}),O=y(()=>s.multiple),A=e=>{$.value||(w("search",e),i.value=e)},L=()=>{O.value?o.value=[]:o.value="",w("clear")},ee=()=>{i.value="",h.value=!1},W=y(()=>Array.isArray(o.value)?o.value.length>0:o.value!==""&&o.value!==void 0&&o.value!==null),D=y(()=>W.value?"":s.placeholder);return C("selectRef",c),C("openState",h),C("selectedValue",o),C("searchValue",i),C("multiple",O),C("searchMethod",s.searchMethod),(e,a)=>(r(),k("div",{class:S(["layui-select",{"has-content":W.value,"has-clear":e.allowClear,"has-disabled":e.disabled}])},[I(me,{ref_key:"selectRef",ref:c,disabled:e.disabled,contentClass:e.contentClass,contentStyle:e.contentStyle,"update-at-scroll":!0,autoFitWidth:e.autoFitWidth,onHide:ee,onShow:a[4]||(a[4]=l=>h.value=!0)},{content:g(()=>[G("dl",ge,[u(d).header?(r(),k("div",we,[m(e.$slots,"header")])):M("",!0),f.value?(r(!0),k(re,{key:1},ce(Y.value,(l,b)=>(r(),F(R,pe(l,{key:b}),null,16))),128)):M("",!0),m(e.$slots,"default"),u(d).footer?(r(),k("div",Ce,[m(e.$slots,"footer")])):M("",!0)])]),default:g(()=>[O.value?(r(),F(he,{key:0,modelValue:B.value,"onUpdate:modelValue":a[0]||(a[0]=l=>B.value=l),"input-value":i.value,"onUpdate:inputValue":a[1]||(a[1]=l=>i.value=l),"allow-clear":e.allowClear,placeholder:D.value,collapseTagsTooltip:e.collapseTagsTooltip,minCollapsedNum:e.minCollapsedNum,disabled:e.disabled,disabledInput:!e.showSearch,size:u(N),class:S({"layui-unselect":!0}),style:{width:"100%"},onRemove:q,onClear:L,onInputValueChange:A,onKeyupCapture:a[2]||(a[2]=J(E(()=>{},["prevent","stop"]),["delete"])),onKeydownCapture:a[3]||(a[3]=J(E(()=>{},["prevent","stop"]),["enter"]))},H({suffix:g(()=>[I(u(K),{type:"layui-icon-triangle-d",class:S({triangle:h.value})},null,8,["class"])]),_:2},[u(d).prepend?{name:"prepend",fn:g(()=>[m(e.$slots,"prepend")]),key:"0"}:void 0,u(d).append?{name:"append",fn:g(()=>[m(e.$slots,"append")]),key:"1"}:void 0]),1032,["modelValue","input-value","allow-clear","placeholder","collapseTagsTooltip","minCollapsedNum","disabled","disabledInput","size"])):(r(),F(ve,{key:1,size:u(N),disabled:e.disabled,readonly:!e.showSearch,modelValue:_.value,"allow-clear":e.allowClear,placeholder:D.value,class:S({"layui-unselect":!e.showSearch}),onCompositionstart:Q,onCompositionend:Z,onInput:A,onClear:L},H({suffix:g(()=>[I(u(K),{type:"layui-icon-triangle-d",class:S({triangle:h.value})},null,8,["class"])]),_:2},[u(d).prepend?{name:"prepend",fn:g(()=>[m(e.$slots,"prepend")]),key:"0"}:void 0,u(d).append?{name:"append",fn:g(()=>[m(e.$slots,"append")]),key:"1"}:void 0]),1032,["size","disabled","readonly","modelValue","allow-clear","placeholder","class"]))]),_:3},8,["disabled","contentClass","contentStyle","autoFitWidth"])],2))}}));export{_e as B,ke as U};
