import{a as m,o as k,c as E,f as e,w as l,i as o,h as f,t as M,F as G,Z as x,l as U,k as h,q as K,m as P,n as O,K as j,C as A,e as S,p as J,E as B,_ as Q,u as X,x as ee,L as le}from"./index-5ba83812.js";import{c as te}from"./index-f7d389ff.js";import{y as oe,f as ae}from"./index-9c118bc9.js";import{Z as F}from"./index-a25747be.js";import{V as T}from"./index-70d2da72.js";/* empty css              */import{n as ne,Z as ie}from"./index-08f7b130.js";/* empty css              *//* empty css              *//* empty css              */import{_ as se}from"./meterReadSearch-f8ddaf2b.js";import{_ as de}from"./meterReaderSearch-bfcd678f.js";import{_ as re}from"./meterSearch-df095d40.js";import{U as H,B as W}from"./index-e1c7a2f1.js";import{w as ue}from"./index-2b452765.js";import"./index2-75365c6f.js";import"./index2-ab9f2a8e.js";const pe={class:"descriptions-flex"},me={style:{"padding-left":"10px"}},ce={__name:"readingInformation",setup(L){const a=m({field1:"",field2:"",field3:"",field4:"",field5:!1,field6:"",field7:"",field8:"",field9:"",field10:"",field11:"",field12:"",field13:""}),g=m(null),c=m(null),C=m(null),w=()=>{g.value.layerShow()},D=()=>{c.value.layerShow()},d=()=>{C.value.layerShow()},u=i=>{a.value.field1=i.field8,a.value.field3=i.field3,a.value.field5=i.field5},_=i=>{a.value.field8=i.field1},V=i=>{a.value.field2=i.field1,a.value.field11=i.field3,a.value.field12=i.field5},R=()=>{x.confirm("Outstanding Special Read Re-Read FA is found undepremise. Confirm to create?",{title:"Warning",icon:3,btn:[{text:"Yes",callback:()=>{x.closeAll()}},{text:"No",callback:()=>{x.closeAll()}}]})};return(i,t)=>{const v=U,y=h,r=K,n=ne,p=P,q=O,z=j,b=H,$=W,N=A,I=ie,Y=T,Z=ue;return k(),E(G,null,[e(Z,{model:a.value,size:"sm",ref:"layFormRef",required:"",isLabelTooltip:""},{default:l(()=>[e(Y,{title:"Reading Information"},{default:l(()=>[e(I,{border:!0,size:"sm",column:"2"},{default:l(()=>[e(n,{span:"2"},{label:l(()=>t[9]||(t[9]=[o("span",null,"Meter Read ID",-1)])),default:l(()=>[e(r,null,{default:l(()=>[e(y,{placeholder:"",disabled:"",allowClear:"",style:{width:"300px"},modelValue:a.value.field1,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.field1=s)},{append:l(({disabled:s})=>[o("span",{class:"point-cu",onClick:w},[e(v,{type:"layui-icon-search"})])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:2},{label:l(()=>t[10]||(t[10]=[o("span",null,[f("Meter Number "),o("em",{class:"require-xin"},"*")],-1)])),default:l(()=>[o("div",pe,[e(r,null,{default:l(()=>[e(y,{allowClear:"",placeholder:"",style:{width:"300px"},modelValue:a.value.field2,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.field2=s)},{append:l(({disabled:s})=>[o("span",{class:"point-cu",onClick:d},[e(v,{type:"layui-icon-search"})])]),_:1},8,["modelValue"])]),_:1}),o("span",me,[e(p,null,{default:l(()=>[f(M(a.value.field11)+";"+M(a.value.field12),1)]),_:1})])])]),_:1}),e(n,{span:2},{label:l(()=>t[11]||(t[11]=[o("span",null,[f("Reading Date/Time "),o("em",{class:"require-xin"},"*")],-1)])),default:l(()=>[e(r,null,{default:l(()=>[e(q,{type:"datetime",placeholder:"",style:{width:"300px"},modelValue:a.value.field3,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.field3=s),format:"YYYY/MM/DD hh:mm:ss",allowClear:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:"2"},{label:l(()=>t[12]||(t[12]=[o("span",null,[f("Premise ID"),o("em",{class:"require-xin"},"*")],-1)])),default:l(()=>[t[13]||(t[13]=o("div",{class:"descriptions-flex"},[o("span",{class:"key-color"},"4930975385"),o("span",{style:{"padding-left":"10px"}},"3889077216 / MELV15 / 10000000001 / ELV10000000001- Active - CM, Dial 4.4 / M25610/ 950 / 13")],-1))]),_:1}),e(n,null,{label:l(()=>t[14]||(t[14]=[o("span",null,"Billable",-1)])),default:l(()=>[e(r,null,{default:l(()=>[e(z,{name:"like",skin:"primary",disabled:"",modelValue:a.value.field5,"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.field5=s)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,null,{label:l(()=>t[15]||(t[15]=[o("span",null,"Meter Read Source *",-1)])),default:l(()=>[e(r,null,{default:l(()=>[e($,{allowClear:"",modelValue:a.value.field6,"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.field6=s)},{default:l(()=>[e(b,{value:"1",label:"WCDMS- Routine Meter Read"}),e(b,{value:"2",label:"WCDMS-FA"}),e(b,{value:"3",label:"Customer Read"}),e(b,{value:"4",label:"MSNUSL"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,null,{label:l(()=>t[16]||(t[16]=[o("span",null,[f("Meter Reading "),o("em",{class:"require-xin"},"*")],-1)])),default:l(()=>[e(r,null,{default:l(()=>[e(y,{allowClear:"",placeholder:"",disabled:"",modelValue:a.value.field7,"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.field7=s)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,null,{label:l(()=>t[17]||(t[17]=[o("span",null,"Field Worker ID",-1)])),default:l(()=>[e(r,null,{default:l(()=>[e(y,{allowClear:"",placeholder:"",modelValue:a.value.field8,"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.field8=s)},{append:l(({disabled:s})=>[o("span",{class:"point-cu",onClick:D},[e(v,{type:"layui-icon-search"})])]),_:1},8,["modelValue"])]),_:1}),t[18]||(t[18]=o("span",null,"TSE Chun Wai",-1))]),_:1}),e(n,null,{label:l(()=>t[19]||(t[19]=[o("span",null,[f("Read Type "),o("em",{class:"require-xin"},"*")],-1)])),default:l(()=>[e(r,null,{default:l(()=>[e($,{allowClear:"",modelValue:a.value.field9,"onUpdate:modelValue":t[7]||(t[7]=s=>a.value.field9=s)},{default:l(()=>[e(b,{value:"1",label:"20 - No Read"}),e(b,{value:"2",label:"50 - Customer Read"}),e(b,{value:"3",label:"60 - Regular"}),e(b,{value:"4",label:"70 - Verifed"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,null,{label:l(()=>t[20]||(t[20]=[o("span",null,"Create By",-1)])),default:l(()=>[e(r,null,{default:l(()=>[e(y,{allowClear:"",placeholder:"",modelValue:a.value.field10,"onUpdate:modelValue":t[8]||(t[8]=s=>a.value.field10=s)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,null,{label:l(()=>t[21]||(t[21]=[o("span",null,"Usage",-1)])),_:1}),e(n,null,{label:l(()=>t[22]||(t[22]=[o("span",null,"Previous Reading Content",-1)])),default:l(()=>[t[23]||(t[23]=o("span",{class:"key-color"},"60-Regualr, 2018/07/24 10:08:06,292.222",-1))]),_:1}),e(n,null,{label:l(()=>t[24]||(t[24]=[o("span",null,"MR Security Group",-1)])),default:l(()=>[t[25]||(t[25]=o("span",null,"MR",-1))]),_:1}),e(n,null,{label:l(()=>[e(N,{type:"primary",onClick:R},{default:l(()=>t[26]||(t[26]=[f(" Reread Meter ")])),_:1})]),default:l(()=>[t[27]||(t[27]=o("span",{class:"key-color"},"48293456",-1)),t[28]||(t[28]=f("Â SREADRRD;{meterno.};{premiseid};P "))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),e(se,{ref_key:"searchRef",ref:g,onSureData:u},null,512),e(de,{ref_key:"searchRef1",ref:c,onSureData:_},null,512),e(re,{ref_key:"searchRef2",ref:C,onSureData:V},null,512)],64)}}},fe={class:"circle-btn"},_e={key:1},ye={key:1},ve={__name:"readerRemark",setup(L){const a=m({total:0,limit:10,current:2,layout:["page","limits","prev","next","count"]}),g=[{title:"Create Date/Time",width:"140px",key:"name"},{title:"Meter Reader Remark",key:"description",customSlot:"description"},{title:"Automtion ID",key:"weight",width:"120px"},{title:"Processing Status",key:"remark",ellipsisTooltip:!0,customSlot:"remark"},{title:"Last Processing Date/Time",key:"processing",ellipsisTooltip:!0},{title:"Exception",key:"exception",ellipsisTooltip:!0},{title:"handles",width:"180px",key:"operate",customSlot:"operate",ellipsisTooltip:!0}],c=m([]),C=d=>{d.isEdit=!0},w=d=>{x.confirm("Are you sure to delete this data?",{title:"tips",icon:3,btn:[{text:"confirm",callback:()=>{c.value.forEach((u,_)=>{u.id===d.id&&(c.value.splice(_,1),a.value.total--)}),x.closeAll()}},{text:"cancel",callback:()=>{x.closeAll()}}]})},D=()=>{c.value.push({id:(c.value.length+1).toString(),name:"",description:"",weight:"",remark:"",isEdit:!0}),a.value.total++};return(d,u)=>{const _=U,V=B,R=P,i=H,t=W,v=A,y=F,r=T;return k(),S(r,{title:"Meter Reader Remark"},{extra:l(()=>[e(R,null,{default:l(()=>[e(V,{position:"top",content:"export","is-dark":""},{default:l(()=>[o("div",fe,[e(_,{type:"layui-icon-export"})])]),_:1}),e(V,{position:"top",content:"create","is-dark":""},{default:l(()=>[o("div",{onClick:D,class:"circle-btn"},[e(_,{type:"layui-icon-addition"})])]),_:1})]),_:1})]),default:l(()=>[e(y,{columns:g,"data-source":c.value,page:a.value},{description:l(({data:n})=>[n.isEdit?(k(),S(t,{key:0,modelValue:n.description,"onUpdate:modelValue":p=>n.description=p,size:"sm","show-search":!0,"allow-clear":!0},{default:l(()=>[e(i,{value:"CL-Water leaking from stop-cock",label:"CL-Water leaking from stop-cock"}),e(i,{value:"DH-Premises demolished",label:"DH-Premises demolished"}),e(i,{value:"ER-Error reading of previous reading found",label:"ER-Error reading of previous reading found"}),e(i,{value:"F-Meter location flooded",label:"F-Meter location flooded"}),e(i,{value:"FW-Meter facing wall",label:"FW-Meter facing wall"})]),_:2},1032,["modelValue","onUpdate:modelValue"])):(k(),E("span",_e,M(n.description),1))]),remark:l(({data:n})=>[n.isEdit?(k(),S(t,{key:0,modelValue:n.remark,"onUpdate:modelValue":p=>n.remark=p,size:"sm","show-search":!0,"allow-clear":!0},{default:l(()=>[e(i,{value:"PD-Pending",label:"PD-Pending"}),e(i,{value:"ER-Completed with Error",label:"ER-Completed with Error"}),e(i,{value:"CU-Cancelled By User",label:"CU-Cancelled By User"}),e(i,{value:"CP-Completed",label:"CP-Completed"})]),_:2},1032,["modelValue","onUpdate:modelValue"])):(k(),E("span",ye,M(n.remark),1))]),operate:l(({data:n})=>[n.isEdit?J("",!0):(k(),S(v,{key:0,type:"primary",size:"xs",onClick:p=>C(n)},{default:l(()=>u[0]||(u[0]=[f(" Edit ")])),_:2},1032,["onClick"])),e(v,{type:"danger",size:"xs",onClick:p=>w(n)},{default:l(()=>u[1]||(u[1]=[f(" Delete ")])),_:2},1032,["onClick"])]),_:1},8,["data-source","page"])]),_:1})}}};const be={class:"top-use-box"},ke={class:"top-use-fun"},ge=["innerHTML"],Ce={__name:"meterRead",setup(L){X(),m("");const a=m("1");m({});const g=m({total:1,limit:10,current:2,layout:["page","limits","prev","next","count"]}),c=[{title:"Create Date/Time",width:"200px",key:"name"},{title:"Calculation Log",key:"description",customSlot:"description"}],C=[{name:"2024-8-20",description:"<p>ADC:0.468(Preceding period)</p><p>Period: yyyy/mm/dd - yyyy/mm/dd</p><p>Previous meter reading: 1113.0500, Reading date time:2023/09/24 00:00:00</p><p>High factor: 1:00</p><p>High factor: 1:00</p>"}],w=m(["export"]);return(D,d)=>{const u=B,_=U,V=P,R=T,i=ee,t=F,v=oe,y=ae,r=le,n=te;return k(),S(n,{fluid:!0,class:"common-container"},{default:l(()=>[e(R,{class:"top-use-card"},{default:l(()=>[o("div",be,[d[2]||(d[2]=o("h1",{class:"top-use-title"},"Meter Read",-1)),o("div",ke,[e(V,{size:"md"},{default:l(()=>[e(u,{position:"top",content:"save","is-dark":""},{default:l(()=>d[1]||(d[1]=[o("span",{class:"iconfont icon-baocun"},null,-1)])),_:1}),e(u,{position:"top",content:"refresh","is-dark":""},{default:l(()=>[o("span",null,[e(_,{type:"layui-icon-refresh"})])]),_:1}),e(u,{position:"top",content:"create","is-dark":""},{default:l(()=>[o("span",null,[e(_,{type:"layui-icon-addition"})])]),_:1})]),_:1})])])]),_:1}),e(r,{type:"card",modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=p=>a.value=p)},{default:l(()=>[e(i,{title:"General",id:"1"},{default:l(()=>[e(ce),e(ve)]),_:1}),e(i,{title:"High/Low Calculation Log",id:"2"},{default:l(()=>[e(y,null,{default:l(()=>[e(v,{md:24},{default:l(()=>[e(R,null,{default:l(()=>[e(t,{page:g.value,columns:c,dataSource:C,"default-toolbar":w.value,resize:"",onChange:D.change},{description:l(({data:p})=>[o("div",{innerHTML:p.description},null,8,ge)]),_:1},8,["page","default-toolbar","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},We=Q(Ce,[["__scopeId","data-v-ed00e3b8"]]);export{We as default};
