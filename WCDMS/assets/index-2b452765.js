import{A as b,d as B,b as E,T as P,Y as x,z as A,ap as F,o as k,c as q,r as z,P as C}from"./index-5ba83812.js";const M=b(B({name:"LayForm",__name:"index",props:{model:{default:function(){return{}}},required:{type:Boolean},rules:{},size:{},mode:{},pane:{type:Boolean,default:!1},initValidate:{type:Boolean,default:!1},useCN:{type:Boolean,default:!0},labelPosition:{default:"right"},labelWidth:{},inlineWidth:{},requiredIcons:{default:""},requiredErrorMessage:{},validateMessage:{},isLabelTooltip:{type:Boolean,default:!1},tooltipProps:{}},emits:["submit"],setup(m,{expose:h,emit:y}){const o=m,n=[],r={},v=y;E(()=>{var t;o.initValidate&&((t=c())==null||t.catch(e=>{}))});const g=function(t){t.preventDefault();let e=!1;return c((a,l,s)=>{e=a,v("submit",a,l,s)}),e},c=function(t,e){let a=n;typeof t=="function"?e=t:(typeof t=="string"||Array.isArray(t)&&t.length>0)&&(a=[],(t?[].concat(t):[]).forEach(i=>r[i]&&a.push(r[i])));let l=[];a.forEach(i=>{i.validate((d,u)=>{l=l.concat(d)})});const s=l.length===0;return typeof e=="function"?(s?e(!0,o.model,null):e(!1,o.model,l),null):new Promise((i,d)=>{const u={isValidate:s,model:o.model,errors:s?null:l};u.isValidate?i(u):d(u)})},p=function(t){const e=t?[].concat(t):[];e.length===0?n.forEach(a=>a.clearValidate()):e.forEach(a=>r[a]&&r[a].clearValidate())};function f(t,e){const a=t.replace(/\[(\d+)\]/g,".$1").split("."),l=a.shift();if(l!==void 0)return e==null||typeof e!="object"?null:a.length===0?(e[l]instanceof Array?e[l]=[]:e[l]=null,e):(e[l]=f(a.join("."),e[l]),e)}const V=t=>{for(var e=0;e<n.length;e++)n[e].prop!=null&&f(n[e].prop,t)};return h({validate:c,clearValidate:p,reset:function(){V(o.model),P(()=>p())}}),x("LayForm",A({formItems:n,addField:function(t){n.push(t),r[t.prop]=t},removeField:function(t){for(var e=0;e<n.length;e++)n[e].prop==t.prop&&n.splice(e,1);t.prop!=null&&Reflect.deleteProperty(r,t.prop)},clearValidate:p,validate:c,...F(o)})),(t,e)=>(k(),q("form",{class:C(["layui-form",{"layui-form-pane":t.pane}]),onsubmit:g},[z(t.$slots,"default")],2))}}));export{M as w};
