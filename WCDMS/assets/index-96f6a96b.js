import{A as _,d as j,a as c,au as A,I as s,M as D,an as I,U as u,o as d,c as m,i as O,Q as T,P as E,f as F,N as G,Y as J,p as v,t as K}from"./index-0f1dbffa.js";const L={class:"layui-textarea-wrapper"},M=["rows","cols","value","placeholder","name","disabled","maxlength"],P={key:0,class:"layui-textarea-clear"},Q={key:1,class:"layui-texterea-count"},U=_(j({name:"LayTextarea",__name:"index",props:{modelValue:{},name:{},placeholder:{},disabled:{type:Boolean},showCount:{type:Boolean},allowClear:{type:Boolean},cols:{},rows:{},maxlength:{},autosize:{type:[Boolean,Object]}},emits:["blur","input","update:modelValue","change","focus","clear"],setup(h,{expose:x,emit:g}){const a=h,t=g,o=c(null),r=c(!1),y=A(),i=c("auto"),f=s(()=>({width:a.cols?"":"100%",height:a.rows?"":i.value,minHeight:a.rows?"":"100px"})),w=s(()=>Object.assign(f.value,y.style)),p=function(e){const l=e.target;r.value||(t("update:modelValue",l.value),u(()=>{t("input",l.value)}))},b=function(e){t("focus",e)},C=function(e){t("blur",e)},V=e=>{const l=e.target;t("change",l.value)},B=function(){t("update:modelValue",""),t("clear")},k=()=>{r.value=!0},z=e=>{r.value=!1,p(e)},H=s(()=>{var e;return((e=a.modelValue)==null?void 0:e.length)>0}),N=s(()=>{var e;let l=String(((e=a.modelValue)==null?void 0:e.length)??0);return a.maxlength&&(l+="/"+a.maxlength),l});return D([()=>a.modelValue,o],()=>{var e;if(!o.value||!a.autosize)return;const l=((e=o.value)==null?void 0:e.scrollHeight)+2;if(I(a.autosize)){const{minHeight:n,maxHeight:S}=a.autosize;if(l<n||l>S)return}i.value="1px",u(()=>{var n;i.value=`${((n=o.value)==null?void 0:n.scrollHeight)+2}px`})},{immediate:!0}),x({focus:()=>{u(()=>{var e;(e=o.value)==null||e.focus()})},blur:()=>{u(()=>{var e;(e=o.value)==null||e.blur()})}}),(e,l)=>(d(),m("div",L,[O("textarea",{ref_key:"textareaRef",ref:o,class:T(["layui-textarea",{"layui-textarea-disabled":e.disabled}]),rows:e.rows,cols:e.cols,value:e.modelValue,placeholder:e.placeholder,name:e.name,disabled:e.disabled,maxlength:e.maxlength,style:E(w.value),onCompositionstart:k,onCompositionend:z,onInput:p,onFocus:b,onChange:V,onBlur:C},null,46,M),e.allowClear&&H.value?(d(),m("span",P,[F(G(J),{type:"layui-icon-close-fill",onClick:B})])):v("",!0),e.showCount?(d(),m("div",Q,K(N.value),1)):v("",!0)]))}}));export{U as W};
