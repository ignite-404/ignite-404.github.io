import{d as oe,a as h,E as Le,b as he,U as pe,T as Ve,o as m,c as I,i as J,r as ee,P as te,V as re,Q as F,A as ye,I as j,M as Z,W as fe,X as me,N as L,F as q,O as ne,f as Q,w as D,p as ue,e as $,h as Ce,t as ge,Y as ie,$ as Ee,a0 as xe,j as ce,J as Ie,v as ve,a1 as ze,a2 as Be,a3 as Me}from"./index-0f1dbffa.js";import{T as Te}from"./index2-84f017df.js";import{L as Ae,g as ke}from"./index2-f5b11353.js";import{n as Ue}from"./index2-ca631989.js";const He={class:"layui-scroll-y"},de=oe({name:"LayScroll",__name:"index",props:{height:{default:"100%"},trackColor:{default:"rgba(0,0,0,0)"},thumbColor:{default:"#eeeeee"},thumbWidth:{default:6}},emits:["arrive"],setup(s,{emit:_}){const Y=_,V=h(),k=h(),t=Le({translateY:0,heightPre:0,barHeight:0,winWidth:document.body.clientWidth});let A,f=!1,b=0,y=0,O=0,U=0;he(()=>{w(),S(),pe(()=>{z()})}),Ve(()=>{window.clearInterval(A)});const w=function(){let i;window.addEventListener("resize",()=>{t.winWidth=document.body.clientWidth,clearTimeout(i),i=setTimeout(()=>{g()},500)})},S=function(){new(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)(i=>{g()}).observe(V.value,{attributes:!0,childList:!0,subtree:!0})},z=function(){A=setInterval(()=>{g()},50),setTimeout(()=>{window.clearInterval(A)},2e3)},g=function(){let i=V.value,E=k.value;i&&E&&(U=i.scrollHeight,O=i.clientHeight,y=E.clientHeight,t.heightPre=O/U,t.barHeight=t.heightPre*y)},r=i=>{t.translateY=i.target.scrollTop*t.heightPre,t.translateY==0?M("top"):i.target.scrollTop+i.target.offsetHeight==i.target.scrollHeight&&M("bottom")},M=i=>{Y("arrive",i)},C=i=>{f=!0,b=i.clientY-t.translateY,P(),W()},P=()=>{document.onmousemove=i=>{f&&(i.clientY-b>y-t.barHeight?t.translateY=y-t.barHeight:i.clientY-b<0?t.translateY=0:t.translateY=i.clientY-b,V.value&&(V.value.scrollTop=t.translateY/t.heightPre))}},W=function(){document.onmouseup=i=>{f&&(f=!1)}};return(i,E)=>(m(),I("div",{class:F(["layui-scroll",{hide:t.winWidth<500}]),style:te({height:i.height})},[J("div",He,[J("div",{ref_key:"scrollRef",ref:V,class:"layui-scroll-wrap",onScroll:r},[ee(i.$slots,"default")],544),J("div",{ref_key:"barRef",ref:k,class:"layui-scroll-track",style:te({backgroundColor:t.heightPre==1?"transparent":i.trackColor})},[J("div",{style:te({height:t.barHeight+"px",width:i.thumbWidth+"px",transform:"translateY("+t.translateY+"px)",backgroundColor:t.heightPre==1?"transparent":i.thumbColor}),class:"layui-scroll-thumb",onMousedown:re(C,["stop","prevent"])},null,36)],4)])],6))}});ye(de);function be(s){var _,Y,V,k;const t=h([]),A=h(s.onlyLastLevel),f=h(s.multiple),b=h(s.decollator),y=h(new Map),O=h(s.alwaysLazy),U=h((_=s.style)==null?void 0:_.loadingTheme),w=h(s.checkStrictly),S=h(s.changeOnSelect),z=h([]),g=h(s.modelValue??[]),r=h(typeof g.value=="string"?g.value.split(b.value??"/"):Array.isArray(g.value)?[...g.value]:[]),M=h({label:((Y=s.replaceFields)==null?void 0:Y.label)??"label",value:((V=s.replaceFields)==null?void 0:V.value)??"value",children:((k=s.replaceFields)==null?void 0:k.children)??"children"}),C=(e,u)=>e.map(l=>{const a={label:l[M.value.label],value:l[M.value.value],loading:!1,slot:l.slot,indeterminate:!1,checked:!1,selected:!1,disabled:l.disabled,children:void 0,orig:void 0,parent:u};return a.children=l[M.value.children]?C(l[M.value.children],a):void 0,a.orig=l,a});t.value=C(s.options??[],void 0);const P=j(()=>{const e=f.value?[...y.value.values()].map(a=>i.value.find(o=>o.value===a.value)):r.value.map(a=>i.value.find(o=>o.value===a)),u=a=>{if(!a)return[];let o=[];return o=a.parent?[...u(a.parent),a.label]:[a.label],o},l=e.map(a=>s.fullpath&&f.value?u(a).join(s.decollator):(a==null?void 0:a.label)??"");return f.value?l:A.value?(l==null?void 0:l.pop())??"":l.join(` ${s.decollator} `)}),W=j(()=>(e=>{const u=[];u.push(e);let l=e;return z.value.forEach(a=>{var o;l=l instanceof Array?l.find(p=>p.value===a):(o=l==null?void 0:l.children)==null?void 0:o.find(p=>p.value===a),u.push((l==null?void 0:l.children)??[])}),u.filter(a=>a.length)})(t.value).filter((e,u)=>u<=z.value.length)),i=j(()=>{const e=[],u=l=>{l.forEach(a=>{var o;e.push(a),(o=a.children)!=null&&o.length&&u(a.children)})};return u(t.value),e});Z(()=>s.options,()=>{t.value=C(s.options??[],void 0)}),Z(()=>s.checkStrictly,e=>w.value=e??!1),Z(()=>f.value,()=>{const e=y.value.values();let u=e.next();do{if(u.done)break;u.value.checked=!1,u=e.next()}while(!u.done);y.value.clear()});const E=()=>{w.value||(i.value.filter(e=>{var u;return!((u=e.children)!=null&&u.length)}).forEach(e=>{var u,l;e.parent&&(e.parent.checked=((u=e.parent.children)==null?void 0:u.every(a=>a.checked))||!1,e.parent.checked||(e.parent.indeterminate=((l=e.parent.children)==null?void 0:l.some(a=>a.checked))||!1))}),i.value.filter(e=>e.parent).forEach(e=>{var u,l;e.parent.checked=((u=e.parent.children)==null?void 0:u.every(a=>a.checked))||!1,e.parent.checked||(e.parent.indeterminate=((l=e.parent.children)==null?void 0:l.some(a=>a.checked||a.indeterminate))||!1)}),i.value.filter(e=>{var u;return!e.parent&&((u=e.children)==null?void 0:u.length)}).forEach(e=>{var u,l;e.checked=((u=e.children)==null?void 0:u.every(a=>a.checked))||!1,e.checked||(e.indeterminate=((l=e.children)==null?void 0:l.some(a=>a.indeterminate||a.checked))||!1)}))};Z(()=>g.value,(e,u)=>{if(f.value){if(e instanceof Array){const[l,a]=R(e,u);l.forEach(o=>{const p=i.value.find(c=>c.value===o);p&&(p.checked=!0,y.value.set(o,p))}),a.forEach(o=>{const p=i.value.find(c=>c.value===o);p&&(p.checked=!1,y.value.delete(o))})}E()}else r.value=e instanceof Array?e:e.split(b.value??""),r.value.length&&(z.value=r.value)});const R=(e=[],u=[])=>[e.filter(l=>!u.includes(l))||[],u.filter(l=>!e.includes(l))||[]];return{dataSource:W,sanitizer:C,onlyLastLevel:A,multiple:f,checkStrictly:w,decollator:b,multipleSelectItem:y,alwaysLazy:O,loadingTheme:U,selectKeys:r,showKeys:z,selectLabel:P,iterCollector:e=>{const u=[];let l=e.next();do{if(l.done)break;u.push(l.value),l=e.next()}while(!l.done);return u},flatData:i,changeOnSelect:S,buildMultipleStatus:E,modelValue:g,setup:()=>{var e;if((e=g.value)!=null&&e.length)if(f.value){let u=g.value;typeof u=="string"&&(u=u.split(b.value??"")),f.value&&u.forEach(l=>{const a=i.value.find(o=>o.value===l);a&&(a.checked=!0,y.value.set(l,a))}),E()}else{if(r.value=g.value instanceof Array?g.value:g.value.split(b.value??""),w.value){const u=i.value.find(l=>l.value===r.value.at(r.value.length-1));u&&(u.selected=!0)}r.value.length&&(z.value=r.value)}else r.value=[]}}}var N=(s=>(s[s.CHANGE=0]="CHANGE",s[s.MULTIPLE=1]="MULTIPLE",s[s.SINGLE=2]="SINGLE",s))(N||{});const we=Symbol("LayCascader"),Ne={key:0,class:"layui-cascader-panel-container"},Ye=["onClick","title"],Ke={class:"layui-cascader-panel-selection"},Oe=oe({name:"LayCascaderPanel",__name:"index",props:{options:{default:()=>[]},modelValue:{default:()=>[]},decollator:{default:()=>"/"},replaceFields:{default:()=>({label:"label",value:"value",children:"children"})},style:{default:()=>({stripe:!1,loadingTheme:""})},multiple:{type:Boolean,default:!1},onlyLastLevel:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},load:{type:Function,default:void 0},alwaysLazy:{type:Boolean,default:!1},value:{},height:{default:"200px"},checkStrictly:{type:Boolean,default:!1},changeOnSelect:{type:Boolean,default:!1},fullpath:{type:Boolean,default:!0}},emits:["update:modelValue","update:multipleSelectItem","change"],setup(s,{emit:_}){var Y;const V=_,k=s,{dataSource:t,sanitizer:A,multiple:f,checkStrictly:b,multipleSelectItem:y,alwaysLazy:O,loadingTheme:U,selectKeys:w,showKeys:S,flatData:z,changeOnSelect:g,buildMultipleStatus:r,modelValue:M,setup:C}=(fe(we)||null)??be(k);he(()=>C());const P=me(),W=h((Y=k.style)==null?void 0:Y.stripe),i=j(()=>typeof k.height=="number"?`${k.height}px`:k.height??"200px"),E=l=>{switch(l){case N.CHANGE:V("change",S.value);break;case N.SINGLE:V("update:modelValue",w.value);break;case N.MULTIPLE:r(),V("update:multipleSelectItem",y.value),V("update:modelValue",Array.from(y.value.keys()))}},R=l=>{var a;f.value&&(!((a=l.children)!=null&&a.length)||b.value?l.checked?y.value.set(l.value,l):y.value.delete(l.value):l.children.forEach(o=>{o.checked=l.checked,R(o)}))},e=(l,a)=>{var o;u(l,a),g.value&&E(N.CHANGE),k.lazy&&k.load?(p=>{var c,X;!O.value&&(c=p.children)!=null&&c.length||(p.loading=!0,(X=k.load)==null||X.call(k,p,T=>{var H;p.children=[],T||(T=[]),p.children=A(T,p),p.orig.children=T,p.loading=!1,(H=p.children)!=null&&H.length?M.value instanceof Array&&M.value.forEach(n=>{const d=z.value.find(v=>v.value===n);d?(d.checked=!0,y.value.set(n,d)):y.value.delete(n)}):(w.value=S.value,E(f.value?N.MULTIPLE:N.SINGLE))}))})(l):(o=l.children)!=null&&o.length&&!b.value||(w.value=S.value,E(f.value?N.MULTIPLE:N.SINGLE))},u=(l,a)=>{if(l.disabled)return;let o=S.value;for(a<o.length&&(o=o.filter((p,c)=>c<=a));o.length<=a;)o.push(f.value?l.value:"");S.value=o,S.value[a]=l.value};return(l,a)=>(m(),I("div",{class:"layui-cascader-panel",style:te({height:i.value,minHeight:i.value})},[L(t)&&L(t).length?(m(),I("div",Ne,[(m(!0),I(q,null,ne(L(t),(o,p)=>(m(),I("ul",{class:F(["layui-cascader-panel-list",[{"layui-cascader-panel-list-striped":W.value}]]),key:p},[Q(de,null,{default:D(()=>[(m(!0),I(q,null,ne(o,(c,X)=>(m(),I("li",{class:F(["layui-cascader-panel-item",[{"layui-cascader-panel-item-active":c.value===L(S).at(p),"layui-cascader-panel-item-disabled":c.disabled}]]),key:X,onClick:re(T=>e(c,p),["stop"]),title:c.label},[ee(l.$slots,"default",{},()=>[J("div",Ke,[L(b)||L(f)?(m(),I(q,{key:0},[L(f)?c.loading?ue("",!0):(m(),$(Ue,{key:1,size:"md",skin:"primary",modelValue:c.checked,"onUpdate:modelValue":[T=>c.checked=T,T=>(H=>{R(H),E(N.MULTIPLE)})(c)],value:c.checked?1:0,isIndeterminate:c.indeterminate},null,8,["modelValue","onUpdate:modelValue","value","isIndeterminate"])):(m(),$(Ae,{key:0,value:!c.selected,"onUpdate:modelValue":T=>((H,n)=>{t.value.forEach(d=>d.forEach(v=>v.selected=!1)),H.selected=!H.selected,e(H,n),E(N.CHANGE)})(c,p)},null,8,["value","onUpdate:modelValue"]))],64)):ue("",!0),c.slot&&L(P)[c.slot]?ee(l.$slots,c.slot,{key:1}):(m(),I(q,{key:2},[Ce(ge(c.label),1)],64))]),c.loading?(m(),$(L(ie),{key:0,class:F(["layui-cascader-panel-item-icon","layui-anim","layui-anim-rotate","layui-anim-loop"]),type:"layui-icon-loading",theme:L(U)},null,8,["theme"])):c.children&&c.children.length?(m(),$(L(ie),{key:1,class:"layui-cascader-panel-item-icon",type:"layui-icon-right"})):ue("",!0)])],10,Ye))),128))]),_:2},1024)],2))),128))])):(m(),$(ke,{key:1}))],4))}}),Pe=["size"],_e={key:0,class:"slot-area"},$e={key:1},Fe=["onClick"],Re=ye(oe({name:"LayCascader",__name:"index",props:{options:{default:void 0},modelValue:{default:""},decollator:{default:"/"},placeholder:{default:""},onlyLastLevel:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},replaceFields:{default:()=>({label:"label",value:"value",children:"children"})},allowClear:{type:Boolean,default:!1},size:{},trigger:{default:()=>["click"]},contentClass:{},contentStyle:{type:[Boolean,null,String,Object,Array]},changeOnSelect:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},load:{type:Function,default:void 0},checkStrictly:{type:Boolean,default:!1},fullpath:{type:Boolean,default:!0},search:{type:Boolean},searchMethod:{}},emits:["update:modelValue","change","clear"],setup(s,{emit:_}){var Y,V,k;const t=s,A=be(t);Ee(we,A);const f=j(()=>C.value?xe(t.modelValue):!!t.modelValue),{size:b}=function(n){return{size:j(()=>{const d=fe("LayForm",{});return n.size||d.size||"md"})}}(t),y=_,O=me(),U=h(),w=h(!1),S=h(!1),z=h(""),g=h([]),r=j(()=>A),M=h(t.options),C=h(t.multiple),P=h(t.decollator),W=h(t.onlyLastLevel),i=h(t.disabled),E=h(t.checkStrictly),R=h({label:((Y=t.replaceFields)==null?void 0:Y.label)??"label",value:((V=t.replaceFields)==null?void 0:V.value)??"value",children:((k=t.replaceFields)==null?void 0:k.children)??"children"}),e=h(r.value.selectKeys.value),u=j({get:()=>r.value.selectLabel.value,set:n=>{}}),l=h(t.changeOnSelect),a=()=>{r.value.multipleSelectItem.value.forEach(n=>n.checked=n.indeterminate=!1),r.value.buildMultipleStatus(),r.value.multipleSelectItem.value.clear(),r.value.selectKeys.value=[],e.value=[],y("update:modelValue",C.value?[]:void 0),y("clear")},o=(n,d)=>{var v;let B=n.split(P.value);const se=B.shift();let x=r.value.flatData.value.find(K=>K.label===se);for(;x&&B.length;){const K=B.shift();x=(v=x.children)==null?void 0:v.find(le=>le.label===K)}x!==void 0&&r.value.selectKeys.value.splice(r.value.selectKeys.value.findIndex(K=>K===x.value),1),x.checked=x.indeterminate=!1,r.value.multipleSelectItem.value.delete(x.value),r.value.buildMultipleStatus(),e.value=[...e.value.filter(K=>K!==x.value)],y("update:modelValue",e.value),U.value.hide()},p=n=>{r.value.selectKeys.value=typeof n=="string"?n.split(t.decollator):n,C.value||U.value.hide();let d=typeof t.modelValue=="string"?typeof n=="string"?n:n.join(t.decollator):n;y("update:modelValue",d)},c=n=>{y("update:modelValue",Array.from(n.keys()))},X=n=>{y("update:modelValue",n)},T=(n,d=!1)=>{let v=n,B=[];for(;v;)B.push(d?v.value:v.label),v=v.parent;return d?B.reverse():B.reverse().join(P.value)},H=n=>{var d;S.value=n.length>0,S.value&&(U.value.show(),g.value=(d=n,t.search&&t.searchMethod&&r.value.sanitizer(t.searchMethod(d),void 0)||r.value.flatData.value.filter(v=>v.label.includes(d))))};return Z(()=>w.value,n=>{n||(!C.value&&t.search&&(r.value.selectKeys.value=[],pe(()=>{r.value.selectKeys.value=r.value.showKeys.value=e.value})),S.value=!1,z.value="")}),Z(()=>t.modelValue,()=>{r.value.modelValue.value=t.modelValue}),(n,d)=>(m(),I("div",{size:L(b),class:F([{"layui-cascader-opend":w.value,"layui-cascader-disabled":n.disabled,"layui-cascader":!0,"layui-cascader-multiple":n.multiple,"has-content":f.value,"has-clear":n.allowClear}])},[Q(Me,{ref_key:"dropdownRef",ref:U,trigger:n.trigger,autoFitMinWidth:!1,updateAtScroll:!0,disabled:n.disabled,contentClass:n.contentClass,contentStyle:n.contentStyle,onShow:d[5]||(d[5]=v=>w.value=!0),onHide:d[6]||(d[6]=v=>w.value=!1)},{content:D(()=>[ce(Q(Oe,{modelValue:e.value,"onUpdate:modelValue":[d[4]||(d[4]=v=>e.value=v),p],options:M.value,"replace-fields":R.value,multiple:C.value,decollator:P.value,"only-last-level":W.value,disabled:i.value,"check-strictly":E.value,lazy:t.lazy,load:t.load,changeOnSelect:l.value,fullpath:t.fullpath,onChange:X,"onUpdate:multipleSelectItem":c},Ie({_:2},[ne(L(O),(v,B)=>({name:B,fn:D(()=>[B!="default"?ee(n.$slots,B,{key:0}):ue("",!0)])}))]),1032,["modelValue","options","replace-fields","multiple","decollator","only-last-level","disabled","check-strictly","lazy","load","changeOnSelect","fullpath"]),[[ve,!S.value]]),ce(J("div",null,[Q(de,{height:"200px",class:"layui-cascader-search-result-list"},{default:D(()=>[g.value.length>0?(m(!0),I(q,{key:0},ne(g.value,(v,B)=>(m(),I("div",{class:F(["layui-cascader-search-result-item",{"layui-cascader-search-result-item-active":n.multiple?e.value.includes(v.value):e.value.at(e.value.length-1)==v.value}]),key:B,onClick:se=>(x=>{if(C.value)if(E.value)e.value.includes(x.value)?e.value.splice(e.value.indexOf(x.value),1):e.value.push(x.value);else{const K=[],le=G=>{var ae;(ae=G.children)!=null&&ae.length?G.children.forEach(Se=>le(Se)):K.push(G)};le(x),K.forEach(G=>{e.value.includes(G.value)?e.value=[...e.value.filter(ae=>ae!==G.value)]:e.value=[...e.value,G.value]})}else e.value=T(x,!0);y("update:modelValue",e.value)})(v)},ge(T(v)),11,Fe))),128)):(m(),$(ke,{key:1,class:"layui-cascader-empty"}))]),_:1})],512),[[ve,S.value]])]),default:D(()=>[L(O).default?(m(),I("div",_e,[ee(n.$slots,"default")])):(m(),I("div",$e,[C.value?(m(),$(Te,{key:1,modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=v=>u.value=v),"input-value":z.value,"onUpdate:inputValue":[d[2]||(d[2]=v=>z.value=v),H],placeholder:n.placeholder,"allow-clear":n.allowClear,disabled:n.disabled,readonly:!n.search,onClear:a,onRemove:o,onKeyupCapture:d[3]||(d[3]=ze(re(()=>{},["prevent","stop"]),["delete"]))},{suffix:D(()=>[Q(L(ie),{class:F({"is-expand":w.value}),type:"layui-icon-triangle-d"},null,8,["class"])]),_:1},8,["modelValue","input-value","placeholder","allow-clear","disabled","readonly"])):(m(),$(Be,{key:0,modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=v=>u.value=v),"suffix-icon":"layui-icon-triangle-d",placeholder:n.placeholder,title:u.value,"allow-clear":n.allowClear,disabled:n.disabled,readonly:!n.search,size:L(b),onClear:a,onInput:H},{suffix:D(()=>[Q(L(ie),{class:F({"is-expand":w.value}),type:"layui-icon-triangle-d"},null,8,["class"])]),_:1},8,["modelValue","placeholder","title","allow-clear","disabled","readonly","size"]))]))]),_:3},8,["trigger","disabled","contentClass","contentStyle"])],10,Pe))}}));export{Re as l};
