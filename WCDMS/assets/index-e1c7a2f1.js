import{A as R,d as L,V as S,a as v,D as y,j as le,v as ae,o as r,c as k,I as u,e as F,a7 as te,ad as se,p as I,r as m,h as oe,t as K,P as V,i as G,W as ne,b as ue,J as de,S as ie,Y as C,f as A,w as g,F as re,M as ce,ae as pe,a0 as J,U as P,H as E,X as H,a1 as ve,a2 as me,ai as ye}from"./index-5ba83812.js";import{T as he}from"./index2-ab9f2a8e.js";const U=L({name:"LaySelectOption",__name:"index",props:{label:{default:""},value:{},disabled:{type:Boolean,default:!1},keyword:{default:""}},setup(T){const t=T,s=S("searchValue"),N=S("selectRef"),d=S("searchMethod"),c=S("selectedValue"),i=S("multiple"),_=v(),B=()=>{var n;i.value?t.disabled||(n=_.value)==null||n.toggle():t.disabled||(N.value.hide(),c.value=t.value)},w=y(()=>i.value?c.value.indexOf(t.value)!=-1:c.value===t.value),h=v(!0),f=y(()=>{var n,p;return d&&!h.value?d(s.value,t):(h.value=!1,((n=t.keyword)==null?void 0:n.toString().indexOf(s.value))>-1||((p=t.label)==null?void 0:p.toString().indexOf(s.value))>-1)}),x=y(()=>["layui-select-option",{"layui-this":w.value,"layui-disabled":t.disabled}]);return(n,p)=>le((r(),k("dd",{class:V(x.value),onClick:B},[u(i)?(r(),F(se,{key:0,skin:"primary",ref_key:"checkboxRef",ref:_,modelValue:u(c),"onUpdate:modelValue":p[0]||(p[0]=z=>te(c)?c.value=z:null),disabled:n.disabled,value:n.value},null,8,["modelValue","disabled","value"])):I("",!0),m(n.$slots,"default",{},()=>[oe(K(n.label),1)])],2)),[[ae,f.value]])}}),ke=R(U),fe={class:"layui-select-option-group"},be={class:"layui-select-option-group-label"},X=L({name:"LaySelectOptionGroup",__name:"index",props:{label:{default:"Group Name"}},setup:T=>(t,s)=>(r(),k("div",fe,[G("dt",be,K(t.label),1),m(t.$slots,"default")]))});R(X);const ge={class:"layui-select-content"},we={key:0,class:"layui-select-content__header"},Ce={key:2,class:"layui-select-content__footer"},_e=R(L({name:"LaySelect",__name:"index",props:{name:{},disabled:{type:Boolean,default:!1},placeholder:{},searchPlaceholder:{},searchMethod:{},modelValue:{default:null},multiple:{type:Boolean,default:!1},options:{},autoFitWidth:{type:Boolean,default:!0},size:{},collapseTagsTooltip:{type:Boolean,default:!0},minCollapsedNum:{default:3},allowClear:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!1},contentClass:{},contentStyle:{type:[Boolean,null,String,Object,Array]}},emits:["update:modelValue","change","search","remove-tag","clear"],setup(T,{emit:t}){const s=T,{size:N}=function(e){return{size:y(()=>{const a=S("LayForm",{});return e.size||a.size||"md"})}}(s),d=ne(),c=v(),i=v(""),_=v(""),B=v([]),w=t,h=v(!1),f=v([]),x=v(!1);var n;const p=(e,a)=>{e==null||e.map(l=>{if(ye(l,l.children))p(l.children,a);else{if(l.type.name==U.name){if(l.children){const b=l.children.default()[0].children;typeof b=="string"&&(l.props.label=b)}a.push(l.props)}l.type.name==X.name&&l.children&&p(l.children.default(),a)}})},z=()=>{const e=[];d.default&&p(d.default(),e),Object.assign(e,s.options),JSON.stringify(e)!=JSON.stringify(f.value)&&(f.value=e)},Y=y(()=>s.options),q=e=>{Array.isArray(o.value)&&(o.value=o.value.filter(a=>a!==e),w("remove-tag",e))},Q=()=>{x.value=!0},Z=e=>{x.value=!1,M(e.target.value)};ue(()=>{z(),n=setInterval(z,500),de([o,f],()=>{var e,a;if(O.value)try{B.value=(e=o.value)==null?void 0:e.map(l=>{var b=f.value.find($=>($.disabled==""||$.disabled==1?$.closable=!1:$.closable=!0,$.value===l));return b==null&&(b={label:l,value:l,closable:!0}),b})}catch{throw new Error("v-model / model-value is not an array type")}else i.value="",_.value=(a=f.value.find(l=>l.value===o.value))==null?void 0:a.label},{immediate:!0,deep:!0})}),ie(()=>{clearInterval(n)});const o=y({get:()=>s.multiple&&s.modelValue==null?[]:s.modelValue,set(e){w("update:modelValue",e),w("change",e)}}),O=y(()=>s.multiple),M=e=>{x.value||(w("search",e),i.value=e)},W=()=>{O.value?o.value=[]:o.value="",w("clear")},ee=()=>{i.value="",h.value=!1},j=y(()=>Array.isArray(o.value)?o.value.length>0:o.value!==""&&o.value!==void 0&&o.value!==null),D=y(()=>j.value?"":s.placeholder);return C("selectRef",c),C("openState",h),C("selectedValue",o),C("searchValue",i),C("multiple",O),C("searchMethod",s.searchMethod),(e,a)=>(r(),k("div",{class:V(["layui-select",{"has-content":j.value,"has-clear":e.allowClear,"has-disabled":e.disabled}])},[A(me,{ref_key:"selectRef",ref:c,disabled:e.disabled,contentClass:e.contentClass,contentStyle:e.contentStyle,"update-at-scroll":!0,autoFitWidth:e.autoFitWidth,onHide:ee,onShow:a[4]||(a[4]=l=>h.value=!0)},{content:g(()=>[G("dl",ge,[u(d).header?(r(),k("div",we,[m(e.$slots,"header")])):I("",!0),f.value?(r(!0),k(re,{key:1},ce(Y.value,(l,b)=>(r(),F(U,pe(l,{key:b}),null,16))),128)):I("",!0),m(e.$slots,"default"),u(d).footer?(r(),k("div",Ce,[m(e.$slots,"footer")])):I("",!0)])]),default:g(()=>[O.value?(r(),F(he,{key:0,modelValue:B.value,"onUpdate:modelValue":a[0]||(a[0]=l=>B.value=l),"input-value":i.value,"onUpdate:inputValue":a[1]||(a[1]=l=>i.value=l),"allow-clear":e.allowClear,placeholder:D.value,collapseTagsTooltip:e.collapseTagsTooltip,minCollapsedNum:e.minCollapsedNum,disabled:e.disabled,disabledInput:!e.showSearch,size:u(N),class:V({"layui-unselect":!0}),style:{width:"100%"},onRemove:q,onClear:W,onInputValueChange:M,onKeyupCapture:a[2]||(a[2]=J(P(()=>{},["prevent","stop"]),["delete"])),onKeydownCapture:a[3]||(a[3]=J(P(()=>{},["prevent","stop"]),["enter"]))},E({suffix:g(()=>[A(u(H),{type:"layui-icon-triangle-d",class:V({triangle:h.value})},null,8,["class"])]),_:2},[u(d).prepend?{name:"prepend",fn:g(()=>[m(e.$slots,"prepend")]),key:"0"}:void 0,u(d).append?{name:"append",fn:g(()=>[m(e.$slots,"append")]),key:"1"}:void 0]),1032,["modelValue","input-value","allow-clear","placeholder","collapseTagsTooltip","minCollapsedNum","disabled","disabledInput","size"])):(r(),F(ve,{key:1,size:u(N),disabled:e.disabled,readonly:!e.showSearch,modelValue:_.value,"allow-clear":e.allowClear,placeholder:D.value,class:V({"layui-unselect":!e.showSearch}),onCompositionstart:Q,onCompositionend:Z,onInput:M,onClear:W},E({suffix:g(()=>[A(u(H),{type:"layui-icon-triangle-d",class:V({triangle:h.value})},null,8,["class"])]),_:2},[u(d).prepend?{name:"prepend",fn:g(()=>[m(e.$slots,"prepend")]),key:"0"}:void 0,u(d).append?{name:"append",fn:g(()=>[m(e.$slots,"append")]),key:"1"}:void 0]),1032,["size","disabled","readonly","modelValue","allow-clear","placeholder","class"]))]),_:3},8,["disabled","contentClass","contentStyle","autoFitWidth"])],2))}}));export{_e as B,ke as U};
