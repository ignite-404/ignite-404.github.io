import{c as ve,S as Z,C as J,u as re,a as de,b as he,d as ce,e as fe,f as ge,g as me,h as ye,j as q,G as X,k as pe,R as K,Z as Q,l as we,p as Pe,m as ee,B as Se,n as te,o as be,i as Ie}from"./index-5878f41e.js";import{_ as Me,J as Le,a as _e,b as Ce,U as Te,o as xe,c as De,P as Ee}from"./index-99541687.js";function Re(e,a){return a=a||{},ve(e,null,null,a.state!=="normal")}function ze(e){var a=Z.extend(e);return Z.registerClass(a),a}function Oe(e){var a=J.extend(e);return J.registerClass(a),a}re([de,he]);re(ce);ze({type:"series.liquidFill",optionUpdated:function(){var e=this.option;e.gridSize=Math.max(Math.floor(e.gridSize),4)},getInitialData:function(e,a){var n=fe(e.data,{coordDimensions:["value"]}),h=new ge(n,this);return h.initData(e.data),h},defaultOption:{color:["#294D99","#156ACF","#1598ED","#45BDFF"],center:["50%","50%"],radius:"50%",amplitude:"8%",waveLength:"80%",phase:"auto",period:"auto",direction:"right",shape:"circle",waveAnimation:!0,animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,outline:{show:!0,borderDistance:8,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:8,shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.25)"}},backgroundStyle:{color:"#E3F7FF"},itemStyle:{opacity:.95,shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.4)"},label:{show:!0,color:"#294D99",insideColor:"#fff",fontSize:50,fontWeight:"bold",align:"center",baseline:"middle",position:"inside"},emphasis:{itemStyle:{opacity:.8}}}});const ke=me({type:"ec-liquid-fill",shape:{waveLength:0,radius:0,radiusY:0,cx:0,cy:0,waterLevel:0,amplitude:0,phase:0,inverse:!1},buildPath:function(e,a){a.radiusY==null&&(a.radiusY=a.radius);for(var n=Math.max(Math.ceil(2*a.radius/a.waveLength*4)*2,8);a.phase<-Math.PI*2;)a.phase+=Math.PI*2;for(;a.phase>0;)a.phase-=Math.PI*2;var h=a.phase/Math.PI/2*a.waveLength,d=a.cx-a.radius+h-a.radius*2;e.moveTo(d,a.waterLevel);for(var c=0,m=0;m<n;++m){var T=m%4,o=Ae(m*a.waveLength/4,T,a.waveLength,a.amplitude);e.bezierCurveTo(o[0][0]+d,-o[0][1]+a.waterLevel,o[1][0]+d,-o[1][1]+a.waterLevel,o[2][0]+d,-o[2][1]+a.waterLevel),m===n-1&&(c=o[2][0])}a.inverse?(e.lineTo(c+d,a.cy-a.radiusY),e.lineTo(d,a.cy-a.radiusY),e.lineTo(d,a.waterLevel)):(e.lineTo(c+d,a.cy+a.radiusY),e.lineTo(d,a.cy+a.radiusY),e.lineTo(d,a.waterLevel)),e.closePath()}});function Ae(e,a,n,h){return a===0?[[e+1/2*n/Math.PI/2,h/2],[e+1/2*n/Math.PI,h],[e+n/4,h]]:a===1?[[e+1/2*n/Math.PI/2*(Math.PI-2),h],[e+1/2*n/Math.PI/2*(Math.PI-1),h/2],[e+n/4,0]]:a===2?[[e+1/2*n/Math.PI/2,-h/2],[e+1/2*n/Math.PI,-h],[e+n/4,-h]]:[[e+1/2*n/Math.PI/2*(Math.PI-2),-h],[e+1/2*n/Math.PI/2*(Math.PI-1),-h/2],[e+n/4,0]]}var I=Pe;function ae(e){return e&&e.indexOf("path://")===0}Oe({type:"liquidFill",render:function(e,a,n){var h=this,d=this.group;d.removeAll();var c=e.getData(),m=c.getItemModel(0),T=m.get("center"),o=m.get("radius"),A=n.getWidth(),M=n.getHeight(),Y=Math.min(A,M),B=0,x=0,V=e.get("outline.show");V&&(B=e.get("outline.borderDistance"),x=I(e.get("outline.itemStyle.borderWidth"),Y));var L=I(T[0],A),_=I(T[1],M),C,D,E,P=!1,w=e.get("shape");if(w==="container"?(P=!0,C=[A/2,M/2],D=[C[0]-x/2,C[1]-x/2],E=[I(B,A),I(B,M)],o=[Math.max(D[0]-E[0],0),Math.max(D[1]-E[1],0)]):(C=I(o,Y)/2,D=C-x/2,E=I(B,Y),o=Math.max(D-E,0)),V){var ie=F();ie.style.lineWidth=x,d.add(F())}var ne=P?0:L-o,le=P?0:_-o,R=null;d.add(se());var U=this._data,G=[];c.diff(U).add(function(t){var r=N(t,!1),i=r.shape.waterLevel;r.shape.waterLevel=P?M/2:o,ye(r,{shape:{waterLevel:i}},e),r.z2=2,$(t,r,null),d.add(r),c.setItemGraphicEl(t,r),G.push(r)}).update(function(t,r){for(var i=U.getItemGraphicEl(r),u=N(t,!1,i),s={},l=["amplitude","cx","cy","phase","radius","radiusY","waterLevel","waveLength"],f=0;f<l.length;++f){var v=l[f];u.shape.hasOwnProperty(v)&&(s[v]=u.shape[v])}for(var y={},g=["fill","opacity","shadowBlur","shadowColor"],f=0;f<g.length;++f){var v=g[f];u.style.hasOwnProperty(v)&&(y[v]=u.style[v])}P&&(s.radiusY=M/2),q(i,{shape:s,x:u.x,y:u.y},e),e.isUniversalTransitionEnabled&&e.isUniversalTransitionEnabled()?q(i,{style:y},e):i.useStyle(y);var p=i.getClipPath(),S=u.getClipPath();i.setClipPath(u.getClipPath()),i.shape.inverse=u.inverse,p&&S&&h._shape===w&&!ae(w)&&q(S,{shape:p.shape},e,{isFrom:!0}),$(t,i,i),d.add(i),c.setItemGraphicEl(t,i),G.push(i)}).remove(function(t){var r=U.getItemGraphicEl(t);d.remove(r)}).execute(),m.get("label.show")&&d.add(oe(G)),this._shape=w,this._data=c;function z(t,r){if(w)if(ae(w)){var i=ee(w.slice(7),{}),u=i.getBoundingRect(),s=u.width,l=u.height;s>l?(l=t*2/s*l,s=t*2):(s=t*2/l*s,l=t*2);var f=r?0:L-s/2,v=r?0:_-l/2;return i=ee(w.slice(7),{},new Se(f,v,s,l)),r&&(i.x=-s/2,i.y=-l/2),i}else if(P){var y=r?-t[0]:L-t[0],g=r?-t[1]:_-t[1];return te("rect",y,g,t[0]*2,t[1]*2)}else{var y=r?-t:L-t,g=r?-t:_-t;return w==="pin"?g+=t:w==="arrow"&&(g-=t),te(w,y,g,t*2,t*2)}return new be({shape:{cx:r?0:L,cy:r?0:_,r:t}})}function F(){var t=z(C);return t.style.fill=null,t.setStyle(e.getModel("outline.itemStyle").getItemStyle()),t}function se(){var t=z(o);t.setStyle(e.getModel("backgroundStyle").getItemStyle()),t.style.fill=null,t.z2=5;var r=z(o);r.setStyle(e.getModel("backgroundStyle").getItemStyle()),r.style.stroke=null;var i=new X;return i.add(t),i.add(r),i}function N(t,r,i){var u=P?o[0]:o,s=P?M/2:o,l=c.getItemModel(t),f=l.getModel("itemStyle"),v=l.get("phase"),y=I(l.get("amplitude"),s*2),g=I(l.get("waveLength"),u*2),p=c.get("value",t),S=s-p*s*2;v=i?i.shape.phase:v==="auto"?t*Math.PI/4:v;var b=f.getItemStyle();if(!b.fill){var O=e.get("color"),W=t%O.length;b.fill=O[W]}var ue=u*2,k=new ke({shape:{waveLength:g,radius:u,radiusY:s,cx:ue,cy:0,waterLevel:S,amplitude:y,phase:v,inverse:r},style:b,x:L,y:_});k.shape._waterLevel=S;var j=l.getModel("emphasis.itemStyle").getItemStyle();j.lineWidth=0,k.ensureState("emphasis").style=j,pe(k);var H=z(o,!0);return H.setStyle({fill:"white"}),k.setClipPath(H),k}function $(t,r,i){var u=c.getItemModel(t),s=u.get("period"),l=u.get("direction"),f=c.get("value",t),v=u.get("phase");v=i?i.shape.phase:v==="auto"?t*Math.PI/4:v;var y=function(S){var b=c.count();return b===0?S:S*(.2+(b-t)/b*.8)},g=0;s==="auto"?g=y(5e3):g=typeof s=="function"?s(f,t):s;var p=0;l==="right"||l==null?p=Math.PI:l==="left"?p=-Math.PI:l==="none"?p=0:console.error("Illegal direction value for liquid fill."),l!=="none"&&u.get("waveAnimation")&&r.animate("shape",!0).when(0,{phase:v}).when(g/2,{phase:p+v}).when(g,{phase:p*2+v}).during(function(){R&&R.dirty(!0)}).start()}function oe(t){var r=m.getModel("label");function i(){var b=e.getFormattedLabel(0,"normal"),O=c.get("value",0)*100,W=c.getName(0)||e.name;return isNaN(O)||(W=O.toFixed(0)+"%"),b??W}var u={z2:10,shape:{x:ne,y:le,width:(P?o[0]:o)*2,height:(P?o[1]:o)*2},style:{fill:"transparent"},textConfig:{position:r.get("position")||"inside"},silent:!0},s={style:{text:i(),textAlign:r.get("align"),textVerticalAlign:r.get("baseline")}};Object.assign(s.style,Re(r));var l=new K(u),f=new K(u);f.disableLabelAnimation=!0,l.disableLabelAnimation=!0;var v=new Q(s),y=new Q(s);l.setTextContent(v),f.setTextContent(y);var g=r.get("insideColor");y.style.fill=g;var p=new X;p.add(l),p.add(f);var S=z(o,!0);return R=new we({shape:{paths:t},x:L,y:_}),R.setClipPath(S),f.setClipPath(R),p}},dispose:function(){}});const Be={__name:"echarts",props:{options:{type:Object,default:()=>({})},height:{type:Number,default:300}},setup(e){const a=e;let n;const h=m=>{n==null||n.setOption(m)};Le(()=>a.options,m=>{h(m)});const d=()=>{n&&n.resize()},c=_e();return Ce(()=>{n=Ie(c.value),window.addEventListener("resize",d)}),Te(()=>{window.removeEventListener("resize",d),n&&n.dispose()}),(m,T)=>(xe(),De("div",{class:"main",ref_key:"mainRef",ref:c,style:Ee({height:`${e.height}px`})},null,4))}},Ue=Me(Be,[["__scopeId","data-v-8a70ac70"]]);export{Ue as e};
