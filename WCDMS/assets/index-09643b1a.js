import{A as U,d as L,W as C,a as v,I as h,j as le,v as ae,o as r,c as S,N as u,e as F,aa as te,ag as se,p as I,r as m,h as oe,t as G,Q as V,i as H,X as ne,b as ue,M as de,T as ie,$ as w,f as A,w as g,F as re,O as pe,ah as ce,a1 as D,V as E,J as K,Y as P,a2 as ve,a3 as me,al as he}from"./index-0f1dbffa.js";import{T as ye}from"./index2-84f017df.js";const R=L({name:"LaySelectOption",__name:"index",props:{label:{default:""},value:{},disabled:{type:Boolean,default:!1},keyword:{default:""}},setup(T){const t=T,s=C("searchValue"),N=C("selectRef"),d=C("searchMethod"),p=C("selectedValue"),i=C("multiple"),k=v(),_=()=>{var n;i.value?t.disabled||(n=k.value)==null||n.toggle():t.disabled||(N.value.hide(),p.value=t.value)},B=h(()=>i.value?p.value.indexOf(t.value)!=-1:p.value===t.value),y=v(!0),f=h(()=>{var n,c;return d&&!y.value?d(s.value,t):(y.value=!1,((n=t.keyword)==null?void 0:n.toString().indexOf(s.value))>-1||((c=t.label)==null?void 0:c.toString().indexOf(s.value))>-1)}),$=h(()=>["layui-select-option",{"layui-this":B.value,"layui-disabled":t.disabled}]);return(n,c)=>le((r(),S("dd",{class:V($.value),onClick:_},[u(i)?(r(),F(se,{key:0,skin:"primary",ref_key:"checkboxRef",ref:k,modelValue:u(p),"onUpdate:modelValue":c[0]||(c[0]=O=>te(p)?p.value=O:null),disabled:n.disabled,value:n.value},null,8,["modelValue","disabled","value"])):I("",!0),m(n.$slots,"default",{},()=>[oe(G(n.label),1)])],2)),[[ae,f.value]])}}),ke=U(R),fe={class:"layui-select-option-group"},be={class:"layui-select-option-group-label"},X=L({name:"LaySelectOptionGroup",__name:"index",props:{label:{default:"Group Name"}},setup:T=>(t,s)=>(r(),S("div",fe,[H("dt",be,G(t.label),1),m(t.$slots,"default")]))});U(X);const ge={class:"layui-select-content"},we={key:0,class:"layui-select-content__header"},Ce={key:2,class:"layui-select-content__footer"},_e=U(L({name:"LaySelect",__name:"index",props:{name:{},disabled:{type:Boolean,default:!1},placeholder:{},searchPlaceholder:{},searchMethod:{},modelValue:{default:null},multiple:{type:Boolean,default:!1},options:{},autoFitWidth:{type:Boolean,default:!0},size:{},collapseTagsTooltip:{type:Boolean,default:!0},minCollapsedNum:{default:3},allowClear:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!1},contentClass:{},contentStyle:{type:[Boolean,null,String,Object,Array]}},emits:["update:modelValue","change","search"],setup(T,{emit:t}){const s=T,{size:N}=function(e){return{size:h(()=>{const a=C("LayForm",{});return e.size||a.size||"md"})}}(s),d=ne(),p=v(),i=v(""),k=v(""),_=v([]),B=t,y=v(!1),f=v([]),$=v(!1);var n;const c=(e,a)=>{e==null||e.map(l=>{if(he(l,l.children))c(l.children,a);else{if(l.type.name==R.name){if(l.children){const b=l.children.default()[0].children;typeof b=="string"&&(l.props.label=b)}a.push(l.props)}l.type.name==X.name&&l.children&&c(l.children.default(),a)}})},O=()=>{const e=[];d.default&&c(d.default(),e),Object.assign(e,s.options),JSON.stringify(e)!=JSON.stringify(f.value)&&(f.value=e)},Y=h(()=>s.options),q=e=>{Array.isArray(o.value)&&(o.value=o.value.filter(a=>a!=e))},Q=()=>{$.value=!0},Z=e=>{$.value=!1,M(e.target.value)};ue(()=>{O(),n=setInterval(O,500),de([o,f],()=>{var e,a;if(z.value)try{_.value=(e=o.value)==null?void 0:e.map(l=>{var b=f.value.find(x=>(x.disabled==""||x.disabled==1?x.closable=!1:x.closable=!0,x.value===l));return b==null&&(b={label:l,value:l,closable:!0}),b})}catch{throw new Error("v-model / model-value is not an array type")}else i.value="",k.value=(a=f.value.find(l=>l.value===o.value))==null?void 0:a.label},{immediate:!0,deep:!0})}),ie(()=>{clearInterval(n)});const o=h({get:()=>s.multiple&&s.modelValue==null?[]:s.modelValue,set(e){B("update:modelValue",e),B("change",e)}}),z=h(()=>s.multiple),M=e=>{$.value||(B("search",e),i.value=e)},W=()=>{z.value?o.value=[]:o.value=""},ee=()=>{i.value="",y.value=!1},j=h(()=>Array.isArray(o.value)?o.value.length>0:o.value!==""&&o.value!==void 0&&o.value!==null),J=h(()=>j.value?"":s.placeholder);return w("selectRef",p),w("openState",y),w("selectedValue",o),w("searchValue",i),w("multiple",z),w("searchMethod",s.searchMethod),(e,a)=>(r(),S("div",{class:V(["layui-select",{"has-content":j.value,"has-clear":e.allowClear,"has-disabled":e.disabled}])},[A(me,{ref_key:"selectRef",ref:p,disabled:e.disabled,contentClass:e.contentClass,contentStyle:e.contentStyle,"update-at-scroll":!0,autoFitWidth:e.autoFitWidth,onHide:ee,onShow:a[4]||(a[4]=l=>y.value=!0)},{content:g(()=>[H("dl",ge,[u(d).header?(r(),S("div",we,[m(e.$slots,"header")])):I("",!0),f.value?(r(!0),S(re,{key:1},pe(Y.value,(l,b)=>(r(),F(R,ce(l,{key:b}),null,16))),128)):I("",!0),m(e.$slots,"default"),u(d).footer?(r(),S("div",Ce,[m(e.$slots,"footer")])):I("",!0)])]),default:g(()=>[z.value?(r(),F(ye,{key:0,modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=l=>_.value=l),"input-value":i.value,"onUpdate:inputValue":a[1]||(a[1]=l=>i.value=l),"allow-clear":e.allowClear,placeholder:J.value,collapseTagsTooltip:e.collapseTagsTooltip,minCollapsedNum:e.minCollapsedNum,disabled:e.disabled,disabledInput:!e.showSearch,size:u(N),class:V({"layui-unselect":!0}),style:{width:"100%"},onRemove:q,onClear:W,onInputValueChange:M,onKeyupCapture:a[2]||(a[2]=D(E(()=>{},["prevent","stop"]),["delete"])),onKeydownCapture:a[3]||(a[3]=D(E(()=>{},["prevent","stop"]),["enter"]))},K({suffix:g(()=>[A(u(P),{type:"layui-icon-triangle-d",class:V({triangle:y.value})},null,8,["class"])]),_:2},[u(d).prepend?{name:"prepend",fn:g(()=>[m(e.$slots,"prepend")]),key:"0"}:void 0,u(d).append?{name:"append",fn:g(()=>[m(e.$slots,"append")]),key:"1"}:void 0]),1032,["modelValue","input-value","allow-clear","placeholder","collapseTagsTooltip","minCollapsedNum","disabled","disabledInput","size"])):(r(),F(ve,{key:1,size:u(N),disabled:e.disabled,readonly:!e.showSearch,modelValue:k.value,"allow-clear":e.allowClear,placeholder:J.value,class:V({"layui-unselect":!e.showSearch}),onCompositionstart:Q,onCompositionend:Z,onInput:M,onClear:W},K({suffix:g(()=>[A(u(P),{type:"layui-icon-triangle-d",class:V({triangle:y.value})},null,8,["class"])]),_:2},[u(d).prepend?{name:"prepend",fn:g(()=>[m(e.$slots,"prepend")]),key:"0"}:void 0,u(d).append?{name:"append",fn:g(()=>[m(e.$slots,"append")]),key:"1"}:void 0]),1032,["size","disabled","readonly","modelValue","allow-clear","placeholder","class"]))]),_:3},8,["disabled","contentClass","contentStyle","autoFitWidth"])],2))}}));export{_e as B,ke as U};
