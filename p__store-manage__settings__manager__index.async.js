"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8517],{23806:function(L,j,n){var m=n(1288),a=n(85893);j.Z=function(l){var t=l.model,o=l.fallback;if(t==null||t==null)return null;var r=t==null?void 0:t.CreationTime,i=t==null?void 0:t.LastModificationTime;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{style:{},children:[(0,a.jsx)("div",{children:(0,a.jsx)(m.Z,{prefix:(0,a.jsx)("span",{children:"\u521B\u5EFA\uFF1A"}),onlyDate:!0,timeStr:r,fallback:o})}),(0,a.jsx)("div",{children:(0,a.jsx)(m.Z,{prefix:(0,a.jsx)("span",{children:"\u4FEE\u6539\uFF1A"}),onlyDate:!0,timeStr:i,fallback:o})})]})})}},1288:function(L,j,n){var m=n(78957),a=n(83062),l=n(46629),t=n(85893);j.Z=function(o){var r,i=o.timeStr,d=o.fallback,u=o.onlyDate,A=o.prefix,s=(r=(0,l.mg)(i))===null||r===void 0?void 0:r.add(l.Mg,"hour");if(!s)return d||null;var Z=(0,l.ND)().utc().add(l.Mg,"hour"),U=s.isSame(Z,"year"),N=s.diff(Z,"day"),$=U?s.format(l.AK):s.format(l.vc),B=function(){return(0,t.jsxs)("div",{children:[(0,t.jsxs)(m.Z,{direction:"horizontal",children:[(0,t.jsx)("div",{children:s.fromNow()}),(0,t.jsx)("div",{children:s.format(l.On)})]}),(0,t.jsx)("div",{children:s.format(l.t9)})]})};return(0,t.jsx)(a.Z,{title:B(),children:(0,t.jsxs)(m.Z,{direction:"horizontal",children:[A,(0,t.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:u?s.format(l.vc):s.format(l.dq)})]})})}},11518:function(L,j,n){var m=n(55241),a=n(78957),l=n(7134),t=n(55932),o=n(66419),r=n(8885),i=n(85893);j.Z=function(d){var u=d.model;if(!u)return null;var A=(0,t.SZ)(u.Avatar,{width:100,height:100}),s=(0,o.zO)([u.NickName,u.IdentityName,u.Id].filter(function(Z){return Z&&Z.length>0}).at(0)||"--",10);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m.Z,{content:(0,i.jsx)(r.Z,{model:u}),children:(0,i.jsxs)(a.Z,{direction:"horizontal",children:[(0,i.jsx)(l.C,{size:"small",shape:"square",src:A,children:s}),(0,i.jsx)("span",{children:(0,i.jsx)("a",{children:s})})]})})})}},8885:function(L,j,n){var m=n(78957),a=n(7134),l=n(55932),t=n(66419),o=n(85893);j.Z=function(r){var i,d=r.model;if(!d)return null;var u=(0,l.SZ)(d.Avatar,{width:100,height:100}),A=(0,t.zO)([d.NickName,d.IdentityName,d.Id].filter(function(s){return s&&s.length>0}).at(0)||"--",10);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(m.Z,{direction:"horizontal",children:[(0,o.jsx)("div",{children:(0,o.jsx)(a.C,{src:u,size:100})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{children:["\u6635\u79F0\uFF1A",A]}),(0,o.jsxs)("p",{children:["\u7528\u6237\u540D\uFF1A",(d==null?void 0:d.IdentityName)||"--"]}),(0,o.jsxs)("p",{children:["\u624B\u673A\u53F7\uFF1A",(d==null||(i=d.UserMobile)===null||i===void 0?void 0:i.MobilePhone)||"--"]})]})]})})}},82610:function(L,j,n){n.r(j),n.d(j,{default:function(){return q}});var m=n(5574),a=n.n(m),l=n(40411),t=n(14726),o=n(80799),r=n(67294),i=n(23806),d=n(11518),u=n(30699),A=n(97857),s=n.n(A),Z=n(68421),U=n(45360),N=n(85576),$=n(57381),B=n(11346),z=n(72269),K=n(66419),e=n(85893),H=function(g){var h=g.show,F=g.hide,y=g.data,T=g.ok,S=(0,r.useState)({}),O=a()(S,2),M=O[0],P=O[1],D=(0,Z.Z)(u.x1.mallManager.storeManagerUpdateManager,{manual:!0,onSuccess:function(x,R){(0,K._y)(x,function(){U.ZP.success("\u4FDD\u5B58\u6210\u529F"),T()})}});return(0,r.useEffect)(function(){P(s()({},y||{}))},[y]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(N.Z,{title:"\u95E8\u5E97\u6210\u5458",open:h,onCancel:function(){return F()},onOk:function(){return D.run(M)},children:(0,e.jsx)($.Z,{spinning:D.loading,children:(0,e.jsxs)(B.Z,{labelCol:{flex:"110px"},labelAlign:"right",wrapperCol:{flex:1},children:[(0,e.jsx)(B.Z.Item,{label:"\u662F\u5426\u6FC0\u6D3B",children:(0,e.jsx)(z.Z,{checked:M.IsActive,onChange:function(x){P(s()(s()({},M),{},{IsActive:x}))}})}),(0,e.jsx)(B.Z.Item,{label:"\u8D85\u7EA7\u7BA1\u7406\u5458",children:(0,e.jsx)(z.Z,{checked:M.IsSuperManager,onChange:function(x){P(s()(s()({},M),{},{IsSuperManager:x}))}})})]})})})})},J=n(19632),Q=n.n(J),X=n(66309),Y=n(40056),_=n(84567),b=n(78957),w=function(g){var h=g.model,F=g.ok,y=(0,r.useState)(!1),T=a()(y,2),S=T[0],O=T[1],M=(0,r.useState)([]),P=a()(M,2),D=P[0],E=P[1],x=(0,r.useState)(!1),R=a()(x,2),k=R[0],f=R[1],c=(0,r.useState)([]),C=a()(c,2),W=C[0],nn=C[1],en=function(){f(!1),u.x1.mallManager.storeManagerPermissionListRoles({}).then(function(v){(0,K._y)(v,function(){nn(v.data.Data||[])})}).finally(function(){f(!1)})};(0,r.useEffect)(function(){S&&en()},[S]);var tn=function(){f(!1),u.x1.mallManager.storeManagerPermissionSetManagerRoles({Key:h.Id,Value:D}).then(function(v){(0,K._y)(v,function(){U.ZP.success("\u4FDD\u5B58\u6210\u529F"),O(!1),F&&F()})}).finally(function(){f(!1)})},an=function(){var v;return(0,K.G5)(h.StoreRoles)?null:(0,e.jsx)("div",{children:(v=h.StoreRoles)===null||v===void 0?void 0:v.map(function(p,V){return(0,e.jsx)(X.Z,{style:{marginRight:5,marginBottom:5},children:p.Name},V)})})};(0,r.useEffect)(function(){h.StoreRoles&&E(h.StoreRoles.map(function(I){return I.Id||""}))},[h]);var rn=function(){return!W||W.length<=0?(0,e.jsx)(Y.Z,{message:"\u65E0\u89D2\u8272"}):(0,e.jsx)("div",{children:W.map(function(v,p){return(0,e.jsx)(_.Z,{checked:D.indexOf(v.Id||"")>=0,onChange:function(sn){var G=D.filter(function(ln){return ln!=v.Id});sn.target.checked&&(G=[].concat(Q()(G),[v.Id||"."])),E(G)},style:{marginRight:5,marginBottom:5},value:v.Id,children:v.Name},p)})})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(b.Z,{direction:"horizontal",children:[an(),(0,e.jsx)(t.ZP,{type:"link",onClick:function(){O(!0)},children:"\u4FEE\u6539"})]}),(0,e.jsx)(N.Z,{title:"\u7ED1\u5B9A\u89D2\u8272",confirmLoading:k,open:S,onCancel:function(){O(!1)},onOk:function(){tn()},children:rn()})]})},q=function(){var g=(0,r.useState)(!1),h=a()(g,2),F=h[0],y=h[1],T=(0,r.useState)([]),S=a()(T,2),O=S[0],M=S[1],P=(0,r.useState)(void 0),D=a()(P,2),E=D[0],x=D[1],R=function(){y(!0),u.x1.mallManager.storeManagerListStoreManager({}).then(function(c){M(c.data.Data||[])}).finally(function(){y(!1)})},k=[{title:"\u6210\u5458",render:function(c){return(0,e.jsx)(d.Z,{model:c.User})}},{title:"\u89D2\u8272",render:function(c,C){return(0,e.jsx)("div",{children:(0,e.jsx)(w,{model:C,ok:function(){R()}})})}},{title:"\u662F\u5426\u6FC0\u6D3B",render:function(c){return c.IsActive?(0,e.jsx)(l.Z,{status:"success",text:"\u6FC0\u6D3B"}):(0,e.jsx)(l.Z,{status:"error",text:"\u672A\u6FC0\u6D3B"})}},{title:"\u8D85\u7EA7\u7BA1\u7406\u5458",render:function(c,C){return(0,e.jsx)(l.Z,{text:C.IsSuperManager?"\u8D85\u7EA7\u7BA1\u7406\u5458":"\u666E\u901A\u6210\u5458",status:C.IsSuperManager?"success":"default"})}},{title:"\u65F6\u95F4",render:function(c){return(0,e.jsx)(i.Z,{model:c})}},{title:"\u64CD\u4F5C",render:function(c){return(0,e.jsx)(t.ZP.Group,{children:(0,e.jsx)(t.ZP,{type:"link",onClick:function(){x(c)},children:"\u7F16\u8F91"})})}}];return(0,r.useEffect)(function(){R()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(H,{show:E!=null,hide:function(){x(void 0)},data:E||{},ok:function(){x(void 0),R()}}),(0,e.jsx)(o.Z,{rowKey:function(c){return c.Id||""},loading:F,columns:k,dataSource:O,pagination:!1})]})}}}]);
