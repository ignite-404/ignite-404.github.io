"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6914],{7560:function(Mn,I,e){e.r(I),e.d(I,{default:function(){return Fn}});var K=e(15009),A=e.n(K),Q=e(99289),V=e.n(Q),Y=e(7134),f=e(28036),w=e(37545),j=e(38295),i=e(35291),q=e(55932),m=e(76021),c=e(95813),b=e(80918),h=e(67294),Z=e(68421),P=e(57381),T=e(71230),S=e(15746),B=e(4393),z=e(22181),n=e(85893),_=function(){return(0,n.jsx)(T.Z,{justify:"center",style:{marginTop:"100px"},children:(0,n.jsx)(S.Z,{span:12,children:(0,n.jsx)(B.Z,{title:"\u63D0\u793A",children:(0,n.jsx)(z.ZP,{status:"warning",title:"\u95E8\u5E97\u8D26\u53F7",subTitle:"\u95E8\u5E97\u8D26\u53F7\u88AB\u7981\u7528",extra:(0,n.jsx)(f.ZP,{type:"primary",onClick:function(){(0,i.rf)()},children:"\u7ACB\u5373\u767B\u5F55"})})})})})},nn=e(45360),en=e(40056),rn=e(34041),D=e(30699),tn=function(){var t,r=(0,Z.Z)(D.x1.mallManager.storeManagerListUserStoreManagerIdentity,{manual:!0}),a=((t=r.data)===null||t===void 0?void 0:t.data.Data)||[],s=a.map(function(o){return o.Store||{}}).filter(function(o){return!(0,c.Wq)(o.Id)});(0,h.useEffect)(function(){r.run()},[]),(0,h.useEffect)(function(){if(s.length==1){var o=s.at(0);o!=null&&o.Id&&o.Id!=(0,c.Gk)()&&((0,c.LW)(o.Id),nn.ZP.info("\u5DF2\u7ECF\u81EA\u52A8\u4E3A\u4F60\u9009\u62E9\u95E8\u5E97\uFF1A".concat(o.Name||"--")).then(function(){}),setTimeout(function(){window.location.reload()},1e3))}},[s]);var u=function(){if(s.length<=0)return(0,n.jsx)(en.Z,{type:"error",message:"\u65E0\u6CD5\u8FDB\u5165\u7CFB\u7EDF",description:"\u4F60\u4E0D\u5728\u4EFB\u4F55\u95E8\u5E97\u4EFB\u804C\uFF0C\u5982\u6709\u9700\u8981\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458"});var l=s.map(function(p){return{value:p.Id||"--",label:p.Name||"--"}});return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{style:{padding:100},children:[(0,n.jsx)("p",{style:{marginBottom:10},children:(0,n.jsx)("h3",{children:"\u9009\u62E9\u9700\u8981\u8FDB\u5165\u7684\u95E8\u5E97"})}),(0,n.jsx)("p",{children:(0,n.jsx)(rn.Z,{style:{width:"100%"},placeholder:"\u9009\u62E9\u95E8\u5E97",size:"large",defaultActiveFirstOption:!0,options:l,onChange:function(x){(0,c.LW)(x),setTimeout(function(){window.location.reload()},1e3)}})})]})})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(T.Z,{justify:"center",style:{paddingTop:"100px"},children:(0,n.jsx)(S.Z,{span:12,children:(0,n.jsx)(B.Z,{title:"\u63D0\u793A",loading:r.loading,children:u()})})})})},an=function(){var t,r=(0,Z.Z)(D.c2.mall.storeStoreList,{manual:!0}),a=((t=r.data)===null||t===void 0?void 0:t.data.Data)||[];(0,h.useEffect)(function(){r.run({})},[]);var s=function(){return r.loading?(0,n.jsx)("p",{children:"loading..."}):(0,c.G5)(a)?(0,n.jsx)("p",{children:"\u4F60\u4E0D\u5728\u6709\u6548\u7684\u7EC4\u7EC7\u5185"}):(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:"\u4F60\u4E0D\u5728\u4EE5\u4E0B\u7EC4\u7EC7\uFF1A"}),a.map(function(o,l){return(0,n.jsxs)("p",{children:[l+1,".",o.Name||"--"]},l)})]})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(z.ZP,{status:403,title:"\u65E0\u6743\u64CD\u4F5C",subTitle:s()})})};function sn(t){var r,a=t.children,s=(0,j.o)(),u=(0,m.TH)(),o=((r=s.storeManagerAuthResult)===null||r===void 0?void 0:r.StoreManager)||{},l=(0,Z.Z)(s.queryStoreManagerAuthResult,{manual:!0});return(0,h.useEffect)(function(){(0,c.lk)()?l.run():s.storeManagerAuthResult=void 0},[u.pathname]),!(0,i.Jk)(o)&&l.loading?(0,n.jsx)(P.Z,{spinning:l.loading,size:"large",fullscreen:!0,tip:(0,n.jsx)("p",{children:"\u52A0\u8F7D\u767B\u5F55\u4FE1\u606F..."})}):(0,i.Jk)(o)?o.IsActive?(0,n.jsx)(n.Fragment,{children:a}):(0,n.jsx)(_,{}):(0,i.tC)()?(0,n.jsx)(an,{}):(0,n.jsx)(tn,{})}function on(t){var r=t.children,a=(0,j.o)(),s=(0,m.TH)(),u=(0,Z.Z)(a.queryStoreManagerPermission,{manual:!0});return(0,h.useEffect)(function(){(0,c.lk)()&&(0,i.Jk)(a.storeManager)?u.run():a.managerPermissions=void 0},[s.pathname,a.storeManager]),a.managerPermissions==null&&u.loading?(0,n.jsx)(P.Z,{spinning:u.loading,size:"large",fullscreen:!0,tip:(0,n.jsx)("p",{children:"\u52A0\u8F7D\u6743\u9650\u4FE1\u606F..."})}):(0,n.jsx)(n.Fragment,{children:r})}var un=e(35839);function ln(t){var r=t.children;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(un.Z,{children:(0,n.jsx)(sn,{children:(0,n.jsx)(on,{children:r})})})})}var cn=e(5753),L=e(83062),dn=function(){var t,r=(0,j.o)(),a=((t=r.storeManager)===null||t===void 0?void 0:t.Store)||{};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(L.Z,{title:"\u5F53\u524D\u4E8C\u7EA7\u5355\u4F4D",children:(0,n.jsx)(f.ZP,{type:"dashed",size:"small",disabled:!0,onClick:function(){confirm("\u66F4\u6362\u95E8\u5E97\uFF1F")&&((0,c.LW)(""),setTimeout(function(){window.location.reload()},500))},children:(a==null?void 0:a.Name)||"--"})})})},R=e(64491),$=e(33192),y=e(3925),U=e(54666),F=e(14738),N=e(13824),C=e(70781),W=e(43821),G=e(15741),H=e(55046),O=e(17226),J=e(50286),mn=[{name:"\u5728\u552E\u5546\u54C1",path:"/store-manage/goods",icon:(0,n.jsx)(R.Z,{stroke:1}),children:[{name:"\u5728\u552E\u5546\u54C1",path:"/store-manage/goods/on-sales",icon:(0,n.jsx)($.Z,{stroke:1})}]},{name:"\u8BA2\u5355",path:"/store-manage/order",key:"order",icon:(0,n.jsx)(y.Z,{stroke:1}),children:[{name:"\u8BA2\u5355\u5217\u8868",path:"/store-manage/order/list",icon:(0,n.jsx)(y.Z,{stroke:1})},{name:"\u8BA2\u5355\u8BC4\u8BBA",path:"/store-manage/order/review",icon:(0,n.jsx)(U.Z,{stroke:1})}]},{name:"\u8D22\u52A1",path:"/store-manage/bill",key:"finance",icon:(0,n.jsx)(F.Z,{stroke:1}),children:[{name:"\u652F\u4ED8\u67E5\u8BE2",path:"/store-manage/bill/payment",icon:(0,n.jsx)(F.Z,{stroke:1})}]},{name:"\u4EA4\u4ED8",path:"/store-manage/shipping",key:"shipping",icon:(0,n.jsx)(N.Z,{stroke:1}),children:[{name:"\u914D\u9001",path:"/store-manage/shipping/delivery",icon:(0,n.jsx)(C.Z,{stroke:1})},{name:"\u81EA\u63D0",path:"/store-manage/shipping/pickup",icon:(0,n.jsx)(W.Z,{stroke:1})}]},{name:"\u8BBE\u7F6E",path:"/store-manage/settings",key:"mall-settings",icon:(0,n.jsx)(G.Z,{stroke:1}),children:[{name:"\u95E8\u5E97\u8BBE\u7F6E",path:"/store-manage/settings/common",icon:(0,n.jsx)(H.Z,{stroke:1})},{name:"\u6210\u5458",path:"/store-manage/settings/manager",icon:(0,n.jsx)(O.Z,{stroke:1})},{name:"\u89D2\u8272",path:"/store-manage/settings/role",icon:(0,n.jsx)(J.Z,{stroke:1})},{name:"\u914D\u9001\u65B9\u5F0F",path:"/store-manage/settings/shipping",icon:(0,n.jsx)(C.Z,{stroke:1})}]}],gn=mn,vn=e(97519),hn=e(8940),pn=function(){var t,r=(0,j.o)(),a=(t=r.storeManager)===null||t===void 0?void 0:t.Store;return a?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(L.Z,{title:"\u70B9\u51FB\u66F4\u6362\u95E8\u5E97",children:(0,n.jsx)(f.ZP,{type:"dashed",size:"small",onClick:function(){confirm("\u66F4\u6362\u95E8\u5E97\uFF1F")&&((0,c.LW)(""),setTimeout(function(){window.location.reload()},500))},children:(a==null?void 0:a.Name)||"--"})})}):null},fn=e(92088),jn=function(r){var a=[{name:"\u5728\u552E\u5546\u54C1",icon:(0,n.jsx)(R.Z,{stroke:1}),children:[{name:"\u5728\u552E\u5546\u54C1",path:"/store-manage/goods/on-sales",icon:(0,n.jsx)($.Z,{stroke:1})}]},{name:"\u8BA2\u5355",icon:(0,n.jsx)(y.Z,{stroke:1}),children:[{name:"\u8BA2\u5355\u5217\u8868",path:"/store-manage/order/list",icon:(0,n.jsx)(y.Z,{stroke:1})},{name:"\u8BA2\u5355\u8BC4\u8BBA",path:"/store-manage/order/review",icon:(0,n.jsx)(U.Z,{stroke:1})}]},{name:"\u8D22\u52A1",icon:(0,n.jsx)(F.Z,{stroke:1}),children:[{name:"\u652F\u4ED8\u67E5\u8BE2",path:"/store-manage/bill/payment",icon:(0,n.jsx)(F.Z,{stroke:1})}]},{name:"\u4EA4\u4ED8",icon:(0,n.jsx)(N.Z,{stroke:1}),children:[{name:"\u914D\u9001",path:"/store-manage/shipping/delivery",icon:(0,n.jsx)(C.Z,{stroke:1})},{name:"\u81EA\u63D0",path:"/store-manage/shipping/pickup",icon:(0,n.jsx)(W.Z,{stroke:1})}]},{name:"\u8BBE\u7F6E",icon:(0,n.jsx)(G.Z,{stroke:1}),children:[{name:"\u95E8\u5E97\u8BBE\u7F6E",path:"/store-manage/settings/common",icon:(0,n.jsx)(H.Z,{stroke:1})},{name:"\u6210\u5458",path:"/store-manage/settings/manager",icon:(0,n.jsx)(O.Z,{stroke:1})},{name:"\u89D2\u8272",path:"/store-manage/settings/role",icon:(0,n.jsx)(J.Z,{stroke:1})},{name:"\u914D\u9001\u65B9\u5F0F",path:"/store-manage/settings/shipping",icon:(0,n.jsx)(C.Z,{stroke:1})}]}];return(0,i.$H)(a),a},xn=function(){var r=(0,fn.LB)(),a=r.intl,s=r.format_message,u=jn(s);return(0,h.useEffect)(function(){},[]),u},Zn=e(11329),M=e(74621),yn=e(51346),Fn=function(){var t,r,a=(0,m.pC)(),s=(0,j.o)(),u=(0,m.TH)(),o=xn(),l=(0,i.tC)()?gn:o,p=(0,i.Oj)(l,function(X){return(0,i.zh)(s.managerPermissions||{},X)}),x=(0,c.zO)((0,i.vW)((t=s.storeManager)===null||t===void 0?void 0:t.User)||"--",8),Cn=(0,q.SZ)((r=s.storeManager)===null||r===void 0||(r=r.User)===null||r===void 0?void 0:r.Avatar),En=function(){var d;return(0,c.zd)()?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{display:"none"},children:"in iframe"}),a]}):(0,n.jsx)(b.f,{theme:"light",layout:"top",splitMenus:!0,title:(0,i.tC)()?"\u4E8C\u7EA7\u5355\u4F4D":"\u95E8\u5E97\u7AEF",logo:(0,n.jsx)(M.Zd,{onClick:function(){m.m8.push({pathname:"/store-manage"})}}),appList:(0,i.tC)()?cn.Z:w.Z,menu:{request:function(){var g=V()(A()().mark(function k(){return A()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",p);case 1:case"end":return E.stop()}},k)}));function v(){return g.apply(this,arguments)}return v}(),params:p},menuItemRender:function(v,k){return(0,M.Pp)(v,k)},location:u,waterMarkProps:{content:["\u95E8\u5E97\u7AEF\uFF1A".concat(x),((d=s.storeManager)===null||d===void 0||(d=d.User)===null||d===void 0||(d=d.UserMobile)===null||d===void 0?void 0:d.MobilePhone)||""].filter(function(g){return g.length>0})},avatarProps:{icon:(0,n.jsx)(Y.C,{src:Cn,children:x}),size:"small",title:x,onClick:function(v){console.log(v),m.m8.push({pathname:"/store-manage/ucenter"})}},actionsRender:function(){return[(0,i.tC)()||(0,n.jsx)(f.ZP,{size:"small",type:"dashed",icon:(0,n.jsx)(vn.Z,{stroke:1}),onClick:function(){m.m8.push({pathname:"/store-manage/order-group/list"})},children:"\u4E0B\u5355\u52A9\u624B"}),(0,i.tC)()||(0,n.jsx)(f.ZP,{size:"small",type:"dashed",icon:(0,n.jsx)(hn.Z,{stroke:1}),onClick:function(){m.m8.push({pathname:"/store-manage/cashier"})},children:"\u6536\u94F6\u53F0"}),(0,i.tC)()||(0,n.jsx)(pn,{}),(0,i.tC)()&&(0,n.jsx)(dn,{})]},contentStyle:{padding:0,margin:0,overflowX:"hidden"},token:M.RZ,children:(0,n.jsxs)(Zn.Z,{menus:l,children:[(0,n.jsx)("div",{className:"w-full p-2 my-1",children:(0,n.jsx)(yn.Z,{menus:l})}),a]})})};return(0,n.jsx)(ln,{children:En()})}}}]);
