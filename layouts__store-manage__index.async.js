"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6914],{7560:function(Cn,I,e){e.r(I),e.d(I,{default:function(){return yn}});var V=e(15009),A=e.n(V),X=e(99289),Y=e.n(X),w=e(7134),p=e(14726),b=e(37545),j=e(38295),i=e(35291),q=e(55932),m=e(47650),l=e(66419),_=e(80918),f=e(67294),x=e(68421),P=e(57381),T=e(71230),S=e(15746),z=e(4393),B=e(22181),n=e(85893),nn=function(){return(0,n.jsx)(T.Z,{justify:"center",style:{marginTop:"100px"},children:(0,n.jsx)(S.Z,{span:12,children:(0,n.jsx)(z.Z,{title:"\u63D0\u793A",children:(0,n.jsx)(B.ZP,{status:"warning",title:"\u95E8\u5E97\u8D26\u53F7",subTitle:"\u95E8\u5E97\u8D26\u53F7\u88AB\u7981\u7528",extra:(0,n.jsx)(p.ZP,{type:"primary",onClick:function(){(0,i.rf)()},children:"\u7ACB\u5373\u767B\u5F55"})})})})})},en=e(45360),rn=e(40056),tn=e(34041),D=e(30699),an=function(){var r,t=(0,x.Z)(D.x1.mallManager.storeManagerListUserStoreManagerIdentity,{manual:!0}),a=((r=t.data)===null||r===void 0?void 0:r.data.Data)||[],o=a.map(function(s){return s.Store||{}}).filter(function(s){return!(0,l.Wq)(s.Id)});(0,f.useEffect)(function(){t.run()},[]),(0,f.useEffect)(function(){if(o.length==1){var s=o.at(0);s!=null&&s.Id&&s.Id!=(0,l.Gk)()&&((0,l.LW)(s.Id),en.ZP.info("\u5DF2\u7ECF\u81EA\u52A8\u4E3A\u4F60\u9009\u62E9\u95E8\u5E97\uFF1A".concat(s.Name||"--")).then(function(){}),setTimeout(function(){window.location.reload()},1e3))}},[o]);var c=function(){if(o.length<=0)return(0,n.jsx)(rn.Z,{type:"error",message:"\u65E0\u6CD5\u8FDB\u5165\u7CFB\u7EDF",description:"\u4F60\u4E0D\u5728\u4EFB\u4F55\u95E8\u5E97\u4EFB\u804C\uFF0C\u5982\u6709\u9700\u8981\u8BF7\u8054\u7CFB\u7CFB\u7EDF\u7BA1\u7406\u5458"});var u=o.map(function(g){return{value:g.Id||"--",label:g.Name||"--"}});return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{style:{padding:100},children:[(0,n.jsx)("p",{style:{marginBottom:10},children:(0,n.jsx)("h3",{children:"\u9009\u62E9\u9700\u8981\u8FDB\u5165\u7684\u95E8\u5E97"})}),(0,n.jsx)("p",{children:(0,n.jsx)(tn.Z,{style:{width:"100%"},placeholder:"\u9009\u62E9\u95E8\u5E97",size:"large",defaultActiveFirstOption:!0,options:u,onChange:function(k){(0,l.LW)(k),setTimeout(function(){window.location.reload()},1e3)}})})]})})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(T.Z,{justify:"center",style:{paddingTop:"100px"},children:(0,n.jsx)(S.Z,{span:12,children:(0,n.jsx)(z.Z,{title:"\u63D0\u793A",loading:t.loading,children:c()})})})})},sn=function(){var r,t=(0,x.Z)(D.c2.mall.storeStoreList,{manual:!0}),a=((r=t.data)===null||r===void 0?void 0:r.data.Data)||[];(0,f.useEffect)(function(){t.run({})},[]);var o=function(){return t.loading?(0,n.jsx)("p",{children:"loading..."}):(0,l.G5)(a)?(0,n.jsx)("p",{children:"\u4F60\u4E0D\u5728\u6709\u6548\u7684\u7EC4\u7EC7\u5185"}):(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:"\u4F60\u4E0D\u5728\u4EE5\u4E0B\u7EC4\u7EC7\uFF1A"}),a.map(function(s,u){return(0,n.jsxs)("p",{children:[u+1,".",s.Name||"--"]},u)})]})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(B.ZP,{status:403,title:"\u65E0\u6743\u64CD\u4F5C",subTitle:o()})})};function on(r){var t,a=r.children,o=(0,j.o)(),c=(0,m.TH)(),s=((t=o.storeManagerAuthResult)===null||t===void 0?void 0:t.StoreManager)||{},u=(0,x.Z)(o.queryStoreManagerAuthResult,{manual:!0});return(0,f.useEffect)(function(){(0,l.lk)()?u.run():o.storeManagerAuthResult=void 0},[c.pathname]),!(0,i.Jk)(s)&&u.loading?(0,n.jsx)(P.Z,{spinning:u.loading,size:"large",fullscreen:!0,tip:(0,n.jsx)("p",{children:"\u52A0\u8F7D\u767B\u5F55\u4FE1\u606F..."})}):(0,i.Jk)(s)?s.IsActive?(0,n.jsx)(n.Fragment,{children:a}):(0,n.jsx)(nn,{}):(0,i.tC)()?(0,n.jsx)(sn,{}):(0,n.jsx)(an,{})}function ln(r){var t=r.children,a=(0,j.o)(),o=(0,m.TH)(),c=(0,x.Z)(a.queryStoreManagerPermission,{manual:!0});return(0,f.useEffect)(function(){(0,l.lk)()&&(0,i.Jk)(a.storeManager)?c.run():a.managerPermissions=void 0},[o.pathname,a.storeManager]),a.managerPermissions==null&&c.loading?(0,n.jsx)(P.Z,{spinning:c.loading,size:"large",fullscreen:!0,tip:(0,n.jsx)("p",{children:"\u52A0\u8F7D\u6743\u9650\u4FE1\u606F..."})}):(0,n.jsx)(n.Fragment,{children:t})}var un=e(35839);function cn(r){var t=r.children;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(un.Z,{children:(0,n.jsx)(on,{children:(0,n.jsx)(ln,{children:t})})})})}var dn=e(5753),R=e(83062),mn=function(){var r,t=(0,j.o)(),a=((r=t.storeManager)===null||r===void 0?void 0:r.Store)||{};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(R.Z,{title:"\u5F53\u524D\u4E8C\u7EA7\u5355\u4F4D",children:(0,n.jsx)(p.ZP,{type:"dashed",size:"small",disabled:!0,onClick:function(){confirm("\u66F4\u6362\u95E8\u5E97\uFF1F")&&((0,l.LW)(""),setTimeout(function(){window.location.reload()},500))},children:(a==null?void 0:a.Name)||"--"})})})},L=e(64491),$=e(33192),Z=e(3925),U=e(54666),y=e(14738),N=e(13824),F=e(70781),W=e(43821),G=e(15741),H=e(55046),O=e(17226),J=e(50286),gn=[{name:"\u5728\u552E\u5546\u54C1",path:"/store-manage/goods",icon:(0,n.jsx)(L.Z,{stroke:1}),children:[{name:"\u5728\u552E\u5546\u54C1",path:"/store-manage/goods/on-sales",icon:(0,n.jsx)($.Z,{stroke:1})}]},{name:"\u8BA2\u5355",path:"/store-manage/order",key:"order",icon:(0,n.jsx)(Z.Z,{stroke:1}),children:[{name:"\u8BA2\u5355\u5217\u8868",path:"/store-manage/order/list",icon:(0,n.jsx)(Z.Z,{stroke:1})},{name:"\u8BA2\u5355\u8BC4\u8BBA",path:"/store-manage/order/review",icon:(0,n.jsx)(U.Z,{stroke:1})}]},{name:"\u8D22\u52A1",path:"/store-manage/bill",key:"finance",icon:(0,n.jsx)(y.Z,{stroke:1}),children:[{name:"\u652F\u4ED8\u67E5\u8BE2",path:"/store-manage/bill/payment",icon:(0,n.jsx)(y.Z,{stroke:1})}]},{name:"\u4EA4\u4ED8",path:"/store-manage/shipping",key:"shipping",icon:(0,n.jsx)(N.Z,{stroke:1}),children:[{name:"\u914D\u9001",path:"/store-manage/shipping/delivery",icon:(0,n.jsx)(F.Z,{stroke:1})},{name:"\u81EA\u63D0",path:"/store-manage/shipping/pickup",icon:(0,n.jsx)(W.Z,{stroke:1})}]},{name:"\u8BBE\u7F6E",path:"/store-manage/settings",key:"mall-settings",icon:(0,n.jsx)(G.Z,{stroke:1}),children:[{name:"\u95E8\u5E97\u8BBE\u7F6E",path:"/store-manage/settings/common",icon:(0,n.jsx)(H.Z,{stroke:1})},{name:"\u6210\u5458",path:"/store-manage/settings/manager",icon:(0,n.jsx)(O.Z,{stroke:1})},{name:"\u89D2\u8272",path:"/store-manage/settings/role",icon:(0,n.jsx)(J.Z,{stroke:1})},{name:"\u914D\u9001\u65B9\u5F0F",path:"/store-manage/settings/shipping",icon:(0,n.jsx)(F.Z,{stroke:1})}]}],hn=gn,vn=e(97519),pn=e(8940),jn=function(){var r,t=(0,j.o)(),a=(r=t.storeManager)===null||r===void 0?void 0:r.Store;return a?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(R.Z,{title:"\u70B9\u51FB\u66F4\u6362\u95E8\u5E97",children:(0,n.jsx)(p.ZP,{type:"dashed",size:"small",onClick:function(){confirm("\u66F4\u6362\u95E8\u5E97\uFF1F")&&((0,l.LW)(""),setTimeout(function(){window.location.reload()},500))},children:(a==null?void 0:a.Name)||"--"})})}):null},K=[{name:"\u5728\u552E\u5546\u54C1",path:"/store-manage/goods",icon:(0,n.jsx)(L.Z,{stroke:1}),children:[{name:"\u5728\u552E\u5546\u54C1",path:"/store-manage/goods/on-sales",icon:(0,n.jsx)($.Z,{stroke:1})}]},{name:"\u8BA2\u5355",path:"/store-manage/order",key:"order",icon:(0,n.jsx)(Z.Z,{stroke:1}),children:[{name:"\u8BA2\u5355\u5217\u8868",path:"/store-manage/order/list",icon:(0,n.jsx)(Z.Z,{stroke:1})},{name:"\u8BA2\u5355\u8BC4\u8BBA",path:"/store-manage/order/review",icon:(0,n.jsx)(U.Z,{stroke:1})}]},{name:"\u8D22\u52A1",path:"/store-manage/bill",key:"finance",icon:(0,n.jsx)(y.Z,{stroke:1}),children:[{name:"\u652F\u4ED8\u67E5\u8BE2",path:"/store-manage/bill/payment",icon:(0,n.jsx)(y.Z,{stroke:1})}]},{name:"\u4EA4\u4ED8",path:"/store-manage/shipping",key:"shipping",icon:(0,n.jsx)(N.Z,{stroke:1}),children:[{name:"\u914D\u9001",path:"/store-manage/shipping/delivery",icon:(0,n.jsx)(F.Z,{stroke:1})},{name:"\u81EA\u63D0",path:"/store-manage/shipping/pickup",icon:(0,n.jsx)(W.Z,{stroke:1})}]},{name:"\u8BBE\u7F6E",path:"/store-manage/settings",key:"mall-settings",icon:(0,n.jsx)(G.Z,{stroke:1}),children:[{name:"\u95E8\u5E97\u8BBE\u7F6E",path:"/store-manage/settings/common",icon:(0,n.jsx)(H.Z,{stroke:1})},{name:"\u6210\u5458",path:"/store-manage/settings/manager",icon:(0,n.jsx)(O.Z,{stroke:1})},{name:"\u89D2\u8272",path:"/store-manage/settings/role",icon:(0,n.jsx)(J.Z,{stroke:1})},{name:"\u914D\u9001\u65B9\u5F0F",path:"/store-manage/settings/shipping",icon:(0,n.jsx)(F.Z,{stroke:1})}]}];(0,i.$H)(K);var fn=K,xn=e(11329),E=e(74621),Zn=e(51346),yn=function(){var r,t,a=(0,m.pC)(),o=(0,j.o)(),c=(0,m.TH)(),s=(0,i.tC)()?hn:fn,u=(0,i.Oj)(s,function(Q){return(0,i.zh)(o.managerPermissions||{},Q)}),g=(0,l.zO)((0,i.vW)((r=o.storeManager)===null||r===void 0?void 0:r.User)||"--",8),k=(0,q.SZ)((t=o.storeManager)===null||t===void 0||(t=t.User)===null||t===void 0?void 0:t.Avatar),Fn=function(){var d;return(0,l.zd)()?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{display:"none"},children:"in iframe"}),a]}):(0,n.jsx)(_.f,{theme:"light",layout:"top",splitMenus:!0,title:(0,i.tC)()?"\u4E8C\u7EA7\u5355\u4F4D":"\u95E8\u5E97\u7AEF",logo:(0,n.jsx)(E.Zd,{onClick:function(){m.m8.push({pathname:"/store-manage"})}}),appList:(0,i.tC)()?dn.Z:b.Z,menu:{request:function(){var h=Y()(A()().mark(function M(){return A()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",u);case 1:case"end":return C.stop()}},M)}));function v(){return h.apply(this,arguments)}return v}(),params:u},menuItemRender:function(v,M){return(0,E.Pp)(v,M)},location:c,waterMarkProps:{content:["\u95E8\u5E97\u7AEF\uFF1A".concat(g),((d=o.storeManager)===null||d===void 0||(d=d.User)===null||d===void 0||(d=d.UserMobile)===null||d===void 0?void 0:d.MobilePhone)||""].filter(function(h){return h.length>0})},avatarProps:{icon:(0,n.jsx)(w.C,{src:k,children:g}),size:"small",title:g,onClick:function(v){console.log(v),m.m8.push({pathname:"/store-manage/ucenter"})}},actionsRender:function(){return[(0,i.tC)()||(0,n.jsx)(p.ZP,{size:"small",type:"dashed",icon:(0,n.jsx)(vn.Z,{stroke:1}),onClick:function(){m.m8.push({pathname:"/store-manage/order-group/list"})},children:"\u4E0B\u5355\u52A9\u624B"}),(0,i.tC)()||(0,n.jsx)(p.ZP,{size:"small",type:"dashed",icon:(0,n.jsx)(pn.Z,{stroke:1}),onClick:function(){m.m8.push({pathname:"/store-manage/cashier"})},children:"\u6536\u94F6\u53F0"}),(0,i.tC)()||(0,n.jsx)(jn,{}),(0,i.tC)()&&(0,n.jsx)(mn,{})]},token:E.RZ,children:(0,n.jsxs)(xn.Z,{menus:s,children:[(0,n.jsx)("div",{className:"w-full p-2 my-1",children:(0,n.jsx)(Zn.Z,{menus:s})}),a]})})};return(0,n.jsx)(cn,{children:Fn()})}}}]);
