"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[932],{23806:function(Q,S,n){var O=n(1288),t=n(85893);S.Z=function(l){var r=l.model,h=l.fallback;if(r==null||r==null)return null;var a=r==null?void 0:r.CreationTime,c=r==null?void 0:r.LastModificationTime;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{style:{},children:[(0,t.jsx)("div",{children:(0,t.jsx)(O.Z,{prefix:(0,t.jsx)("span",{children:"\u521B\u5EFA\uFF1A"}),onlyDate:!0,timeStr:a,fallback:h})}),(0,t.jsx)("div",{children:(0,t.jsx)(O.Z,{prefix:(0,t.jsx)("span",{children:"\u4FEE\u6539\uFF1A"}),onlyDate:!0,timeStr:c,fallback:h})})]})})}},1288:function(Q,S,n){var O=n(78957),t=n(83062),l=n(46629),r=n(85893);S.Z=function(h){var a,c=h.timeStr,p=h.fallback,s=h.onlyDate,e=h.prefix,f=(a=(0,l.QW)(c))===null||a===void 0?void 0:a.local();if(!f)return p||null;var D=(0,l.ND)().utc().local(),_=f.isSame(D,"year"),F=f.diff(D,"day"),E=_?f.format(l.AK):f.format(l.vc),R=function(){return(0,r.jsxs)("div",{children:[(0,r.jsxs)(O.Z,{direction:"horizontal",children:[(0,r.jsx)("div",{children:f.fromNow()}),(0,r.jsx)("div",{children:f.format(l.On)})]}),(0,r.jsx)("div",{children:f.format(l.t9)})]})};return(0,r.jsx)(t.Z,{title:R(),children:(0,r.jsxs)(O.Z,{direction:"horizontal",children:[e,(0,r.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:s?f.format(l.vc):f.format(l.dq)})]})})}},55529:function(Q,S,n){var O=n(83062),t=n(66309),l=n(78957),r=n(46629),h=n(25619),a=n(85893);S.Z=function(c){var p=c.start,s=c.end,e=function(D){var _=(0,r.QW)(D);return _?(_=_.add(r.Mg,"hour"),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(O.Z,{title:_.format(r.dq),children:(0,a.jsxs)("div",{className:"border-0 border-blue-500 bg-gray-100 p-[0.5] hover:border-1",children:[(0,a.jsxs)("div",{className:"text-blue-500",children:[_.fromNow(),"\uFF0C",_.format(r.On)]}),(0,a.jsx)(t.Z,{icon:(0,a.jsx)(h.Z,{stroke:1}),color:"blue",children:_.format(r.bF)})]})})})):(0,a.jsx)("span",{children:"--"})};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(l.Z,{size:"small",direction:"horizontal",split:(0,a.jsx)("span",{className:"text-slate-400",children:"\u5230"}),children:[e(p),e(s)]})})}},52212:function(Q,S,n){n.r(S);var O=n(97857),t=n.n(O),l=n(5574),r=n.n(l),h=n(30699),a=n(4393),c=n(78957),p=n(72269),s=n(67294),e=n(53357),f=n(95813),D=n(85893);S.default=function(){var _=(0,s.useState)(!0),F=r()(_,2),E=F[0],R=F[1],$=(0,s.useState)({OrderToService:!0}),G=r()($,2),B=G[0],U=G[1],X=(0,s.useState)({}),V=r()(X,2),W=V[0],b=V[1],K=function(L){R(!0),h.x1.mallManager.deliveryQueryPaging(t()({},L)).then(function(M){(0,f._y)(M,function(){b(M.data||{})})}).finally(function(){R(!1)})};return(0,s.useEffect)(function(){K(B)},[]),(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(a.Z,{loading:E,title:"\u914D\u9001",extra:(0,D.jsxs)(c.Z,{direction:"horizontal",children:[(0,D.jsx)(p.Z,{checked:B.OrderToService||!1,onChange:function(L){var M=t()(t()({},B),{},{Page:1,OrderToService:L});U(M),K(M)}}),(0,D.jsx)("span",{children:"\u53EA\u5C55\u793A\u5F85\u670D\u52A1\u8BA2\u5355\u76F8\u5173\u914D\u9001"})]}),children:(0,D.jsx)(e.Z,{data:W.Items||[],pagination:{total:W.TotalCount,pageSize:W.PageSize,current:B.Page,onChange:function(L){var M=t()(t()({},B),{},{Page:L});U(M),K(M)}},refresh:function(){K(t()({},B))}})})})}},53357:function(Q,S,n){n.d(S,{Z:function(){return ie}});var O=n(5574),t=n.n(O),l=n(80799),r=n(40411),h=n(66309),a=n(28036),c=n(67294),p=n(23806),s=n(35291),e=n(85893),f=function(P){var x=P.data,m=x;return m.Delivering?m.Delivered?(0,e.jsx)(r.Z,{status:"success",text:"\u5DF2\u9001\u8FBE"}):(0,e.jsx)(r.Z,{status:"processing",text:"\u914D\u9001\u4E2D"}):(0,e.jsx)(r.Z,{status:"default",text:"\u5F85\u53D1\u8D27"})},D=n(55529),_=n(97857),F=n.n(_),E=n(26412),R=n(45360),$=n(22181),G=n(78957),B=n(85576),U=n(11346),X=n(65233),V=n(57381),W=n(1288),b=n(30699),K=n(46629),A=n(95813),L=function(x){var m,v=x.data;return(0,e.jsxs)(E.Z,{bordered:!0,children:[(0,e.jsx)(E.Z.Item,{label:"\u914D\u9001\u65B9\u5F0F",children:((m=s.Di.find(function(C){return C.id==v.DeliveryType}))===null||m===void 0?void 0:m.name)||"--"}),(0,s.tC)()||(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E.Z.Item,{label:"\u7269\u6D41\u540D\u79F0",children:v.ExpressName}),(0,e.jsx)(E.Z.Item,{label:"\u7269\u6D41\u5355\u53F7",children:v.TrackingNumber})]}),(0,e.jsx)(E.Z.Item,{label:"\u9884\u8BA1\u914D\u9001\u65F6\u95F4",children:(0,e.jsx)(D.Z,{start:v.PreferDeliveryStartTime,end:v.PreferDeliveryEndTime})}),(0,e.jsx)(E.Z.Item,{label:"\u914D\u9001\u72B6\u6001",children:(0,e.jsx)(f,{data:v})}),(0,e.jsx)(E.Z.Item,{label:"\u53D1\u8D27\u65F6\u95F4",children:(0,e.jsx)(W.Z,{timeStr:v.DeliveringTime})}),(0,e.jsx)(E.Z.Item,{label:"\u9001\u8FBE\u65F6\u95F4",children:(0,e.jsx)(W.Z,{timeStr:v.DeliveredTime})}),(0,e.jsx)(E.Z.Item,{label:"\u521B\u5EFA\u65F6\u95F4",span:2,children:(0,e.jsx)(W.Z,{timeStr:v.CreationTime})})]})},M=function(x){var m=x.data,v=[{title:"\u5546\u54C1",render:function(Z,j){var i,T=(i=m.Order)===null||i===void 0||(i=i.Items)===null||i===void 0?void 0:i.find(function(o){return o.Id==j.OrderItemId});return T?"".concat((0,s.CQ)(T.Sku)):(0,e.jsx)("span",{children:"--"})}},{title:"\u6570\u91CF",render:function(Z,j){return j.Quantity||"--"}}];return(0,e.jsx)(l.Z,{columns:v,dataSource:m.Items||[],pagination:!1})},te=function(P){var x=P.detailId,m=P.hide,v=(0,c.useState)(!1),C=t()(v,2),Z=C[0],j=C[1],i=(0,c.useState)({}),T=t()(i,2),o=T[0],Y=T[1],H=!(0,A.Wq)(x),J=(0,c.useState)(void 0),g=t()(J,2),u=g[0],d=g[1],N=(0,c.useState)(!1),w=t()(N,2),q=w[0],ee=w[1],ue=(0,c.useState)(!1),ne=t()(ue,2),de=ne[0],re=ne[1],le=function(I){confirm("\u786E\u8BA4\u6807\u8BB0\u4E3A\u5DF2\u9001\u8FBE\uFF1F")&&(re(!0),b.x1.mallManager.deliveryMarkAsDelivered({Id:I.Id}).then(function(z){(0,A._y)(z,function(){R.ZP.success("\u64CD\u4F5C\u6210\u529F"),k(x)})}).finally(function(){re(!1)}))},se=function(I){ee(!0),b.x1.mallManager.deliveryMarkAsDelivering(F()({},I)).then(function(z){(0,A._y)(z,function(){R.ZP.success("\u64CD\u4F5C\u6210\u529F"),d(void 0),k(x)})}).finally(function(){ee(!1)})},k=function(I){if((0,A.Wq)(I)){Y({});return}j(!0),b.x1.mallManager.deliveryQueryById({Id:I}).then(function(z){Y(z.data.Data||{})}).finally(function(){j(!1)})};(0,c.useEffect)(function(){k(x)},[x]);var oe=function(){return o.DeliveringTime!=null?null:(0,e.jsx)(a.ZP.Group,{children:(0,e.jsx)(a.ZP,{loading:q,type:"primary",onClick:function(){d(o)},children:"\u5F00\u59CB\u914D\u9001"})})},ce=function(){return o.DeliveringTime==null||o.Delivered?null:(0,e.jsx)(a.ZP.Group,{children:(0,e.jsx)(a.ZP,{loading:de,type:"primary",onClick:function(){le(o)},children:"\u5DF2\u5B8C\u6210\u914D\u9001"})})},ve=function(){return o.Delivered?(0,e.jsx)($.ZP,{status:"success",title:"\u914D\u9001\u5DF2\u7ECF\u5B8C\u6210",subTitle:"\u914D\u9001\u5355\uFF1A".concat(o.Id,"\u5DF2\u7ECF\u4E8E").concat((0,K.Gl)(o.DeliveredTime),"\u5B8C\u6210\u914D\u9001")}):null},fe=function(){return(0,A.Wq)(o.Id)?(0,e.jsx)("h1",{children:"data not found"}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(L,{data:o}),(0,e.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:20},children:(0,e.jsxs)(G.Z,{direction:"horizontal",children:[oe(),ce(),ve()]})}),(0,e.jsx)(M,{data:o})]})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(B.Z,{title:"\u53D1\u8D27",open:u!=null,onCancel:function(){d(void 0)},onOk:function(){se(u||{})},okText:"\u6807\u8BB0\u4E3A\u5DF2\u53D1\u8D27",confirmLoading:q,children:[(0,e.jsx)("h6",{style:{marginBottom:10,display:"block"},children:"\u8BF7\u586B\u5199\u7269\u6D41\u4FE1\u606F"}),(0,e.jsxs)(U.Z,{children:[(0,e.jsx)(U.Z.Item,{label:"\u7269\u6D41\u540D\u79F0",children:(0,e.jsx)(X.Z,{placeholder:"\u7269\u6D41\u540D\u79F0",value:(u==null?void 0:u.ExpressName)||"",onChange:function(I){return d(F()(F()({},u),{},{ExpressName:I.target.value}))}})}),(0,e.jsx)(U.Z.Item,{label:"\u7269\u6D41\u5355\u53F7",children:(0,e.jsx)(X.Z,{placeholder:"\u7269\u6D41\u5355\u53F7",value:(u==null?void 0:u.TrackingNumber)||"",onChange:function(I){return d(F()(F()({},u),{},{TrackingNumber:I.target.value}))}})})]})]}),(0,e.jsx)(B.Z,{width:"90%",title:"\u914D\u9001\u5355",open:H,footer:!1,onCancel:function(){m()},onOk:function(){},children:(0,e.jsx)(V.Z,{spinning:Z,children:fe()})})]})},ae=function(x){var m=x.delivery,v=[{title:"",render:function(Z,j,i){return(0,e.jsx)("span",{children:(0,e.jsx)("b",{children:i+1})})}},{title:"\u5546\u54C1",render:function(Z,j){var i,T=(i=m.Order)===null||i===void 0||(i=i.Items)===null||i===void 0?void 0:i.find(function(o){return o.Id==j.OrderItemId});return T==null?(0,e.jsx)("span",{children:"--"}):(0,e.jsx)("span",{children:(0,s.CQ)(T.Sku)})}},{title:"\u91CD\u91CF",render:function(Z,j){var i;return((i=j.OrderItem)===null||i===void 0||(i=i.Sku)===null||i===void 0?void 0:i.Weight)||"--"},hidden:(0,s.tC)()},{title:"\u6570\u91CF",render:function(Z,j){return j.Quantity||"--"}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h2",{children:"\u914D\u9001\u5355\u8BE6\u60C5"}),(0,e.jsx)(l.Z,{size:"small",bordered:!0,columns:v,dataSource:m.Items||[],pagination:!1})]})},ie=function(P){var x=P.data,m=P.pagination,v=P.refresh,C=c.useState(!1),Z=t()(C,2),j=Z[0],i=Z[1],T=(0,c.useState)(void 0),o=t()(T,2),Y=o[0],H=o[1],J=[{title:"\u8BA2\u5355\u72B6\u6001",render:function(u,d){var N=(0,s.wk)(d.Order);return(0,e.jsx)(r.Z,{status:N?"success":"default",text:N?"\u53EF\u670D\u52A1":"\u7B49\u5F85\u8BA2\u5355\u72B6\u6001"})}},{title:"\u914D\u9001\u65B9\u5F0F",render:function(u,d){return(0,e.jsx)(h.Z,{children:(0,s.Y5)(d)})}},{title:"\u914D\u9001\u65F6\u95F4",render:function(u,d){return(0,e.jsx)("div",{children:(0,e.jsx)(D.Z,{start:d.PreferDeliveryStartTime,end:d.PreferDeliveryEndTime})})}},{title:"\u7269\u6D41\u540D\u79F0",render:function(u,d){return d.ExpressName||"--"},hidden:(0,s.tC)()},{title:"\u7269\u6D41\u5355\u53F7",render:function(u,d){return d.TrackingNumber||"--"},hidden:(0,s.tC)()},{title:"\u6536\u8D27\u72B6\u6001",render:function(u,d){return(0,e.jsx)(f,{data:d})}},{title:"\u65F6\u95F4",render:function(u,d){return(0,e.jsx)(p.Z,{model:d})}},{title:"\u64CD\u4F5C",render:function(u,d){return(0,e.jsx)(a.ZP.Group,{children:(0,e.jsx)(a.ZP,{type:"link",onClick:function(){H(d.Id||"")},children:"\u67E5\u770B"})})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(te,{detailId:Y||"",hide:function(){H(void 0),v()}}),(0,e.jsx)(l.Z,{loading:j,dataSource:x,columns:J,rowKey:function(u){return u.Id||""},expandable:{expandedRowRender:function(u){return(0,e.jsx)("div",{style:{padding:10,border:"5px dashed orange"},children:(0,e.jsx)(ae,{delivery:u})})}},pagination:m})]})}}}]);
