"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4897],{23806:function(z,j,n){var x=n(1288),u=n(85893);j.Z=function(l){var t=l.model,a=l.fallback;if(t==null||t==null)return null;var m=t==null?void 0:t.CreationTime,i=t==null?void 0:t.LastModificationTime;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{style:{},children:[(0,u.jsx)("div",{children:(0,u.jsx)(x.Z,{prefix:(0,u.jsx)("span",{children:"\u521B\u5EFA\uFF1A"}),onlyDate:!0,timeStr:m,fallback:a})}),(0,u.jsx)("div",{children:(0,u.jsx)(x.Z,{prefix:(0,u.jsx)("span",{children:"\u4FEE\u6539\uFF1A"}),onlyDate:!0,timeStr:i,fallback:a})})]})})}},1288:function(z,j,n){var x=n(78957),u=n(83062),l=n(46629),t=n(85893);j.Z=function(a){var m,i=a.timeStr,o=a.fallback,f=a.onlyDate,C=a.prefix,s=(m=(0,l.mg)(i))===null||m===void 0?void 0:m.add(l.Mg,"hour");if(!s)return o||null;var c=(0,l.ND)().utc().add(l.Mg,"hour"),J=s.isSame(c,"year"),Y=s.diff(c,"day"),b=J?s.format(l.AK):s.format(l.vc),N=function(){return(0,t.jsxs)("div",{children:[(0,t.jsxs)(x.Z,{direction:"horizontal",children:[(0,t.jsx)("div",{children:s.fromNow()}),(0,t.jsx)("div",{children:s.format(l.On)})]}),(0,t.jsx)("div",{children:s.format(l.t9)})]})};return(0,t.jsx)(u.Z,{title:N(),children:(0,t.jsxs)(x.Z,{direction:"horizontal",children:[C,(0,t.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:f?s.format(l.vc):s.format(l.dq)})]})})}},11518:function(z,j,n){var x=n(55241),u=n(78957),l=n(7134),t=n(55932),a=n(66419),m=n(8885),i=n(85893);j.Z=function(o){var f=o.model;if(!f)return null;var C=(0,t.SZ)(f.Avatar,{width:100,height:100}),s=(0,a.zO)([f.NickName,f.IdentityName,f.Id].filter(function(c){return c&&c.length>0}).at(0)||"--",10);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(x.Z,{content:(0,i.jsx)(m.Z,{model:f}),children:(0,i.jsxs)(u.Z,{direction:"horizontal",children:[(0,i.jsx)(l.C,{size:"small",shape:"square",src:C,children:s}),(0,i.jsx)("span",{children:(0,i.jsx)("a",{children:s})})]})})})}},8885:function(z,j,n){var x=n(78957),u=n(7134),l=n(55932),t=n(66419),a=n(85893);j.Z=function(m){var i,o=m.model;if(!o)return null;var f=(0,l.SZ)(o.Avatar,{width:100,height:100}),C=(0,t.zO)([o.NickName,o.IdentityName,o.Id].filter(function(s){return s&&s.length>0}).at(0)||"--",10);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(x.Z,{direction:"horizontal",children:[(0,a.jsx)("div",{children:(0,a.jsx)(u.C,{src:f,size:100})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["\u6635\u79F0\uFF1A",C]}),(0,a.jsxs)("p",{children:["\u7528\u6237\u540D\uFF1A",(o==null?void 0:o.IdentityName)||"--"]}),(0,a.jsxs)("p",{children:["\u624B\u673A\u53F7\uFF1A",(o==null||(i=o.UserMobile)===null||i===void 0?void 0:i.MobilePhone)||"--"]})]})]})})}},79531:function(z,j,n){n.r(j),n.d(j,{default:function(){return sn}});var x=n(97857),u=n.n(x),l=n(5574),t=n.n(l),a=n(45360),m=n(66309),i=n(78957),o=n(72269),f=n(14726),C=n(4393),s=n(80799),c=n(67294),J=n(23806),Y=n(1288),b=n(11518),N=n(35291),R=n(30699),p=n(66419),V=n(40056),nn=n(62048),en=n(85134),e=n(85893),tn=function(E){var v=E.model;if(!v)return null;if(v.Used)return(0,e.jsx)(V.Z,{message:"\u5361\u5238\u5DF2\u88AB\u4F7F\u7528\uFF0C\u65E0\u6CD5\u5206\u4EAB",type:"info"});if((0,N.ds)(v))return(0,e.jsx)(V.Z,{message:"\u5361\u5238\u5DF2\u8FC7\u671F\uFF0C\u65E0\u6CD5\u5206\u4EAB",type:"error"});var g=(0,p.C6)([window.location.origin,en.v.publicPath||"","/ucenter/gift-card",v.Id||""]);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(C.Z,{title:"\u5145\u503C\u5361",bordered:!0,hoverable:!0,children:(0,e.jsxs)(i.Z,{direction:"vertical",children:[(0,e.jsxs)(i.Z,{direction:"horizontal",children:[(0,e.jsx)("h3",{children:"\u5361\u9762\u91D1\u989D"}),(0,e.jsx)(m.Z,{color:"warning",bordered:!0,children:(0,p.lb)(v.Amount||0)})]}),(0,e.jsx)(V.Z,{message:"\u6B64\u5361\u4E3A\u4E0D\u8BB0\u540D\u5145\u503C\u5361\uFF0C\u8BF7\u52FF\u6CC4\u9732\u7ED9\u4ED6\u4EBA\uFF01\u4EE5\u514D\u9020\u6210\u60A8\u8D22\u4EA7\u635F\u5931\u3002"}),(0,e.jsx)(nn.Z,{value:g,style:{width:128}}),(0,e.jsx)("a",{href:g,target:"_blank",children:g})]})})})},rn=n(85576),an=n(57381),y=n(11346),un=n(24435),dn=n(96864),$=n(46629),ln=function(E){var v,g=E.show,I=E.hide,Z=E.data,O=E.ok,B=(0,c.useState)(!1),P=t()(B,2),K=P[0],A=P[1],G=(0,c.useState)({}),Q=t()(G,2),S=Q[0],T=Q[1],D=function(F){A(!0),R.x1.mallAdmin.giftCardCreate(F).then(function(L){L.data.Error?a.ZP.error(L.data.Error.Message):(a.ZP.success("\u4FDD\u5B58\u6210\u529F"),O())}).finally(function(){A(!1)})};return(0,c.useEffect)(function(){T(u()({},Z))},[Z]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(rn.Z,{open:g,onCancel:function(){return I()},onOk:function(){return D(S)},children:(0,e.jsx)(an.Z,{spinning:K,children:(0,e.jsxs)(y.Z,{labelCol:{flex:"110px"},labelAlign:"right",wrapperCol:{flex:1},children:[(0,e.jsx)(y.Z.Item,{label:"\u5361\u9762\u91D1\u989D",children:(0,e.jsx)(un.Z,{value:S.Amount||0,onChange:function(F){T(u()(u()({},S),{},{Amount:F||0}))}})}),(0,e.jsx)(y.Z.Item,{label:"\u8FC7\u671F\u65F6\u95F4",name:"EndTime",children:(0,e.jsx)(dn.default,{allowClear:!0,value:(v=(0,$.mg)(S.EndTime))===null||v===void 0?void 0:v.add($.Mg,"hour"),onChange:function(F){T(u()(u()({},S),{},{EndTime:F==null?void 0:F.add(-$.Mg,"hour").format($.dq)}))}})})]})})})})},on=function(E){var v=E.query,g=E.onSearch,I=(0,c.useState)({}),Z=t()(I,2),O=Z[0],B=Z[1],P=function(A){A.Page=1,g&&g(A)};return(0,c.useEffect)(function(){B(u()({},v))},[v]),(0,e.jsx)(C.Z,{bordered:!1,style:{marginBottom:10},children:(0,e.jsxs)(y.Z,{children:[(0,e.jsx)(y.Z.Item,{label:"\u662F\u5426\u4F7F\u7528",children:(0,e.jsx)(o.Z,{checked:!1,disabled:!0})}),(0,e.jsx)(y.Z.Item,{children:(0,e.jsx)(f.ZP,{type:"primary",htmlType:"submit",onClick:function(){P(O)},children:"\u641C\u7D22"})})]})})},sn=function(){var E=(0,c.useState)(!0),v=t()(E,2),g=v[0],I=v[1],Z=(0,c.useState)(void 0),O=t()(Z,2),B=O[0],P=O[1],K=(0,c.useState)({Items:[],TotalCount:0}),A=t()(K,2),G=A[0],Q=A[1],S=(0,c.useState)({Page:1}),T=t()(S,2),D=T[0],M=T[1],F=(0,c.useState)(void 0),L=t()(F,2),_=L[0],X=L[1],cn=(0,c.useState)(void 0),k=t()(cn,2),w=k[0],H=k[1],U=function(d){I(!0),R.x1.mallAdmin.giftCardQueryPaging(d).then(function(r){r.data.Error?a.ZP.error(r.data.Error.Message):Q(r.data||{})}).finally(function(){I(!1)})},fn=function(d){confirm("\u5220\u9664\u5145\u503C\u5361\uFF1F")&&(H(d.Id||""),R.x1.mallAdmin.giftCardUpdateStatus({Id:d.Id,IsDeleted:!0}).then(function(r){r.data.Error?a.ZP.error(r.data.Error.Message):(a.ZP.success("\u5220\u9664\u6210\u529F"),U(D))}).finally(function(){H("")}))},vn=[{title:"\u91D1\u989D",render:function(d,r){return(0,e.jsx)(m.Z,{color:"warning",children:(0,p.lb)(r.Amount||0)})}},{title:"\u622A\u81F3\u65E5\u671F",render:function(d,r){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(i.Z,{direction:"vertical",children:[(0,e.jsx)(Y.Z,{timeStr:r.EndTime}),(0,N.ds)(r)&&(0,e.jsx)(m.Z,{color:"red",children:"\u5DF2\u8FC7\u671F"})]})})}},{title:"\u4F7F\u7528\u4EBA",render:function(d,r){var W;return(r.UserId||0)<=0?(0,e.jsx)(m.Z,{color:"success",children:"\u672A\u4F7F\u7528"}):(0,e.jsx)(b.Z,{model:(W=r.StoreUser)===null||W===void 0?void 0:W.User})}},{title:"\u6FC0\u6D3B\u72B6\u6001",render:function(d,r){return r.Used?null:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(o.Z,{loading:w==r.Id,checked:r.IsActive,onChange:function(q){confirm("\u786E\u5B9A\u4FEE\u6539\u72B6\u6001\u4E3A\uFF1A".concat(q?"\u6FC0\u6D3B":"\u51BB\u7ED3"))&&(H(r.Id),R.x1.mallAdmin.giftCardUpdateStatus({Id:r.Id,IsActive:q}).then(function(hn){(0,p._y)(hn,function(){U(D)})}).finally(function(){return H(void 0)}))}})})}},{title:"\u65F6\u95F4",render:function(d,r){return(0,e.jsx)(J.Z,{model:r})}},{title:"\u64CD\u4F5C",width:200,render:function(d,r){return r.Used?null:(0,e.jsx)(f.ZP.Group,{children:(0,e.jsx)(f.ZP,{loading:w==r.Id,type:"link",danger:!0,onClick:function(){fn(r)},children:"\u5220\u9664"})})}}];return(0,c.useEffect)(function(){U(D)},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ln,{show:_!=null,hide:function(){return X(void 0)},data:_||{},ok:function(){X(void 0),U(D)}}),(0,e.jsx)(on,{query:D,onSearch:function(d){M(d),U(d)}}),(0,e.jsx)(C.Z,{title:"\u5145\u503C\u5361",extra:(0,e.jsx)(f.ZP,{type:"primary",onClick:function(){X({})},children:"\u65B0\u589E"}),children:(0,e.jsx)(s.Z,{rowKey:function(d){return d.Id||""},loading:g,columns:vn,dataSource:G.Items||[],expandable:{expandedRowRender:function(d){return(0,e.jsx)("div",{style:{padding:10,border:"5px dashed orange"},children:(0,e.jsx)(tn,{model:d})})},expandedRowKeys:B?[B]:[],onExpand:function(d,r){P(d?r.Id:void 0)}},pagination:{showSizeChanger:!1,pageSize:20,current:D.Page,total:G.TotalCount,onChange:function(d){var r=u()(u()({},D),{},{Page:d});M(r),U(r)}}})})]})}}}]);
