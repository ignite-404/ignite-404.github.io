"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[160],{96911:function(O,m,r){var f=r(32983),s=r(85893);m.Z=function(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:100},children:(0,s.jsx)(f.Z,{})})})}},64080:function(O,m,r){var f=r(21274),s=r(85893);m.Z=function(v){var l=v.loading,E=v.hasMore;return l?(0,s.jsx)(f.Z,{}):E?null:(0,s.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:(0,s.jsx)("span",{className:"text-slate-400",children:"\u6CA1\u6709\u66F4\u591A\u4E86"})})}},85685:function(O,m,r){r.d(m,{Z:function(){return j}});var f=r(38295),s=r(47650),v=r(66419),l=r(38787),E=r(48135),d=r(85893);function j(o){var P=o.children,_=o.rightButtons,p=o.leftButtons,D=(0,f.o)(),C=function(){window.history.length>1?s.m8.back():s.m8.push({pathname:"/"})},R=function(){return(0,d.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,v.G5)(p)&&(0,d.jsxs)("div",{className:"flex-row-center cursor-pointer gap-1",onClick:function(h){h.preventDefault(),h.stopPropagation(),C()},children:[(0,d.jsx)(l.A,{size:"lg",color:"default",radius:"full",variant:"light",isIconOnly:!0,onClick:function(h){h.preventDefault(),h.stopPropagation(),C()},children:(0,d.jsx)(E.Z,{stroke:1})}),(0,d.jsx)("h1",{className:"text-title m-0 p-0",children:window.document.title||D.getAppName()})]}),p==null?void 0:p.map(function(M){return M})]})};return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"container max-w-lg",children:[(0,d.jsxs)("div",{className:"flex-row-between py-1",children:[R(),(0,d.jsx)("div",{className:"flex-row-center gap-2",children:_==null?void 0:_.map(function(g){return g})})]}),(0,d.jsx)("div",{children:P})]})})}},57841:function(O,m,r){r.r(m),r.d(m,{default:function(){return c}});var f=r(15009),s=r.n(f),v=r(97857),l=r.n(v),E=r(99289),d=r.n(E),j=r(5574),o=r.n(j),P=r(68770),_=r(67294),p=r(64080),D=r(85685),C=r(30699),R=r(46629),g=r(66419),M=r(45837),h=r(24862),N=r(19314),B=r(84367),T=r(22845),i=r(85893),w=function(S){var n,a,u=S.model;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(M.w,{className:"w-full",isHoverable:!0,isPressable:!0,shadow:"sm",children:[(0,i.jsx)(h.u,{className:"flex-col items-start px-4 pb-0 pt-2",children:(0,i.jsx)("h3",{className:"uppercase text-title",children:((n=u.Coupon)===null||n===void 0?void 0:n.Name)||"--"})}),(0,i.jsx)(N.G,{children:(0,i.jsx)("h5",{className:"text-subtitle text-orange-600",children:"\u4F18\u60E0\u91D1\u989D\uFF1A".concat((0,g.lb)(((a=u.Coupon)===null||a===void 0?void 0:a.Price)||0))})}),(0,g.Wq)(u.ExpiredAt)||(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B.j,{}),(0,i.jsx)(T.i,{children:(0,i.jsxs)("p",{className:"text-caption text-tiny",children:["\u8FC7\u671F\u65F6\u95F4\uFF1A",(0,R.Gl)(u.ExpiredAt||"")]})})]})]})})},I=r(96911);function c(){var S=(0,_.useState)({}),n=o()(S,2),a=n[0],u=n[1],e=(0,P.Z)(function(){var U=d()(s()().mark(function y(A){var K,$;return s()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,C.x1.mall.couponQueryUserCouponPaging(l()(l()({},a),{},{Page:((A==null||(K=A.res)===null||K===void 0?void 0:K.PageIndex)||0)+1}));case 2:return $=x.sent,x.abrupt("return",{list:$.data.Items||[],res:$.data});case 4:case"end":return x.stop()}},y)}));return function(y){return U.apply(this,arguments)}}(),{target:window.document,isNoMore:function(y){var A;return(y==null||(A=y.res)===null||A===void 0?void 0:A.IsEmpty)||!1},reloadDeps:[a]}),t=e.loading,L=e.loadingMore,G=e.mutate,Z=e.noMore,W=e.data,F=(W==null?void 0:W.list)||[];return(0,_.useEffect)(function(){G({list:[]})},[a]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(D.Z,{children:(0,i.jsxs)("div",{className:"container max-w-lg",children:[(0,i.jsxs)("div",{className:"p-1",children:[F.length<=0&&(0,i.jsx)(I.Z,{}),F.map(function(U,y){return(0,i.jsx)("div",{className:"mb-2",onClick:function(){},children:(0,i.jsx)(w,{model:U})},y)})]}),(0,i.jsx)(p.Z,{loading:t||L,hasMore:!Z})]})})})}},38295:function(O,m,r){r.d(m,{o:function(){return S}});var f=r(15009),s=r.n(f),v=r(99289),l=r.n(v),E=r(19632),d=r.n(E),j=r(47650),o=r(30699),P=r(85134),_=r(66419),p=function(a){var u=c.mallSettings||{},e=[u.StoreNickName,u.StoreEnglishName];a?e=[u.StoreOfficialName,u.StoreOfficialEnglishName].concat(d()(e)):e=[].concat(d()(e),[u.StoreOfficialName,u.StoreOfficialEnglishName]);var t=e.filter(function(L){return!(0,_.Wq)(L)}).at(0);return t||P.v.app.name||P.v.app.english_name},D=function(){var n=l()(s()().mark(function a(){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.x1.mall.notificationUnReadCount().then(function(t){c.notificationCount=t.data.Data||0});case 2:case"end":return e.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),C=function(){var n=l()(s()().mark(function a(){var u;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.x1.mallAdmin.gradeListGrades();case 2:u=t.sent,c.grades=u.data.Data||[];case 4:case"end":return t.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),R=function(){var n=l()(s()().mark(function a(){var u;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.x1.mallAdmin.storeQueryStores();case 2:u=t.sent,c.stores=u.data.Data||[];case 4:case"end":return t.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),g=function(){var n=l()(s()().mark(function a(){var u;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.x1.mall.shoppingCartCount();case 2:u=t.sent,c.shoppingCartCount=u.data.Data||0;case 4:case"end":return t.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),M=function(){var n=l()(s()().mark(function a(){var u;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.x1.mall.storeGetCurrentStore();case 2:u=t.sent,c.currentStore=u.data.Data||{};case 4:case"end":return t.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),h=function(){var n=l()(s()().mark(function a(){var u;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.x1.mall.storeMostNearbyStore();case 2:u=t.sent,c.mostNearbyStore=u.data.Data||{};case 4:case"end":return t.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),N=function(){var n=l()(s()().mark(function a(){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.x1.platform.userAuth().then(function(t){c.userAuthResult=t.data||{}});case 2:case"end":return e.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),B=function(){var n=l()(s()().mark(function a(){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.x1.sys.adminAuth().then(function(t){c.adminAuthResult=t.data||{}});case 2:case"end":return e.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),T=function(){var n=l()(s()().mark(function a(){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.x1.sys.manageAdminQueryAdminPermissions().then(function(t){c.adminPermissions=t.data||{}});case 2:case"end":return e.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),i=function(){var n=l()(s()().mark(function a(){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.x1.mallManager.storeManagerPermissionGetMyPermission().then(function(t){c.managerPermissions=t.data||{}});case 2:case"end":return e.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),w=function(){var n=l()(s()().mark(function a(){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.x1.mallManager.storeManagerAuth().then(function(t){c.storeManagerAuthResult=t.data||{}});case 2:case"end":return e.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),I=function(){var n=l()(s()().mark(function a(){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.x1.mall.userStoreUserAuth().then(function(t){c.storeUserAuthResult=t.data||{}});case 2:case"end":return e.stop()}},a)}));return function(){return n.apply(this,arguments)}}(),c=(0,j.sj)({queryUserAuthResult:N,getAppName:p,queryAdminAuthResult:B,queryStoreManagerAuthResult:w,queryStoreUserAuthResult:I,queryAdminPermission:T,queryStoreManagerPermission:i,queryGrades:C,queryStores:R,queryNotificationCount:D,queryShoppingCartCount:g,queryCurrentStore:M,queryMostNearbyStore:h,messageHistory:[],grades:[],stores:[],notificationCount:0,headerHeight:0,bottomHeight:0,mallSettings:{},shoppingCartCount:0,currentStore:void 0,mostNearbyStore:void 0,userAuthResult:void 0,adminAuthResult:void 0,adminPermissions:void 0,storeUserAuthResult:void 0,storeManagerAuthResult:void 0,managerPermissions:void 0,get user(){var n;return(n=this.userAuthResult)===null||n===void 0?void 0:n.User},get admin(){var n;return(n=this.adminAuthResult)===null||n===void 0?void 0:n.Admin},get storeUser(){var n;return(n=this.storeUserAuthResult)===null||n===void 0?void 0:n.StoreUser},get storeManager(){var n;return(n=this.storeManagerAuthResult)===null||n===void 0?void 0:n.StoreManager}}),S=function(){return(0,j.ey)(c)}}}]);
