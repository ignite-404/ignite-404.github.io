"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6346],{74590:function(ue,J,n){var Y=n(15009),r=n.n(Y),k=n(99289),t=n.n(k),b=n(5574),Q=n.n(b),W=n(83062),C=n(14726),H=n(67294),l=n(85893);J.Z=function(m){var F=m.action,V=m.confirmText,N=m.hide,X=(0,H.useState)(!1),ne=Q()(X,2),ee=ne[0],te=ne[1],re=V||"\u786E\u5B9A\u5220\u9664\uFF1F",z=function(){var I=t()(r()().mark(function e(){return r()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(confirm(re)){T.next=2;break}return T.abrupt("return");case 2:return te(!0),T.prev=3,T.next=6,F();case 6:return T.prev=6,te(!1),T.finish(6);case 9:case"end":return T.stop()}},e,null,[[3,,6,9]])}));return function(){return I.apply(this,arguments)}}();return N?null:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(W.Z,{title:re,children:(0,l.jsx)(C.ZP,{loading:ee,danger:!0,type:"link",onClick:function(){z()},children:"\u5220\u9664"})})})}},23806:function(ue,J,n){var Y=n(1288),r=n(85893);J.Z=function(k){var t=k.model,b=k.fallback;if(t==null||t==null)return null;var Q=t==null?void 0:t.CreationTime,W=t==null?void 0:t.LastModificationTime;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{style:{},children:[(0,r.jsx)("div",{children:(0,r.jsx)(Y.Z,{prefix:(0,r.jsx)("span",{children:"\u521B\u5EFA\uFF1A"}),onlyDate:!0,timeStr:Q,fallback:b})}),(0,r.jsx)("div",{children:(0,r.jsx)(Y.Z,{prefix:(0,r.jsx)("span",{children:"\u4FEE\u6539\uFF1A"}),onlyDate:!0,timeStr:W,fallback:b})})]})})}},1288:function(ue,J,n){var Y=n(78957),r=n(83062),k=n(46629),t=n(85893);J.Z=function(b){var Q,W=b.timeStr,C=b.fallback,H=b.onlyDate,l=b.prefix,m=(Q=(0,k.mg)(W))===null||Q===void 0?void 0:Q.add(k.Mg,"hour");if(!m)return C||null;var F=(0,k.ND)().utc().add(k.Mg,"hour"),V=m.isSame(F,"year"),N=m.diff(F,"day"),X=V?m.format(k.AK):m.format(k.vc),ne=function(){return(0,t.jsxs)("div",{children:[(0,t.jsxs)(Y.Z,{direction:"horizontal",children:[(0,t.jsx)("div",{children:m.fromNow()}),(0,t.jsx)("div",{children:m.format(k.On)})]}),(0,t.jsx)("div",{children:m.format(k.t9)})]})};return(0,t.jsx)(r.Z,{title:ne(),children:(0,t.jsxs)(Y.Z,{direction:"horizontal",children:[l,(0,t.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:H?m.format(k.vc):m.format(k.dq)})]})})}},11518:function(ue,J,n){var Y=n(55241),r=n(78957),k=n(7134),t=n(55932),b=n(66419),Q=n(8885),W=n(85893);J.Z=function(C){var H=C.model;if(!H)return null;var l=(0,t.SZ)(H.Avatar,{width:100,height:100}),m=(0,b.zO)([H.NickName,H.IdentityName,H.Id].filter(function(F){return F&&F.length>0}).at(0)||"--",10);return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(Y.Z,{content:(0,W.jsx)(Q.Z,{model:H}),children:(0,W.jsxs)(r.Z,{direction:"horizontal",children:[(0,W.jsx)(k.C,{size:"small",shape:"square",src:l,children:m}),(0,W.jsx)("span",{children:(0,W.jsx)("a",{children:m})})]})})})}},8885:function(ue,J,n){var Y=n(78957),r=n(7134),k=n(55932),t=n(66419),b=n(85893);J.Z=function(Q){var W,C=Q.model;if(!C)return null;var H=(0,k.SZ)(C.Avatar,{width:100,height:100}),l=(0,t.zO)([C.NickName,C.IdentityName,C.Id].filter(function(m){return m&&m.length>0}).at(0)||"--",10);return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(Y.Z,{direction:"horizontal",children:[(0,b.jsx)("div",{children:(0,b.jsx)(r.C,{src:H,size:100})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{children:["\u6635\u79F0\uFF1A",l]}),(0,b.jsxs)("p",{children:["\u7528\u6237\u540D\uFF1A",(C==null?void 0:C.IdentityName)||"--"]}),(0,b.jsxs)("p",{children:["\u624B\u673A\u53F7\uFF1A",(C==null||(W=C.UserMobile)===null||W===void 0?void 0:W.MobilePhone)||"--"]})]})]})})}},64766:function(ue,J,n){n.r(J),n.d(J,{default:function(){return Ne}});var Y=n(5574),r=n.n(Y),k=n(92398),t=n(67294),b=n(47650),Q=n(17226),W=n(87399),C=n(27909),H=n(97857),l=n.n(H),m=n(45360),F=n(14726),V=n(85576),N=n(11346),X=n(25278),ne=n(24435),ee=n(4393),te=n(80799),re=n(38295),z=n(30699),I=n(66419),e=n(85893),ie=function(){var h=(0,t.useState)(!1),s=r()(h,2),a=s[0],j=s[1],p=(0,t.useState)(!1),_=r()(p,2),E=_[0],D=_[1],P=(0,t.useState)(""),f=r()(P,2),Z=f[0],B=f[1],R=(0,t.useState)(!1),v=r()(R,2),O=v[0],L=v[1],G=(0,t.useState)({}),y=r()(G,2),S=y[0],U=y[1],q=(0,re.o)(),se=function(){j(!0),q.queryGrades().finally(function(){return j(!1)})},M=function(w){D(!0),z.x1.mallAdmin.gradeSave(l()({},w)).then(function(K){(0,I._y)(K,function(){m.ZP.success("\u4FDD\u5B58\u6210\u529F"),L(!1),se()})}).finally(function(){D(!1)})},x=function(w){confirm("\u786E\u5B9A\u5220\u9664\uFF1F")&&(B(w.Id||""),z.x1.mallAdmin.gradeUpdateStatus({Id:w.Id,IsDeleted:!0}).then(function(K){(0,I._y)(K,function(){m.ZP.success("\u5220\u9664\u6210\u529F"),se()})}).finally(function(){B("")}))},d=[{title:"\u4F1A\u5458\u540D",render:function(w,K){return K.Name}},{title:"\u4F1A\u5458\u63CF\u8FF0",render:function(w,K){return K.Description}},{title:"\u6392\u5E8F",render:function(w,K){return K.Sort}},{title:"\u4F1A\u5458\u4EBA\u6570",render:function(w,K){return K.UserCount}},{title:"\u64CD\u4F5C",width:200,render:function(w,K){return(0,e.jsxs)(F.ZP.Group,{children:[(0,e.jsx)(F.ZP,{type:"link",onClick:function(){U(K),L(!0)},children:"\u7F16\u8F91"}),(0,e.jsx)(F.ZP,{type:"link",loading:Z===K.Id,onClick:function(){x(K)},danger:!0,children:"\u5220\u9664"})]})}}];return(0,t.useEffect)(function(){se()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{title:"\u7F16\u8F91\u4EF7\u683C",open:O,onCancel:function(){L(!1)},confirmLoading:E,onOk:function(){M(S)},children:(0,e.jsxs)(N.Z,{children:[(0,e.jsx)(N.Z.Item,{label:"\u540D\u79F0",children:(0,e.jsx)(X.Z,{value:S.Name||"",onChange:function(w){U(function(K){return l()(l()({},K),{},{Name:w.target.value})})}})}),(0,e.jsx)(N.Z.Item,{label:"\u63CF\u8FF0",children:(0,e.jsx)(X.Z,{value:S.Description||"",onChange:function(w){U(function(K){return l()(l()({},K),{},{Description:w.target.value})})}})}),(0,e.jsx)(N.Z.Item,{label:"\u6392\u5E8F",children:(0,e.jsx)(ne.Z,{value:S.Sort||0,onChange:function(w){U(function(K){return l()(l()({},K),{},{Sort:w||0})})}})})]})}),(0,e.jsx)(ee.Z,{title:"\u4F1A\u5458\u7B49\u7EA7",loading:a,style:{marginBottom:10},extra:(0,e.jsx)(F.ZP,{type:"primary",onClick:function(){L(!0),U({})},children:"\u65B0\u589E"}),children:(0,e.jsx)(te.Z,{dataSource:(0,I.iu)(q.grades||[]),columns:d,pagination:!1})})]})},T=n(34041),le=n(23806),o=n(1288),c=n(11518),A=n(35291),i=n(40056),u=n(71230),ae=n(15746),ce=n(55742),oe=n(66309),ge=function(h){var s=h.model,a=h.ok,j=(0,t.useState)(!1),p=r()(j,2),_=p[0],E=p[1],D=(0,t.useState)(!1),P=r()(D,2),f=P[0],Z=P[1],B=(0,t.useState)({}),R=r()(B,2),v=R[0],O=R[1],L=function(){if((v.Balance||0)<=0){m.ZP.error("\u91D1\u989D\u4E0D\u80FD\u4E3A0");return}E(!0),v.UserId=s.Id||0,z.x1.mallAdmin.balanceUpdateUserBalance(v).then(function(S){(0,I._y)(S,function(){m.ZP.success("\u4FDD\u5B58\u6210\u529F"),Z(!1),a&&a()})}).finally(function(){E(!1)})};(0,t.useEffect)(function(){f&&O({ActionType:1,Balance:0,UserId:0,Message:""})},[f]);var G=v.ActionType==-1?s.Balance:9999999;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(V.Z,{title:"\u8C03\u6574",open:f,onCancel:function(){Z(!1)},confirmLoading:_,onOk:function(){L()},children:[(0,e.jsx)(i.Z,{message:"\u5F53\u524D\u4F59\u989D\uFF1A".concat(s.Balance),style:{marginBottom:10}}),(0,e.jsxs)(u.Z,{gutter:[15,15],children:[(0,e.jsx)(ae.Z,{span:24,children:(0,e.jsx)(ne.Z,{title:"\u91D1\u989D",min:0,max:G,value:v.Balance,onChange:function(S){O(l()(l()({},v),{},{Balance:S||0}))}})}),(0,e.jsx)(ae.Z,{span:24,children:(0,e.jsxs)(ce.ZP.Group,{value:v.ActionType,onChange:function(S){O(l()(l()({},v),{},{ActionType:S.target.value}))},children:[(0,e.jsx)(ce.ZP,{value:-1,children:"\u6263\u51CF"}),(0,e.jsx)(ce.ZP,{value:1,children:"\u5145\u503C"})]})}),(0,e.jsx)(ae.Z,{span:24,children:(0,e.jsx)(X.Z.TextArea,{placeholder:"\u63CF\u8FF0\u4E00\u4E0B\u8FD9\u6B21\u8C03\u6574...",value:v.Message||"",onChange:function(S){O(l()(l()({},v),{},{Message:S.target.value}))}})})]})]}),(0,e.jsx)(oe.Z,{color:"warning",onClick:function(){Z(!0)},style:{cursor:"pointer"},children:(0,I.lb)(s.Balance||0)})]})},fe=n(72269),je=function(h){var s=h.query,a=h.onSearch,j=(0,t.useState)({}),p=r()(j,2),_=p[0],E=p[1],D=function(f){f.Page=1,a&&a(f)};return(0,t.useEffect)(function(){E(l()({},s))},[s]),(0,e.jsx)(ee.Z,{bordered:!1,style:{marginBottom:10},children:(0,e.jsxs)(N.Z,{labelCol:{span:8},children:[(0,e.jsx)(N.Z.Item,{label:"\u6FC0\u6D3B",children:(0,e.jsx)(fe.Z,{checked:_.Active||!1,onChange:function(f){E(l()(l()({},_),{},{Active:f}))}})}),(0,e.jsx)(N.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(F.ZP,{type:"primary",onClick:function(){return D(_)},children:"\u641C\u7D22"})})]})})},de=n(78957),xe=function(s){var a=s.ok,j=s.model,p=(0,t.useState)(!1),_=r()(p,2),E=_[0],D=_[1],P=(0,t.useState)(!1),f=r()(P,2),Z=f[0],B=f[1],R=(0,t.useState)({}),v=r()(R,2),O=v[0],L=v[1],G=function(S){D(!0),z.x1.mallAdmin.userUpdateStatus(l()({},S)).then(function(U){(0,I._y)(U,function(){m.ZP.success("\u4FDD\u5B58\u6210\u529F"),a&&a()})}).finally(function(){D(!1)})};return(0,t.useEffect)(function(){L({IsActive:j.IsActive,Id:j.Id})},[j]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{title:"\u4FEE\u6539\u72B6\u6001",confirmLoading:E,open:Z,onCancel:function(){B(!1)},onOk:function(){G(O)},style:{padding:0},children:(0,e.jsxs)(N.Z,{children:[(0,e.jsx)(N.Z.Item,{hidden:!0,name:"Id",children:(0,e.jsx)(X.Z,{})}),(0,e.jsx)(N.Z.Item,{label:"\u662F\u5426\u6FC0\u6D3B",children:(0,e.jsx)(fe.Z,{checked:O.IsActive||!1,onChange:function(S){L(function(U){return l()(l()({},U),{},{IsActive:S})})}})})]})}),(0,e.jsxs)(de.Z,{children:[j.IsActive?(0,e.jsx)(oe.Z,{color:"green",children:"\u6B63\u5E38"}):(0,e.jsx)(oe.Z,{color:"error",children:"\u7981\u7528"}),(0,e.jsx)(F.ZP,{size:"small",type:"link",onClick:function(){B(!0)},children:"\u4FEE\u6539"})]})]})},Se=xe,ye=function(){var h=(0,t.useState)({Page:1}),s=r()(h,2),a=s[0],j=s[1],p=(0,t.useState)(!1),_=r()(p,2),E=_[0],D=_[1],P=(0,t.useState)(0),f=r()(P,2),Z=f[0],B=f[1],R=(0,t.useState)({}),v=r()(R,2),O=v[0],L=v[1],G=(0,re.o)(),y=function(x){D(!0),z.x1.mallAdmin.userQueryPaging(l()({},x)).then(function(d){(0,I._y)(d,function(){L(d.data||{})})}).finally(function(){D(!1)})},S=function(x,d){confirm("\u786E\u5B9A\u8BBE\u7F6E\uFF1F")&&(B(x.Id||0),z.x1.mallAdmin.gradeSetUserGrade({UserId:x.Id,GradeId:d}).then(function(g){(0,I._y)(g,function(){m.ZP.success("\u8BBE\u7F6E\u6210\u529F"),y(a)})}).finally(function(){B(0)}))},U=[{title:"\u8D26\u53F7\u4E3B\u4F53",render:function(x,d){return(0,e.jsx)(c.Z,{model:d.User})}},{key:"user-grade",title:"\u4F1A\u5458\u7B49\u7EA7",render:function(x,d){var g;return(0,e.jsx)(T.Z,{size:"small",loading:Z==d.Id,onChange:function(K){S(d,K)},value:(g=d.Grade)===null||g===void 0?void 0:g.Id,options:G.grades.map(function(w){return{key:w.Id,label:w.Name,value:w.Id}}),allowClear:!0,placeholder:"\u9009\u62E9\u4F1A\u5458\u7B49\u7EA7",style:{minWidth:150}})}},{title:"\u624B\u673A\u53F7",render:function(x,d){var g;return((g=d.User)===null||g===void 0||(g=g.UserMobile)===null||g===void 0?void 0:g.MobilePhone)||"--"}},{key:"balance",title:"\u8D26\u6237\u4F59\u989D",render:function(x,d){return(0,e.jsx)(ge,{model:d,ok:function(){y(a)}})}},{title:"\u4F59\u989D\u79EF\u5206",render:function(x,d){return d.Points}},{title:"\u5386\u53F2\u79EF\u5206",render:function(x,d){return d.HistoryPoints}},{title:"\u72B6\u6001",render:function(x,d){return(0,e.jsx)(Se,{model:d,ok:function(){y(a)}})}},{title:"\u6700\u8FD1\u4E0A\u7EBF\u65F6\u95F4",render:function(x,d){return(0,e.jsx)(o.Z,{timeStr:d.LastActivityTime})}},{title:"\u65F6\u95F4",render:function(x,d){return(0,e.jsx)(le.Z,{model:d})}},{title:"\u64CD\u4F5C",width:200,render:function(x,d){return(0,e.jsx)(F.ZP.Group,{children:(0,e.jsx)(F.ZP,{type:"link",onClick:function(){alert("todo")},children:"\u67E5\u770B"})})}}],q=["user-grade"],se=U.filter(function(M){return q.indexOf(M.key)<=0});return(0,t.useEffect)(function(){G.queryGrades().finally(function(){y(a)})},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(je,{query:a,onSearch:function(x){j(x),y(x)}}),(0,e.jsx)(ee.Z,{title:"\u5546\u57CE\u4F1A\u5458",loading:E,style:{marginBottom:10},extra:(0,e.jsx)(F.ZP,{type:"text",onClick:function(){b.m8.push("/admin/settings/user/list")},children:"\u67E5\u770B\u5E73\u53F0\u7528\u6237\u4FE1\u606F"}),children:(0,e.jsx)(te.Z,{dataSource:O.Items||[],columns:(0,A.tC)()?se:U,pagination:{pageSize:O.PageSize,total:O.TotalCount,onChange:function(x,d){var g=l()(l()({},a),{},{Page:x});j(g),y(g)}}})})]})},me=n(40411),Ce=n(96074),pe=function(h){var s=h.show,a=h.hide,j=h.ok,p=(0,t.useState)(!1),_=r()(p,2),E=_[0],D=_[1],P=(0,t.useState)({}),f=r()(P,2),Z=f[0],B=f[1],R=function(O){D(!0),z.x1.sys.manageUserCreateUser(O).then(function(L){L.data.Error?m.ZP.error(L.data.Error.Message):(m.ZP.success("\u4FDD\u5B58\u6210\u529F"),j&&j())}).finally(function(){D(!1)})};return(0,t.useEffect)(function(){s&&B({})},[s]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(V.Z,{title:"\u65B0\u589E\u7528\u6237",confirmLoading:E,open:s,onCancel:function(){a&&a()},footer:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(F.ZP,{type:"primary",onClick:function(){R(Z)},children:"\u4FDD\u5B58"})}),children:(0,e.jsx)(N.Z,{children:(0,e.jsx)(N.Z.Item,{label:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{pattern:new RegExp("^[a-zA-Z0-9_]{3,20}$"),message:"\u7528\u6237\u540D\u5FC5\u987B\u662F3-16\u4F4D\u5B57\u6BCD\u3001\u6570\u5B57\u6216\u4E0B\u5212\u7EBF"}],children:(0,e.jsx)(X.Z,{value:Z.IdentityName||"",onChange:function(O){B(function(L){return l()(l()({},L),{},{IdentityName:O.target.value})})}})})})})})},ve=n(68421),Ee=n(26380),Pe=function(h){var s,a,j=h.model,p=h.ok,_=j,E=(0,t.useState)(!1),D=r()(E,2),P=D[0],f=D[1],Z=(0,t.useState)(""),B=r()(Z,2),R=B[0],v=B[1];if(!_)return null;var O=(0,ve.Z)(z.x1.sys.manageUserRemoveMobiles,{manual:!0,onSuccess:function(U,q){(0,I._y)(U,function(){m.ZP.success("\u79FB\u9664\u6210\u529F"),p()})}}),L=function(){confirm("\u786E\u5B9A\u79FB\u9664\u624B\u673A\u53F7\uFF1F")&&O.run({Id:_.Id})},G=(0,ve.Z)(z.x1.sys.manageUserSetMobile,{manual:!0,onSuccess:function(U,q){(0,I._y)(U,function(){m.ZP.success("\u8BBE\u7F6E\u6210\u529F"),p()})}}),y=function(){if(!R||(0,I.Wq)(R)){m.ZP.info("\u653E\u5F03\u8BBE\u7F6E\u624B\u673A\u53F7\u7801");return}if(!/^(?:(?:\+|00)86)?1[3-9]\d{9}$/.test(R)){m.ZP.error("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u4E0D\u6B63\u786E");return}G.run({Id:_.Id,Mobile:R})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{open:P,onCancel:function(){return f(!1)},confirmLoading:G.loading,onOk:function(){y()},title:"\u8BBE\u7F6E\u624B\u673A\u53F7",children:(0,e.jsx)(X.Z,{width:"100%",size:"large",maxLength:11,placeholder:"\u8F93\u5165\u5B8C\u6574\u624B\u673A\u53F7",value:R,onChange:function(U){v(U.target.value)},status:(0,I.tq)(R)?void 0:"error"})}),(0,e.jsxs)(de.Z,{direction:"vertical",children:[(0,I.Wq)((s=_.UserMobile)===null||s===void 0?void 0:s.MobilePhone)||(0,e.jsx)(oe.Z,{icon:(0,e.jsx)(Ee.Z,{stroke:1}),color:"green",closable:!0,onClose:function(U){U.preventDefault(),L()},children:(a=_.UserMobile)===null||a===void 0?void 0:a.MobilePhone}),(0,e.jsx)(F.ZP,{type:"link",onClick:function(){f(!0)},children:"\u7ED1\u5B9A\u624B\u673A"})]})]})},Ze=n(48054),he=n(32983),$=n(26412),Ie=function(h){var s=h.user,a=s==null?void 0:s.AdminIdentity;return!a||(0,I.Wq)(a==null?void 0:a.Id)?(0,e.jsx)(he.Z,{}):(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)($.Z,{title:"User Info",bordered:!0,children:[(0,e.jsx)($.Z.Item,{label:"Product",children:"Cloud Database"}),(0,e.jsx)($.Z.Item,{label:"Billing Mode",children:"Prepaid"}),(0,e.jsx)($.Z.Item,{label:"Automatic Renewal",children:"YES"}),(0,e.jsx)($.Z.Item,{label:"Order time",children:"2018-04-24 18:00:00"}),(0,e.jsx)($.Z.Item,{label:"Usage Time",span:2,children:"2019-04-24 18:00:00"}),(0,e.jsx)($.Z.Item,{label:"Status",span:3,children:(0,e.jsx)(me.Z,{status:"processing",text:"Running"})}),(0,e.jsx)($.Z.Item,{label:"Negotiated Amount",children:"$80.00"}),(0,e.jsx)($.Z.Item,{label:"Discount",children:"$20.00"}),(0,e.jsx)($.Z.Item,{label:"Official Receipts",children:"$60.00"}),(0,e.jsxs)($.Z.Item,{label:"Config Info",children:["Data disk type: MongoDB",(0,e.jsx)("br",{}),"Database version: 3.4",(0,e.jsx)("br",{}),"Package: dds.mongo.mid",(0,e.jsx)("br",{}),"Storage space: 10 GB",(0,e.jsx)("br",{}),"Replication factor: 3",(0,e.jsx)("br",{}),"Region: East China 1",(0,e.jsx)("br",{})]})]})})},Ae=n(7134),De=n(55932),Me=function(h){var s=h.user;if((0,I.Wq)(s==null?void 0:s.Id))return(0,e.jsx)(he.Z,{});var a=(0,De.SZ)(s.Avatar);return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)($.Z,{title:"User Info",bordered:!0,children:[(0,e.jsx)($.Z.Item,{label:"Product",children:(0,e.jsx)(Ae.C,{size:100,src:a,children:s.IdentityName})}),(0,e.jsx)($.Z.Item,{label:"Billing Mode",children:"Prepaid"}),(0,e.jsx)($.Z.Item,{label:"Automatic Renewal",children:"YES"}),(0,e.jsx)($.Z.Item,{label:"Order time",children:"2018-04-24 18:00:00"}),(0,e.jsx)($.Z.Item,{label:"Usage Time",span:2,children:"2019-04-24 18:00:00"}),(0,e.jsx)($.Z.Item,{label:"Status",span:3,children:(0,e.jsx)(me.Z,{status:"processing",text:"Running"})}),(0,e.jsx)($.Z.Item,{label:"Negotiated Amount",children:"$80.00"}),(0,e.jsx)($.Z.Item,{label:"Discount",children:"$20.00"}),(0,e.jsx)($.Z.Item,{label:"Official Receipts",children:"$60.00"}),(0,e.jsxs)($.Z.Item,{label:"Config Info",children:["Data disk type: MongoDB",(0,e.jsx)("br",{}),"Database version: 3.4",(0,e.jsx)("br",{}),"Package: dds.mongo.mid",(0,e.jsx)("br",{}),"Storage space: 10 GB",(0,e.jsx)("br",{}),"Replication factor: 3",(0,e.jsx)("br",{}),"Region: East China 1",(0,e.jsx)("br",{})]})]})})},Ue=function(h){var s=h.userId,a=(0,t.useState)(!1),j=r()(a,2),p=j[0],_=j[1],E=(0,t.useState)({}),D=r()(E,2),P=D[0],f=D[1],Z=function(R){(0,I.Wq)(R)||(_(!0),z.x1.sys.manageUserGetProfileById({Id:R}).then(function(v){f(v.data.Data||{})}).finally(function(){_(!1)}))};return(0,t.useEffect)(function(){s&&Z(s)},[s]),p?(0,e.jsx)(Ze.Z,{}):(0,I.Wq)(P==null?void 0:P.Id)?(0,e.jsx)(he.Z,{}):(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(u.Z,{gutter:10,children:[(0,e.jsx)(ae.Z,{span:12,children:(0,e.jsx)(Me,{user:P})}),(0,e.jsx)(ae.Z,{span:12,children:(0,e.jsx)(Ie,{user:P})})]})})},Oe=function(h){var s=h.userId,a=h.hide,j=!(0,I.Wq)(s);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(V.Z,{title:"\u7528\u6237\u4FE1\u606F",width:"90%",open:j,onCancel:function(){a()},onOk:function(){a()},children:(0,e.jsx)(Ue,{userId:s||""})})})},Be=function(h){var s=h.model,a=h.ok,j=(0,t.useState)(!1),p=r()(j,2),_=p[0],E=p[1],D=(0,t.useState)(""),P=r()(D,2),f=P[0],Z=P[1],B=(0,ve.Z)(z.x1.sys.manageUserSetPassword,{manual:!0,onSuccess:function(O,L){(0,I._y)(O,function(){m.ZP.success("\u4FEE\u6539\u6210\u529F"),a()})}}),R=function(){if(!f||(0,I.Wq)(f)){m.ZP.info("\u653E\u5F03\u4FEE\u6539\u5BC6\u7801");return}if(f.length<5){m.ZP.error("\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u5C0F\u4E8E5\u4F4D");return}B.run({Id:s.Id,Password:f})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{open:_,onCancel:function(){return E(!1)},confirmLoading:B.loading,onOk:function(){R()},title:"\u4FEE\u6539\u7528\u6237\u5BC6\u7801",children:(0,e.jsx)(X.Z.Password,{width:"100%",size:"large",maxLength:20,placeholder:"\u8F93\u5165\u5BC6\u7801",value:f,onChange:function(O){Z(O.target.value)},status:(0,I.Wq)(f)?"error":void 0})}),(0,e.jsx)(F.ZP,{type:"link",onClick:function(){E(!0)},children:"\u4FEE\u6539\u5BC6\u7801"})]})},Re=function(s){var a=s.query,j=s.onSearch,p=(0,t.useState)({}),_=r()(p,2),E=_[0],D=_[1],P=function(Z){Z.Page=1,j&&j(Z)};return(0,t.useEffect)(function(){D(l()({},a))},[]),(0,e.jsx)(ee.Z,{bordered:!1,style:{marginBottom:10},children:(0,e.jsxs)(N.Z,{labelCol:{span:8},wrapperCol:{span:16},onFinish:function(Z){return P(E)},autoComplete:"off",layout:"inline",children:[(0,e.jsx)(N.Z.Item,{label:"\u5173\u952E\u8BCD",name:"Name",children:(0,e.jsx)(X.Z,{value:E.Keyword||"",onChange:function(Z){return D(function(B){return l()(l()({},B),{},{Keyword:Z.target.value})})}})}),(0,e.jsx)(N.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(F.ZP,{type:"primary",htmlType:"submit",children:"\u641C\u7D22"})})]})})},be=Re,Fe=n(15009),_e=n.n(Fe),Te=n(99289),Le=n.n(Te),ke=n(74590),We=function(h){var s=h.ok,a=h.model,j=(0,t.useState)(!1),p=r()(j,2),_=p[0],E=p[1],D=(0,t.useState)(!1),P=r()(D,2),f=P[0],Z=P[1],B=(0,t.useState)({}),R=r()(B,2),v=R[0],O=R[1],L=function(y){E(!0),z.x1.sys.manageUserUpdateStatus(l()(l()({},y),{},{IsDeleted:!1,Id:a.Id})).then(function(S){(0,I._y)(S,function(){m.ZP.success("\u4FDD\u5B58\u6210\u529F"),Z(!1),s&&s()})}).finally(function(){E(!1)})};return(0,t.useEffect)(function(){O({IsActive:a==null?void 0:a.IsActive,IsDeleted:a==null?void 0:a.IsDeleted})},[a]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{title:"\u4FEE\u6539\u72B6\u6001",confirmLoading:_,open:f,onCancel:function(){Z(!1)},footer:(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(ke.Z,{action:Le()(_e()().mark(function G(){var y;return _e()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,z.x1.sys.manageUserUpdateStatus({Id:a.Id,IsDeleted:!0});case 2:y=U.sent,(0,I._y)(y,function(){Z(!1),s()});case 4:case"end":return U.stop()}},G)})),hide:(0,I.Wq)(a.Id)}),(0,e.jsx)(F.ZP,{type:"primary",onClick:function(){L(v)},children:"\u4FDD\u5B58"})]}),children:(0,e.jsx)(N.Z,{children:(0,e.jsx)(N.Z.Item,{label:"\u662F\u5426\u6FC0\u6D3B",children:(0,e.jsx)(fe.Z,{checked:v.IsActive||!1,onChange:function(y){return O(function(S){return l()(l()({},S),{},{IsActive:y})})}})})})}),(0,e.jsx)(F.ZP,{type:"link",onClick:function(){Z(!0)},children:"\u4FEE\u6539\u72B6\u6001"})]})},Ke=function(){var h=(0,t.useState)({}),s=r()(h,2),a=s[0],j=s[1],p=(0,t.useState)({}),_=r()(p,2),E=_[0],D=_[1],P=(0,t.useState)(!1),f=r()(P,2),Z=f[0],B=f[1],R=(0,t.useState)(!1),v=r()(R,2),O=v[0],L=v[1],G=(0,t.useState)(void 0),y=r()(G,2),S=y[0],U=y[1],q=function(x){B(!0),z.x1.sys.manageUserQueryUserPagination(x).then(function(d){(0,I._y)(d,function(){D(d.data||{})})}).finally(function(){B(!1)})};(0,t.useEffect)(function(){q(a)},[]);var se=[{title:"\u8D26\u53F7\u4E3B\u4F53",render:function(x){return(0,e.jsx)("div",{onClick:function(){return U(x.Id)},children:(0,e.jsx)(c.Z,{model:x})})}},{title:"\u7535\u8BDD",render:function(x){return(0,e.jsx)(Pe,{model:x,ok:function(){q(a)}})}},{title:"\u6D3B\u52A8\u72B6\u6001",render:function(x,d){return(0,e.jsx)(me.Z,{status:d.IsActive?"success":"default",text:d.IsActive?"\u6D3B\u52A8":"\u51BB\u7ED3"})}},{title:"\u65F6\u95F4",render:function(x,d){return(0,e.jsx)(le.Z,{model:d})}},{title:"\u64CD\u4F5C",render:function(x,d){return(0,e.jsxs)(de.Z,{size:"small",direction:"horizontal",split:(0,e.jsx)(Ce.Z,{type:"vertical"}),children:[(0,e.jsx)(Be,{model:d,ok:function(){}}),(0,e.jsx)(We,{model:d,ok:function(){q(a)}})]})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Oe,{userId:S,hide:function(){U(void 0)}}),(0,e.jsx)(pe,{show:O,hide:function(){L(!1)},ok:function(){L(!1),q(a)}}),(0,e.jsx)(be,{query:a,onSearch:function(x){j(x)}}),(0,e.jsx)(ee.Z,{title:"\u5E73\u53F0\u7528\u6237",extra:(0,e.jsx)(F.ZP,{type:"primary",onClick:function(){L(!0)},children:"\u6DFB\u52A0\u7528\u6237"}),children:(0,e.jsx)(te.Z,{loading:Z,columns:se,dataSource:E.Items||[],pagination:{current:a.Page,total:E.TotalCount,pageSize:20,onChange:function(x,d){var g=l()(l()({},a),{},{Page:x});j(g),q(g)}}})})]})},Ne=function(){var h=(0,b.UO)(),s=(0,t.useState)(h.id),a=r()(s,2),j=a[0],p=a[1];return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(k.Z,{destroyInactiveTabPane:!0,activeKey:j||"user",onChange:function(E){return p(E)},items:[{key:"user",label:"\u666E\u901A\u7528\u6237",children:(0,e.jsx)(Ke,{}),icon:(0,e.jsx)(Q.Z,{stroke:1})},{key:"store-user",label:"\u5546\u57CE\u7528\u6237",children:(0,e.jsx)(ye,{}),icon:(0,e.jsx)(W.Z,{stroke:1})},{key:"grade",label:"\u7528\u6237\u7B49\u7EA7",children:(0,e.jsx)(ie,{}),icon:(0,e.jsx)(C.Z,{stroke:1})}]})})}},38295:function(ue,J,n){n.d(J,{o:function(){return le}});var Y=n(15009),r=n.n(Y),k=n(99289),t=n.n(k),b=n(19632),Q=n.n(b),W=n(47650),C=n(30699),H=n(85134),l=n(66419),m=function(c){var A=T.mallSettings||{},i=[A.StoreNickName,A.StoreEnglishName];c?i=[A.StoreOfficialName,A.StoreOfficialEnglishName].concat(Q()(i)):i=[].concat(Q()(i),[A.StoreOfficialName,A.StoreOfficialEnglishName]);var u=i.filter(function(ae){return!(0,l.Wq)(ae)}).at(0);return u||H.v.app.name||H.v.app.english_name},F=function(){var o=t()(r()().mark(function c(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,C.x1.mall.notificationUnReadCount().then(function(u){T.notificationCount=u.data.Data||0});case 2:case"end":return i.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),V=function(){var o=t()(r()().mark(function c(){var A;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,C.x1.mallAdmin.gradeListGrades();case 2:A=u.sent,T.grades=A.data.Data||[];case 4:case"end":return u.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),N=function(){var o=t()(r()().mark(function c(){var A;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,C.x1.mallAdmin.storeQueryStores();case 2:A=u.sent,T.stores=A.data.Data||[];case 4:case"end":return u.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),X=function(){var o=t()(r()().mark(function c(){var A;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,C.x1.mall.shoppingCartCount();case 2:A=u.sent,T.shoppingCartCount=A.data.Data||0;case 4:case"end":return u.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),ne=function(){var o=t()(r()().mark(function c(){var A;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,C.x1.mall.storeGetCurrentStore();case 2:A=u.sent,T.currentStore=A.data.Data||{};case 4:case"end":return u.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),ee=function(){var o=t()(r()().mark(function c(){var A;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,C.x1.mall.storeMostNearbyStore();case 2:A=u.sent,T.mostNearbyStore=A.data.Data||{};case 4:case"end":return u.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),te=function(){var o=t()(r()().mark(function c(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,C.x1.platform.userAuth().then(function(u){T.userAuthResult=u.data||{}});case 2:case"end":return i.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),re=function(){var o=t()(r()().mark(function c(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,C.x1.sys.adminAuth().then(function(u){T.adminAuthResult=u.data||{}});case 2:case"end":return i.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),z=function(){var o=t()(r()().mark(function c(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,C.x1.sys.manageAdminQueryAdminPermissions().then(function(u){T.adminPermissions=u.data||{}});case 2:case"end":return i.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),I=function(){var o=t()(r()().mark(function c(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,C.x1.mallManager.storeManagerPermissionGetMyPermission().then(function(u){T.managerPermissions=u.data||{}});case 2:case"end":return i.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),e=function(){var o=t()(r()().mark(function c(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,C.x1.mallManager.storeManagerAuth().then(function(u){T.storeManagerAuthResult=u.data||{}});case 2:case"end":return i.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),ie=function(){var o=t()(r()().mark(function c(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,C.x1.mall.userStoreUserAuth().then(function(u){T.storeUserAuthResult=u.data||{}});case 2:case"end":return i.stop()}},c)}));return function(){return o.apply(this,arguments)}}(),T=(0,W.sj)({queryUserAuthResult:te,getAppName:m,queryAdminAuthResult:re,queryStoreManagerAuthResult:e,queryStoreUserAuthResult:ie,queryAdminPermission:z,queryStoreManagerPermission:I,queryGrades:V,queryStores:N,queryNotificationCount:F,queryShoppingCartCount:X,queryCurrentStore:ne,queryMostNearbyStore:ee,messageHistory:[],grades:[],stores:[],notificationCount:0,headerHeight:0,bottomHeight:0,mallSettings:{},shoppingCartCount:0,currentStore:void 0,mostNearbyStore:void 0,userAuthResult:void 0,adminAuthResult:void 0,adminPermissions:void 0,storeUserAuthResult:void 0,storeManagerAuthResult:void 0,managerPermissions:void 0,get user(){var o;return(o=this.userAuthResult)===null||o===void 0?void 0:o.User},get admin(){var o;return(o=this.adminAuthResult)===null||o===void 0?void 0:o.Admin},get storeUser(){var o;return(o=this.storeUserAuthResult)===null||o===void 0?void 0:o.StoreUser},get storeManager(){var o;return(o=this.storeManagerAuthResult)===null||o===void 0?void 0:o.StoreManager}}),le=function(){return(0,W.ey)(T)}}}]);
