"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6346],{74590:function(re,X,n){var J=n(15009),r=n.n(J),F=n(99289),t=n.n(F),U=n(5574),Q=n.n(U),W=n(83062),S=n(14726),w=n(67294),u=n(85893);X.Z=function(l){var y=l.action,G=l.confirmText,R=l.hide,V=(0,w.useState)(!1),q=Q()(V,2),ee=q[0],te=q[1],ae=G||"\u786E\u5B9A\u5220\u9664\uFF1F",Y=function(){var A=t()(r()().mark(function e(){return r()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(confirm(ae)){T.next=2;break}return T.abrupt("return");case 2:return te(!0),T.prev=3,T.next=6,y();case 6:return T.prev=6,te(!1),T.finish(6);case 9:case"end":return T.stop()}},e,null,[[3,,6,9]])}));return function(){return A.apply(this,arguments)}}();return R?null:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(W.Z,{title:ae,children:(0,u.jsx)(S.ZP,{loading:ee,danger:!0,type:"link",onClick:function(){Y()},children:"\u5220\u9664"})})})}},23806:function(re,X,n){var J=n(1288),r=n(85893);X.Z=function(F){var t=F.model,U=F.fallback;if(t==null||t==null)return null;var Q=t==null?void 0:t.CreationTime,W=t==null?void 0:t.LastModificationTime;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{style:{},children:[(0,r.jsx)("div",{children:(0,r.jsx)(J.Z,{prefix:(0,r.jsx)("span",{children:"\u521B\u5EFA\uFF1A"}),onlyDate:!0,timeStr:Q,fallback:U})}),(0,r.jsx)("div",{children:(0,r.jsx)(J.Z,{prefix:(0,r.jsx)("span",{children:"\u4FEE\u6539\uFF1A"}),onlyDate:!0,timeStr:W,fallback:U})})]})})}},1288:function(re,X,n){var J=n(78957),r=n(83062),F=n(46629),t=n(85893);X.Z=function(U){var Q,W=U.timeStr,S=U.fallback,w=U.onlyDate,u=U.prefix,l=(Q=(0,F.mg)(W))===null||Q===void 0?void 0:Q.add(F.Mg,"hour");if(!l)return S||null;var y=(0,F.ND)().utc().add(F.Mg,"hour"),G=l.isSame(y,"year"),R=l.diff(y,"day"),V=G?l.format(F.AK):l.format(F.vc),q=function(){return(0,t.jsxs)("div",{children:[(0,t.jsxs)(J.Z,{direction:"horizontal",children:[(0,t.jsx)("div",{children:l.fromNow()}),(0,t.jsx)("div",{children:l.format(F.On)})]}),(0,t.jsx)("div",{children:l.format(F.t9)})]})};return(0,t.jsx)(r.Z,{title:q(),children:(0,t.jsxs)(J.Z,{direction:"horizontal",children:[u,(0,t.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:w?l.format(F.vc):l.format(F.dq)})]})})}},11518:function(re,X,n){var J=n(55241),r=n(78957),F=n(7134),t=n(55932),U=n(66419),Q=n(8885),W=n(85893);X.Z=function(S){var w=S.model;if(!w)return null;var u=(0,t.SZ)(w.Avatar,{width:100,height:100}),l=(0,U.zO)([w.NickName,w.IdentityName,w.Id].filter(function(y){return y&&y.length>0}).at(0)||"--",10);return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(J.Z,{content:(0,W.jsx)(Q.Z,{model:w}),children:(0,W.jsxs)(r.Z,{direction:"horizontal",children:[(0,W.jsx)(F.C,{size:"small",shape:"square",src:u,children:l}),(0,W.jsx)("span",{children:(0,W.jsx)("a",{children:l})})]})})})}},8885:function(re,X,n){var J=n(78957),r=n(7134),F=n(55932),t=n(66419),U=n(85893);X.Z=function(Q){var W,S=Q.model;if(!S)return null;var w=(0,F.SZ)(S.Avatar,{width:100,height:100}),u=(0,t.zO)([S.NickName,S.IdentityName,S.Id].filter(function(l){return l&&l.length>0}).at(0)||"--",10);return(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(J.Z,{direction:"horizontal",children:[(0,U.jsx)("div",{children:(0,U.jsx)(r.C,{src:w,size:100})}),(0,U.jsxs)("div",{children:[(0,U.jsxs)("p",{children:["\u6635\u79F0\uFF1A",u]}),(0,U.jsxs)("p",{children:["\u7528\u6237\u540D\uFF1A",(S==null?void 0:S.IdentityName)||"--"]}),(0,U.jsxs)("p",{children:["\u624B\u673A\u53F7\uFF1A",(S==null||(W=S.UserMobile)===null||W===void 0?void 0:W.MobilePhone)||"--"]})]})]})})}},92088:function(re,X,n){n.d(X,{d2:function(){return Q},t2:function(){return S},tz:function(){return W}});var J=n(5574),r=n.n(J),F=n(67294),t=n(18629),U=n(46629),Q=function(){var u=(0,F.useState)(void 0),l=r()(u,2),y=l[0],G=l[1];return(0,t.Z)(function(){G(U.ND.utc())},1e3,{immediate:!0}),y||U.ND.utc()},W=function(u){var l=(0,F.useState)(u||!1),y=r()(l,2),G=y[0],R=y[1];return{open:G,setOpen:function(){return R(!0)},setClose:function(){return R(!1)}}},S=function(u){var l=(0,F.useState)(u),y=r()(l,2),G=y[0],R=y[1];return{data:G,open:G!=null,setData:function(q){return R(q)},onHide:function(){return R(void 0)}}}},64766:function(re,X,n){n.r(X),n.d(X,{default:function(){return $e}});var J=n(5574),r=n.n(J),F=n(92398),t=n(67294),U=n(47650),Q=n(17226),W=n(87399),S=n(27909),w=n(97857),u=n.n(w),l=n(45360),y=n(14726),G=n(85576),R=n(11346),V=n(65233),q=n(24435),ee=n(4393),te=n(80799),ae=n(38295),Y=n(30699),A=n(66419),e=n(85893),ie=function(){var g=(0,t.useState)(!1),s=r()(g,2),a=s[0],m=s[1],E=(0,t.useState)(!1),x=r()(E,2),D=x[0],B=x[1],Z=(0,t.useState)(""),_=r()(Z,2),P=_[0],I=_[1],$=(0,t.useState)(!1),h=r()($,2),b=h[0],L=h[1],H=(0,t.useState)({}),v=r()(H,2),p=v[0],k=v[1],ne=(0,ae.o)(),ue=function(){m(!0),ne.queryGrades().finally(function(){return m(!1)})},O=function(z){B(!0),Y.x1.mallAdmin.gradeSave(u()({},z)).then(function(K){(0,A._y)(K,function(){l.ZP.success("\u4FDD\u5B58\u6210\u529F"),L(!1),ue()})}).finally(function(){B(!1)})},C=function(z){confirm("\u786E\u5B9A\u5220\u9664\uFF1F")&&(I(z.Id||""),Y.x1.mallAdmin.gradeUpdateStatus({Id:z.Id,IsDeleted:!0}).then(function(K){(0,A._y)(K,function(){l.ZP.success("\u5220\u9664\u6210\u529F"),ue()})}).finally(function(){I("")}))},c=[{title:"\u4F1A\u5458\u540D",render:function(z,K){return K.Name}},{title:"\u4F1A\u5458\u63CF\u8FF0",render:function(z,K){return K.Description}},{title:"\u6392\u5E8F",render:function(z,K){return K.Sort}},{title:"\u4F1A\u5458\u4EBA\u6570",render:function(z,K){return K.UserCount}},{title:"\u64CD\u4F5C",width:200,render:function(z,K){return(0,e.jsxs)(y.ZP.Group,{children:[(0,e.jsx)(y.ZP,{type:"link",onClick:function(){k(K),L(!0)},children:"\u7F16\u8F91"}),(0,e.jsx)(y.ZP,{type:"link",loading:P===K.Id,onClick:function(){C(K)},danger:!0,children:"\u5220\u9664"})]})}}];return(0,t.useEffect)(function(){ue()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.Z,{title:"\u7F16\u8F91\u4EF7\u683C",open:b,onCancel:function(){L(!1)},confirmLoading:D,onOk:function(){O(p)},children:(0,e.jsxs)(R.Z,{children:[(0,e.jsx)(R.Z.Item,{label:"\u540D\u79F0",children:(0,e.jsx)(V.Z,{value:p.Name||"",onChange:function(z){k(function(K){return u()(u()({},K),{},{Name:z.target.value})})}})}),(0,e.jsx)(R.Z.Item,{label:"\u63CF\u8FF0",children:(0,e.jsx)(V.Z,{value:p.Description||"",onChange:function(z){k(function(K){return u()(u()({},K),{},{Description:z.target.value})})}})}),(0,e.jsx)(R.Z.Item,{label:"\u6392\u5E8F",children:(0,e.jsx)(q.Z,{value:p.Sort||0,onChange:function(z){k(function(K){return u()(u()({},K),{},{Sort:z||0})})}})})]})}),(0,e.jsx)(ee.Z,{title:"\u4F1A\u5458\u7B49\u7EA7",loading:a,style:{marginBottom:10},extra:(0,e.jsx)(y.ZP,{type:"primary",onClick:function(){L(!0),k({})},children:"\u65B0\u589E"}),children:(0,e.jsx)(te.Z,{dataSource:(0,A.iu)(ne.grades||[]),columns:c,pagination:!1})})]})},T=n(34041),oe=n(23806),d=n(1288),f=n(11518),M=n(35291),o=n(40056),i=n(71230),se=n(15746),ce=n(55742),le=n(66309),ge=function(g){var s=g.model,a=g.ok,m=(0,t.useState)(!1),E=r()(m,2),x=E[0],D=E[1],B=(0,t.useState)(!1),Z=r()(B,2),_=Z[0],P=Z[1],I=(0,t.useState)({}),$=r()(I,2),h=$[0],b=$[1],L=function(){if((h.Balance||0)<=0){l.ZP.error("\u91D1\u989D\u4E0D\u80FD\u4E3A0");return}D(!0),h.UserId=s.Id||0,Y.x1.mallAdmin.balanceUpdateUserBalance(h).then(function(p){(0,A._y)(p,function(){l.ZP.success("\u4FDD\u5B58\u6210\u529F"),P(!1),a&&a()})}).finally(function(){D(!1)})};(0,t.useEffect)(function(){_&&b({ActionType:1,Balance:0,UserId:0,Message:""})},[_]);var H=h.ActionType==-1?s.Balance:9999999;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(G.Z,{title:"\u8C03\u6574",open:_,onCancel:function(){P(!1)},confirmLoading:x,onOk:function(){L()},children:[(0,e.jsx)(o.Z,{message:"\u5F53\u524D\u4F59\u989D\uFF1A".concat(s.Balance),style:{marginBottom:10}}),(0,e.jsxs)(i.Z,{gutter:[15,15],children:[(0,e.jsx)(se.Z,{span:24,children:(0,e.jsx)(q.Z,{title:"\u91D1\u989D",min:0,max:H,value:h.Balance,onChange:function(p){b(u()(u()({},h),{},{Balance:p||0}))}})}),(0,e.jsx)(se.Z,{span:24,children:(0,e.jsxs)(ce.ZP.Group,{value:h.ActionType,onChange:function(p){b(u()(u()({},h),{},{ActionType:p.target.value}))},children:[(0,e.jsx)(ce.ZP,{value:-1,children:"\u6263\u51CF"}),(0,e.jsx)(ce.ZP,{value:1,children:"\u5145\u503C"})]})}),(0,e.jsx)(se.Z,{span:24,children:(0,e.jsx)(V.Z.TextArea,{placeholder:"\u63CF\u8FF0\u4E00\u4E0B\u8FD9\u6B21\u8C03\u6574...",value:h.Message||"",onChange:function(p){b(u()(u()({},h),{},{Message:p.target.value}))}})})]})]}),(0,e.jsx)(le.Z,{color:"warning",onClick:function(){P(!0)},style:{cursor:"pointer"},children:(0,A.lb)(s.Balance||0)})]})},fe=n(72269),je=function(g){var s=g.query,a=g.onSearch,m=(0,t.useState)({}),E=r()(m,2),x=E[0],D=E[1],B=function(_){_.Page=1,a&&a(_)};return(0,t.useEffect)(function(){D(u()({},s))},[s]),(0,e.jsx)(ee.Z,{bordered:!1,style:{marginBottom:10},children:(0,e.jsxs)(R.Z,{labelCol:{span:8},children:[(0,e.jsx)(R.Z.Item,{label:"\u6FC0\u6D3B",children:(0,e.jsx)(fe.Z,{checked:x.Active||!1,onChange:function(_){D(u()(u()({},x),{},{Active:_}))}})}),(0,e.jsx)(R.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(y.ZP,{type:"primary",onClick:function(){return B(x)},children:"\u641C\u7D22"})})]})})},de=n(78957),xe=function(s){var a=s.ok,m=s.model,E=(0,t.useState)(!1),x=r()(E,2),D=x[0],B=x[1],Z=(0,t.useState)(!1),_=r()(Z,2),P=_[0],I=_[1],$=(0,t.useState)({}),h=r()($,2),b=h[0],L=h[1],H=function(p){B(!0),Y.x1.mallAdmin.userUpdateStatus(u()({},p)).then(function(k){(0,A._y)(k,function(){l.ZP.success("\u4FDD\u5B58\u6210\u529F"),a&&a()})}).finally(function(){B(!1)})};return(0,t.useEffect)(function(){L({IsActive:m.IsActive,Id:m.Id})},[m]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.Z,{title:"\u4FEE\u6539\u72B6\u6001",confirmLoading:D,open:P,onCancel:function(){I(!1)},onOk:function(){H(b)},style:{padding:0},children:(0,e.jsxs)(R.Z,{children:[(0,e.jsx)(R.Z.Item,{hidden:!0,name:"Id",children:(0,e.jsx)(V.Z,{})}),(0,e.jsx)(R.Z.Item,{label:"\u662F\u5426\u6FC0\u6D3B",children:(0,e.jsx)(fe.Z,{checked:b.IsActive||!1,onChange:function(p){L(function(k){return u()(u()({},k),{},{IsActive:p})})}})})]})}),(0,e.jsxs)(de.Z,{children:[m.IsActive?(0,e.jsx)(le.Z,{color:"green",children:"\u6B63\u5E38"}):(0,e.jsx)(le.Z,{color:"error",children:"\u7981\u7528"}),(0,e.jsx)(y.ZP,{size:"small",type:"link",onClick:function(){I(!0)},children:"\u4FEE\u6539"})]})]})},Ce=xe,Se=function(){var g=(0,t.useState)({Page:1}),s=r()(g,2),a=s[0],m=s[1],E=(0,t.useState)(!1),x=r()(E,2),D=x[0],B=x[1],Z=(0,t.useState)(0),_=r()(Z,2),P=_[0],I=_[1],$=(0,t.useState)({}),h=r()($,2),b=h[0],L=h[1],H=(0,ae.o)(),v=function(C){B(!0),Y.x1.mallAdmin.userQueryPaging(u()({},C)).then(function(c){(0,A._y)(c,function(){L(c.data||{})})}).finally(function(){B(!1)})},p=function(C,c){confirm("\u786E\u5B9A\u8BBE\u7F6E\uFF1F")&&(I(C.Id||0),Y.x1.mallAdmin.gradeSetUserGrade({UserId:C.Id,GradeId:c}).then(function(j){(0,A._y)(j,function(){l.ZP.success("\u8BBE\u7F6E\u6210\u529F"),v(a)})}).finally(function(){I(0)}))},k=[{title:"\u8D26\u53F7\u4E3B\u4F53",render:function(C,c){return(0,e.jsx)(f.Z,{model:c.User})}},{key:"user-grade",title:"\u4F1A\u5458\u7B49\u7EA7",render:function(C,c){var j;return(0,e.jsx)(T.Z,{size:"small",loading:P==c.Id,onChange:function(K){p(c,K)},value:(j=c.Grade)===null||j===void 0?void 0:j.Id,options:H.grades.map(function(z){return{key:z.Id,label:z.Name,value:z.Id}}),allowClear:!0,placeholder:"\u9009\u62E9\u4F1A\u5458\u7B49\u7EA7",style:{minWidth:150}})}},{title:"\u624B\u673A\u53F7",render:function(C,c){var j;return((j=c.User)===null||j===void 0||(j=j.UserMobile)===null||j===void 0?void 0:j.MobilePhone)||"--"}},{key:"balance",title:"\u8D26\u6237\u4F59\u989D",render:function(C,c){return(0,e.jsx)(ge,{model:c,ok:function(){v(a)}})}},{title:"\u4F59\u989D\u79EF\u5206",render:function(C,c){return c.Points}},{title:"\u5386\u53F2\u79EF\u5206",render:function(C,c){return c.HistoryPoints}},{title:"\u72B6\u6001",render:function(C,c){return(0,e.jsx)(Ce,{model:c,ok:function(){v(a)}})}},{title:"\u6700\u8FD1\u4E0A\u7EBF\u65F6\u95F4",render:function(C,c){return(0,e.jsx)(d.Z,{timeStr:c.LastActivityTime})}},{title:"\u65F6\u95F4",render:function(C,c){return(0,e.jsx)(oe.Z,{model:c})}},{title:"\u64CD\u4F5C",width:200,render:function(C,c){return(0,e.jsx)(y.ZP.Group,{children:(0,e.jsx)(y.ZP,{type:"link",onClick:function(){alert("todo")},children:"\u67E5\u770B"})})}}],ne=["user-grade"],ue=k.filter(function(O){return ne.indexOf(O.key)<=0});return(0,t.useEffect)(function(){H.queryGrades().finally(function(){v(a)})},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(je,{query:a,onSearch:function(C){m(C),v(C)}}),(0,e.jsx)(ee.Z,{title:"\u5546\u57CE\u4F1A\u5458",loading:D,style:{marginBottom:10},extra:(0,e.jsx)(y.ZP,{type:"text",onClick:function(){U.m8.push("/admin/settings/user/list")},children:"\u67E5\u770B\u5E73\u53F0\u7528\u6237\u4FE1\u606F"}),children:(0,e.jsx)(te.Z,{dataSource:b.Items||[],columns:(0,M.tC)()?ue:k,pagination:{pageSize:b.PageSize,total:b.TotalCount,onChange:function(C,c){var j=u()(u()({},a),{},{Page:C});m(j),v(j)}}})})]})},me=n(40411),ye=n(96074),pe=function(g){var s=g.show,a=g.hide,m=g.ok,E=(0,t.useState)(!1),x=r()(E,2),D=x[0],B=x[1],Z=(0,t.useState)({}),_=r()(Z,2),P=_[0],I=_[1],$=function(b){B(!0),Y.x1.sys.manageUserCreateUser(b).then(function(L){L.data.Error?l.ZP.error(L.data.Error.Message):(l.ZP.success("\u4FDD\u5B58\u6210\u529F"),m&&m())}).finally(function(){B(!1)})};return(0,t.useEffect)(function(){s&&I({})},[s]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(G.Z,{title:"\u65B0\u589E\u7528\u6237",confirmLoading:D,open:s,onCancel:function(){a&&a()},footer:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(y.ZP,{type:"primary",onClick:function(){$(P)},children:"\u4FDD\u5B58"})}),children:(0,e.jsx)(R.Z,{children:(0,e.jsx)(R.Z.Item,{label:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{pattern:new RegExp("^[a-zA-Z0-9_]{3,20}$"),message:"\u7528\u6237\u540D\u5FC5\u987B\u662F3-16\u4F4D\u5B57\u6BCD\u3001\u6570\u5B57\u6216\u4E0B\u5212\u7EBF"}],children:(0,e.jsx)(V.Z,{value:P.IdentityName||"",onChange:function(b){I(function(L){return u()(u()({},L),{},{IdentityName:b.target.value})})}})})})})})},ve=n(68421),Ee=n(26380),Pe=n(92088),De=function(g){var s,a,m=g.model,E=g.ok,x=(0,Pe.tz)(),D=x.open,B=x.setOpen,Z=x.setClose,_=(0,t.useState)(""),P=r()(_,2),I=P[0],$=P[1];if(!m)return null;var h=(0,ve.Z)(Y.x1.sys.manageUserRemoveMobiles,{manual:!0,onSuccess:function(p,k){(0,A._y)(p,function(){l.ZP.success("\u79FB\u9664\u6210\u529F"),E()})}}),b=function(){confirm("\u786E\u5B9A\u79FB\u9664\u624B\u673A\u53F7\uFF1F")&&h.run({Id:m.Id})},L=(0,ve.Z)(Y.x1.sys.manageUserSetMobile,{manual:!0,onSuccess:function(p,k){(0,A._y)(p,function(){l.ZP.success("\u8BBE\u7F6E\u6210\u529F"),E()})}}),H=function(){if(!I||(0,A.Wq)(I)){l.ZP.info("\u653E\u5F03\u8BBE\u7F6E\u624B\u673A\u53F7\u7801");return}if(!/^(?:(?:\+|00)86)?1[3-9]\d{9}$/.test(I)){l.ZP.error("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u4E0D\u6B63\u786E");return}L.run({Id:m.Id,Mobile:I})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.Z,{open:D,onCancel:function(){return Z()},confirmLoading:L.loading,onOk:function(){H()},title:"\u8BBE\u7F6E\u624B\u673A\u53F7",children:(0,e.jsx)(V.Z,{width:"100%",size:"large",maxLength:11,placeholder:"\u8F93\u5165\u5B8C\u6574\u624B\u673A\u53F7",value:I,onChange:function(p){$(p.target.value)},status:(0,A.tq)(I)?void 0:"error"})}),(0,e.jsxs)(de.Z,{direction:"vertical",children:[(0,A.Wq)((s=m.UserMobile)===null||s===void 0?void 0:s.MobilePhone)||(0,e.jsx)(le.Z,{icon:(0,e.jsx)(Ee.Z,{stroke:1}),color:"green",closable:!0,onClose:function(p){p.preventDefault(),b()},children:(a=m.UserMobile)===null||a===void 0?void 0:a.MobilePhone}),(0,e.jsx)(y.ZP,{type:"link",onClick:function(){B()},children:"\u7ED1\u5B9A\u624B\u673A"})]})]})},Ze=n(48054),_e=n(32983),N=n(26412),Ie=function(g){var s=g.user,a=s==null?void 0:s.AdminIdentity;return!a||(0,A.Wq)(a==null?void 0:a.Id)?(0,e.jsx)(_e.Z,{}):(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(N.Z,{title:"User Info",bordered:!0,children:[(0,e.jsx)(N.Z.Item,{label:"Product",children:"Cloud Database"}),(0,e.jsx)(N.Z.Item,{label:"Billing Mode",children:"Prepaid"}),(0,e.jsx)(N.Z.Item,{label:"Automatic Renewal",children:"YES"}),(0,e.jsx)(N.Z.Item,{label:"Order time",children:"2018-04-24 18:00:00"}),(0,e.jsx)(N.Z.Item,{label:"Usage Time",span:2,children:"2019-04-24 18:00:00"}),(0,e.jsx)(N.Z.Item,{label:"Status",span:3,children:(0,e.jsx)(me.Z,{status:"processing",text:"Running"})}),(0,e.jsx)(N.Z.Item,{label:"Negotiated Amount",children:"$80.00"}),(0,e.jsx)(N.Z.Item,{label:"Discount",children:"$20.00"}),(0,e.jsx)(N.Z.Item,{label:"Official Receipts",children:"$60.00"}),(0,e.jsxs)(N.Z.Item,{label:"Config Info",children:["Data disk type: MongoDB",(0,e.jsx)("br",{}),"Database version: 3.4",(0,e.jsx)("br",{}),"Package: dds.mongo.mid",(0,e.jsx)("br",{}),"Storage space: 10 GB",(0,e.jsx)("br",{}),"Replication factor: 3",(0,e.jsx)("br",{}),"Region: East China 1",(0,e.jsx)("br",{})]})]})})},Ae=n(7134),Me=n(55932),Oe=function(g){var s=g.user;if((0,A.Wq)(s==null?void 0:s.Id))return(0,e.jsx)(_e.Z,{});var a=(0,Me.SZ)(s.Avatar);return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(N.Z,{title:"User Info",bordered:!0,children:[(0,e.jsx)(N.Z.Item,{label:"Product",children:(0,e.jsx)(Ae.C,{size:100,src:a,children:s.IdentityName})}),(0,e.jsx)(N.Z.Item,{label:"Billing Mode",children:"Prepaid"}),(0,e.jsx)(N.Z.Item,{label:"Automatic Renewal",children:"YES"}),(0,e.jsx)(N.Z.Item,{label:"Order time",children:"2018-04-24 18:00:00"}),(0,e.jsx)(N.Z.Item,{label:"Usage Time",span:2,children:"2019-04-24 18:00:00"}),(0,e.jsx)(N.Z.Item,{label:"Status",span:3,children:(0,e.jsx)(me.Z,{status:"processing",text:"Running"})}),(0,e.jsx)(N.Z.Item,{label:"Negotiated Amount",children:"$80.00"}),(0,e.jsx)(N.Z.Item,{label:"Discount",children:"$20.00"}),(0,e.jsx)(N.Z.Item,{label:"Official Receipts",children:"$60.00"}),(0,e.jsxs)(N.Z.Item,{label:"Config Info",children:["Data disk type: MongoDB",(0,e.jsx)("br",{}),"Database version: 3.4",(0,e.jsx)("br",{}),"Package: dds.mongo.mid",(0,e.jsx)("br",{}),"Storage space: 10 GB",(0,e.jsx)("br",{}),"Replication factor: 3",(0,e.jsx)("br",{}),"Region: East China 1",(0,e.jsx)("br",{})]})]})})},Ue=function(g){var s=g.userId,a=(0,t.useState)(!1),m=r()(a,2),E=m[0],x=m[1],D=(0,t.useState)({}),B=r()(D,2),Z=B[0],_=B[1],P=function($){(0,A.Wq)($)||(x(!0),Y.x1.sys.manageUserGetProfileById({Id:$}).then(function(h){_(h.data.Data||{})}).finally(function(){x(!1)}))};return(0,t.useEffect)(function(){s&&P(s)},[s]),E?(0,e.jsx)(Ze.Z,{}):(0,A.Wq)(Z==null?void 0:Z.Id)?(0,e.jsx)(_e.Z,{}):(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(i.Z,{gutter:10,children:[(0,e.jsx)(se.Z,{span:12,children:(0,e.jsx)(Oe,{user:Z})}),(0,e.jsx)(se.Z,{span:12,children:(0,e.jsx)(Ie,{user:Z})})]})})},Be=function(g){var s=g.userId,a=g.hide,m=!(0,A.Wq)(s);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(G.Z,{title:"\u7528\u6237\u4FE1\u606F",width:"90%",open:m,onCancel:function(){a()},onOk:function(){a()},children:(0,e.jsx)(Ue,{userId:s||""})})})},Re=function(g){var s=g.model,a=g.ok,m=(0,t.useState)(!1),E=r()(m,2),x=E[0],D=E[1],B=(0,t.useState)(""),Z=r()(B,2),_=Z[0],P=Z[1],I=(0,ve.Z)(Y.x1.sys.manageUserSetPassword,{manual:!0,onSuccess:function(b,L){(0,A._y)(b,function(){l.ZP.success("\u4FEE\u6539\u6210\u529F"),a()})}}),$=function(){if(!_||(0,A.Wq)(_)){l.ZP.info("\u653E\u5F03\u4FEE\u6539\u5BC6\u7801");return}if(_.length<5){l.ZP.error("\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u5C0F\u4E8E5\u4F4D");return}I.run({Id:s.Id,Password:_})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.Z,{open:x,onCancel:function(){return D(!1)},confirmLoading:I.loading,onOk:function(){$()},title:"\u4FEE\u6539\u7528\u6237\u5BC6\u7801",children:(0,e.jsx)(V.Z.Password,{width:"100%",size:"large",maxLength:20,placeholder:"\u8F93\u5165\u5BC6\u7801",value:_,onChange:function(b){P(b.target.value)},status:(0,A.Wq)(_)?"error":void 0})}),(0,e.jsx)(y.ZP,{type:"link",onClick:function(){D(!0)},children:"\u4FEE\u6539\u5BC6\u7801"})]})},be=function(s){var a=s.query,m=s.onSearch,E=(0,t.useState)({}),x=r()(E,2),D=x[0],B=x[1],Z=function(P){P.Page=1,m&&m(P)};return(0,t.useEffect)(function(){B(u()({},a))},[]),(0,e.jsx)(ee.Z,{bordered:!1,style:{marginBottom:10},children:(0,e.jsxs)(R.Z,{labelCol:{span:8},wrapperCol:{span:16},onFinish:function(P){return Z(D)},autoComplete:"off",layout:"inline",children:[(0,e.jsx)(R.Z.Item,{label:"\u5173\u952E\u8BCD",name:"Name",children:(0,e.jsx)(V.Z,{value:D.Keyword||"",onChange:function(P){return B(function(I){return u()(u()({},I),{},{Keyword:P.target.value})})}})}),(0,e.jsx)(R.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(y.ZP,{type:"primary",htmlType:"submit",children:"\u641C\u7D22"})})]})})},Fe=be,Te=n(15009),he=n.n(Te),Le=n(99289),We=n.n(Le),ke=n(74590),Ke=function(g){var s=g.ok,a=g.model,m=(0,t.useState)(!1),E=r()(m,2),x=E[0],D=E[1],B=(0,t.useState)(!1),Z=r()(B,2),_=Z[0],P=Z[1],I=(0,t.useState)({}),$=r()(I,2),h=$[0],b=$[1],L=function(v){D(!0),Y.x1.sys.manageUserUpdateStatus(u()(u()({},v),{},{IsDeleted:!1,Id:a.Id})).then(function(p){(0,A._y)(p,function(){l.ZP.success("\u4FDD\u5B58\u6210\u529F"),P(!1),s&&s()})}).finally(function(){D(!1)})};return(0,t.useEffect)(function(){b({IsActive:a==null?void 0:a.IsActive,IsDeleted:a==null?void 0:a.IsDeleted})},[a]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.Z,{title:"\u4FEE\u6539\u72B6\u6001",confirmLoading:x,open:_,onCancel:function(){P(!1)},footer:(0,e.jsxs)(de.Z,{children:[(0,e.jsx)(ke.Z,{action:We()(he()().mark(function H(){var v;return he()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,Y.x1.sys.manageUserUpdateStatus({Id:a.Id,IsDeleted:!0});case 2:v=k.sent,(0,A._y)(v,function(){P(!1),s()});case 4:case"end":return k.stop()}},H)})),hide:(0,A.Wq)(a.Id)}),(0,e.jsx)(y.ZP,{type:"primary",onClick:function(){L(h)},children:"\u4FDD\u5B58"})]}),children:(0,e.jsx)(R.Z,{children:(0,e.jsx)(R.Z.Item,{label:"\u662F\u5426\u6FC0\u6D3B",children:(0,e.jsx)(fe.Z,{checked:h.IsActive||!1,onChange:function(v){return b(function(p){return u()(u()({},p),{},{IsActive:v})})}})})})}),(0,e.jsx)(y.ZP,{type:"link",onClick:function(){P(!0)},children:"\u4FEE\u6539\u72B6\u6001"})]})},Ne=function(){var g=(0,t.useState)({}),s=r()(g,2),a=s[0],m=s[1],E=(0,t.useState)({}),x=r()(E,2),D=x[0],B=x[1],Z=(0,t.useState)(!1),_=r()(Z,2),P=_[0],I=_[1],$=(0,t.useState)(!1),h=r()($,2),b=h[0],L=h[1],H=(0,t.useState)(void 0),v=r()(H,2),p=v[0],k=v[1],ne=function(C){I(!0),Y.x1.sys.manageUserQueryUserPagination(C).then(function(c){(0,A._y)(c,function(){B(c.data||{})})}).finally(function(){I(!1)})};(0,t.useEffect)(function(){ne(a)},[]);var ue=[{title:"\u8D26\u53F7\u4E3B\u4F53",render:function(C){return(0,e.jsx)("div",{onClick:function(){return k(C.Id)},children:(0,e.jsx)(f.Z,{model:C})})}},{title:"\u7535\u8BDD",render:function(C){return(0,e.jsx)(De,{model:C,ok:function(){ne(a)}})}},{title:"\u6D3B\u52A8\u72B6\u6001",render:function(C,c){return(0,e.jsx)(me.Z,{status:c.IsActive?"success":"default",text:c.IsActive?"\u6D3B\u52A8":"\u51BB\u7ED3"})}},{title:"\u65F6\u95F4",render:function(C,c){return(0,e.jsx)(oe.Z,{model:c})}},{title:"\u64CD\u4F5C",render:function(C,c){return(0,e.jsxs)(de.Z,{size:"small",direction:"horizontal",split:(0,e.jsx)(ye.Z,{type:"vertical"}),children:[(0,e.jsx)(Re,{model:c,ok:function(){}}),(0,e.jsx)(Ke,{model:c,ok:function(){ne(a)}})]})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Be,{userId:p,hide:function(){k(void 0)}}),(0,e.jsx)(pe,{show:b,hide:function(){L(!1)},ok:function(){L(!1),ne(a)}}),(0,e.jsx)(Fe,{query:a,onSearch:function(C){m(C)}}),(0,e.jsx)(ee.Z,{title:"\u5E73\u53F0\u7528\u6237",extra:(0,e.jsx)(y.ZP,{type:"primary",onClick:function(){L(!0)},children:"\u6DFB\u52A0\u7528\u6237"}),children:(0,e.jsx)(te.Z,{loading:P,columns:ue,dataSource:D.Items||[],pagination:{current:a.Page,total:D.TotalCount,pageSize:20,onChange:function(C,c){var j=u()(u()({},a),{},{Page:C});m(j),ne(j)}}})})]})},$e=function(){var g=(0,U.UO)(),s=(0,t.useState)(g.id),a=r()(s,2),m=a[0],E=a[1];return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(F.Z,{destroyInactiveTabPane:!0,activeKey:m||"user",onChange:function(D){return E(D)},items:[{key:"user",label:"\u666E\u901A\u7528\u6237",children:(0,e.jsx)(Ne,{}),icon:(0,e.jsx)(Q.Z,{stroke:1})},{key:"store-user",label:"\u5546\u57CE\u7528\u6237",children:(0,e.jsx)(Se,{}),icon:(0,e.jsx)(W.Z,{stroke:1})},{key:"grade",label:"\u7528\u6237\u7B49\u7EA7",children:(0,e.jsx)(ie,{}),icon:(0,e.jsx)(S.Z,{stroke:1})}]})})}},38295:function(re,X,n){n.d(X,{o:function(){return oe}});var J=n(15009),r=n.n(J),F=n(99289),t=n.n(F),U=n(19632),Q=n.n(U),W=n(47650),S=n(30699),w=n(85134),u=n(66419),l=function(f){var M=T.mallSettings||{},o=[M.StoreNickName,M.StoreEnglishName];f?o=[M.StoreOfficialName,M.StoreOfficialEnglishName].concat(Q()(o)):o=[].concat(Q()(o),[M.StoreOfficialName,M.StoreOfficialEnglishName]);var i=o.filter(function(se){return!(0,u.Wq)(se)}).at(0);return i||w.v.app.name||w.v.app.english_name},y=function(){var d=t()(r()().mark(function f(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,S.x1.mall.notificationUnReadCount().then(function(i){T.notificationCount=i.data.Data||0});case 2:case"end":return o.stop()}},f)}));return function(){return d.apply(this,arguments)}}(),G=function(){var d=t()(r()().mark(function f(){var M;return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,S.x1.mallAdmin.gradeListGrades();case 2:M=i.sent,T.grades=M.data.Data||[];case 4:case"end":return i.stop()}},f)}));return function(){return d.apply(this,arguments)}}(),R=function(){var d=t()(r()().mark(function f(){var M;return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,S.x1.mallAdmin.storeQueryStores();case 2:M=i.sent,T.stores=M.data.Data||[];case 4:case"end":return i.stop()}},f)}));return function(){return d.apply(this,arguments)}}(),V=function(){var d=t()(r()().mark(function f(){var M;return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,S.x1.mall.shoppingCartCount();case 2:M=i.sent,T.shoppingCartCount=M.data.Data||0;case 4:case"end":return i.stop()}},f)}));return function(){return d.apply(this,arguments)}}(),q=function(){var d=t()(r()().mark(function f(){var M;return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,S.x1.mall.storeGetCurrentStore();case 2:M=i.sent,T.currentStore=M.data.Data||{};case 4:case"end":return i.stop()}},f)}));return function(){return d.apply(this,arguments)}}(),ee=function(){var d=t()(r()().mark(function f(){var M;return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,S.x1.mall.storeMostNearbyStore();case 2:M=i.sent,T.mostNearbyStore=M.data.Data||{};case 4:case"end":return i.stop()}},f)}));return function(){return d.apply(this,arguments)}}(),te=function(){var d=t()(r()().mark(function f(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,S.x1.platform.userAuth().then(function(i){T.userAuthResult=i.data||{}});case 2:case"end":return o.stop()}},f)}));return function(){return d.apply(this,arguments)}}(),ae=function(){var d=t()(r()().mark(function f(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,S.x1.sys.adminAuth().then(function(i){T.adminAuthResult=i.data||{}});case 2:case"end":return o.stop()}},f)}));return function(){return d.apply(this,arguments)}}(),Y=function(){var d=t()(r()().mark(function f(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,S.x1.sys.manageAdminQueryAdminPermissions().then(function(i){T.adminPermissions=i.data||{}});case 2:case"end":return o.stop()}},f)}));return function(){return d.apply(this,arguments)}}(),A=function(){var d=t()(r()().mark(function f(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,S.x1.mallManager.storeManagerPermissionGetMyPermission().then(function(i){T.managerPermissions=i.data||{}});case 2:case"end":return o.stop()}},f)}));return function(){return d.apply(this,arguments)}}(),e=function(){var d=t()(r()().mark(function f(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,S.x1.mallManager.storeManagerAuth().then(function(i){T.storeManagerAuthResult=i.data||{}});case 2:case"end":return o.stop()}},f)}));return function(){return d.apply(this,arguments)}}(),ie=function(){var d=t()(r()().mark(function f(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,S.x1.mall.userStoreUserAuth().then(function(i){T.storeUserAuthResult=i.data||{}});case 2:case"end":return o.stop()}},f)}));return function(){return d.apply(this,arguments)}}(),T=(0,W.sj)({queryUserAuthResult:te,getAppName:l,queryAdminAuthResult:ae,queryStoreManagerAuthResult:e,queryStoreUserAuthResult:ie,queryAdminPermission:Y,queryStoreManagerPermission:A,queryGrades:G,queryStores:R,queryNotificationCount:y,queryShoppingCartCount:V,queryCurrentStore:q,queryMostNearbyStore:ee,messageHistory:[],grades:[],stores:[],notificationCount:0,headerHeight:0,bottomHeight:0,mallSettings:{},shoppingCartCount:0,currentStore:void 0,mostNearbyStore:void 0,userAuthResult:void 0,adminAuthResult:void 0,adminPermissions:void 0,storeUserAuthResult:void 0,storeManagerAuthResult:void 0,managerPermissions:void 0,get user(){var d;return(d=this.userAuthResult)===null||d===void 0?void 0:d.User},get admin(){var d;return(d=this.adminAuthResult)===null||d===void 0?void 0:d.Admin},get storeUser(){var d;return(d=this.storeUserAuthResult)===null||d===void 0?void 0:d.StoreUser},get storeManager(){var d;return(d=this.storeManagerAuthResult)===null||d===void 0?void 0:d.StoreManager}}),oe=function(){return(0,W.ey)(T)}}}]);
