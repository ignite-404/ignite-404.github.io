"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6346],{74590:function(w,H,n){var z=n(15009),r=n.n(z),O=n(99289),t=n.n(O),p=n(5574),G=n.n(p),U=n(83062),R=n(14726),K=n(67294),u=n(85893);H.Z=function(i){var g=i.action,W=i.confirmText,M=i.hide,$=(0,K.useState)(!1),J=G()($,2),V=J[0],q=J[1],ee=W||"\u786E\u5B9A\u5220\u9664\uFF1F",N=function(){var y=t()(r()().mark(function e(){return r()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(confirm(ee)){Q.next=2;break}return Q.abrupt("return");case 2:return q(!0),Q.prev=3,Q.next=6,g();case 6:return Q.prev=6,q(!1),Q.finish(6);case 9:case"end":return Q.stop()}},e,null,[[3,,6,9]])}));return function(){return y.apply(this,arguments)}}();return M?null:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(U.Z,{title:ee,children:(0,u.jsx)(R.ZP,{loading:V,danger:!0,type:"link",onClick:function(){N()},children:"\u5220\u9664"})})})}},23806:function(w,H,n){var z=n(1288),r=n(85893);H.Z=function(O){var t=O.model,p=O.fallback;if(t==null||t==null)return null;var G=t==null?void 0:t.CreationTime,U=t==null?void 0:t.LastModificationTime;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{style:{},children:[(0,r.jsx)("div",{children:(0,r.jsx)(z.Z,{prefix:(0,r.jsx)("span",{children:"\u521B\u5EFA\uFF1A"}),onlyDate:!0,timeStr:G,fallback:p})}),(0,r.jsx)("div",{children:(0,r.jsx)(z.Z,{prefix:(0,r.jsx)("span",{children:"\u4FEE\u6539\uFF1A"}),onlyDate:!0,timeStr:U,fallback:p})})]})})}},1288:function(w,H,n){var z=n(78957),r=n(83062),O=n(46629),t=n(85893);H.Z=function(p){var G,U=p.timeStr,R=p.fallback,K=p.onlyDate,u=p.prefix,i=(G=(0,O.mg)(U))===null||G===void 0?void 0:G.add(O.Mg,"hour");if(!i)return R||null;var g=(0,O.ND)().utc().add(O.Mg,"hour"),W=i.isSame(g,"year"),M=i.diff(g,"day"),$=W?i.format(O.AK):i.format(O.vc),J=function(){return(0,t.jsxs)("div",{children:[(0,t.jsxs)(z.Z,{direction:"horizontal",children:[(0,t.jsx)("div",{children:i.fromNow()}),(0,t.jsx)("div",{children:i.format(O.On)})]}),(0,t.jsx)("div",{children:i.format(O.t9)})]})};return(0,t.jsx)(r.Z,{title:J(),children:(0,t.jsxs)(z.Z,{direction:"horizontal",children:[u,(0,t.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:K?i.format(O.vc):i.format(O.dq)})]})})}},11518:function(w,H,n){var z=n(55241),r=n(78957),O=n(7134),t=n(55932),p=n(95813),G=n(8885),U=n(85893);H.Z=function(R){var K=R.model;if(!K)return null;var u=(0,t.SZ)(K.Avatar,{width:100,height:100}),i=(0,p.zO)([K.NickName,K.IdentityName,K.Id].filter(function(g){return g&&g.length>0}).at(0)||"--",10);return(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(z.Z,{content:(0,U.jsx)(G.Z,{model:K}),children:(0,U.jsxs)(r.Z,{direction:"horizontal",children:[(0,U.jsx)(O.C,{size:"small",shape:"square",src:u,children:i}),(0,U.jsx)("span",{children:(0,U.jsx)("a",{children:i})})]})})})}},8885:function(w,H,n){var z=n(78957),r=n(7134),O=n(55932),t=n(95813),p=n(85893);H.Z=function(G){var U,R=G.model;if(!R)return null;var K=(0,O.SZ)(R.Avatar,{width:100,height:100}),u=(0,t.zO)([R.NickName,R.IdentityName,R.Id].filter(function(i){return i&&i.length>0}).at(0)||"--",10);return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(z.Z,{direction:"horizontal",children:[(0,p.jsx)("div",{children:(0,p.jsx)(r.C,{src:K,size:100})}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("p",{children:["\u6635\u79F0\uFF1A",u]}),(0,p.jsxs)("p",{children:["\u7528\u6237\u540D\uFF1A",(R==null?void 0:R.IdentityName)||"--"]}),(0,p.jsxs)("p",{children:["\u624B\u673A\u53F7\uFF1A",(R==null||(U=R.UserMobile)===null||U===void 0?void 0:U.MobilePhone)||"--"]})]})]})})}},92088:function(w,H,n){n.d(H,{d2:function(){return G},t2:function(){return R},tz:function(){return U}});var z=n(5574),r=n.n(z),O=n(67294),t=n(18629),p=n(46629),G=function(){var u=(0,O.useState)(void 0),i=r()(u,2),g=i[0],W=i[1];return(0,t.Z)(function(){W(p.ND.utc())},1e3,{immediate:!0}),g||p.ND.utc()},U=function(u){var i=(0,O.useState)(u||!1),g=r()(i,2),W=g[0],M=g[1];return{open:W,setOpen:function(){return M(!0)},setClose:function(){return M(!1)}}},R=function(u){var i=(0,O.useState)(u),g=r()(i,2),W=g[0],M=g[1];return{data:W,open:W!=null,setData:function(J){return M(J)},onHide:function(){return M(void 0)}}}},64766:function(w,H,n){n.r(H),n.d(H,{default:function(){return ze}});var z=n(5574),r=n.n(z),O=n(92398),t=n(67294),p=n(76021),G=n(17226),U=n(87399),R=n(27909),K=n(97857),u=n.n(K),i=n(45360),g=n(14726),W=n(85576),M=n(11346),$=n(65233),J=n(24435),V=n(4393),q=n(80799),ee=n(38295),N=n(30699),y=n(95813),e=n(85893),le=function(){var m=(0,t.useState)(!1),s=r()(m,2),a=s[0],l=s[1],_=(0,t.useState)(!1),h=r()(_,2),S=h[0],P=h[1],Z=(0,t.useState)(""),c=r()(Z,2),C=c[0],E=c[1],T=(0,t.useState)(!1),f=r()(T,2),D=f[0],A=f[1],k=(0,t.useState)({}),d=r()(k,2),j=d[0],B=d[1],Y=(0,ee.o)(),X=function(){l(!0),Y.queryGrades().finally(function(){return l(!1)})},I=function(L){P(!0),N.x1.mallAdmin.gradeSave(u()({},L)).then(function(F){(0,y._y)(F,function(){i.ZP.success("\u4FDD\u5B58\u6210\u529F"),A(!1),X()})}).finally(function(){P(!1)})},x=function(L){confirm("\u786E\u5B9A\u5220\u9664\uFF1F")&&(E(L.Id||""),N.x1.mallAdmin.gradeUpdateStatus({Id:L.Id,IsDeleted:!0}).then(function(F){(0,y._y)(F,function(){i.ZP.success("\u5220\u9664\u6210\u529F"),X()})}).finally(function(){E("")}))},o=[{title:"\u4F1A\u5458\u540D",render:function(L,F){return F.Name}},{title:"\u4F1A\u5458\u63CF\u8FF0",render:function(L,F){return F.Description}},{title:"\u6392\u5E8F",render:function(L,F){return F.Sort}},{title:"\u4F1A\u5458\u4EBA\u6570",render:function(L,F){return F.UserCount}},{title:"\u64CD\u4F5C",width:200,render:function(L,F){return(0,e.jsxs)(g.ZP.Group,{children:[(0,e.jsx)(g.ZP,{type:"link",onClick:function(){B(F),A(!0)},children:"\u7F16\u8F91"}),(0,e.jsx)(g.ZP,{type:"link",loading:C===F.Id,onClick:function(){x(F)},danger:!0,children:"\u5220\u9664"})]})}}];return(0,t.useEffect)(function(){X()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(W.Z,{title:"\u7F16\u8F91\u4EF7\u683C",open:D,onCancel:function(){A(!1)},confirmLoading:S,onOk:function(){I(j)},children:(0,e.jsxs)(M.Z,{children:[(0,e.jsx)(M.Z.Item,{label:"\u540D\u79F0",children:(0,e.jsx)($.Z,{value:j.Name||"",onChange:function(L){B(function(F){return u()(u()({},F),{},{Name:L.target.value})})}})}),(0,e.jsx)(M.Z.Item,{label:"\u63CF\u8FF0",children:(0,e.jsx)($.Z,{value:j.Description||"",onChange:function(L){B(function(F){return u()(u()({},F),{},{Description:L.target.value})})}})}),(0,e.jsx)(M.Z.Item,{label:"\u6392\u5E8F",children:(0,e.jsx)(J.Z,{value:j.Sort||0,onChange:function(L){B(function(F){return u()(u()({},F),{},{Sort:L||0})})}})})]})}),(0,e.jsx)(V.Z,{title:"\u4F1A\u5458\u7B49\u7EA7",loading:a,style:{marginBottom:10},extra:(0,e.jsx)(g.ZP,{type:"primary",onClick:function(){A(!0),B({})},children:"\u65B0\u589E"}),children:(0,e.jsx)(q.Z,{dataSource:(0,y.iu)(Y.grades||[]),columns:o,pagination:!1})})]})},Q=n(34041),de=n(23806),ve=n(1288),ce=n(11518),he=n(35291),xe=n(40056),fe=n(71230),ne=n(15746),re=n(55742),te=n(66309),je=function(m){var s=m.model,a=m.ok,l=(0,t.useState)(!1),_=r()(l,2),h=_[0],S=_[1],P=(0,t.useState)(!1),Z=r()(P,2),c=Z[0],C=Z[1],E=(0,t.useState)({}),T=r()(E,2),f=T[0],D=T[1],A=function(){if((f.Balance||0)<=0){i.ZP.error("\u91D1\u989D\u4E0D\u80FD\u4E3A0");return}S(!0),f.UserId=s.Id||0,N.x1.mallAdmin.balanceUpdateUserBalance(f).then(function(j){(0,y._y)(j,function(){i.ZP.success("\u4FDD\u5B58\u6210\u529F"),C(!1),a&&a()})}).finally(function(){S(!1)})};(0,t.useEffect)(function(){c&&D({ActionType:1,Balance:0,UserId:0,Message:""})},[c]);var k=f.ActionType==-1?s.Balance:9999999;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(W.Z,{title:"\u8C03\u6574",open:c,onCancel:function(){C(!1)},confirmLoading:h,onOk:function(){A()},children:[(0,e.jsx)(xe.Z,{message:"\u5F53\u524D\u4F59\u989D\uFF1A".concat(s.Balance),style:{marginBottom:10}}),(0,e.jsxs)(fe.Z,{gutter:[15,15],children:[(0,e.jsx)(ne.Z,{span:24,children:(0,e.jsx)(J.Z,{title:"\u91D1\u989D",min:0,max:k,value:f.Balance,onChange:function(j){D(u()(u()({},f),{},{Balance:j||0}))}})}),(0,e.jsx)(ne.Z,{span:24,children:(0,e.jsxs)(re.ZP.Group,{value:f.ActionType,onChange:function(j){D(u()(u()({},f),{},{ActionType:j.target.value}))},children:[(0,e.jsx)(re.ZP,{value:-1,children:"\u6263\u51CF"}),(0,e.jsx)(re.ZP,{value:1,children:"\u5145\u503C"})]})}),(0,e.jsx)(ne.Z,{span:24,children:(0,e.jsx)($.Z.TextArea,{placeholder:"\u63CF\u8FF0\u4E00\u4E0B\u8FD9\u6B21\u8C03\u6574...",value:f.Message||"",onChange:function(j){D(u()(u()({},f),{},{Message:j.target.value}))}})})]})]}),(0,e.jsx)(te.Z,{color:"warning",onClick:function(){C(!0)},style:{cursor:"pointer"},children:(0,y.lb)(s.Balance||0)})]})},se=n(72269),ge=function(m){var s=m.query,a=m.onSearch,l=(0,t.useState)({}),_=r()(l,2),h=_[0],S=_[1],P=function(c){c.Page=1,a&&a(c)};return(0,t.useEffect)(function(){S(u()({},s))},[s]),(0,e.jsx)(V.Z,{bordered:!1,style:{marginBottom:10},children:(0,e.jsxs)(M.Z,{labelCol:{span:8},children:[(0,e.jsx)(M.Z.Item,{label:"\u6FC0\u6D3B",children:(0,e.jsx)(se.Z,{checked:h.Active||!1,onChange:function(c){S(u()(u()({},h),{},{Active:c}))}})}),(0,e.jsx)(M.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(g.ZP,{type:"primary",onClick:function(){return P(h)},children:"\u641C\u7D22"})})]})})},ae=n(78957),_e=function(s){var a=s.ok,l=s.model,_=(0,t.useState)(!1),h=r()(_,2),S=h[0],P=h[1],Z=(0,t.useState)(!1),c=r()(Z,2),C=c[0],E=c[1],T=(0,t.useState)({}),f=r()(T,2),D=f[0],A=f[1],k=function(j){P(!0),N.x1.mallAdmin.userUpdateStatus(u()({},j)).then(function(B){(0,y._y)(B,function(){i.ZP.success("\u4FDD\u5B58\u6210\u529F"),a&&a()})}).finally(function(){P(!1)})};return(0,t.useEffect)(function(){A({IsActive:l.IsActive,Id:l.Id})},[l]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(W.Z,{title:"\u4FEE\u6539\u72B6\u6001",confirmLoading:S,open:C,onCancel:function(){E(!1)},onOk:function(){k(D)},style:{padding:0},children:(0,e.jsxs)(M.Z,{children:[(0,e.jsx)(M.Z.Item,{hidden:!0,name:"Id",children:(0,e.jsx)($.Z,{})}),(0,e.jsx)(M.Z.Item,{label:"\u662F\u5426\u6FC0\u6D3B",children:(0,e.jsx)(se.Z,{checked:D.IsActive||!1,onChange:function(j){A(function(B){return u()(u()({},B),{},{IsActive:j})})}})})]})}),(0,e.jsxs)(ae.Z,{children:[l.IsActive?(0,e.jsx)(te.Z,{color:"green",children:"\u6B63\u5E38"}):(0,e.jsx)(te.Z,{color:"error",children:"\u7981\u7528"}),(0,e.jsx)(g.ZP,{size:"small",type:"link",onClick:function(){E(!0)},children:"\u4FEE\u6539"})]})]})},Ce=_e,Se=function(){var m=(0,t.useState)({Page:1}),s=r()(m,2),a=s[0],l=s[1],_=(0,t.useState)(!1),h=r()(_,2),S=h[0],P=h[1],Z=(0,t.useState)(0),c=r()(Z,2),C=c[0],E=c[1],T=(0,t.useState)({}),f=r()(T,2),D=f[0],A=f[1],k=(0,ee.o)(),d=function(x){P(!0),N.x1.mallAdmin.userQueryPaging(u()({},x)).then(function(o){(0,y._y)(o,function(){A(o.data||{})})}).finally(function(){P(!1)})},j=function(x,o){confirm("\u786E\u5B9A\u8BBE\u7F6E\uFF1F")&&(E(x.Id||0),N.x1.mallAdmin.gradeSetUserGrade({UserId:x.Id,GradeId:o}).then(function(v){(0,y._y)(v,function(){i.ZP.success("\u8BBE\u7F6E\u6210\u529F"),d(a)})}).finally(function(){E(0)}))},B=[{title:"\u8D26\u53F7\u4E3B\u4F53",render:function(x,o){return(0,e.jsx)(ce.Z,{model:o.User})}},{key:"user-grade",title:"\u4F1A\u5458\u7B49\u7EA7",render:function(x,o){var v;return(0,e.jsx)(Q.Z,{size:"small",loading:C==o.Id,onChange:function(F){j(o,F)},value:(v=o.Grade)===null||v===void 0?void 0:v.Id,options:k.grades.map(function(L){return{key:L.Id,label:L.Name,value:L.Id}}),allowClear:!0,placeholder:"\u9009\u62E9\u4F1A\u5458\u7B49\u7EA7",style:{minWidth:150}})}},{title:"\u624B\u673A\u53F7",render:function(x,o){var v;return((v=o.User)===null||v===void 0||(v=v.UserMobile)===null||v===void 0?void 0:v.MobilePhone)||"--"}},{key:"balance",title:"\u8D26\u6237\u4F59\u989D",render:function(x,o){return(0,e.jsx)(je,{model:o,ok:function(){d(a)}})}},{title:"\u4F59\u989D\u79EF\u5206",render:function(x,o){return o.Points}},{title:"\u5386\u53F2\u79EF\u5206",render:function(x,o){return o.HistoryPoints}},{title:"\u72B6\u6001",render:function(x,o){return(0,e.jsx)(Ce,{model:o,ok:function(){d(a)}})}},{title:"\u6700\u8FD1\u4E0A\u7EBF\u65F6\u95F4",render:function(x,o){return(0,e.jsx)(ve.Z,{timeStr:o.LastActivityTime})}},{title:"\u65F6\u95F4",render:function(x,o){return(0,e.jsx)(de.Z,{model:o})}},{title:"\u64CD\u4F5C",width:200,render:function(x,o){return(0,e.jsx)(g.ZP.Group,{children:(0,e.jsx)(g.ZP,{type:"link",onClick:function(){alert("todo")},children:"\u67E5\u770B"})})}}],Y=["user-grade"],X=B.filter(function(I){return Y.indexOf(I.key)<=0});return(0,t.useEffect)(function(){k.queryGrades().finally(function(){d(a)})},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ge,{query:a,onSearch:function(x){l(x),d(x)}}),(0,e.jsx)(V.Z,{title:"\u5546\u57CE\u4F1A\u5458",loading:S,style:{marginBottom:10},extra:(0,e.jsx)(g.ZP,{type:"text",onClick:function(){p.m8.push("/admin/settings/user/list")},children:"\u67E5\u770B\u5E73\u53F0\u7528\u6237\u4FE1\u606F"}),children:(0,e.jsx)(q.Z,{dataSource:D.Items||[],columns:(0,he.tC)()?X:B,pagination:{pageSize:D.PageSize,total:D.TotalCount,onChange:function(x,o){var v=u()(u()({},a),{},{Page:x});l(v),d(v)}}})})]})},ue=n(40411),Ze=n(96074),Ee=function(m){var s=m.show,a=m.hide,l=m.ok,_=(0,t.useState)(!1),h=r()(_,2),S=h[0],P=h[1],Z=(0,t.useState)({}),c=r()(Z,2),C=c[0],E=c[1],T=function(D){P(!0),N.x1.sys.manageUserCreateUser(D).then(function(A){A.data.Error?i.ZP.error(A.data.Error.Message):(i.ZP.success("\u4FDD\u5B58\u6210\u529F"),l&&l())}).finally(function(){P(!1)})};return(0,t.useEffect)(function(){s&&E({})},[s]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(W.Z,{title:"\u65B0\u589E\u7528\u6237",confirmLoading:S,open:s,onCancel:function(){a&&a()},footer:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(g.ZP,{type:"primary",onClick:function(){T(C)},children:"\u4FDD\u5B58"})}),children:(0,e.jsx)(M.Z,{children:(0,e.jsx)(M.Z.Item,{label:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{pattern:new RegExp("^[a-zA-Z0-9_]{3,20}$"),message:"\u7528\u6237\u540D\u5FC5\u987B\u662F3-16\u4F4D\u5B57\u6BCD\u3001\u6570\u5B57\u6216\u4E0B\u5212\u7EBF"}],children:(0,e.jsx)($.Z,{value:C.IdentityName||"",onChange:function(D){E(function(A){return u()(u()({},A),{},{IdentityName:D.target.value})})}})})})})})},ie=n(68421),Ie=n(26380),Pe=n(92088),ye=function(m){var s,a,l=m.model,_=m.ok,h=(0,Pe.tz)(),S=h.open,P=h.setOpen,Z=h.setClose,c=(0,t.useState)(""),C=r()(c,2),E=C[0],T=C[1];if(!l)return null;var f=(0,ie.Z)(N.x1.sys.manageUserRemoveMobiles,{manual:!0,onSuccess:function(j,B){(0,y._y)(j,function(){i.ZP.success("\u79FB\u9664\u6210\u529F"),_()})}}),D=function(){confirm("\u786E\u5B9A\u79FB\u9664\u624B\u673A\u53F7\uFF1F")&&f.run({Id:l.Id})},A=(0,ie.Z)(N.x1.sys.manageUserSetMobile,{manual:!0,onSuccess:function(j,B){(0,y._y)(j,function(){i.ZP.success("\u8BBE\u7F6E\u6210\u529F"),_()})}}),k=function(){if(!E||(0,y.Wq)(E)){i.ZP.info("\u653E\u5F03\u8BBE\u7F6E\u624B\u673A\u53F7\u7801");return}if(!/^(?:(?:\+|00)86)?1[3-9]\d{9}$/.test(E)){i.ZP.error("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u4E0D\u6B63\u786E");return}A.run({Id:l.Id,Mobile:E})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(W.Z,{open:S,onCancel:function(){return Z()},confirmLoading:A.loading,onOk:function(){k()},title:"\u8BBE\u7F6E\u624B\u673A\u53F7",children:(0,e.jsx)($.Z,{width:"100%",size:"large",maxLength:11,placeholder:"\u8F93\u5165\u5B8C\u6574\u624B\u673A\u53F7",value:E,onChange:function(j){T(j.target.value)},status:(0,y.tq)(E)?void 0:"error"})}),(0,e.jsxs)(ae.Z,{direction:"vertical",children:[(0,y.Wq)((s=l.UserMobile)===null||s===void 0?void 0:s.MobilePhone)||(0,e.jsx)(te.Z,{icon:(0,e.jsx)(Ie.Z,{stroke:1}),color:"green",closable:!0,onClose:function(j){j.preventDefault(),D()},children:(a=l.UserMobile)===null||a===void 0?void 0:a.MobilePhone}),(0,e.jsx)(g.ZP,{type:"link",onClick:function(){P()},children:"\u7ED1\u5B9A\u624B\u673A"})]})]})},De=n(48054),oe=n(32983),b=n(26412),pe=function(m){var s=m.user,a=s==null?void 0:s.AdminIdentity;return!a||(0,y.Wq)(a==null?void 0:a.Id)?(0,e.jsx)(oe.Z,{}):(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(b.Z,{title:"User Info",bordered:!0,children:[(0,e.jsx)(b.Z.Item,{label:"Product",children:"Cloud Database"}),(0,e.jsx)(b.Z.Item,{label:"Billing Mode",children:"Prepaid"}),(0,e.jsx)(b.Z.Item,{label:"Automatic Renewal",children:"YES"}),(0,e.jsx)(b.Z.Item,{label:"Order time",children:"2018-04-24 18:00:00"}),(0,e.jsx)(b.Z.Item,{label:"Usage Time",span:2,children:"2019-04-24 18:00:00"}),(0,e.jsx)(b.Z.Item,{label:"Status",span:3,children:(0,e.jsx)(ue.Z,{status:"processing",text:"Running"})}),(0,e.jsx)(b.Z.Item,{label:"Negotiated Amount",children:"$80.00"}),(0,e.jsx)(b.Z.Item,{label:"Discount",children:"$20.00"}),(0,e.jsx)(b.Z.Item,{label:"Official Receipts",children:"$60.00"}),(0,e.jsxs)(b.Z.Item,{label:"Config Info",children:["Data disk type: MongoDB",(0,e.jsx)("br",{}),"Database version: 3.4",(0,e.jsx)("br",{}),"Package: dds.mongo.mid",(0,e.jsx)("br",{}),"Storage space: 10 GB",(0,e.jsx)("br",{}),"Replication factor: 3",(0,e.jsx)("br",{}),"Region: East China 1",(0,e.jsx)("br",{})]})]})})},Me=n(7134),Ae=n(55932),Oe=function(m){var s=m.user;if((0,y.Wq)(s==null?void 0:s.Id))return(0,e.jsx)(oe.Z,{});var a=(0,Ae.SZ)(s.Avatar);return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(b.Z,{title:"User Info",bordered:!0,children:[(0,e.jsx)(b.Z.Item,{label:"Product",children:(0,e.jsx)(Me.C,{size:100,src:a,children:s.IdentityName})}),(0,e.jsx)(b.Z.Item,{label:"Billing Mode",children:"Prepaid"}),(0,e.jsx)(b.Z.Item,{label:"Automatic Renewal",children:"YES"}),(0,e.jsx)(b.Z.Item,{label:"Order time",children:"2018-04-24 18:00:00"}),(0,e.jsx)(b.Z.Item,{label:"Usage Time",span:2,children:"2019-04-24 18:00:00"}),(0,e.jsx)(b.Z.Item,{label:"Status",span:3,children:(0,e.jsx)(ue.Z,{status:"processing",text:"Running"})}),(0,e.jsx)(b.Z.Item,{label:"Negotiated Amount",children:"$80.00"}),(0,e.jsx)(b.Z.Item,{label:"Discount",children:"$20.00"}),(0,e.jsx)(b.Z.Item,{label:"Official Receipts",children:"$60.00"}),(0,e.jsxs)(b.Z.Item,{label:"Config Info",children:["Data disk type: MongoDB",(0,e.jsx)("br",{}),"Database version: 3.4",(0,e.jsx)("br",{}),"Package: dds.mongo.mid",(0,e.jsx)("br",{}),"Storage space: 10 GB",(0,e.jsx)("br",{}),"Replication factor: 3",(0,e.jsx)("br",{}),"Region: East China 1",(0,e.jsx)("br",{})]})]})})},Be=function(m){var s=m.userId,a=(0,t.useState)(!1),l=r()(a,2),_=l[0],h=l[1],S=(0,t.useState)({}),P=r()(S,2),Z=P[0],c=P[1],C=function(T){(0,y.Wq)(T)||(h(!0),N.x1.sys.manageUserGetProfileById({Id:T}).then(function(f){c(f.data.Data||{})}).finally(function(){h(!1)}))};return(0,t.useEffect)(function(){s&&C(s)},[s]),_?(0,e.jsx)(De.Z,{}):(0,y.Wq)(Z==null?void 0:Z.Id)?(0,e.jsx)(oe.Z,{}):(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(fe.Z,{gutter:10,children:[(0,e.jsx)(ne.Z,{span:12,children:(0,e.jsx)(Oe,{user:Z})}),(0,e.jsx)(ne.Z,{span:12,children:(0,e.jsx)(pe,{user:Z})})]})})},Fe=function(m){var s=m.userId,a=m.hide,l=!(0,y.Wq)(s);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(W.Z,{title:"\u7528\u6237\u4FE1\u606F",width:"90%",open:l,onCancel:function(){a()},onOk:function(){a()},children:(0,e.jsx)(Be,{userId:s||""})})})},Ue=function(m){var s=m.model,a=m.ok,l=(0,t.useState)(!1),_=r()(l,2),h=_[0],S=_[1],P=(0,t.useState)(""),Z=r()(P,2),c=Z[0],C=Z[1],E=(0,ie.Z)(N.x1.sys.manageUserSetPassword,{manual:!0,onSuccess:function(D,A){(0,y._y)(D,function(){i.ZP.success("\u4FEE\u6539\u6210\u529F"),a()})}}),T=function(){if(!c||(0,y.Wq)(c)){i.ZP.info("\u653E\u5F03\u4FEE\u6539\u5BC6\u7801");return}if(c.length<5){i.ZP.error("\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u5C0F\u4E8E5\u4F4D");return}E.run({Id:s.Id,Password:c})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(W.Z,{open:h,onCancel:function(){return S(!1)},confirmLoading:E.loading,onOk:function(){T()},title:"\u4FEE\u6539\u7528\u6237\u5BC6\u7801",children:(0,e.jsx)($.Z.Password,{width:"100%",size:"large",maxLength:20,placeholder:"\u8F93\u5165\u5BC6\u7801",value:c,onChange:function(D){C(D.target.value)},status:(0,y.Wq)(c)?"error":void 0})}),(0,e.jsx)(g.ZP,{type:"link",onClick:function(){S(!0)},children:"\u4FEE\u6539\u5BC6\u7801"})]})},be=function(s){var a=s.query,l=s.onSearch,_=(0,t.useState)({}),h=r()(_,2),S=h[0],P=h[1],Z=function(C){C.Page=1,l&&l(C)};return(0,t.useEffect)(function(){P(u()({},a))},[]),(0,e.jsx)(V.Z,{bordered:!1,style:{marginBottom:10},children:(0,e.jsxs)(M.Z,{labelCol:{span:8},wrapperCol:{span:16},onFinish:function(C){return Z(S)},autoComplete:"off",layout:"inline",children:[(0,e.jsx)(M.Z.Item,{label:"\u5173\u952E\u8BCD",name:"Name",children:(0,e.jsx)($.Z,{value:S.Keyword||"",onChange:function(C){return P(function(E){return u()(u()({},E),{},{Keyword:C.target.value})})}})}),(0,e.jsx)(M.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(g.ZP,{type:"primary",htmlType:"submit",children:"\u641C\u7D22"})})]})})},Te=be,Re=n(15009),me=n.n(Re),Le=n(99289),We=n.n(Le),ke=n(74590),Ke=function(m){var s=m.ok,a=m.model,l=(0,t.useState)(!1),_=r()(l,2),h=_[0],S=_[1],P=(0,t.useState)(!1),Z=r()(P,2),c=Z[0],C=Z[1],E=(0,t.useState)({}),T=r()(E,2),f=T[0],D=T[1],A=function(d){S(!0),N.x1.sys.manageUserUpdateStatus(u()(u()({},d),{},{IsDeleted:!1,Id:a.Id})).then(function(j){(0,y._y)(j,function(){i.ZP.success("\u4FDD\u5B58\u6210\u529F"),C(!1),s&&s()})}).finally(function(){S(!1)})};return(0,t.useEffect)(function(){D({IsActive:a==null?void 0:a.IsActive,IsDeleted:a==null?void 0:a.IsDeleted})},[a]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(W.Z,{title:"\u4FEE\u6539\u72B6\u6001",confirmLoading:h,open:c,onCancel:function(){C(!1)},footer:(0,e.jsxs)(ae.Z,{children:[(0,e.jsx)(ke.Z,{action:We()(me()().mark(function k(){var d;return me()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,N.x1.sys.manageUserUpdateStatus({Id:a.Id,IsDeleted:!0});case 2:d=B.sent,(0,y._y)(d,function(){C(!1),s()});case 4:case"end":return B.stop()}},k)})),hide:(0,y.Wq)(a.Id)}),(0,e.jsx)(g.ZP,{type:"primary",onClick:function(){A(f)},children:"\u4FDD\u5B58"})]}),children:(0,e.jsx)(M.Z,{children:(0,e.jsx)(M.Z.Item,{label:"\u662F\u5426\u6FC0\u6D3B",children:(0,e.jsx)(se.Z,{checked:f.IsActive||!1,onChange:function(d){return D(function(j){return u()(u()({},j),{},{IsActive:d})})}})})})}),(0,e.jsx)(g.ZP,{type:"link",onClick:function(){C(!0)},children:"\u4FEE\u6539\u72B6\u6001"})]})},Ne=function(){var m=(0,t.useState)({}),s=r()(m,2),a=s[0],l=s[1],_=(0,t.useState)({}),h=r()(_,2),S=h[0],P=h[1],Z=(0,t.useState)(!1),c=r()(Z,2),C=c[0],E=c[1],T=(0,t.useState)(!1),f=r()(T,2),D=f[0],A=f[1],k=(0,t.useState)(void 0),d=r()(k,2),j=d[0],B=d[1],Y=function(x){E(!0),N.x1.sys.manageUserQueryUserPagination(x).then(function(o){(0,y._y)(o,function(){P(o.data||{})})}).finally(function(){E(!1)})};(0,t.useEffect)(function(){Y(a)},[]);var X=[{title:"\u8D26\u53F7\u4E3B\u4F53",render:function(x){return(0,e.jsx)("div",{onClick:function(){return B(x.Id)},children:(0,e.jsx)(ce.Z,{model:x})})}},{title:"\u7535\u8BDD",render:function(x){return(0,e.jsx)(ye,{model:x,ok:function(){Y(a)}})}},{title:"\u6D3B\u52A8\u72B6\u6001",render:function(x,o){return(0,e.jsx)(ue.Z,{status:o.IsActive?"success":"default",text:o.IsActive?"\u6D3B\u52A8":"\u51BB\u7ED3"})}},{title:"\u65F6\u95F4",render:function(x,o){return(0,e.jsx)(de.Z,{model:o})}},{title:"\u64CD\u4F5C",render:function(x,o){return(0,e.jsxs)(ae.Z,{size:"small",direction:"horizontal",split:(0,e.jsx)(Ze.Z,{type:"vertical"}),children:[(0,e.jsx)(Ue,{model:o,ok:function(){}}),(0,e.jsx)(Ke,{model:o,ok:function(){Y(a)}})]})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Fe,{userId:j,hide:function(){B(void 0)}}),(0,e.jsx)(Ee,{show:D,hide:function(){A(!1)},ok:function(){A(!1),Y(a)}}),(0,e.jsx)(Te,{query:a,onSearch:function(x){l(x)}}),(0,e.jsx)(V.Z,{title:"\u5E73\u53F0\u7528\u6237",extra:(0,e.jsx)(g.ZP,{type:"primary",onClick:function(){A(!0)},children:"\u6DFB\u52A0\u7528\u6237"}),children:(0,e.jsx)(q.Z,{loading:C,columns:X,dataSource:S.Items||[],pagination:{current:a.Page,total:S.TotalCount,pageSize:20,onChange:function(x,o){var v=u()(u()({},a),{},{Page:x});l(v),Y(v)}}})})]})},ze=function(){var m=(0,p.UO)(),s=(0,t.useState)(m.id),a=r()(s,2),l=a[0],_=a[1];return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.Z,{destroyInactiveTabPane:!0,activeKey:l||"user",onChange:function(S){return _(S)},items:[{key:"user",label:"\u666E\u901A\u7528\u6237",children:(0,e.jsx)(Ne,{}),icon:(0,e.jsx)(G.Z,{stroke:1})},{key:"store-user",label:"\u5546\u57CE\u7528\u6237",children:(0,e.jsx)(Se,{}),icon:(0,e.jsx)(U.Z,{stroke:1})},{key:"grade",label:"\u7528\u6237\u7B49\u7EA7",children:(0,e.jsx)(le,{}),icon:(0,e.jsx)(R.Z,{stroke:1})}]})})}}}]);
