"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6346],{74590:function(ee,V,n){var Q=n(15009),r=n.n(Q),O=n(99289),t=n.n(O),y=n(5574),Y=n.n(y),B=n(83062),T=n(28036),z=n(67294),u=n(85893);V.Z=function(d){var I=d.action,R=d.confirmText,Z=d.hide,W=(0,z.useState)(!1),G=Y()(W,2),$=G[0],X=G[1],q=R||"\u786E\u5B9A\u5220\u9664\uFF1F",H=function(){var P=t()(r()().mark(function e(){return r()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(confirm(q)){w.next=2;break}return w.abrupt("return");case 2:return X(!0),w.prev=3,w.next=6,I();case 6:return w.prev=6,X(!1),w.finish(6);case 9:case"end":return w.stop()}},e,null,[[3,,6,9]])}));return function(){return P.apply(this,arguments)}}();return Z?null:(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(B.Z,{title:q,children:(0,u.jsx)(T.ZP,{loading:$,danger:!0,type:"link",onClick:function(){H()},children:"\u5220\u9664"})})})}},23806:function(ee,V,n){var Q=n(1288),r=n(85893);V.Z=function(O){var t=O.model,y=O.fallback;if(t==null||t==null)return null;var Y=t==null?void 0:t.CreationTime,B=t==null?void 0:t.LastModificationTime;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{style:{},children:[(0,r.jsx)("div",{children:(0,r.jsx)(Q.Z,{prefix:(0,r.jsx)("span",{children:"\u521B\u5EFA\uFF1A"}),onlyDate:!0,timeStr:Y,fallback:y})}),(0,r.jsx)("div",{children:(0,r.jsx)(Q.Z,{prefix:(0,r.jsx)("span",{children:"\u4FEE\u6539\uFF1A"}),onlyDate:!0,timeStr:B,fallback:y})})]})})}},1288:function(ee,V,n){var Q=n(78957),r=n(83062),O=n(46629),t=n(85893);V.Z=function(y){var Y,B=y.timeStr,T=y.fallback,z=y.onlyDate,u=y.prefix,d=(Y=(0,O.QW)(B))===null||Y===void 0?void 0:Y.local();if(!d)return T||null;var I=(0,O.ND)().utc().local(),R=d.isSame(I,"year"),Z=d.diff(I,"day"),W=R?d.format(O.AK):d.format(O.vc),G=function(){return(0,t.jsxs)("div",{children:[(0,t.jsxs)(Q.Z,{direction:"horizontal",children:[(0,t.jsx)("div",{children:d.fromNow()}),(0,t.jsx)("div",{children:d.format(O.On)})]}),(0,t.jsx)("div",{children:d.format(O.t9)})]})};return(0,t.jsx)(r.Z,{title:G(),children:(0,t.jsxs)(Q.Z,{direction:"horizontal",children:[u,(0,t.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:z?d.format(O.vc):d.format(O.dq)})]})})}},11518:function(ee,V,n){var Q=n(55241),r=n(78957),O=n(7134),t=n(55932),y=n(95813),Y=n(8885),B=n(85893);V.Z=function(T){var z=T.model;if(!z)return null;var u=(0,t.SZ)(z.Avatar,{width:100,height:100}),d=(0,y.zO)([z.NickName,z.IdentityName,z.Id].filter(function(I){return I&&I.length>0}).at(0)||"--",10);return(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(Q.Z,{content:(0,B.jsx)(Y.Z,{model:z}),children:(0,B.jsxs)(r.Z,{direction:"horizontal",children:[(0,B.jsx)(O.C,{size:"small",shape:"square",src:u,children:d}),(0,B.jsx)("span",{children:(0,B.jsx)("a",{children:d})})]})})})}},8885:function(ee,V,n){var Q=n(78957),r=n(7134),O=n(55932),t=n(95813),y=n(85893);V.Z=function(Y){var B,T=Y.model;if(!T)return null;var z=(0,O.SZ)(T.Avatar,{width:100,height:100}),u=(0,t.zO)([T.NickName,T.IdentityName,T.Id].filter(function(d){return d&&d.length>0}).at(0)||"--",10);return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(Q.Z,{direction:"horizontal",children:[(0,y.jsx)("div",{children:(0,y.jsx)(r.C,{src:z,size:100})}),(0,y.jsxs)("div",{children:[(0,y.jsxs)("p",{children:["\u6635\u79F0\uFF1A",u]}),(0,y.jsxs)("p",{children:["\u7528\u6237\u540D\uFF1A",(T==null?void 0:T.IdentityName)||"--"]}),(0,y.jsxs)("p",{children:["\u624B\u673A\u53F7\uFF1A",(T==null||(B=T.UserMobile)===null||B===void 0?void 0:B.MobilePhone)||"--"]})]})]})})}},92088:function(ee,V,n){n.d(V,{LB:function(){return T},t2:function(){return d},tz:function(){return u},vI:function(){return z}});var Q=n(5574),r=n.n(Q),O=n(67294),t=n(18629),y=n(46629),Y=n(76021),B=n(95813),T=function(){var R=(0,Y.YB)(),Z=function(G,$){var X=R.formatMessage({id:G,defaultMessage:$});return(0,B.Wq)(X)?null:X};return{intl:R,format_message:Z}},z=function(){var R=(0,O.useState)(void 0),Z=r()(R,2),W=Z[0],G=Z[1];return(0,t.Z)(function(){G(y.ND.utc())},1e3,{immediate:!0}),W||y.ND.utc()},u=function(R){var Z=(0,O.useState)(R||!1),W=r()(Z,2),G=W[0],$=W[1];return{open:G,setOpen:function(){return $(!0)},setClose:function(){return $(!1)}}},d=function(R){var Z=(0,O.useState)(R),W=r()(Z,2),G=W[0],$=W[1];return{data:G,open:G!=null,setData:function(q){return $(q)},onHide:function(){return $(void 0)}}}},64766:function(ee,V,n){n.r(V),n.d(V,{default:function(){return ze}});var Q=n(5574),r=n.n(Q),O=n(92398),t=n(67294),y=n(76021),Y=n(17226),B=n(87399),T=n(27909),z=n(97857),u=n.n(z),d=n(45360),I=n(28036),R=n(85576),Z=n(11346),W=n(65233),G=n(24435),$=n(4393),X=n(80799),q=n(38295),H=n(30699),P=n(95813),e=n(85893),le=function(){var m=(0,t.useState)(!1),s=r()(m,2),a=s[0],i=s[1],g=(0,t.useState)(!1),v=r()(g,2),_=v[0],E=v[1],C=(0,t.useState)(""),c=r()(C,2),j=c[0],S=c[1],U=(0,t.useState)(!1),f=r()(U,2),D=f[0],p=f[1],N=(0,t.useState)({}),o=r()(N,2),x=o[0],b=o[1],A=(0,q.o)(),M=function(){i(!0),A.queryGrades().finally(function(){return i(!1)})},l=function(J){E(!0),H.x1.mallAdmin.gradeSave(u()({},J)).then(function(L){(0,P._y)(L,function(){d.ZP.success("\u4FDD\u5B58\u6210\u529F"),p(!1),M()})}).finally(function(){E(!1)})},h=function(J){confirm("\u786E\u5B9A\u5220\u9664\uFF1F")&&(S(J.Id||""),H.x1.mallAdmin.gradeUpdateStatus({Id:J.Id,IsDeleted:!0}).then(function(L){(0,P._y)(L,function(){d.ZP.success("\u5220\u9664\u6210\u529F"),M()})}).finally(function(){S("")}))},k=[{title:"\u4F1A\u5458\u540D",render:function(J,L){return L.Name}},{title:"\u4F1A\u5458\u63CF\u8FF0",render:function(J,L){return L.Description}},{title:"\u6392\u5E8F",render:function(J,L){return L.Sort}},{title:"\u4F1A\u5458\u4EBA\u6570",render:function(J,L){return L.UserCount}},{title:"\u64CD\u4F5C",width:200,render:function(J,L){return(0,e.jsxs)(I.ZP.Group,{children:[(0,e.jsx)(I.ZP,{type:"link",onClick:function(){b(L),p(!0)},children:"\u7F16\u8F91"}),(0,e.jsx)(I.ZP,{type:"link",loading:j===L.Id,onClick:function(){h(L)},danger:!0,children:"\u5220\u9664"})]})}}];return(0,t.useEffect)(function(){M()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.Z,{title:"\u7F16\u8F91\u4EF7\u683C",open:D,onCancel:function(){p(!1)},confirmLoading:_,onOk:function(){l(x)},children:(0,e.jsxs)(Z.Z,{children:[(0,e.jsx)(Z.Z.Item,{label:"\u540D\u79F0",children:(0,e.jsx)(W.Z,{value:x.Name||"",onChange:function(J){b(function(L){return u()(u()({},L),{},{Name:J.target.value})})}})}),(0,e.jsx)(Z.Z.Item,{label:"\u63CF\u8FF0",children:(0,e.jsx)(W.Z,{value:x.Description||"",onChange:function(J){b(function(L){return u()(u()({},L),{},{Description:J.target.value})})}})}),(0,e.jsx)(Z.Z.Item,{label:"\u6392\u5E8F",children:(0,e.jsx)(G.Z,{value:x.Sort||0,onChange:function(J){b(function(L){return u()(u()({},L),{},{Sort:J||0})})}})})]})}),(0,e.jsx)($.Z,{title:"\u4F1A\u5458\u7B49\u7EA7",loading:a,style:{marginBottom:10},extra:(0,e.jsx)(I.ZP,{type:"primary",onClick:function(){p(!0),b({})},children:"\u65B0\u589E"}),children:(0,e.jsx)(X.Z,{dataSource:(0,P.iu)(A.grades||[]),columns:k,pagination:!1})})]})},w=n(34041),de=n(23806),ve=n(1288),ce=n(11518),he=n(35291),xe=n(40056),fe=n(71230),ne=n(15746),re=n(55742),te=n(66309),ge=function(m){var s=m.model,a=m.ok,i=(0,t.useState)(!1),g=r()(i,2),v=g[0],_=g[1],E=(0,t.useState)(!1),C=r()(E,2),c=C[0],j=C[1],S=(0,t.useState)({}),U=r()(S,2),f=U[0],D=U[1],p=function(){if((f.Balance||0)<=0){d.ZP.error("\u91D1\u989D\u4E0D\u80FD\u4E3A0");return}_(!0),f.UserId=s.Id||0,H.x1.mallAdmin.balanceUpdateUserBalance(f).then(function(x){(0,P._y)(x,function(){d.ZP.success("\u4FDD\u5B58\u6210\u529F"),j(!1),a&&a()})}).finally(function(){_(!1)})};(0,t.useEffect)(function(){c&&D({ActionType:1,Balance:0,UserId:0,Message:""})},[c]);var N=f.ActionType==-1?s.Balance:9999999;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(R.Z,{title:"\u8C03\u6574",open:c,onCancel:function(){j(!1)},confirmLoading:v,onOk:function(){p()},children:[(0,e.jsx)(xe.Z,{message:"\u5F53\u524D\u4F59\u989D\uFF1A".concat(s.Balance),style:{marginBottom:10}}),(0,e.jsxs)(fe.Z,{gutter:[15,15],children:[(0,e.jsx)(ne.Z,{span:24,children:(0,e.jsx)(G.Z,{title:"\u91D1\u989D",min:0,max:N,value:f.Balance,onChange:function(x){D(u()(u()({},f),{},{Balance:x||0}))}})}),(0,e.jsx)(ne.Z,{span:24,children:(0,e.jsxs)(re.ZP.Group,{value:f.ActionType,onChange:function(x){D(u()(u()({},f),{},{ActionType:x.target.value}))},children:[(0,e.jsx)(re.ZP,{value:-1,children:"\u6263\u51CF"}),(0,e.jsx)(re.ZP,{value:1,children:"\u5145\u503C"})]})}),(0,e.jsx)(ne.Z,{span:24,children:(0,e.jsx)(W.Z.TextArea,{placeholder:"\u63CF\u8FF0\u4E00\u4E0B\u8FD9\u6B21\u8C03\u6574...",value:f.Message||"",onChange:function(x){D(u()(u()({},f),{},{Message:x.target.value}))}})})]})]}),(0,e.jsx)(te.Z,{color:"warning",onClick:function(){j(!0)},style:{cursor:"pointer"},children:(0,P.lb)(s.Balance||0)})]})},se=n(72269),je=function(m){var s=m.query,a=m.onSearch,i=(0,t.useState)({}),g=r()(i,2),v=g[0],_=g[1],E=function(c){c.Page=1,a&&a(c)};return(0,t.useEffect)(function(){_(u()({},s))},[s]),(0,e.jsx)($.Z,{bordered:!1,style:{marginBottom:10},children:(0,e.jsxs)(Z.Z,{labelCol:{span:8},children:[(0,e.jsx)(Z.Z.Item,{label:"\u6FC0\u6D3B",children:(0,e.jsx)(se.Z,{checked:v.Active||!1,onChange:function(c){_(u()(u()({},v),{},{Active:c}))}})}),(0,e.jsx)(Z.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(I.ZP,{type:"primary",onClick:function(){return E(v)},children:"\u641C\u7D22"})})]})})},ae=n(78957),_e=function(s){var a=s.ok,i=s.model,g=(0,t.useState)(!1),v=r()(g,2),_=v[0],E=v[1],C=(0,t.useState)(!1),c=r()(C,2),j=c[0],S=c[1],U=(0,t.useState)({}),f=r()(U,2),D=f[0],p=f[1],N=function(x){E(!0),H.x1.mallAdmin.userUpdateStatus(u()({},x)).then(function(b){(0,P._y)(b,function(){d.ZP.success("\u4FDD\u5B58\u6210\u529F"),a&&a()})}).finally(function(){E(!1)})};return(0,t.useEffect)(function(){p({IsActive:i.IsActive,Id:i.Id})},[i]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.Z,{title:"\u4FEE\u6539\u72B6\u6001",confirmLoading:_,open:j,onCancel:function(){S(!1)},onOk:function(){N(D)},style:{padding:0},children:(0,e.jsxs)(Z.Z,{children:[(0,e.jsx)(Z.Z.Item,{hidden:!0,name:"Id",children:(0,e.jsx)(W.Z,{})}),(0,e.jsx)(Z.Z.Item,{label:"\u662F\u5426\u6FC0\u6D3B",children:(0,e.jsx)(se.Z,{checked:D.IsActive||!1,onChange:function(x){p(function(b){return u()(u()({},b),{},{IsActive:x})})}})})]})}),(0,e.jsxs)(ae.Z,{children:[i.IsActive?(0,e.jsx)(te.Z,{color:"green",children:"\u6B63\u5E38"}):(0,e.jsx)(te.Z,{color:"error",children:"\u7981\u7528"}),(0,e.jsx)(I.ZP,{size:"small",type:"link",onClick:function(){S(!0)},children:"\u4FEE\u6539"})]})]})},Ce=_e,Se=function(){var m=(0,t.useState)({Page:1}),s=r()(m,2),a=s[0],i=s[1],g=(0,t.useState)(!1),v=r()(g,2),_=v[0],E=v[1],C=(0,t.useState)(0),c=r()(C,2),j=c[0],S=c[1],U=(0,t.useState)({}),f=r()(U,2),D=f[0],p=f[1],N=(0,q.o)(),o=function(M){E(!0),H.x1.mallAdmin.userQueryPaging(u()({},M)).then(function(l){(0,P._y)(l,function(){p(l.data||{})})}).finally(function(){E(!1)})},x=function(M,l){confirm("\u786E\u5B9A\u8BBE\u7F6E\uFF1F")&&(S(M.Id||0),H.x1.mallAdmin.gradeSetUserGrade({UserId:M.Id,GradeId:l}).then(function(h){(0,P._y)(h,function(){d.ZP.success("\u8BBE\u7F6E\u6210\u529F"),o(a)})}).finally(function(){S(0)}))},b=[{title:"\u8D26\u53F7\u4E3B\u4F53",render:function(M,l){return(0,e.jsx)(ce.Z,{model:l.User})}},{hidden:(0,he.RZ)(),title:"\u4F1A\u5458\u7B49\u7EA7",render:function(M,l){var h;return(0,e.jsx)(w.Z,{size:"small",loading:j==l.Id,onChange:function(K){x(l,K)},value:(h=l.Grade)===null||h===void 0?void 0:h.Id,options:N.grades.map(function(k){return{key:k.Id,label:k.Name,value:k.Id}}),allowClear:!0,placeholder:"\u9009\u62E9\u4F1A\u5458\u7B49\u7EA7",style:{minWidth:150}})}},{title:"\u624B\u673A\u53F7",render:function(M,l){var h;return((h=l.User)===null||h===void 0||(h=h.UserMobile)===null||h===void 0?void 0:h.MobilePhone)||"--"}},{key:"balance",title:"\u8D26\u6237\u4F59\u989D",render:function(M,l){return(0,e.jsx)(ge,{model:l,ok:function(){o(a)}})}},{title:"\u4F59\u989D\u79EF\u5206",render:function(M,l){return l.Points}},{title:"\u5386\u53F2\u79EF\u5206",render:function(M,l){return l.HistoryPoints}},{title:"\u72B6\u6001",render:function(M,l){return(0,e.jsx)(Ce,{model:l,ok:function(){o(a)}})}},{title:"\u6700\u8FD1\u4E0A\u7EBF\u65F6\u95F4",render:function(M,l){return(0,e.jsx)(ve.Z,{timeStr:l.LastActivityTime})}},{title:"\u65F6\u95F4",render:function(M,l){return(0,e.jsx)(de.Z,{model:l})}},{title:"\u64CD\u4F5C",width:200,render:function(M,l){return(0,e.jsx)(I.ZP.Group,{children:(0,e.jsx)(I.ZP,{type:"link",onClick:function(){alert("todo")},children:"\u67E5\u770B"})})}}];return(0,t.useEffect)(function(){N.queryGrades().finally(function(){o(a)})},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(je,{query:a,onSearch:function(M){i(M),o(M)}}),(0,e.jsx)($.Z,{title:"\u5546\u57CE\u4F1A\u5458",loading:_,style:{marginBottom:10},extra:(0,e.jsx)(I.ZP,{type:"text",onClick:function(){y.m8.push("/admin/settings/user/list")},children:"\u67E5\u770B\u5E73\u53F0\u7528\u6237\u4FE1\u606F"}),children:(0,e.jsx)(X.Z,{dataSource:D.Items||[],columns:b,pagination:{pageSize:D.PageSize,total:D.TotalCount,onChange:function(M,l){var h=u()(u()({},a),{},{Page:M});i(h),o(h)}}})})]})},ue=n(40411),Ze=n(96074),Ee=function(m){var s=m.show,a=m.hide,i=m.ok,g=(0,t.useState)(!1),v=r()(g,2),_=v[0],E=v[1],C=(0,t.useState)({}),c=r()(C,2),j=c[0],S=c[1],U=function(D){E(!0),H.x1.sys.manageUserCreateUser(D).then(function(p){p.data.Error?d.ZP.error(p.data.Error.Message):(d.ZP.success("\u4FDD\u5B58\u6210\u529F"),i&&i())}).finally(function(){E(!1)})};return(0,t.useEffect)(function(){s&&S({})},[s]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(R.Z,{title:"\u65B0\u589E\u7528\u6237",confirmLoading:_,open:s,onCancel:function(){a&&a()},footer:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(I.ZP,{type:"primary",onClick:function(){U(j)},children:"\u4FDD\u5B58"})}),children:(0,e.jsx)(Z.Z,{children:(0,e.jsx)(Z.Z.Item,{label:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},{pattern:new RegExp("^[a-zA-Z0-9_]{3,20}$"),message:"\u7528\u6237\u540D\u5FC5\u987B\u662F3-16\u4F4D\u5B57\u6BCD\u3001\u6570\u5B57\u6216\u4E0B\u5212\u7EBF"}],children:(0,e.jsx)(W.Z,{value:j.IdentityName||"",onChange:function(D){S(function(p){return u()(u()({},p),{},{IdentityName:D.target.value})})}})})})})})},ie=n(68421),Ie=n(26380),Pe=n(92088),De=function(m){var s,a,i=m.model,g=m.ok,v=(0,Pe.tz)(),_=v.open,E=v.setOpen,C=v.setClose,c=(0,t.useState)(""),j=r()(c,2),S=j[0],U=j[1];if(!i)return null;var f=(0,ie.Z)(H.x1.sys.manageUserRemoveMobiles,{manual:!0,onSuccess:function(x,b){(0,P._y)(x,function(){d.ZP.success("\u79FB\u9664\u6210\u529F"),g()})}}),D=function(){confirm("\u786E\u5B9A\u79FB\u9664\u624B\u673A\u53F7\uFF1F")&&f.run({Id:i.Id})},p=(0,ie.Z)(H.x1.sys.manageUserSetMobile,{manual:!0,onSuccess:function(x,b){(0,P._y)(x,function(){d.ZP.success("\u8BBE\u7F6E\u6210\u529F"),g()})}}),N=function(){if(!S||(0,P.Wq)(S)){d.ZP.info("\u653E\u5F03\u8BBE\u7F6E\u624B\u673A\u53F7\u7801");return}if(!/^(?:(?:\+|00)86)?1[3-9]\d{9}$/.test(S)){d.ZP.error("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u4E0D\u6B63\u786E");return}p.run({Id:i.Id,Mobile:S})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.Z,{open:_,onCancel:function(){return C()},confirmLoading:p.loading,onOk:function(){N()},title:"\u8BBE\u7F6E\u624B\u673A\u53F7",children:(0,e.jsx)(W.Z,{width:"100%",size:"large",maxLength:11,placeholder:"\u8F93\u5165\u5B8C\u6574\u624B\u673A\u53F7",value:S,onChange:function(x){U(x.target.value)},status:(0,P.tq)(S)?void 0:"error"})}),(0,e.jsxs)(ae.Z,{direction:"vertical",children:[(0,P.Wq)((s=i.UserMobile)===null||s===void 0?void 0:s.MobilePhone)||(0,e.jsx)(te.Z,{icon:(0,e.jsx)(Ie.Z,{stroke:1}),color:"green",closable:!0,onClose:function(x){x.preventDefault(),D()},children:(a=i.UserMobile)===null||a===void 0?void 0:a.MobilePhone}),(0,e.jsx)(I.ZP,{type:"link",onClick:function(){E()},children:"\u7ED1\u5B9A\u624B\u673A"})]})]})},ye=n(48054),oe=n(32983),F=n(26412),pe=function(m){var s=m.user,a=s==null?void 0:s.AdminIdentity;return!a||(0,P.Wq)(a==null?void 0:a.Id)?(0,e.jsx)(oe.Z,{}):(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(F.Z,{title:"User Info",bordered:!0,children:[(0,e.jsx)(F.Z.Item,{label:"Product",children:"Cloud Database"}),(0,e.jsx)(F.Z.Item,{label:"Billing Mode",children:"Prepaid"}),(0,e.jsx)(F.Z.Item,{label:"Automatic Renewal",children:"YES"}),(0,e.jsx)(F.Z.Item,{label:"Order time",children:"2018-04-24 18:00:00"}),(0,e.jsx)(F.Z.Item,{label:"Usage Time",span:2,children:"2019-04-24 18:00:00"}),(0,e.jsx)(F.Z.Item,{label:"Status",span:3,children:(0,e.jsx)(ue.Z,{status:"processing",text:"Running"})}),(0,e.jsx)(F.Z.Item,{label:"Negotiated Amount",children:"$80.00"}),(0,e.jsx)(F.Z.Item,{label:"Discount",children:"$20.00"}),(0,e.jsx)(F.Z.Item,{label:"Official Receipts",children:"$60.00"}),(0,e.jsxs)(F.Z.Item,{label:"Config Info",children:["Data disk type: MongoDB",(0,e.jsx)("br",{}),"Database version: 3.4",(0,e.jsx)("br",{}),"Package: dds.mongo.mid",(0,e.jsx)("br",{}),"Storage space: 10 GB",(0,e.jsx)("br",{}),"Replication factor: 3",(0,e.jsx)("br",{}),"Region: East China 1",(0,e.jsx)("br",{})]})]})})},Me=n(7134),Oe=n(55932),Ae=function(m){var s=m.user;if((0,P.Wq)(s==null?void 0:s.Id))return(0,e.jsx)(oe.Z,{});var a=(0,Oe.SZ)(s.Avatar);return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(F.Z,{title:"User Info",bordered:!0,children:[(0,e.jsx)(F.Z.Item,{label:"Product",children:(0,e.jsx)(Me.C,{size:100,src:a,children:s.IdentityName})}),(0,e.jsx)(F.Z.Item,{label:"Billing Mode",children:"Prepaid"}),(0,e.jsx)(F.Z.Item,{label:"Automatic Renewal",children:"YES"}),(0,e.jsx)(F.Z.Item,{label:"Order time",children:"2018-04-24 18:00:00"}),(0,e.jsx)(F.Z.Item,{label:"Usage Time",span:2,children:"2019-04-24 18:00:00"}),(0,e.jsx)(F.Z.Item,{label:"Status",span:3,children:(0,e.jsx)(ue.Z,{status:"processing",text:"Running"})}),(0,e.jsx)(F.Z.Item,{label:"Negotiated Amount",children:"$80.00"}),(0,e.jsx)(F.Z.Item,{label:"Discount",children:"$20.00"}),(0,e.jsx)(F.Z.Item,{label:"Official Receipts",children:"$60.00"}),(0,e.jsxs)(F.Z.Item,{label:"Config Info",children:["Data disk type: MongoDB",(0,e.jsx)("br",{}),"Database version: 3.4",(0,e.jsx)("br",{}),"Package: dds.mongo.mid",(0,e.jsx)("br",{}),"Storage space: 10 GB",(0,e.jsx)("br",{}),"Replication factor: 3",(0,e.jsx)("br",{}),"Region: East China 1",(0,e.jsx)("br",{})]})]})})},Be=function(m){var s=m.userId,a=(0,t.useState)(!1),i=r()(a,2),g=i[0],v=i[1],_=(0,t.useState)({}),E=r()(_,2),C=E[0],c=E[1],j=function(U){(0,P.Wq)(U)||(v(!0),H.x1.sys.manageUserGetProfileById({Id:U}).then(function(f){c(f.data.Data||{})}).finally(function(){v(!1)}))};return(0,t.useEffect)(function(){s&&j(s)},[s]),g?(0,e.jsx)(ye.Z,{}):(0,P.Wq)(C==null?void 0:C.Id)?(0,e.jsx)(oe.Z,{}):(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(fe.Z,{gutter:10,children:[(0,e.jsx)(ne.Z,{span:12,children:(0,e.jsx)(Ae,{user:C})}),(0,e.jsx)(ne.Z,{span:12,children:(0,e.jsx)(pe,{user:C})})]})})},Fe=function(m){var s=m.userId,a=m.hide,i=!(0,P.Wq)(s);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(R.Z,{title:"\u7528\u6237\u4FE1\u606F",width:"90%",open:i,onCancel:function(){a()},onOk:function(){a()},children:(0,e.jsx)(Be,{userId:s||""})})})},Ue=function(m){var s=m.model,a=m.ok,i=(0,t.useState)(!1),g=r()(i,2),v=g[0],_=g[1],E=(0,t.useState)(""),C=r()(E,2),c=C[0],j=C[1],S=(0,ie.Z)(H.x1.sys.manageUserSetPassword,{manual:!0,onSuccess:function(D,p){(0,P._y)(D,function(){d.ZP.success("\u4FEE\u6539\u6210\u529F"),a()})}}),U=function(){if(!c||(0,P.Wq)(c)){d.ZP.info("\u653E\u5F03\u4FEE\u6539\u5BC6\u7801");return}if(c.length<5){d.ZP.error("\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u5C0F\u4E8E5\u4F4D");return}S.run({Id:s.Id,Password:c})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.Z,{open:v,onCancel:function(){return _(!1)},confirmLoading:S.loading,onOk:function(){U()},title:"\u4FEE\u6539\u7528\u6237\u5BC6\u7801",children:(0,e.jsx)(W.Z.Password,{width:"100%",size:"large",maxLength:20,placeholder:"\u8F93\u5165\u5BC6\u7801",value:c,onChange:function(D){j(D.target.value)},status:(0,P.Wq)(c)?"error":void 0})}),(0,e.jsx)(I.ZP,{type:"link",onClick:function(){_(!0)},children:"\u4FEE\u6539\u5BC6\u7801"})]})},be=function(s){var a=s.query,i=s.onSearch,g=(0,t.useState)({}),v=r()(g,2),_=v[0],E=v[1],C=function(j){j.Page=1,i&&i(j)};return(0,t.useEffect)(function(){E(u()({},a))},[]),(0,e.jsx)($.Z,{bordered:!1,style:{marginBottom:10},children:(0,e.jsxs)(Z.Z,{labelCol:{span:8},wrapperCol:{span:16},onFinish:function(j){return C(_)},autoComplete:"off",layout:"inline",children:[(0,e.jsx)(Z.Z.Item,{label:"\u5173\u952E\u8BCD",name:"Name",children:(0,e.jsx)(W.Z,{value:_.Keyword||"",onChange:function(j){return E(function(S){return u()(u()({},S),{},{Keyword:j.target.value})})}})}),(0,e.jsx)(Z.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,e.jsx)(I.ZP,{type:"primary",htmlType:"submit",children:"\u641C\u7D22"})})]})})},Te=be,Re=n(15009),me=n.n(Re),Le=n(99289),We=n.n(Le),ke=n(74590),Ke=function(m){var s=m.ok,a=m.model,i=(0,t.useState)(!1),g=r()(i,2),v=g[0],_=g[1],E=(0,t.useState)(!1),C=r()(E,2),c=C[0],j=C[1],S=(0,t.useState)({}),U=r()(S,2),f=U[0],D=U[1],p=function(o){_(!0),H.x1.sys.manageUserUpdateStatus(u()(u()({},o),{},{IsDeleted:!1,Id:a.Id})).then(function(x){(0,P._y)(x,function(){d.ZP.success("\u4FDD\u5B58\u6210\u529F"),j(!1),s&&s()})}).finally(function(){_(!1)})};return(0,t.useEffect)(function(){D({IsActive:a==null?void 0:a.IsActive,IsDeleted:a==null?void 0:a.IsDeleted})},[a]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(R.Z,{title:"\u4FEE\u6539\u72B6\u6001",confirmLoading:v,open:c,onCancel:function(){j(!1)},footer:(0,e.jsxs)(ae.Z,{children:[(0,e.jsx)(ke.Z,{action:We()(me()().mark(function N(){var o;return me()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,H.x1.sys.manageUserUpdateStatus({Id:a.Id,IsDeleted:!0});case 2:o=b.sent,(0,P._y)(o,function(){j(!1),s()});case 4:case"end":return b.stop()}},N)})),hide:(0,P.Wq)(a.Id)}),(0,e.jsx)(I.ZP,{type:"primary",onClick:function(){p(f)},children:"\u4FDD\u5B58"})]}),children:(0,e.jsx)(Z.Z,{children:(0,e.jsx)(Z.Z.Item,{label:"\u662F\u5426\u6FC0\u6D3B",children:(0,e.jsx)(se.Z,{checked:f.IsActive||!1,onChange:function(o){return D(function(x){return u()(u()({},x),{},{IsActive:o})})}})})})}),(0,e.jsx)(I.ZP,{type:"link",onClick:function(){j(!0)},children:"\u4FEE\u6539\u72B6\u6001"})]})},Ne=function(){var m=(0,t.useState)({}),s=r()(m,2),a=s[0],i=s[1],g=(0,t.useState)({}),v=r()(g,2),_=v[0],E=v[1],C=(0,t.useState)(!1),c=r()(C,2),j=c[0],S=c[1],U=(0,t.useState)(!1),f=r()(U,2),D=f[0],p=f[1],N=(0,t.useState)(void 0),o=r()(N,2),x=o[0],b=o[1],A=function(h){S(!0),H.x1.sys.manageUserQueryUserPagination(h).then(function(k){(0,P._y)(k,function(){E(k.data||{})})}).finally(function(){S(!1)})};(0,t.useEffect)(function(){A(a)},[]);var M=[{title:"\u8D26\u53F7\u4E3B\u4F53",render:function(h){return(0,e.jsx)("div",{onClick:function(){return b(h.Id)},children:(0,e.jsx)(ce.Z,{model:h})})}},{title:"\u7535\u8BDD",render:function(h){return(0,e.jsx)(De,{model:h,ok:function(){A(a)}})}},{title:"\u6D3B\u52A8\u72B6\u6001",render:function(h,k){return(0,e.jsx)(ue.Z,{status:k.IsActive?"success":"default",text:k.IsActive?"\u6D3B\u52A8":"\u51BB\u7ED3"})}},{title:"\u65F6\u95F4",render:function(h,k){return(0,e.jsx)(de.Z,{model:k})}},{title:"\u64CD\u4F5C",render:function(h,k){return(0,e.jsxs)(ae.Z,{size:"small",direction:"horizontal",split:(0,e.jsx)(Ze.Z,{type:"vertical"}),children:[(0,e.jsx)(Ue,{model:k,ok:function(){}}),(0,e.jsx)(Ke,{model:k,ok:function(){A(a)}})]})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Fe,{userId:x,hide:function(){b(void 0)}}),(0,e.jsx)(Ee,{show:D,hide:function(){p(!1)},ok:function(){p(!1),A(a)}}),(0,e.jsx)(Te,{query:a,onSearch:function(h){i(h)}}),(0,e.jsx)($.Z,{title:"\u5E73\u53F0\u7528\u6237",extra:(0,e.jsx)(I.ZP,{type:"primary",onClick:function(){p(!0)},children:"\u6DFB\u52A0\u7528\u6237"}),children:(0,e.jsx)(X.Z,{loading:j,columns:M,dataSource:_.Items||[],pagination:{current:a.Page,total:_.TotalCount,pageSize:20,onChange:function(h,k){var K=u()(u()({},a),{},{Page:h});i(K),A(K)}}})})]})},ze=function(){var m=(0,y.UO)(),s=(0,t.useState)(m.id),a=r()(s,2),i=a[0],g=a[1];return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.Z,{destroyInactiveTabPane:!0,activeKey:i||"user",onChange:function(_){return g(_)},items:[{key:"user",label:"\u666E\u901A\u7528\u6237",children:(0,e.jsx)(Ne,{}),icon:(0,e.jsx)(Y.Z,{stroke:1})},{key:"store-user",label:"\u5546\u57CE\u7528\u6237",children:(0,e.jsx)(Se,{}),icon:(0,e.jsx)(B.Z,{stroke:1})},{key:"grade",label:"\u7528\u6237\u7B49\u7EA7",children:(0,e.jsx)(le,{}),icon:(0,e.jsx)(T.Z,{stroke:1})}]})})}}}]);
