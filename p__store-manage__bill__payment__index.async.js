"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4435],{23806:function(G,T,n){var C=n(1288),r=n(85893);T.Z=function(c){var a=c.model,g=c.fallback;if(a==null||a==null)return null;var y=a==null?void 0:a.CreationTime,S=a==null?void 0:a.LastModificationTime;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{style:{},children:[(0,r.jsx)("div",{children:(0,r.jsx)(C.Z,{prefix:(0,r.jsx)("span",{children:"\u521B\u5EFA\uFF1A"}),onlyDate:!0,timeStr:y,fallback:g})}),(0,r.jsx)("div",{children:(0,r.jsx)(C.Z,{prefix:(0,r.jsx)("span",{children:"\u4FEE\u6539\uFF1A"}),onlyDate:!0,timeStr:S,fallback:g})})]})})}},1288:function(G,T,n){var C=n(78957),r=n(83062),c=n(46629),a=n(85893);T.Z=function(g){var y,S=g.timeStr,N=g.fallback,K=g.onlyDate,W=g.prefix,u=(y=(0,c.mg)(S))===null||y===void 0?void 0:y.add(c.Mg,"hour");if(!u)return N||null;var M=(0,c.ND)().utc().add(c.Mg,"hour"),A=u.isSame(M,"year"),z=u.diff(M,"day"),Q=A?u.format(c.AK):u.format(c.vc),P=function(){return(0,a.jsxs)("div",{children:[(0,a.jsxs)(C.Z,{direction:"horizontal",children:[(0,a.jsx)("div",{children:u.fromNow()}),(0,a.jsx)("div",{children:u.format(c.On)})]}),(0,a.jsx)("div",{children:u.format(c.t9)})]})};return(0,a.jsx)(r.Z,{title:P(),children:(0,a.jsxs)(C.Z,{direction:"horizontal",children:[W,(0,a.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:K?u.format(c.vc):u.format(c.dq)})]})})}},77260:function(G,T,n){n.r(T),n.d(T,{default:function(){return q}});var C=n(97857),r=n.n(C),c=n(5574),a=n.n(c),g=n(45360),y=n(9798),S=n(66309),N=n(4393),K=n(80799),W=n(66090),u=n(67294),M=n(23806),A=n(1288),z=n(35291),Q=n(30699),P=n(66419),O=n(26412),e=n(85893),H=function(R){var o=R.datalist;if((0,P.G5)(o))return null;var E=[{title:"\u9000\u6B3E\u5355\u53F7",render:function(f,d){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(y.Z.Paragraph,{copyable:!0,children:d.Id}),(0,e.jsx)("div",{children:d.Description||"--"})]})}},{title:"\u9000\u6B3E\u91D1\u989D",render:function(f,d){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(S.Z,{color:"blue",children:(0,P.lb)(d.Price||0)})})}},{title:"\u9000\u6B3E\u6D41\u6C34",render:function(f,d){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(y.Z.Text,{copyable:!0,children:d.ThirdSystemRefundId||"--"})})}},{title:"\u9000\u6B3E\u65F6\u95F4",render:function(f,d){return(0,e.jsx)(A.Z,{timeStr:d.RefundTime})}},{title:"\u65F6\u95F4",render:function(f,d){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(M.Z,{model:d})})}}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(K.Z,{columns:E,dataSource:o,pagination:!1,expandable:{expandedRowRender:function(f){return(0,e.jsx)("div",{children:f.NotifyData||"--"})}},title:function(){return(0,e.jsx)("b",{children:"\u9000\u6B3E\u8BB0\u5F55"})}})})},J=function(R){var o=R.model,E=function(){var d;return o.Paid?(0,e.jsxs)(O.Z,{title:"\u652F\u4ED8\u4FE1\u606F",bordered:!0,style:{marginBottom:10},children:[(0,e.jsx)(O.Z.Item,{label:"\u4EA4\u6613\u5355\u53F7",children:o.ThirdSystemPaymentId||"--"}),(0,e.jsx)(O.Z.Item,{label:"\u652F\u4ED8\u65B9\u5F0F",children:((d=z.rz.find(function(B){return B.id==o.PaymentChannel}))===null||d===void 0?void 0:d.name)||"--"}),(0,e.jsx)(O.Z.Item,{label:"\u652F\u4ED8\u65F6\u95F4",children:(0,e.jsx)(A.Z,{timeStr:o.PayTime})}),(0,e.jsx)(O.Z.Item,{label:"\u56DE\u8C03\u4FE1\u606F",span:2,children:o.NotifyData||"--"})]}):null},h=function(){return(0,P.G5)(o.RefundBills)?null:(0,e.jsx)(H,{datalist:o.RefundBills||[]})};return(0,e.jsxs)(e.Fragment,{children:[E(),h()]})},Z=n(11346),$=n(71230),F=n(15746),b=n(25278),V=n(34041),X=n(96864),Y=n(14726),D=n(46629),w=function(o){var E,h,f=o.query,d=o.onSearch,B=(0,u.useState)({}),U=a()(B,2),i=U[0],x=U[1],p=function(t){t.Page=1,d&&d(t)};return(0,u.useEffect)(function(){x(r()({},f||{}))},[f]),(0,e.jsx)(N.Z,{bordered:!1,style:{marginBottom:10},children:(0,e.jsxs)(Z.Z,{onFinish:function(){return p(i)},autoComplete:"off",children:[(0,e.jsxs)($.Z,{gutter:10,children:[(0,e.jsx)(F.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{label:"\u8BA2\u5355ID",children:(0,e.jsx)(b.Z,{value:i.OrderId||"",onChange:function(t){x(r()(r()({},i),{},{OrderId:t.target.value}))}})})}),(0,e.jsx)(F.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{label:"\u8BA2\u5355\u53F7",children:(0,e.jsx)(b.Z,{value:i.OrderNo||"",onChange:function(t){x(r()(r()({},i),{},{OrderNo:t.target.value}))}})})}),(0,e.jsx)(F.Z,{span:8})]}),(0,e.jsxs)($.Z,{gutter:10,children:[(0,e.jsx)(F.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{label:"\u652F\u4ED8\u6E20\u9053",children:(0,e.jsx)(V.Z,{allowClear:!0,options:z.rz.map(function(m){return{label:m.name,value:m.id}}),value:i.PaymentMethod,onChange:function(t){x(r()(r()({},i),{},{PaymentMethod:t}))}})})}),(0,e.jsx)(F.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{label:"\u652F\u4ED8\u7CFB\u7EDF\u6D41\u6C34\u53F7",children:(0,e.jsx)(b.Z,{value:i.ThirdSystemPaymentId||"",onChange:function(t){x(r()(r()({},i),{},{ThirdSystemPaymentId:t.target.value}))}})})}),(0,e.jsx)(F.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{label:"\u65F6\u95F4",children:(0,e.jsx)(X.default.RangePicker,{value:[((E=(0,D.mg)(i.StartTime))===null||E===void 0?void 0:E.add(D.Mg,"hour"))||null,((h=(0,D.mg)(i.EndTime))===null||h===void 0?void 0:h.add(D.Mg,"hour"))||null],onChange:function(t){var L,v;x(r()(r()({},i),{},{StartTime:t==null||(L=t.at(0))===null||L===void 0?void 0:L.add(-D.Mg,"hour").format(D.t9),EndTime:t==null||(v=t.at(1))===null||v===void 0?void 0:v.add(-D.Mg,"hour").format(D.t9)}))}})})}),(0,e.jsx)(F.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{label:"\u9000\u6B3E\u5355\u53F7",children:(0,e.jsx)(b.Z,{value:i.OutRefundNo||"",onChange:function(t){x(r()(r()({},i),{},{OutRefundNo:t.target.value}))}})})}),(0,e.jsx)(F.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{label:"\u9000\u6B3E\u6D41\u6C34\u53F7",children:(0,e.jsx)(b.Z,{value:i.OutRefundNo||"",onChange:function(t){x(r()(r()({},i),{},{OutRefundNo:t.target.value}))}})})})]}),(0,e.jsx)($.Z,{gutter:10,children:(0,e.jsx)(F.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{children:(0,e.jsx)(Y.ZP,{type:"primary",htmlType:"submit",children:"\u641C\u7D22"})})})})]})})},k=w,q=function(){var R=(0,u.useState)(!0),o=a()(R,2),E=o[0],h=o[1],f=(0,u.useState)({}),d=a()(f,2),B=d[0],U=d[1],i=(0,u.useState)({Page:1}),x=a()(i,2),p=x[0],m=x[1],t=function(s){h(!0),Q.x1.mallManager.paymentBillQueryPaging(r()(r()({},p),{},{Paid:!0})).then(function(l){l.data.Error?g.ZP.error(l.data.Error.Message):U(l.data||{})}).finally(function(){h(!1)})},L=[{title:"\u652F\u4ED8\u5355\u53F7",width:200,render:function(s,l){return(0,e.jsx)("span",{children:(0,e.jsx)(y.Z.Paragraph,{copyable:!0,children:l.Id})})}},{title:"\u8BA2\u5355\u53F7",render:function(s,l){var j,I;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:((j=l.Order)===null||j===void 0?void 0:j.OrderSn)||"--"}),(0,e.jsxs)("div",{children:["\u603B\u91D1\u989D\uFF1A",(0,e.jsx)("b",{children:(0,P.lb)(((I=l.Order)===null||I===void 0?void 0:I.TotalPrice)||0)})]})]})}},{title:"\u91D1\u989D",render:function(s,l){var j=(0,W.Z)(l.RefundBills||[],function(I){return I.Price||0});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S.Z,{color:"blue",children:(0,P.lb)(l.Price||0)}),j>0&&(0,e.jsxs)("p",{style:{color:"red"},children:["\u9000\u6B3E\uFF1A",(0,P.lb)(j)]})]})}},{title:"\u652F\u4ED8\u65B9\u5F0F",render:function(s,l){var j;return(0,e.jsx)("span",{children:(0,e.jsx)("b",{children:((j=z.rz.find(function(I){return I.id==l.PaymentChannel}))===null||j===void 0?void 0:j.name)||l.PaymentChannel||"--"})})}},{title:"\u652F\u4ED8\u72B6\u6001",render:function(s,l){return l.Paid&&(0,e.jsx)(S.Z,{color:"green",children:"\u5DF2\u652F\u4ED8"})}},{title:"\u652F\u4ED8\u65F6\u95F4",render:function(s,l){return(0,e.jsx)(A.Z,{timeStr:l.PayTime})}},{title:"\u65F6\u95F4",render:function(s,l){return(0,e.jsx)(M.Z,{model:l})}}];return(0,u.useEffect)(function(){t(p)},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k,{query:p,onSearch:function(s){m(s),t(s)}}),(0,e.jsx)(N.Z,{title:"\u652F\u4ED8\u5355",children:(0,e.jsx)(K.Z,{rowKey:function(s){return s.Id||""},loading:E,columns:L,dataSource:B.Items||[],expandable:{expandedRowRender:function(s){return(0,e.jsx)("div",{style:{padding:10,border:"5px dashed orange"},children:(0,e.jsx)(J,{model:s})})}},pagination:{showSizeChanger:!1,pageSize:20,current:p.Page,total:B.TotalCount,onChange:function(s){m(r()(r()({},p),{},{Page:s}))}}})})]})}}}]);
