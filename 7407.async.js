"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7407],{85254:function(k,y,n){n.d(y,{Z:function(){return b}});var M=n(5574),h=n.n(M),S=n(5878),A=n(45908),a=n(67294),j=n(5715),W=n(52013),L=n(46036),s=n(20577),r=n(32604),l=n(95813),x=n(63743),e=n(22897),R=n(98223),N=n(97857),K=n.n(N),O=n(39153),o=n(85893),Z=function(T){var F=T.events,H=(0,O.zV)(K()({},F));return(0,o.jsx)(o.Fragment,{})},B=n(75915),b=function(T){var F=T.marker_position,H=T.onMarkerPositionChange,w=T.marker_title,Y=T.use_map_center,en=T.use_click_position,z=(0,a.useRef)(null),tn=(0,a.useState)(void 0),c=h()(tn,2),m=c[0],g=c[1],v=F||B.Ls,C=(0,A.Z)(v);(0,a.useEffect)(function(){console.log("maker-position",F)},[F]),(0,a.useEffect)(function(){var d;(d=z.current)===null||d===void 0||d.setView(v)},[v,z.current]);var E=function(u){H&&H(u)},U=function(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"flex-row-right gap-1 p-1",children:(0,o.jsx)(x.e,{content:"\u64A4\u9500\u4FEE\u6539",children:(0,o.jsx)(e.A,{size:"sm",variant:"light",radius:"full",isIconOnly:!0,isDisabled:C==null,onPress:function(){C&&E(C)},children:(0,o.jsx)(R.Z,{stroke:1})})})})})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{style:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[U(),(0,o.jsx)("div",{className:"flex-grow",children:(0,o.jsxs)(j.h,{ref:z,fadeAnimation:!0,markerZoomAnimation:!0,zoomAnimation:!0,attributionControl:!1,center:v,zoom:13,style:{height:"100%",width:"100%"},whenReady:function(){setTimeout(function(){var u;window.dispatchEvent(new Event("resize")),(u=z.current)===null||u===void 0||u.fireEvent("resize")},3e3)},children:[(0,o.jsx)(Z,{events:{click:function(u){en&&E(u.latlng)},dragstart:function(u){},drag:function(u){var i;Y&&g((i=z.current)===null||i===void 0?void 0:i.getCenter())},dragend:function(u){var i,I=(i=z.current)===null||i===void 0?void 0:i.getCenter();Y&&I&&E(I),g(void 0)}}}),(0,o.jsx)(W.I,{url:B.HA,attribution:""}),(0,o.jsx)(L.C,{center:v,radius:10,fillColor:"blue",fillOpacity:.3,pathOptions:{color:"red"}}),(0,o.jsx)(s.J,{draggable:!Y,position:v,icon:B.kK,eventHandlers:{drag:function(u){if(!Y){var i=u.target.getLatLng();g(i)}},dragend:function(u){var i=u.target.getLatLng();console.log("drag end:",u,i),E(i),g(void 0)}},children:(0,l.Wq)(w)||(0,o.jsx)(r.G,{children:w})}),m!=null&&(0,o.jsx)(L.C,{center:m,radius:10,fillColor:"blue",fillOpacity:.3,pathOptions:{color:"red"}})]})})]})})}},75915:function(k,y,n){n.d(y,{HA:function(){return W},Ls:function(){return L},kK:function(){return j}});var M=n(5878),h=n(45243),S=n.n(h),A=n(37093),a=n(68858),j=S().icon({iconUrl:A,shadowUrl:a,iconSize:[27,32],iconAnchor:[13,32],popupAnchor:[0,-30]}),W="https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}",L={lat:31.456489605661922,lng:120.27968627233334}},95564:function(k,y,n){var M=n(97857),h=n.n(M),S=n(22897),A=n(87351),a=n(32573),j=n(87740),W=n(86597),L=n(96476),s=n(77373),r=n(85893);y.Z=function(l){var x=l.open,e=l.onClose,R=l.children,N=l.title,K=l.action,O=l.pureBody,o=l.showCloseButton,Z=l.bodyStyle,B=l.props,b=function(){return o?(0,r.jsx)("div",{style:{position:"relative"},children:(0,r.jsx)(S.A,{style:{position:"absolute",display:"inline",right:"20px",top:"20px",zIndex:1},isIconOnly:!0,size:"sm",radius:"full",color:"danger",onPress:function(){e&&e()},children:(0,r.jsx)(s.Z,{stroke:1})})}):null};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(A.R,h()(h()({className:"overflow-hidden",backdrop:"blur",isOpen:x,onClose:e,hideCloseButton:!0,isDismissable:!0,scrollBehavior:"outside"},B),{},{children:(0,r.jsxs)(a.A,{children:[b(),N==null||(0,r.jsx)(j.k,{className:"flex flex-col gap-1",children:N}),O&&R,O||(0,r.jsx)(W.I,{style:Z,children:(0,r.jsx)("div",{style:{minHeight:300},children:R})}),K&&(0,r.jsx)(L.R,{children:K})]})}))})}},72640:function(k,y,n){var M=n(32983),h=n(85893);y.Z=function(){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:100},children:(0,h.jsx)(M.Z,{})})})}},27407:function(k,y,n){n.d(y,{Z:function(){return tn}});var M=n(5574),h=n.n(M),S=n(72640),A=n(67294),a=n(95813),j=n(22897),W=n(78298),L=n(97975),s=n(97857),r=n.n(s),l=n(68421),x=n(82052),e=n(85893),R=function(c){var m=c.rate,g=c.style,v=c.children,C=(0,A.useRef)(null),E=(0,x.Z)(C),U=(E==null?void 0:E.width)||0;return(0,e.jsx)("div",{ref:C,style:r()({display:"block",height:U*m},g),children:v})},N=n(21274),K=n(85254),O=n(75915),o=n(95564),Z=n(35291),B=n(63070),b=n(48258),T=n(92648);function F(c){var m=c.value,g=c.onChange,v=c.autoClose,C=A.useState(!1),E=h()(C,2),U=E[0],d=E[1],u=(0,b.q)(),i=u.map(function(f){return(0,Z.M3)(f)}),I=i.flatMap(function(f){return f.children||[]}),t=I.flatMap(function(f){return f.children||[]}),D=(m==null?void 0:m.map(function(f){return f.label||""}).filter(function(f){return!(0,a.Wq)(f)}))||[],$=D.length>=3;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.A,{variant:"bordered",color:$?"primary":"danger",onPress:function(){return d(!0)},startContent:(0,e.jsx)(B.Z,{stroke:1}),children:(0,e.jsxs)("div",{className:"flex-row-left gap-1",children:[(0,e.jsx)("div",{children:D.length>0?"".concat(D.join("-")):"\u9009\u62E9\u5730\u5740"}),$||(0,e.jsx)("span",{className:"text-overline",children:"\u8BF7\u5B8C\u5584\u5730\u5740\u5230'\u7701\u5E02\u533A'"})]})}),(0,e.jsx)(o.Z,{title:"\u9009\u62E9\u5730\u5740",open:U,onClose:function(){d(!1)},action:(0,e.jsx)(j.A,{color:"primary",onPress:function(){d(!1)},children:"\u786E\u5B9A"}),children:(0,e.jsx)(T.Z.Panel,{options:i,value:m==null?void 0:m.map(function(f){return f.value||""}),onChange:function(J){var q=i.find(function(G){return G.value==J.at(0)}),an=I.find(function(G){return G.value==J.at(1)}),nn=t.find(function(G){return G.value==J.at(2)});g&&g([q,an,nn]),nn!=null&&v&&d(!1)}})})]})}var H=n(30699),w=n(48741),Y=n(34925);function en(c){var m=c.open,g=c.onClose,v=c.data,C=c.onOk,E=(0,b.q)(),U=E.map(function(p){return(0,Z.M3)(p)}),d=U.flatMap(function(p){return p.children||[]}),u=d.flatMap(function(p){return p.children||[]}),i=(0,A.useState)({Lat:O.Ls.lat,Lon:O.Ls.lng}),I=h()(i,2),t=I[0],D=I[1],$=(0,l.Z)(H.x1.platform.userAddressSetDefault,{manual:!0,onSuccess:function(_,P){(0,a._y)(_,function(){C()})}}),f=(0,l.Z)(H.x1.platform.userAddressDelete,{manual:!0,onSuccess:function(_){(0,a._y)(_,function(){C()})}}),J=function(){if(!(t.Lat==null||t.Lon==null))return{lat:t.Lat,lng:t.Lon}},q=(0,l.Z)(H.x1.platform.userAddressSave,{manual:!0,onSuccess:function(_,P){(0,a._y)(_,function(){C&&C()})}}),an=function(){if((0,a.Wq)(t.Name)||(0,a.Wq)(t.Tel)||(0,a.Wq)(t.Province)||(0,a.Wq)(t.ProvinceCode)||(0,a.Wq)(t.City)||(0,a.Wq)(t.CityCode)||(0,a.Wq)(t.Area)||(0,a.Wq)(t.AreaCode)||(0,a.Wq)(t.AddressDetail)){(0,a.Ti)("\u8BF7\u5B8C\u5584\u8868\u5355\u4FE1\u606F");return}if(J()==null){(0,a.Ti)("\u8BF7\u5728\u5730\u56FE\u6807\u6CE8\u5730\u70B9");return}if(!(0,a.tq)(t.Tel||"")){(0,a.Ti)("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u4E0D\u5BF9");return}q.run(r()(r()({},t),{},{IsDefault:!0}))};(0,A.useEffect)(function(){D(r()(r()({},v),{},{Lat:v.Lat||O.Ls.lat,Lon:v.Lon||O.Ls.lng}))},[v]);var nn=function(){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,e.jsx)("div",{className:"left-action",children:(0,a.Wq)(t.Id)||(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[t.IsDefault||(0,e.jsx)(j.A,{isLoading:$.loading,onPress:function(){$.run({Id:t.Id})},children:"\u8BBE\u4E3A\u9ED8\u8BA4"}),(0,e.jsx)(j.A,{isLoading:f.loading,color:"danger",onPress:function(){confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u5730\u5740\uFF1F")&&f.run({Id:t.Id})},children:"\u5220\u9664"})]})})}),(0,e.jsx)("div",{className:"right-action",children:(0,e.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,e.jsx)(j.A,{onPress:function(){g&&g()},children:"\u53D6\u6D88"}),(0,e.jsx)(j.A,{color:"primary",isLoading:q.loading,onPress:function(){an()},children:"\u4FDD\u5B58"})]})})]})})},G=function(){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"w-full flex-col-center gap-2 py-2",children:[(0,e.jsx)(w.Y,{label:"\u59D3\u540D",fullWidth:!0,value:t.Name||"",onChange:function(P){D(r()(r()({},t),{},{Name:P.target.value}))},variant:"bordered"}),(0,e.jsx)(w.Y,{label:"\u7535\u8BDD",fullWidth:!0,value:t.Tel||"",onChange:function(P){D(r()(r()({},t),{},{Tel:P.target.value}))},variant:"bordered"}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(F,{autoClose:!0,value:[{label:t.Province||void 0,value:t.ProvinceCode||void 0},{label:t.City||void 0,value:t.CityCode||void 0},{label:t.Area||void 0,value:t.AreaCode||void 0}],onChange:function(P){var V=P.at(0),X=P.at(1),Q=P.at(2);D(r()(r()({},t),{},{Province:V==null?void 0:V.label,ProvinceCode:V==null?void 0:V.value,City:X==null?void 0:X.label,CityCode:X==null?void 0:X.value,Area:Q==null?void 0:Q.label,AreaCode:Q==null?void 0:Q.value}))}})}),(0,e.jsx)(Y.Y,{label:"\u8BE6\u7EC6\u5730\u5740",placeholder:"\u8BF7\u7CBE\u786E\u5230\u697C\u680B\u548C\u95E8\u724C",fullWidth:!0,minRows:2,value:t.AddressDetail||"",onChange:function(P){if(P.target.value.length>100){(0,a.Ti)("\u957F\u5EA6\u8FC7\u957F");return}D(r()(r()({},t),{},{AddressDetail:P.target.value}))},variant:"bordered"}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(R,{rate:1,style:{border:"1px solid blue"},children:(0,e.jsx)(K.Z,{marker_position:J(),marker_title:t.Name||void 0,use_map_center:!0,onMarkerPositionChange:function(P){D(r()(r()({},t),{},{Lat:P.lat,Lon:P.lng}))}})})})]})})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(o.Z,{title:"\u8054\u7CFB\u5730\u5740",open:m,onClose:function(){g&&g()},action:nn(),children:[q.loading&&(0,e.jsx)(N.Z,{}),G()]})})}var z=n(25606);function tn(c){var m=c.addressList,g=c.onClick,v=c.onRefresh,C=c.header,E=c.itemStyle,U=(0,A.useState)(void 0),d=h()(U,2),u=d[0],i=d[1],I=function(){return(0,a.G5)(m)?(0,e.jsx)(S.Z,{}):m==null?void 0:m.map(function(D,$){return(0,e.jsx)("div",{style:{marginBottom:10},onClick:function(){g&&g(D)},children:(0,e.jsx)(z.Z,{item:D,style:E,onClick:function(){i(D)}})},$)})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(en,{data:u||{},open:u!=null,onClose:function(){i(void 0)},onOk:function(){i(void 0),v&&v()}}),C,(0,e.jsx)("div",{className:"mb-2",children:I()}),(0,e.jsx)("div",{className:"my-2",children:(0,e.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1",children:[(0,e.jsx)(j.A,{isIconOnly:!0,size:"md",variant:"light",onPress:function(){v&&v()},children:(0,e.jsx)(W.Z,{stroke:1})}),(0,e.jsx)(j.A,{isDisabled:m.length>=50,startContent:(0,e.jsx)(L.Z,{stroke:1}),variant:"bordered",fullWidth:!0,onPress:function(){i({})},children:"\u65B0\u589E\u5730\u5740"})]})})]})}},25606:function(k,y,n){n.d(y,{Z:function(){return r}});var M=n(97857),h=n.n(M),S=n(35291),A=n(95813),a=n(97197),j=n(22897),W=n(7400),L=n(15741),s=n(85893);function r(l){var x=l.item,e=l.distance,R=l.onClick,N=l.hideEditButton,K=l.style,O=l.hideLocationTips;if(!x)return null;var o=(0,S.KU)(x),Z=function(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex-row-between",children:[(0,s.jsx)("div",{className:"flex-grow",children:(0,s.jsxs)("div",{className:"flex-row-left gap-1",children:[(0,s.jsx)("div",{className:"text-title",children:x.Name}),(0,s.jsx)("div",{className:"text-body",children:x.Tel}),x.IsDefault&&(0,s.jsx)(a.z,{size:"sm",color:"danger",variant:"flat",radius:"full",children:"\u9ED8\u8BA4"}),o&&!O&&(0,s.jsx)("span",{className:"text-overline",children:"\u4F4E\u7CBE\u5EA6\u5730\u5740"}),e&&e>0&&(0,s.jsx)("span",{className:"text-overline",children:"".concat((e/1e3).toFixed(2),"km")})]})}),N||(0,s.jsx)(j.A,{isIconOnly:!0,variant:"light",size:"sm",onPress:function(){R&&R(x)},children:(0,s.jsx)(L.Z,{stroke:1})})]})})};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"rounded-md border-1 border-dashed border-transparent bg-white px-2 py-1 shadow-sm hover:border-blue-500",style:h()({},K),children:(0,s.jsxs)("div",{className:"flex-row-left gap-1",children:[(0,s.jsx)(W.h,{size:"md",children:x.Name}),(0,s.jsxs)("div",{className:"ml-2 flex-grow",children:[Z(),(0,s.jsx)("div",{className:"text-caption",children:[x.Province||"",x.City||"",x.Area||""].filter(function(B){return!(0,A.Wq)(B)}).join("-")}),(0,s.jsx)("div",{className:"text-caption",children:x.AddressDetail})]})]})})})}}}]);
