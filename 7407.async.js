"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7407],{85254:function(Q,M,n){n.d(M,{Z:function(){return k}});var L=n(5574),h=n.n(L),S=n(5878),A=n(45908),a=n(67294),C=n(5715),R=n(52013),B=n(46036),i=n(20577),r=n(32604),s=n(95813),x=n(38016),e=n(38787),W=n(98223),U=n(97857),K=n.n(U),O=n(39153),l=n(85893),Z=function(P){var F=P.events,b=(0,O.zV)(K()({},F));return(0,l.jsx)(l.Fragment,{})},I=n(75915),k=function(P){var F=P.marker_position,b=P.onMarkerPositionChange,w=P.marker_title,Y=P.use_map_center,en=P.use_click_position,z=(0,a.useRef)(null),tn=(0,a.useState)(void 0),c=h()(tn,2),m=c[0],g=c[1],v=F||I.Ls,j=(0,A.Z)(v);(0,a.useEffect)(function(){console.log("maker-position",F)},[F]),(0,a.useEffect)(function(){var d;(d=z.current)===null||d===void 0||d.setView(v)},[v,z.current]);var E=function(u){b&&b(u)},N=function(){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"flex-row-right gap-1 p-1",children:(0,l.jsx)(x.e,{content:"\u64A4\u9500\u4FEE\u6539",children:(0,l.jsx)(e.A,{size:"sm",variant:"light",radius:"full",isIconOnly:!0,isDisabled:j==null,onClick:function(){j&&E(j)},children:(0,l.jsx)(W.Z,{stroke:1})})})})})};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{style:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[N(),(0,l.jsx)("div",{className:"flex-grow",children:(0,l.jsxs)(C.h,{ref:z,fadeAnimation:!0,markerZoomAnimation:!0,zoomAnimation:!0,attributionControl:!1,center:v,zoom:13,style:{height:"100%",width:"100%"},whenReady:function(){setTimeout(function(){var u;window.dispatchEvent(new Event("resize")),(u=z.current)===null||u===void 0||u.fireEvent("resize")},3e3)},children:[(0,l.jsx)(Z,{events:{click:function(u){en&&E(u.latlng)},dragstart:function(u){},drag:function(u){var o;Y&&g((o=z.current)===null||o===void 0?void 0:o.getCenter())},dragend:function(u){var o,T=(o=z.current)===null||o===void 0?void 0:o.getCenter();Y&&T&&E(T),g(void 0)}}}),(0,l.jsx)(R.I,{url:I.HA,attribution:""}),(0,l.jsx)(B.C,{center:v,radius:10,fillColor:"blue",fillOpacity:.3,pathOptions:{color:"red"}}),(0,l.jsx)(i.J,{draggable:!Y,position:v,icon:I.kK,eventHandlers:{drag:function(u){if(!Y){var o=u.target.getLatLng();g(o)}},dragend:function(u){var o=u.target.getLatLng();console.log("drag end:",u,o),E(o),g(void 0)}},children:(0,s.Wq)(w)||(0,l.jsx)(r.G,{children:w})}),m!=null&&(0,l.jsx)(B.C,{center:m,radius:10,fillColor:"blue",fillOpacity:.3,pathOptions:{color:"red"}})]})})]})})}},75915:function(Q,M,n){n.d(M,{HA:function(){return R},Ls:function(){return B},kK:function(){return C}});var L=n(5878),h=n(45243),S=n.n(h),A=n(37093),a=n(68858),C=S().icon({iconUrl:A,shadowUrl:a,iconSize:[27,32],iconAnchor:[13,32],popupAnchor:[0,-30]}),R="https://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}",B={lat:31.456489605661922,lng:120.27968627233334}},95564:function(Q,M,n){var L=n(97857),h=n.n(L),S=n(38787),A=n(94087),a=n(78967),C=n(87740),R=n(86597),B=n(96476),i=n(77373),r=n(85893);M.Z=function(s){var x=s.open,e=s.onClose,W=s.children,U=s.title,K=s.action,O=s.pureBody,l=s.showCloseButton,Z=s.bodyStyle,I=s.props,k=function(){return l?(0,r.jsx)("div",{style:{position:"relative"},children:(0,r.jsx)(S.A,{style:{position:"absolute",display:"inline",right:"20px",top:"20px",zIndex:1},isIconOnly:!0,size:"sm",radius:"full",color:"danger",onClick:function(){e&&e()},children:(0,r.jsx)(i.Z,{stroke:1})})}):null};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(A.R,h()(h()({className:"overflow-hidden",backdrop:"blur",isOpen:x,onClose:e,hideCloseButton:!0,isDismissable:!0,scrollBehavior:"outside"},I),{},{children:(0,r.jsxs)(a.A,{children:[k(),U==null||(0,r.jsx)(C.k,{className:"flex flex-col gap-1",children:U}),O&&W,O||(0,r.jsx)(R.I,{style:Z,children:(0,r.jsx)("div",{style:{minHeight:300},children:W})}),K&&(0,r.jsx)(B.R,{children:K})]})}))})}},72640:function(Q,M,n){var L=n(32983),h=n(85893);M.Z=function(){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:100},children:(0,h.jsx)(L.Z,{})})})}},27407:function(Q,M,n){n.d(M,{Z:function(){return tn}});var L=n(5574),h=n.n(L),S=n(72640),A=n(67294),a=n(95813),C=n(38787),R=n(78298),B=n(97975),i=n(97857),r=n.n(i),s=n(68421),x=n(82052),e=n(85893),W=function(c){var m=c.rate,g=c.style,v=c.children,j=(0,A.useRef)(null),E=(0,x.Z)(j),N=(E==null?void 0:E.width)||0;return(0,e.jsx)("div",{ref:j,style:r()({display:"block",height:N*m},g),children:v})},U=n(21274),K=n(85254),O=n(75915),l=n(95564),Z=n(35291),I=n(63070),k=n(48258),P=n(3303);function F(c){var m=c.value,g=c.onChange,v=c.autoClose,j=A.useState(!1),E=h()(j,2),N=E[0],d=E[1],u=(0,k.q)(),o=u.map(function(f){return(0,Z.M3)(f)}),T=o.flatMap(function(f){return f.children||[]}),t=T.flatMap(function(f){return f.children||[]}),_=(m==null?void 0:m.map(function(f){return f.label||""}).filter(function(f){return!(0,a.Wq)(f)}))||[],H=_.length>=3;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(C.A,{variant:"bordered",color:H?"primary":"danger",onClick:function(){return d(!0)},startContent:(0,e.jsx)(I.Z,{stroke:1}),children:(0,e.jsxs)("div",{className:"flex-row-left gap-1",children:[(0,e.jsx)("div",{children:_.length>0?"".concat(_.join("-")):"\u9009\u62E9\u5730\u5740"}),H||(0,e.jsx)("span",{className:"text-overline",children:"\u8BF7\u5B8C\u5584\u5730\u5740\u5230'\u7701\u5E02\u533A'"})]})}),(0,e.jsx)(l.Z,{title:"\u9009\u62E9\u5730\u5740",open:N,onClose:function(){d(!1)},action:(0,e.jsx)(C.A,{color:"primary",onClick:function(){d(!1)},children:"\u786E\u5B9A"}),children:(0,e.jsx)(P.Z.Panel,{options:o,value:m==null?void 0:m.map(function(f){return f.value||""}),onChange:function(G){var q=o.find(function($){return $.value==G.at(0)}),an=T.find(function($){return $.value==G.at(1)}),nn=t.find(function($){return $.value==G.at(2)});g&&g([q,an,nn]),nn!=null&&v&&d(!1)}})})]})}var b=n(30699),w=n(69047),Y=n(83810);function en(c){var m=c.open,g=c.onClose,v=c.data,j=c.onOk,E=(0,k.q)(),N=E.map(function(y){return(0,Z.M3)(y)}),d=N.flatMap(function(y){return y.children||[]}),u=d.flatMap(function(y){return y.children||[]}),o=(0,A.useState)({Lat:O.Ls.lat,Lon:O.Ls.lng}),T=h()(o,2),t=T[0],_=T[1],H=(0,s.Z)(b.x1.platform.userAddressSetDefault,{manual:!0,onSuccess:function(p,D){(0,a._y)(p,function(){j()})}}),f=(0,s.Z)(b.x1.platform.userAddressDelete,{manual:!0,onSuccess:function(p){(0,a._y)(p,function(){j()})}}),G=function(){if(!(t.Lat==null||t.Lon==null))return{lat:t.Lat,lng:t.Lon}},q=(0,s.Z)(b.x1.platform.userAddressSave,{manual:!0,onSuccess:function(p,D){(0,a._y)(p,function(){j&&j()})}}),an=function(){if((0,a.Wq)(t.Name)||(0,a.Wq)(t.Tel)||(0,a.Wq)(t.Province)||(0,a.Wq)(t.ProvinceCode)||(0,a.Wq)(t.City)||(0,a.Wq)(t.CityCode)||(0,a.Wq)(t.Area)||(0,a.Wq)(t.AreaCode)||(0,a.Wq)(t.AddressDetail)){(0,a.Ti)("\u8BF7\u5B8C\u5584\u8868\u5355\u4FE1\u606F");return}if(G()==null){(0,a.Ti)("\u8BF7\u5728\u5730\u56FE\u6807\u6CE8\u5730\u70B9");return}if(!(0,a.tq)(t.Tel||"")){(0,a.Ti)("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u4E0D\u5BF9");return}q.run(r()(r()({},t),{},{IsDefault:!0}))};(0,A.useEffect)(function(){_(r()(r()({},v),{},{Lat:v.Lat||O.Ls.lat,Lon:v.Lon||O.Ls.lng}))},[v]);var nn=function(){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,e.jsx)("div",{className:"left-action",children:(0,a.Wq)(t.Id)||(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[t.IsDefault||(0,e.jsx)(C.A,{isLoading:H.loading,onClick:function(){H.run({Id:t.Id})},children:"\u8BBE\u4E3A\u9ED8\u8BA4"}),(0,e.jsx)(C.A,{isLoading:f.loading,color:"danger",onClick:function(){confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u5730\u5740\uFF1F")&&f.run({Id:t.Id})},children:"\u5220\u9664"})]})})}),(0,e.jsx)("div",{className:"right-action",children:(0,e.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,e.jsx)(C.A,{onClick:function(){g&&g()},children:"\u53D6\u6D88"}),(0,e.jsx)(C.A,{color:"primary",isLoading:q.loading,onClick:function(){an()},children:"\u4FDD\u5B58"})]})})]})})},$=function(){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"w-full flex-col-center gap-2 py-2",children:[(0,e.jsx)(w.Y,{label:"\u59D3\u540D",fullWidth:!0,value:t.Name||"",onChange:function(D){_(r()(r()({},t),{},{Name:D.target.value}))},variant:"bordered"}),(0,e.jsx)(w.Y,{label:"\u7535\u8BDD",fullWidth:!0,value:t.Tel||"",onChange:function(D){_(r()(r()({},t),{},{Tel:D.target.value}))},variant:"bordered"}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(F,{autoClose:!0,value:[{label:t.Province||void 0,value:t.ProvinceCode||void 0},{label:t.City||void 0,value:t.CityCode||void 0},{label:t.Area||void 0,value:t.AreaCode||void 0}],onChange:function(D){var V=D.at(0),X=D.at(1),J=D.at(2);_(r()(r()({},t),{},{Province:V==null?void 0:V.label,ProvinceCode:V==null?void 0:V.value,City:X==null?void 0:X.label,CityCode:X==null?void 0:X.value,Area:J==null?void 0:J.label,AreaCode:J==null?void 0:J.value}))}})}),(0,e.jsx)(Y.Y,{label:"\u8BE6\u7EC6\u5730\u5740",placeholder:"\u8BF7\u7CBE\u786E\u5230\u697C\u680B\u548C\u95E8\u724C",fullWidth:!0,minRows:2,value:t.AddressDetail||"",onChange:function(D){if(D.target.value.length>100){(0,a.Ti)("\u957F\u5EA6\u8FC7\u957F");return}_(r()(r()({},t),{},{AddressDetail:D.target.value}))},variant:"bordered"}),(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(W,{rate:1,style:{border:"1px solid blue"},children:(0,e.jsx)(K.Z,{marker_position:G(),marker_title:t.Name||void 0,use_map_center:!0,onMarkerPositionChange:function(D){_(r()(r()({},t),{},{Lat:D.lat,Lon:D.lng}))}})})})]})})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(l.Z,{title:"\u8054\u7CFB\u5730\u5740",open:m,onClose:function(){g&&g()},action:nn(),children:[q.loading&&(0,e.jsx)(U.Z,{}),$()]})})}var z=n(25606);function tn(c){var m=c.addressList,g=c.onClick,v=c.onRefresh,j=c.header,E=c.itemStyle,N=(0,A.useState)(void 0),d=h()(N,2),u=d[0],o=d[1],T=function(){return(0,a.G5)(m)?(0,e.jsx)(S.Z,{}):m==null?void 0:m.map(function(_,H){return(0,e.jsx)("div",{style:{marginBottom:10},onClick:function(){g&&g(_)},children:(0,e.jsx)(z.Z,{item:_,style:E,onClick:function(){o(_)}})},H)})};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(en,{data:u||{},open:u!=null,onClose:function(){o(void 0)},onOk:function(){o(void 0),v&&v()}}),j,(0,e.jsx)("div",{className:"mb-2",children:T()}),(0,e.jsx)("div",{className:"my-2",children:(0,e.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1",children:[(0,e.jsx)(C.A,{isIconOnly:!0,size:"md",variant:"light",onClick:function(){v&&v()},children:(0,e.jsx)(R.Z,{stroke:1})}),(0,e.jsx)(C.A,{isDisabled:m.length>=50,startContent:(0,e.jsx)(B.Z,{stroke:1}),variant:"bordered",fullWidth:!0,onClick:function(){o({})},children:"\u65B0\u589E\u5730\u5740"})]})})]})}},25606:function(Q,M,n){n.d(M,{Z:function(){return r}});var L=n(97857),h=n.n(L),S=n(35291),A=n(95813),a=n(75968),C=n(38787),R=n(45820),B=n(15741),i=n(85893);function r(s){var x=s.item,e=s.distance,W=s.onClick,U=s.hideEditButton,K=s.style,O=s.hideLocationTips;if(!x)return null;var l=(0,S.KU)(x),Z=function(){return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"flex-row-between",children:[(0,i.jsx)("div",{className:"flex-grow",children:(0,i.jsxs)("div",{className:"flex-row-left gap-1",children:[(0,i.jsx)("div",{className:"text-title",children:x.Name}),(0,i.jsx)("div",{className:"text-body",children:x.Tel}),x.IsDefault&&(0,i.jsx)(a.z,{size:"sm",color:"danger",variant:"flat",radius:"full",children:"\u9ED8\u8BA4"}),l&&!O&&(0,i.jsx)("span",{className:"text-overline",children:"\u4F4E\u7CBE\u5EA6\u5730\u5740"}),e&&e>0&&(0,i.jsx)("span",{className:"text-overline",children:"".concat((e/1e3).toFixed(2),"km")})]})}),U||(0,i.jsx)(C.A,{isIconOnly:!0,variant:"light",size:"sm",onClick:function(P){P.preventDefault(),P.stopPropagation(),W&&W(x)},children:(0,i.jsx)(B.Z,{stroke:1})})]})})};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"rounded-md border-1 border-dashed border-transparent bg-white px-2 py-1 shadow-sm hover:border-blue-500",style:h()({},K),children:(0,i.jsxs)("div",{className:"flex-row-left gap-1",children:[(0,i.jsx)(R.h,{size:"md",children:x.Name}),(0,i.jsxs)("div",{className:"ml-2 flex-grow",children:[Z(),(0,i.jsx)("div",{className:"text-caption",children:[x.Province||"",x.City||"",x.Area||""].filter(function(I){return!(0,A.Wq)(I)}).join("-")}),(0,i.jsx)("div",{className:"text-caption",children:x.AddressDetail})]})]})})})}}}]);
