"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5193],{96256:function(Y,R,n){var u=n(97857),v=n.n(u),h=n(19632),f=n.n(h),O=n(5574),S=n.n(O),z=n(85980),N=n(34041),D=n(57381),g=n(67294),s=n(85893);R.Z=function(c){var Z=c.onSearch,$=c.value,P=c.onChange,C=c.style,_=c.initItem,W=c.placeholder,A=c.props,x=(0,g.useState)(!1),V=S()(x,2),o=V[0],M=V[1],X=(0,g.useState)([]),L=S()(X,2),B=L[0],Q=L[1],F=(0,z.Z)(function(E){M(!0),Z(E).then(function(p){Q(p||[])}).finally(function(){return M(!1)})},{wait:500});(0,g.useEffect)(function(){},[]);var w=function(){var p=f()(B);return _&&!p.find(function(e){return e.value===_.value})&&p.push(_),p};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(N.Z,v()({style:v()({minWidth:300},C),loading:o,value:$,showSearch:!0,allowClear:!0,filterOption:!1,onSearch:function(p){F.run(p)},onChange:function(p){var e=B.find(function(l){return l.value==p});P&&P(e)},onClear:function(){P&&P(void 0)},placeholder:W||"\u8F93\u5165\u5173\u952E\u8BCD",notFoundContent:o&&(0,s.jsx)(D.Z,{size:"small"}),options:w()},A))})}},1288:function(Y,R,n){var u=n(78957),v=n(83062),h=n(46629),f=n(85893);R.Z=function(O){var S,z=O.timeStr,N=O.fallback,D=O.onlyDate,g=O.prefix,s=(S=(0,h.mg)(z))===null||S===void 0?void 0:S.add(h.Mg,"hour");if(!s)return N||null;var c=(0,h.ND)().utc().add(h.Mg,"hour"),Z=s.isSame(c,"year"),$=s.diff(c,"day"),P=Z?s.format(h.AK):s.format(h.vc),C=function(){return(0,f.jsxs)("div",{children:[(0,f.jsxs)(u.Z,{direction:"horizontal",children:[(0,f.jsx)("div",{children:s.fromNow()}),(0,f.jsx)("div",{children:s.format(h.On)})]}),(0,f.jsx)("div",{children:s.format(h.t9)})]})};return(0,f.jsx)(v.Z,{title:C(),children:(0,f.jsxs)(u.Z,{direction:"horizontal",children:[g,(0,f.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:D?s.format(h.vc):s.format(h.dq)})]})})}},48746:function(Y,R,n){var u=n(15009),v=n.n(u),h=n(99289),f=n.n(h),O=n(96256),S=n(35291),z=n(30699),N=n(66419),D=n(85893);R.Z=function(g){var s=g.selectedSku,c=g.onChange,Z=g.style,$=g.props,P=function(){var C=f()(v()().mark(function _(W){var A,x,V;return v()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!(0,N.Wq)(W)){M.next=2;break}return M.abrupt("return",[]);case 2:return M.next=4,z.x1.mallAdmin.skuQuerySkuForSelection({Keywords:W,Take:20});case 4:return x=M.sent,V=x==null||(A=x.data)===null||A===void 0||(A=A.Data)===null||A===void 0?void 0:A.map(function(X){return{label:(0,S.CQ)(X)||"--",value:X.Id||"--"}}),M.abrupt("return",V||[]);case 7:case"end":return M.stop()}},_)}));return function(W){return C.apply(this,arguments)}}();return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(O.Z,{style:Z,props:$,onSearch:function(){var C=f()(v()().mark(function _(W){return v()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,P(W);case 2:return x.abrupt("return",x.sent);case 3:case"end":return x.stop()}},_)}));return function(_){return C.apply(this,arguments)}}(),placeholder:"\u641C\u7D22\u5546\u54C1...",value:(s==null?void 0:s.Id)||void 0,initItem:s==null?void 0:{label:(0,S.CQ)(s)||"",value:s.Id||""},onChange:function(_){c&&c(_==null?void 0:{Id:_.value,Name:_.label})}})})}},47176:function(Y,R,n){n.r(R),n.d(R,{default:function(){return X}});var u=n(97857),v=n.n(u),h=n(5574),f=n.n(h),O=n(68421),S=n(45360),z=n(66309),N=n(4393),D=n(78957),g=n(14726),s=n(80799),c=n(67294),Z=n(1288),$=n(48746),P=n(30699),C=n(66419),_=n(50472),W=n(85576),A=n(29127),x=n(25278),V=n(76857),o=n(85893),M=function(L){var B=L.show,Q=L.close,F=L.ok,w=(0,c.useState)([]),E=f()(w,2),p=E[0],e=E[1],l=(0,c.useState)(""),m=f()(l,2),a=m[0],r=m[1],T=function(t){var i=new FormData;return i.append("collection",t,t.name),V.M.post("/api/mall-admin/external-sku/upload-and-parse-excel",i)},y=(0,O.Z)(T,{manual:!0,onSuccess:function(t,i){(0,C._y)(t,function(){var d,b=((d=t.data)===null||d===void 0?void 0:d.Data)||[];b.length<=0&&S.ZP.warning("\u8868\u683C\u4E2D\u6CA1\u6709\u6570\u636E"),e(b)})}}),U=(0,O.Z)(P.x1.mallAdmin.externalSkuInsertMany,{manual:!0,onSuccess:function(t,i){(0,C._y)(t,function(){S.ZP.success("\u4FDD\u5B58\u6210\u529F"),F()})}});(0,c.useEffect)(function(){B||e([])},[B]);var K=[{title:"\u552F\u4E00\u6807\u8BC6",render:function(t,i){return"".concat(i.ExternalSkuId,"@").concat(a||"--")}},{title:"\u89C4\u683C\u540D\u79F0",render:function(t,i){return i.SkuName||"--"}},{title:"\u4EF7\u683C",render:function(t,i){return(0,C.lb)(i.Price||0)}}];return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(W.Z,{open:B,onCancel:function(){Q()},onOk:function(){Q()},width:"95%",children:(0,o.jsxs)(D.Z,{direction:"vertical",style:{width:"100%"},children:[(0,o.jsxs)(D.Z,{direction:"horizontal",children:[(0,o.jsx)(A.Z,{fileList:[],showUploadList:!1,multiple:!1,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",customRequest:function(t){var i=t.file;i&&y.run(i)},children:(0,o.jsx)(g.ZP,{size:"large",type:"primary",loading:y.loading,children:"\u4E0A\u4F20\u8868\u683C"})}),(0,o.jsx)(x.Z,{size:"large",value:a,onChange:function(t){return r(t.target.value)},placeholder:"\u6570\u636E\u5206\u7EC4"}),(0,o.jsx)(g.ZP,{size:"large",disabled:p.length<=0||(0,C.Wq)(a),onClick:function(){var t=p.map(function(i){return v()(v()({},i),{},{SystemName:a})});U.run(t)},loading:U.loading,children:"\u5BFC\u5165\u6570\u636E"}),(0,o.jsx)(g.ZP,{size:"large",type:"dashed",disabled:p.length<=0,onClick:function(){return e([])},children:"\u6E05\u7A7A\u6570\u636E"})]}),(0,o.jsx)(s.Z,{columns:K,dataSource:p,pagination:!1})]})})})},X=function(){var L,B=(0,c.useState)({Page:1}),Q=f()(B,2),F=Q[0],w=Q[1],E=(0,O.Z)(P.x1.mallAdmin.externalSkuQueryPaging,{manual:!0}),p=((L=E.data)===null||L===void 0?void 0:L.data)||{},e=(0,c.useState)(!1),l=f()(e,2),m=l[0],a=l[1];(0,c.useEffect)(function(){E.run(v()({},F))},[]);var r=(0,c.useState)(void 0),T=f()(r,2),y=T[0],U=T[1],K=(0,O.Z)(P.x1.mallAdmin.externalSkuSaveMapping,{manual:!0,onSuccess:function(i){(0,C._y)(i,function(){S.ZP.success("\u4FDD\u5B58\u6210\u529F"),E.run(v()({},F))})},onFinally:function(){return U(void 0)}}),j=[{title:"\u552F\u4E00\u6807\u8BC6",render:function(i,d){return(0,o.jsx)(z.Z,{children:d.CombineId})}},{title:"\u89C4\u683C\u540D\u79F0",render:function(i,d){var b,G=(b=d.Items)===null||b===void 0?void 0:b.at(0);if(!G)return(0,o.jsx)("span",{children:"--"});var I=[G.GoodsName||"",G.SkuName||""].filter(function(q){return q.length>0});return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("span",{children:I.join("-")})})}},{title:"\u5173\u8054\u89C4\u683C",render:function(i,d,b){return(0,o.jsx)($.Z,{selectedSku:d.Sku||void 0,props:{loading:y===d.CombineId},onChange:function(I){console.log(b,I),U(d.CombineId),K.run({CombineId:d.CombineId,SkuId:I==null?void 0:I.Id})}})}},{title:"\u8BB0\u5F55\u6570\u91CF",render:function(i,d){var b;return(0,o.jsx)("b",{children:((b=d.Items)===null||b===void 0?void 0:b.length)||0})}},{title:"\u6700\u65B0\u66F4\u65B0\u65F6\u95F4",render:function(i,d){return(0,o.jsx)(Z.Z,{timeStr:d.CreationTime})}}];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(M,{show:m,close:function(){return a(!1)},ok:function(){a(!1),E.run(v()({},F))}}),(0,o.jsx)(N.Z,{extra:(0,o.jsxs)(D.Z,{direction:"horizontal",children:[(0,o.jsx)(g.ZP,{icon:(0,o.jsx)(_.Z,{stroke:1}),size:"small",loading:E.loading,type:"dashed",onClick:function(){E.run(v()({},F))}}),(0,o.jsx)(g.ZP,{type:"primary",size:"small",onClick:function(){a(!0)},children:"\u5BFC\u5165"})]}),children:(0,o.jsx)(s.Z,{loading:E.loading,columns:j,dataSource:p.Items||[],expandable:{expandedRowRender:function(i){return(0,o.jsx)(o.Fragment,{children:JSON.stringify(i)})}},pagination:{total:p.TotalCount,pageSize:p.PageSize,current:p.PageIndex,onChange:function(i){var d=v()(v()({},F),{},{Page:i});E.run(d),w(d)}}})})]})}},85980:function(Y,R,n){var u=n(97582),v=n(23279),h=n.n(v),f=n(67294),O=n(3930),S=n(45210),z=n(92770),N=n(31663);function D(g,s){var c;N.Z&&((0,z.mf)(g)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof g)));var Z=(0,O.Z)(g),$=(c=s==null?void 0:s.wait)!==null&&c!==void 0?c:1e3,P=(0,f.useMemo)(function(){return h()(function(){for(var C=[],_=0;_<arguments.length;_++)C[_]=arguments[_];return Z.current.apply(Z,(0,u.ev)([],(0,u.CR)(C),!1))},$,s)},[]);return(0,S.Z)(function(){P.cancel()}),{run:P,cancel:P.cancel,flush:P.flush}}R.Z=D},66309:function(Y,R,n){n.d(R,{Z:function(){return p}});var u=n(67294),v=n(93967),h=n.n(v),f=n(98423),O=n(98787),S=n(69760),z=n(96159),N=n(45353),D=n(53124),g=n(11568),s=n(10274),c=n(14747),Z=n(83262),$=n(83559);const P=e=>{const{paddingXXS:l,lineWidth:m,tagPaddingHorizontal:a,componentCls:r,calc:T}=e,y=T(a).sub(m).equal(),U=T(l).sub(m).equal();return{[r]:Object.assign(Object.assign({},(0,c.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:y,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,g.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${r}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${r}-close-icon`]:{marginInlineStart:U,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${r}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${r}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:y}}),[`${r}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},C=e=>{const{lineWidth:l,fontSizeIcon:m,calc:a}=e,r=e.fontSizeSM;return(0,Z.IX)(e,{tagFontSize:r,tagLineHeight:(0,g.bf)(a(e.lineHeightSM).mul(r).equal()),tagIconSize:a(m).sub(a(l).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},_=e=>({defaultBg:new s.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var W=(0,$.I$)("Tag",e=>{const l=C(e);return P(l)},_),A=function(e,l){var m={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&l.indexOf(a)<0&&(m[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)l.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(m[a[r]]=e[a[r]]);return m},V=u.forwardRef((e,l)=>{const{prefixCls:m,style:a,className:r,checked:T,onChange:y,onClick:U}=e,K=A(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:j,tag:t}=u.useContext(D.E_),i=ee=>{y==null||y(!T),U==null||U(ee)},d=j("tag",m),[b,G,I]=W(d),q=h()(d,`${d}-checkable`,{[`${d}-checkable-checked`]:T},t==null?void 0:t.className,r,G,I);return b(u.createElement("span",Object.assign({},K,{ref:l,style:Object.assign(Object.assign({},a),t==null?void 0:t.style),className:q,onClick:i})))}),o=n(98719);const M=e=>(0,o.Z)(e,(l,m)=>{let{textColor:a,lightBorderColor:r,lightColor:T,darkColor:y}=m;return{[`${e.componentCls}${e.componentCls}-${l}`]:{color:a,background:T,borderColor:r,"&-inverse":{color:e.colorTextLightSolid,background:y,borderColor:y},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var X=(0,$.bk)(["Tag","preset"],e=>{const l=C(e);return M(l)},_);function L(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const B=(e,l,m)=>{const a=L(m);return{[`${e.componentCls}${e.componentCls}-${l}`]:{color:e[`color${m}`],background:e[`color${a}Bg`],borderColor:e[`color${a}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var Q=(0,$.bk)(["Tag","status"],e=>{const l=C(e);return[B(l,"success","Success"),B(l,"processing","Info"),B(l,"error","Error"),B(l,"warning","Warning")]},_),F=function(e,l){var m={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&l.indexOf(a)<0&&(m[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)l.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(m[a[r]]=e[a[r]]);return m};const E=u.forwardRef((e,l)=>{const{prefixCls:m,className:a,rootClassName:r,style:T,children:y,icon:U,color:K,onClose:j,bordered:t=!0,visible:i}=e,d=F(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:b,direction:G,tag:I}=u.useContext(D.E_),[q,ee]=u.useState(!0),ue=(0,f.Z)(d,["closeIcon","closable"]);u.useEffect(()=>{i!==void 0&&ee(i)},[i]);const te=(0,O.o2)(K),oe=(0,O.yT)(K),ne=te||oe,ce=Object.assign(Object.assign({backgroundColor:K&&!ne?K:void 0},I==null?void 0:I.style),T),H=b("tag",m),[de,me,_e]=W(H),ve=h()(H,I==null?void 0:I.className,{[`${H}-${K}`]:ne,[`${H}-has-color`]:K&&!ne,[`${H}-hidden`]:!q,[`${H}-rtl`]:G==="rtl",[`${H}-borderless`]:!t},a,r,me,_e),le=k=>{k.stopPropagation(),j==null||j(k),!k.defaultPrevented&&ee(!1)},[,fe]=(0,S.Z)((0,S.w)(e),(0,S.w)(I),{closable:!1,closeIconRender:k=>{const Ce=u.createElement("span",{className:`${H}-close-icon`,onClick:le},k);return(0,z.wm)(k,Ce,J=>({onClick:ie=>{var ae;(ae=J==null?void 0:J.onClick)===null||ae===void 0||ae.call(J,ie),le(ie)},className:h()(J==null?void 0:J.className,`${H}-close-icon`)}))}}),ge=typeof d.onClick=="function"||y&&y.type==="a",re=U||null,he=re?u.createElement(u.Fragment,null,re,y&&u.createElement("span",null,y)):y,se=u.createElement("span",Object.assign({},ue,{ref:l,className:ve,style:ce}),he,fe,te&&u.createElement(X,{key:"preset",prefixCls:H}),oe&&u.createElement(Q,{key:"status",prefixCls:H}));return de(ge?u.createElement(N.Z,{component:"Tag"},se):se)});E.CheckableTag=V;var p=E},50472:function(Y,R,n){n.d(R,{Z:function(){return v}});var u=n(33733);var v=(0,u.Z)("outline","reload","IconReload",[["path",{d:"M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1 7.935 1.007 9.425 4.747",key:"svg-0"}],["path",{d:"M20 4v5h-5",key:"svg-1"}]])}}]);
