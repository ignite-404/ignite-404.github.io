"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5193],{96256:function(w,R,n){var u=n(97857),m=n.n(u),g=n(19632),v=n.n(g),E=n(68421),b=n(34041),K=n(57381),A=n(85893);R.Z=function(C){var S=C.onSearch,c=C.value,h=C.onChange,F=C.style,B=C.initItem,z=C.placeholder,y=C.props,f=(0,E.Z)(S,{manual:!0,debounceWait:500}),T=f.data||[],$=function(){var P=v()(T);return B&&!P.find(function(o){return o.value===B.value})&&P.push(B),P};return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(b.Z,m()({style:m()({minWidth:300},F),loading:f.loading,value:c,showSearch:!0,allowClear:!0,filterOption:!1,onSearch:function(P){f.run(P)},onChange:function(P){var o=T.find(function(D){return D.value==P});h&&h(o)},onClear:function(){h&&h(void 0)},placeholder:z||"\u8F93\u5165\u5173\u952E\u8BCD",notFoundContent:f.loading&&(0,A.jsx)(K.Z,{size:"small"}),options:$()},y))})}},1288:function(w,R,n){var u=n(78957),m=n(83062),g=n(46629),v=n(85893);R.Z=function(E){var b,K=E.timeStr,A=E.fallback,C=E.onlyDate,S=E.prefix,c=(b=(0,g.mg)(K))===null||b===void 0?void 0:b.add(g.Mg,"hour");if(!c)return A||null;var h=(0,g.ND)().utc().add(g.Mg,"hour"),F=c.isSame(h,"year"),B=c.diff(h,"day"),z=F?c.format(g.AK):c.format(g.vc),y=function(){return(0,v.jsxs)("div",{children:[(0,v.jsxs)(u.Z,{direction:"horizontal",children:[(0,v.jsx)("div",{children:c.fromNow()}),(0,v.jsx)("div",{children:c.format(g.On)})]}),(0,v.jsx)("div",{children:c.format(g.t9)})]})};return(0,v.jsx)(m.Z,{title:y(),children:(0,v.jsxs)(u.Z,{direction:"horizontal",children:[S,(0,v.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:C?c.format(g.vc):c.format(g.dq)})]})})}},48746:function(w,R,n){var u=n(15009),m=n.n(u),g=n(99289),v=n.n(g),E=n(96256),b=n(35291),K=n(30699),A=n(66419),C=n(85893);R.Z=function(S){var c=S.selectedSku,h=S.onChange,F=S.style,B=S.props,z=function(){var y=v()(m()().mark(function f(T){var $,j,P;return m()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(0,A.Wq)(T)){D.next=2;break}return D.abrupt("return",[]);case 2:return D.next=4,K.x1.mallAdmin.skuQuerySkuForSelection({Keywords:T,Take:20});case 4:return j=D.sent,P=j==null||($=j.data)===null||$===void 0||($=$.Data)===null||$===void 0?void 0:$.map(function(k){return{label:(0,b.CQ)(k)||"--",value:k.Id||"--"}}),D.abrupt("return",P||[]);case 7:case"end":return D.stop()}},f)}));return function(T){return y.apply(this,arguments)}}();return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(E.Z,{style:F,props:B,onSearch:function(){var y=v()(m()().mark(function f(T){return m()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,z(T);case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}},f)}));return function(f){return y.apply(this,arguments)}}(),placeholder:"\u641C\u7D22\u5546\u54C1...",value:(c==null?void 0:c.Id)||void 0,initItem:c==null?void 0:{label:(0,b.CQ)(c)||"",value:c.Id||""},onChange:function(f){h&&h(f==null?void 0:{Id:f.value,Name:f.label})}})})}},47176:function(w,R,n){n.r(R),n.d(R,{default:function(){return k}});var u=n(97857),m=n.n(u),g=n(5574),v=n.n(g),E=n(68421),b=n(45360),K=n(66309),A=n(4393),C=n(78957),S=n(14726),c=n(80799),h=n(67294),F=n(1288),B=n(48746),z=n(30699),y=n(66419),f=n(50472),T=n(85576),$=n(29127),j=n(65233),P=n(76857),o=n(85893),D=function(H){var N=H.show,X=H.close,V=H.ok,q=(0,h.useState)([]),M=v()(q,2),W=M[0],e=M[1],l=(0,h.useState)(""),d=v()(l,2),a=d[0],r=d[1],I=function(t){var s=new FormData;return s.append("collection",t,t.name),P.M.post("/api/mall-admin/external-sku/upload-and-parse-excel",s)},_=(0,E.Z)(I,{manual:!0,onSuccess:function(t,s){(0,y._y)(t,function(){var i,x=((i=t.data)===null||i===void 0?void 0:i.Data)||[];x.length<=0&&b.ZP.warning("\u8868\u683C\u4E2D\u6CA1\u6709\u6570\u636E"),e(x)})}}),Z=(0,E.Z)(z.x1.mallAdmin.externalSkuInsertMany,{manual:!0,onSuccess:function(t,s){(0,y._y)(t,function(){b.ZP.success("\u4FDD\u5B58\u6210\u529F"),V()})}});(0,h.useEffect)(function(){N||e([])},[N]);var U=[{title:"\u552F\u4E00\u6807\u8BC6",render:function(t,s){return"".concat(s.ExternalSkuId,"@").concat(a||"--")}},{title:"\u89C4\u683C\u540D\u79F0",render:function(t,s){return s.SkuName||"--"}},{title:"\u4EF7\u683C",render:function(t,s){return(0,y.lb)(s.Price||0)}}];return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(T.Z,{open:N,onCancel:function(){X()},onOk:function(){X()},width:"95%",children:(0,o.jsxs)(C.Z,{direction:"vertical",style:{width:"100%"},children:[(0,o.jsxs)(C.Z,{direction:"horizontal",children:[(0,o.jsx)($.Z,{fileList:[],showUploadList:!1,multiple:!1,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",customRequest:function(t){var s=t.file;s&&_.run(s)},children:(0,o.jsx)(S.ZP,{size:"large",type:"primary",loading:_.loading,children:"\u4E0A\u4F20\u8868\u683C"})}),(0,o.jsx)(j.Z,{size:"large",value:a,onChange:function(t){return r(t.target.value)},placeholder:"\u6570\u636E\u5206\u7EC4"}),(0,o.jsx)(S.ZP,{size:"large",disabled:W.length<=0||(0,y.Wq)(a),onClick:function(){var t=W.map(function(s){return m()(m()({},s),{},{SystemName:a})});Z.run(t)},loading:Z.loading,children:"\u5BFC\u5165\u6570\u636E"}),(0,o.jsx)(S.ZP,{size:"large",type:"dashed",disabled:W.length<=0,onClick:function(){return e([])},children:"\u6E05\u7A7A\u6570\u636E"})]}),(0,o.jsx)(c.Z,{columns:U,dataSource:W,pagination:!1})]})})})},k=function(){var H,N=(0,h.useState)({Page:1}),X=v()(N,2),V=X[0],q=X[1],M=(0,E.Z)(z.x1.mallAdmin.externalSkuQueryPaging,{manual:!0}),W=((H=M.data)===null||H===void 0?void 0:H.data)||{},e=(0,h.useState)(!1),l=v()(e,2),d=l[0],a=l[1];(0,h.useEffect)(function(){M.run(m()({},V))},[]);var r=(0,h.useState)(void 0),I=v()(r,2),_=I[0],Z=I[1],U=(0,E.Z)(z.x1.mallAdmin.externalSkuSaveMapping,{manual:!0,onSuccess:function(s){(0,y._y)(s,function(){b.ZP.success("\u4FDD\u5B58\u6210\u529F"),M.run(m()({},V))})},onFinally:function(){return Z(void 0)}}),p=[{title:"\u552F\u4E00\u6807\u8BC6",render:function(s,i){return(0,o.jsx)(K.Z,{children:i.CombineId})}},{title:"\u89C4\u683C\u540D\u79F0",render:function(s,i){var x,Q=(x=i.Items)===null||x===void 0?void 0:x.at(0);if(!Q)return(0,o.jsx)("span",{children:"--"});var O=[Q.GoodsName||"",Q.SkuName||""].filter(function(Y){return Y.length>0});return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("span",{children:O.join("-")})})}},{title:"\u5173\u8054\u89C4\u683C",render:function(s,i,x){return(0,o.jsx)(B.Z,{selectedSku:i.Sku||void 0,props:{loading:_===i.CombineId},onChange:function(O){console.log(x,O),Z(i.CombineId),U.run({CombineId:i.CombineId,SkuId:O==null?void 0:O.Id})}})}},{title:"\u8BB0\u5F55\u6570\u91CF",render:function(s,i){var x;return(0,o.jsx)("b",{children:((x=i.Items)===null||x===void 0?void 0:x.length)||0})}},{title:"\u6700\u65B0\u66F4\u65B0\u65F6\u95F4",render:function(s,i){return(0,o.jsx)(F.Z,{timeStr:i.CreationTime})}}];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(D,{show:d,close:function(){return a(!1)},ok:function(){a(!1),M.run(m()({},V))}}),(0,o.jsx)(A.Z,{extra:(0,o.jsxs)(C.Z,{direction:"horizontal",children:[(0,o.jsx)(S.ZP,{icon:(0,o.jsx)(f.Z,{stroke:1}),size:"small",loading:M.loading,type:"dashed",onClick:function(){M.run(m()({},V))}}),(0,o.jsx)(S.ZP,{type:"primary",size:"small",onClick:function(){a(!0)},children:"\u5BFC\u5165"})]}),children:(0,o.jsx)(c.Z,{loading:M.loading,columns:p,dataSource:W.Items||[],expandable:{expandedRowRender:function(s){return(0,o.jsx)(o.Fragment,{children:JSON.stringify(s)})}},pagination:{total:W.TotalCount,pageSize:W.PageSize,current:W.PageIndex,onChange:function(s){var i=m()(m()({},V),{},{Page:s});M.run(i),q(i)}}})})]})}},66309:function(w,R,n){n.d(R,{Z:function(){return W}});var u=n(67294),m=n(93967),g=n.n(m),v=n(98423),E=n(98787),b=n(69760),K=n(96159),A=n(45353),C=n(53124),S=n(11568),c=n(10274),h=n(14747),F=n(83262),B=n(83559);const z=e=>{const{paddingXXS:l,lineWidth:d,tagPaddingHorizontal:a,componentCls:r,calc:I}=e,_=I(a).sub(d).equal(),Z=I(l).sub(d).equal();return{[r]:Object.assign(Object.assign({},(0,h.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:_,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,S.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${r}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${r}-close-icon`]:{marginInlineStart:Z,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${r}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${r}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:_}}),[`${r}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},y=e=>{const{lineWidth:l,fontSizeIcon:d,calc:a}=e,r=e.fontSizeSM;return(0,F.IX)(e,{tagFontSize:r,tagLineHeight:(0,S.bf)(a(e.lineHeightSM).mul(r).equal()),tagIconSize:a(d).sub(a(l).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},f=e=>({defaultBg:new c.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var T=(0,B.I$)("Tag",e=>{const l=y(e);return z(l)},f),$=function(e,l){var d={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&l.indexOf(a)<0&&(d[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)l.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(d[a[r]]=e[a[r]]);return d},P=u.forwardRef((e,l)=>{const{prefixCls:d,style:a,className:r,checked:I,onChange:_,onClick:Z}=e,U=$(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:p,tag:t}=u.useContext(C.E_),s=ee=>{_==null||_(!I),Z==null||Z(ee)},i=p("tag",d),[x,Q,O]=T(i),Y=g()(i,`${i}-checkable`,{[`${i}-checkable-checked`]:I},t==null?void 0:t.className,r,Q,O);return x(u.createElement("span",Object.assign({},U,{ref:l,style:Object.assign(Object.assign({},a),t==null?void 0:t.style),className:Y,onClick:s})))}),o=n(98719);const D=e=>(0,o.Z)(e,(l,d)=>{let{textColor:a,lightBorderColor:r,lightColor:I,darkColor:_}=d;return{[`${e.componentCls}${e.componentCls}-${l}`]:{color:a,background:I,borderColor:r,"&-inverse":{color:e.colorTextLightSolid,background:_,borderColor:_},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var k=(0,B.bk)(["Tag","preset"],e=>{const l=y(e);return D(l)},f);function H(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const N=(e,l,d)=>{const a=H(d);return{[`${e.componentCls}${e.componentCls}-${l}`]:{color:e[`color${d}`],background:e[`color${a}Bg`],borderColor:e[`color${a}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var X=(0,B.bk)(["Tag","status"],e=>{const l=y(e);return[N(l,"success","Success"),N(l,"processing","Info"),N(l,"error","Error"),N(l,"warning","Warning")]},f),V=function(e,l){var d={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&l.indexOf(a)<0&&(d[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)l.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(d[a[r]]=e[a[r]]);return d};const M=u.forwardRef((e,l)=>{const{prefixCls:d,className:a,rootClassName:r,style:I,children:_,icon:Z,color:U,onClose:p,bordered:t=!0,visible:s}=e,i=V(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:x,direction:Q,tag:O}=u.useContext(C.E_),[Y,ee]=u.useState(!0),ue=(0,v.Z)(i,["closeIcon","closable"]);u.useEffect(()=>{s!==void 0&&ee(s)},[s]);const te=(0,E.o2)(U),oe=(0,E.yT)(U),ne=te||oe,de=Object.assign(Object.assign({backgroundColor:U&&!ne?U:void 0},O==null?void 0:O.style),I),L=x("tag",d),[ce,me,ve]=T(L),fe=g()(L,O==null?void 0:O.className,{[`${L}-${U}`]:ne,[`${L}-has-color`]:U&&!ne,[`${L}-hidden`]:!Y,[`${L}-rtl`]:Q==="rtl",[`${L}-borderless`]:!t},a,r,me,ve),re=J=>{J.stopPropagation(),p==null||p(J),!J.defaultPrevented&&ee(!1)},[,ge]=(0,b.Z)((0,b.w)(e),(0,b.w)(O),{closable:!1,closeIconRender:J=>{const _e=u.createElement("span",{className:`${L}-close-icon`,onClick:re},J);return(0,K.wm)(J,_e,G=>({onClick:ie=>{var ae;(ae=G==null?void 0:G.onClick)===null||ae===void 0||ae.call(G,ie),re(ie)},className:g()(G==null?void 0:G.className,`${L}-close-icon`)}))}}),Ce=typeof i.onClick=="function"||_&&_.type==="a",le=Z||null,he=le?u.createElement(u.Fragment,null,le,_&&u.createElement("span",null,_)):_,se=u.createElement("span",Object.assign({},ue,{ref:l,className:fe,style:de}),he,ge,te&&u.createElement(k,{key:"preset",prefixCls:L}),oe&&u.createElement(X,{key:"status",prefixCls:L}));return ce(Ce?u.createElement(A.Z,{component:"Tag"},se):se)});M.CheckableTag=P;var W=M},50472:function(w,R,n){n.d(R,{Z:function(){return m}});var u=n(33733);var m=(0,u.Z)("outline","reload","IconReload",[["path",{d:"M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1 7.935 1.007 9.425 4.747",key:"svg-0"}],["path",{d:"M20 4v5h-5",key:"svg-1"}]])}}]);
