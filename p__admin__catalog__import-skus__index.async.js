"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5193],{96256:function(Y,R,n){var u=n(42122),f=n.n(u),C=n(861),g=n.n(C),P=n(27424),S=n.n(P),z=n(85980),N=n(34041),x=n(57381),_=n(67294),s=n(85893);R.Z=function(c){var Z=c.onSearch,$=c.value,D=c.onChange,h=c.style,v=c.initItem,W=c.placeholder,A=c.props,j=(0,_.useState)(!1),V=S()(j,2),o=V[0],b=V[1],X=(0,_.useState)([]),L=S()(X,2),B=L[0],Q=L[1],F=(0,z.Z)(function(E){b(!0),Z(E).then(function(p){Q(p||[])}).finally(function(){return b(!1)})},{wait:500});(0,_.useEffect)(function(){},[]);var w=function(){var p=g()(B);return v&&!p.find(function(e){return e.value===v.value})&&p.push(v),p};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(N.Z,f()({style:f()({minWidth:300},h),loading:o,value:$,showSearch:!0,allowClear:!0,filterOption:!1,onSearch:function(p){F.run(p)},onChange:function(p){var e=B.find(function(r){return r.value==p});D&&D(e)},onClear:function(){D&&D(void 0)},placeholder:W||"\u8F93\u5165\u5173\u952E\u8BCD",notFoundContent:o&&(0,s.jsx)(x.Z,{size:"small"}),options:w()},A))})}},1288:function(Y,R,n){var u=n(78957),f=n(83062),C=n(46629),g=n(85893);R.Z=function(P){var S,z=P.timeStr,N=P.fallback,x=P.onlyDate,_=P.prefix,s=(S=(0,C.mg)(z))===null||S===void 0?void 0:S.add(C.Mg,"hour");if(!s)return N||null;var c=(0,C.ND)().utc().add(C.Mg,"hour"),Z=s.isSame(c,"year"),$=s.diff(c,"day"),D=Z?s.format(C.AK):s.format(C.vc),h=function(){return(0,g.jsxs)("div",{children:[(0,g.jsxs)(u.Z,{direction:"horizontal",children:[(0,g.jsx)("div",{children:s.fromNow()}),(0,g.jsx)("div",{children:s.format(C.On)})]}),(0,g.jsx)("div",{children:s.format(C.t9)})]})};return(0,g.jsx)(f.Z,{title:h(),children:(0,g.jsxs)(u.Z,{direction:"horizontal",children:[_,(0,g.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:x?s.format(C.vc):s.format(C.dq)})]})})}},48746:function(Y,R,n){var u=n(17061),f=n.n(u),C=n(17156),g=n.n(C),P=n(96256),S=n(35291),z=n(30967),N=n(42838),x=n(85893);R.Z=function(_){var s=_.selectedSku,c=_.onChange,Z=_.style,$=_.props,D=function(){var h=g()(f()().mark(function v(W){var A,j,V;return f()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(0,N.Wq)(W)){b.next=2;break}return b.abrupt("return",[]);case 2:return b.next=4,z.x1.mallAdmin.skuQuerySkuForSelection({Keywords:W,Take:20});case 4:return j=b.sent,V=j==null||(A=j.data)===null||A===void 0||(A=A.Data)===null||A===void 0?void 0:A.map(function(X){return{label:(0,S.CQ)(X)||"--",value:X.Id||"--"}}),b.abrupt("return",V||[]);case 7:case"end":return b.stop()}},v)}));return function(W){return h.apply(this,arguments)}}();return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(P.Z,{style:Z,props:$,onSearch:function(){var h=g()(f()().mark(function v(W){return f()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,D(W);case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}},v)}));return function(v){return h.apply(this,arguments)}}(),placeholder:"\u641C\u7D22\u5546\u54C1...",value:(s==null?void 0:s.Id)||void 0,initItem:s==null?void 0:{label:(0,S.CQ)(s)||"",value:s.Id||""},onChange:function(v){c&&c(v==null?void 0:{Id:v.value,Name:v.label})}})})}},47176:function(Y,R,n){n.r(R),n.d(R,{default:function(){return X}});var u=n(42122),f=n.n(u),C=n(27424),g=n.n(C),P=n(68421),S=n(45360),z=n(66309),N=n(4393),x=n(78957),_=n(14726),s=n(80799),c=n(67294),Z=n(1288),$=n(48746),D=n(30967),h=n(42838),v=n(50472),W=n(85576),A=n(29127),j=n(25278),V=n(76857),o=n(85893),b=function(L){var B=L.show,Q=L.close,F=L.ok,w=(0,c.useState)([]),E=g()(w,2),p=E[0],e=E[1],r=(0,c.useState)(""),m=g()(r,2),a=m[0],l=m[1],T=function(t){var i=new FormData;return i.append("collection",t,t.name),V.M.post("/api/mall-admin/external-sku/upload-and-parse-excel",i)},y=(0,P.Z)(T,{manual:!0,onSuccess:function(t,i){(0,h._y)(t,function(){var d,I=((d=t.data)===null||d===void 0?void 0:d.Data)||[];I.length<=0&&S.ZP.warning("\u8868\u683C\u4E2D\u6CA1\u6709\u6570\u636E"),e(I)})}}),U=(0,P.Z)(D.x1.mallAdmin.externalSkuInsertMany,{manual:!0,onSuccess:function(t,i){(0,h._y)(t,function(){S.ZP.success("\u4FDD\u5B58\u6210\u529F"),F()})}});(0,c.useEffect)(function(){B||e([])},[B]);var K=[{title:"\u552F\u4E00\u6807\u8BC6",render:function(t,i){return"".concat(i.ExternalSkuId,"@").concat(a||"--")}},{title:"\u89C4\u683C\u540D\u79F0",render:function(t,i){return i.SkuName||"--"}},{title:"\u4EF7\u683C",render:function(t,i){return(0,h.lb)(i.Price||0)}}];return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(W.Z,{open:B,onCancel:function(){Q()},onOk:function(){Q()},width:"95%",children:(0,o.jsxs)(x.Z,{direction:"vertical",style:{width:"100%"},children:[(0,o.jsxs)(x.Z,{direction:"horizontal",children:[(0,o.jsx)(A.Z,{fileList:[],showUploadList:!1,multiple:!1,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",customRequest:function(t){var i=t.file;i&&y.run(i)},children:(0,o.jsx)(_.ZP,{size:"large",type:"primary",loading:y.loading,children:"\u4E0A\u4F20\u8868\u683C"})}),(0,o.jsx)(j.Z,{size:"large",value:a,onChange:function(t){return l(t.target.value)},placeholder:"\u6570\u636E\u5206\u7EC4"}),(0,o.jsx)(_.ZP,{size:"large",disabled:p.length<=0||(0,h.Wq)(a),onClick:function(){var t=p.map(function(i){return f()(f()({},i),{},{SystemName:a})});U.run(t)},loading:U.loading,children:"\u5BFC\u5165\u6570\u636E"}),(0,o.jsx)(_.ZP,{size:"large",type:"dashed",disabled:p.length<=0,onClick:function(){return e([])},children:"\u6E05\u7A7A\u6570\u636E"})]}),(0,o.jsx)(s.Z,{columns:K,dataSource:p,pagination:!1})]})})})},X=function(){var L,B=(0,c.useState)({Page:1}),Q=g()(B,2),F=Q[0],w=Q[1],E=(0,P.Z)(D.x1.mallAdmin.externalSkuQueryPaging,{manual:!0}),p=((L=E.data)===null||L===void 0?void 0:L.data)||{},e=(0,c.useState)(!1),r=g()(e,2),m=r[0],a=r[1];(0,c.useEffect)(function(){E.run(f()({},F))},[]);var l=(0,c.useState)(void 0),T=g()(l,2),y=T[0],U=T[1],K=(0,P.Z)(D.x1.mallAdmin.externalSkuSaveMapping,{manual:!0,onSuccess:function(i){(0,h._y)(i,function(){S.ZP.success("\u4FDD\u5B58\u6210\u529F"),E.run(f()({},F))})},onFinally:function(){return U(void 0)}}),O=[{title:"\u552F\u4E00\u6807\u8BC6",render:function(i,d){return(0,o.jsx)(z.Z,{children:d.CombineId})}},{title:"\u89C4\u683C\u540D\u79F0",render:function(i,d){var I,G=(I=d.Items)===null||I===void 0?void 0:I.at(0);if(!G)return(0,o.jsx)("span",{children:"--"});var M=[G.GoodsName||"",G.SkuName||""].filter(function(q){return q.length>0});return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("span",{children:M.join("-")})})}},{title:"\u5173\u8054\u89C4\u683C",render:function(i,d,I){return(0,o.jsx)($.Z,{selectedSku:d.Sku||void 0,props:{loading:y===d.CombineId},onChange:function(M){console.log(I,M),U(d.CombineId),K.run({CombineId:d.CombineId,SkuId:M==null?void 0:M.Id})}})}},{title:"\u8BB0\u5F55\u6570\u91CF",render:function(i,d){var I;return(0,o.jsx)("b",{children:((I=d.Items)===null||I===void 0?void 0:I.length)||0})}},{title:"\u6700\u65B0\u66F4\u65B0\u65F6\u95F4",render:function(i,d){return(0,o.jsx)(Z.Z,{timeStr:d.CreationTime})}}];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b,{show:m,close:function(){return a(!1)},ok:function(){a(!1),E.run(f()({},F))}}),(0,o.jsx)(N.Z,{extra:(0,o.jsxs)(x.Z,{direction:"horizontal",children:[(0,o.jsx)(_.ZP,{icon:(0,o.jsx)(v.Z,{stroke:1}),size:"small",loading:E.loading,type:"dashed",onClick:function(){E.run(f()({},F))}}),(0,o.jsx)(_.ZP,{type:"primary",size:"small",onClick:function(){a(!0)},children:"\u5BFC\u5165"})]}),children:(0,o.jsx)(s.Z,{loading:E.loading,columns:O,dataSource:p.Items||[],expandable:{expandedRowRender:function(i){return(0,o.jsx)(o.Fragment,{children:JSON.stringify(i)})}},pagination:{total:p.TotalCount,pageSize:p.PageSize,current:p.PageIndex,onChange:function(i){var d=f()(f()({},F),{},{Page:i});E.run(d),w(d)}}})})]})}},85980:function(Y,R,n){var u=n(97582),f=n(23279),C=n.n(f),g=n(67294),P=n(3930),S=n(45210),z=n(92770),N=n(31663);function x(_,s){var c;N.Z&&((0,z.mf)(_)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof _)));var Z=(0,P.Z)(_),$=(c=s==null?void 0:s.wait)!==null&&c!==void 0?c:1e3,D=(0,g.useMemo)(function(){return C()(function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];return Z.current.apply(Z,(0,u.ev)([],(0,u.CR)(h),!1))},$,s)},[]);return(0,S.Z)(function(){D.cancel()}),{run:D,cancel:D.cancel,flush:D.flush}}R.Z=x},66309:function(Y,R,n){n.d(R,{Z:function(){return p}});var u=n(67294),f=n(93967),C=n.n(f),g=n(98423),P=n(98787),S=n(69760),z=n(96159),N=n(45353),x=n(53124),_=n(11568),s=n(10274),c=n(14747),Z=n(83262),$=n(83559);const D=e=>{const{paddingXXS:r,lineWidth:m,tagPaddingHorizontal:a,componentCls:l,calc:T}=e,y=T(a).sub(m).equal(),U=T(r).sub(m).equal();return{[l]:Object.assign(Object.assign({},(0,c.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:y,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,_.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${l}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${l}-close-icon`]:{marginInlineStart:U,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${l}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${l}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:y}}),[`${l}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},h=e=>{const{lineWidth:r,fontSizeIcon:m,calc:a}=e,l=e.fontSizeSM;return(0,Z.IX)(e,{tagFontSize:l,tagLineHeight:(0,_.bf)(a(e.lineHeightSM).mul(l).equal()),tagIconSize:a(m).sub(a(r).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},v=e=>({defaultBg:new s.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var W=(0,$.I$)("Tag",e=>{const r=h(e);return D(r)},v),A=function(e,r){var m={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(m[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)r.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(m[a[l]]=e[a[l]]);return m},V=u.forwardRef((e,r)=>{const{prefixCls:m,style:a,className:l,checked:T,onChange:y,onClick:U}=e,K=A(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:O,tag:t}=u.useContext(x.E_),i=ee=>{y==null||y(!T),U==null||U(ee)},d=O("tag",m),[I,G,M]=W(d),q=C()(d,`${d}-checkable`,{[`${d}-checkable-checked`]:T},t==null?void 0:t.className,l,G,M);return I(u.createElement("span",Object.assign({},K,{ref:r,style:Object.assign(Object.assign({},a),t==null?void 0:t.style),className:q,onClick:i})))}),o=n(98719);const b=e=>(0,o.Z)(e,(r,m)=>{let{textColor:a,lightBorderColor:l,lightColor:T,darkColor:y}=m;return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:a,background:T,borderColor:l,"&-inverse":{color:e.colorTextLightSolid,background:y,borderColor:y},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var X=(0,$.bk)(["Tag","preset"],e=>{const r=h(e);return b(r)},v);function L(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const B=(e,r,m)=>{const a=L(m);return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:e[`color${m}`],background:e[`color${a}Bg`],borderColor:e[`color${a}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var Q=(0,$.bk)(["Tag","status"],e=>{const r=h(e);return[B(r,"success","Success"),B(r,"processing","Info"),B(r,"error","Error"),B(r,"warning","Warning")]},v),F=function(e,r){var m={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(m[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)r.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(m[a[l]]=e[a[l]]);return m};const E=u.forwardRef((e,r)=>{const{prefixCls:m,className:a,rootClassName:l,style:T,children:y,icon:U,color:K,onClose:O,bordered:t=!0,visible:i}=e,d=F(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:I,direction:G,tag:M}=u.useContext(x.E_),[q,ee]=u.useState(!0),ue=(0,g.Z)(d,["closeIcon","closable"]);u.useEffect(()=>{i!==void 0&&ee(i)},[i]);const te=(0,P.o2)(K),oe=(0,P.yT)(K),ne=te||oe,ce=Object.assign(Object.assign({backgroundColor:K&&!ne?K:void 0},M==null?void 0:M.style),T),H=I("tag",m),[de,me,ve]=W(H),fe=C()(H,M==null?void 0:M.className,{[`${H}-${K}`]:ne,[`${H}-has-color`]:K&&!ne,[`${H}-hidden`]:!q,[`${H}-rtl`]:G==="rtl",[`${H}-borderless`]:!t},a,l,me,ve),re=k=>{k.stopPropagation(),O==null||O(k),!k.defaultPrevented&&ee(!1)},[,ge]=(0,S.Z)((0,S.w)(e),(0,S.w)(M),{closable:!1,closeIconRender:k=>{const he=u.createElement("span",{className:`${H}-close-icon`,onClick:re},k);return(0,z.wm)(k,he,J=>({onClick:ie=>{var ae;(ae=J==null?void 0:J.onClick)===null||ae===void 0||ae.call(J,ie),re(ie)},className:C()(J==null?void 0:J.className,`${H}-close-icon`)}))}}),_e=typeof d.onClick=="function"||y&&y.type==="a",le=U||null,Ce=le?u.createElement(u.Fragment,null,le,y&&u.createElement("span",null,y)):y,se=u.createElement("span",Object.assign({},ue,{ref:r,className:fe,style:ce}),Ce,ge,te&&u.createElement(X,{key:"preset",prefixCls:H}),oe&&u.createElement(Q,{key:"status",prefixCls:H}));return de(_e?u.createElement(N.Z,{component:"Tag"},se):se)});E.CheckableTag=V;var p=E},50472:function(Y,R,n){n.d(R,{Z:function(){return f}});var u=n(33733);var f=(0,u.Z)("outline","reload","IconReload",[["path",{d:"M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1 7.935 1.007 9.425 4.747",key:"svg-0"}],["path",{d:"M20 4v5h-5",key:"svg-1"}]])}}]);
