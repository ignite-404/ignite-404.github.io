"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5193],{96256:function(w,M,n){var c=n(42122),_=n.n(c),h=n(861),f=n.n(h),O=n(27424),E=n.n(O),B=n(85980),L=n(34041),y=n(57381),g=n(67294),l=n(85893);M.Z=function(o){var A=o.onSearch,x=o.value,j=o.onChange,d=o.style,C=o.initItem,$=o.placeholder,W=o.props,I=(0,g.useState)(!1),V=E()(I,2),r=V[0],R=V[1],Q=(0,g.useState)([]),z=E()(Q,2),Z=z[0],G=z[1],F=(0,B.Z)(function(D){R(!0),A(D).then(function(p){G(p||[])}).finally(function(){return R(!1)})},{wait:500});(0,g.useEffect)(function(){},[]);var Y=function(){var p=f()(Z);return C&&!p.find(function(e){return e.value===C.value})&&p.push(C),p};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(L.Z,_()({style:_()({minWidth:300},d),loading:r,value:x,showSearch:!0,allowClear:!0,filterOption:!1,onSearch:function(p){F.run(p)},onChange:function(p){var e=Z.find(function(s){return s.value==p});j&&j(e)},onClear:function(){j&&j(void 0)},placeholder:$||"\u8F93\u5165\u5173\u952E\u8BCD",notFoundContent:r&&(0,l.jsx)(y.Z,{size:"small"}),options:Y()},W))})}},1288:function(w,M,n){var c=n(78957),_=n(83062),h=n(46629),f=n(85893);M.Z=function(O){var E,B=O.timeStr,L=O.fallback,y=O.onlyDate,g=O.prefix,l=(E=(0,h.mg)(B))===null||E===void 0?void 0:E.add(h.Mg,"hour");if(!l)return L||null;var o=(0,h.ND)().utc().add(h.Mg,"hour"),A=l.isSame(o,"year"),x=l.diff(o,"day"),j=A?l.format(h.AK):l.format(h.vc),d=function(){return(0,f.jsxs)("div",{children:[(0,f.jsxs)(c.Z,{direction:"horizontal",children:[(0,f.jsx)("div",{children:l.fromNow()}),(0,f.jsx)("div",{children:l.format(h.On)})]}),(0,f.jsx)("div",{children:l.format(h.t9)})]})};return(0,f.jsx)(_.Z,{title:d(),children:(0,f.jsxs)(c.Z,{direction:"horizontal",children:[g,(0,f.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:y?l.format(h.vc):l.format(h.dq)})]})})}},48746:function(w,M,n){var c=n(17061),_=n.n(c),h=n(17156),f=n.n(h),O=n(96256),E=n(35291),B=n(30967),L=n(42838),y=n(85893);M.Z=function(g){var l=g.selectedSku,o=g.onChange,A=g.style,x=g.props,j=function(){var d=f()(_()().mark(function C($){var W,I,V;return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!(0,L.Wq)($)){R.next=2;break}return R.abrupt("return",[]);case 2:return R.next=4,B.x1.mallAdmin.skuQuerySkuForSelection({Keywords:$,Take:20});case 4:return I=R.sent,V=I==null||(W=I.data)===null||W===void 0||(W=W.Data)===null||W===void 0?void 0:W.map(function(Q){return{label:(0,E.CQ)(Q)||"--",value:Q.Id||"--"}}),R.abrupt("return",V||[]);case 7:case"end":return R.stop()}},C)}));return function($){return d.apply(this,arguments)}}();return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(O.Z,{style:A,props:x,onSearch:function(){var d=f()(_()().mark(function C($){return _()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,j($);case 2:return I.abrupt("return",I.sent);case 3:case"end":return I.stop()}},C)}));return function(C){return d.apply(this,arguments)}}(),placeholder:"\u641C\u7D22\u5546\u54C1...",value:(l==null?void 0:l.Id)||void 0,initItem:l==null?void 0:{label:(0,E.CQ)(l)||"",value:l.Id||""},onChange:function(C){o&&o(C==null?void 0:{Id:C.value,Name:C.label})}})})}},47176:function(w,M,n){n.r(M),n.d(M,{default:function(){return Q}});var c=n(42122),_=n.n(c),h=n(27424),f=n.n(h),O=n(68421),E=n(45360),B=n(66309),L=n(4393),y=n(78957),g=n(14726),l=n(80799),o=n(67294),A=n(1288),x=n(48746),j=n(30967),d=n(42838),C=n(50472),$=n(85576),W=n(29127),I=n(25278),V=n(76857),r=n(85893),R=function(z){var Z=z.show,G=z.close,F=z.ok,Y=(0,o.useState)([]),D=f()(Y,2),p=D[0],e=D[1],s=(0,o.useState)(""),v=f()(s,2),a=v[0],u=v[1],U=function(t){var i=new FormData;return i.append("collection",t,t.name),V.M.post("/api/mall-admin/external-sku/upload-and-parse-excel",i)},P=(0,O.Z)(U,{manual:!0,onSuccess:function(t,i){(0,d._y)(t,function(){var m,b=((m=t.data)===null||m===void 0?void 0:m.Data)||[];b.length<=0&&E.ZP.warning("\u8868\u683C\u4E2D\u6CA1\u6709\u6570\u636E"),e(b)})}}),K=(0,O.Z)(j.x1.mallAdmin.externalSkuInsertMany,{manual:!0,onSuccess:function(t,i){(0,d._y)(t,function(){E.ZP.success("\u4FDD\u5B58\u6210\u529F"),F()})}});(0,o.useEffect)(function(){Z||e([])},[Z]);var N=[{title:"\u552F\u4E00\u6807\u8BC6",render:function(t,i){return"".concat(i.ExternalSkuId,"@").concat(a||"--")}},{title:"\u89C4\u683C\u540D\u79F0",render:function(t,i){return i.SkuName||"--"}},{title:"\u4EF7\u683C",render:function(t,i){return(0,d.lb)(i.Price||0)}}];return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)($.Z,{open:Z,onCancel:function(){G()},onOk:function(){G()},width:"95%",children:(0,r.jsxs)(y.Z,{direction:"vertical",style:{width:"100%"},children:[(0,r.jsxs)(y.Z,{direction:"horizontal",children:[(0,r.jsx)(W.Z,{fileList:[],showUploadList:!1,multiple:!1,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",customRequest:function(t){var i=t.file;i&&P.run(i)},children:(0,r.jsx)(g.ZP,{size:"large",type:"primary",loading:P.loading,children:"\u4E0A\u4F20\u8868\u683C"})}),(0,r.jsx)(I.Z,{size:"large",value:a,onChange:function(t){return u(t.target.value)},placeholder:"\u6570\u636E\u5206\u7EC4"}),(0,r.jsx)(g.ZP,{size:"large",disabled:p.length<=0||(0,d.Wq)(a),onClick:function(){var t=p.map(function(i){return _()(_()({},i),{},{SystemName:a})});K.run(t)},loading:K.loading,children:"\u5BFC\u5165\u6570\u636E"}),(0,r.jsx)(g.ZP,{size:"large",type:"dashed",disabled:p.length<=0,onClick:function(){return e([])},children:"\u6E05\u7A7A\u6570\u636E"})]}),(0,r.jsx)(l.Z,{columns:N,dataSource:p,pagination:!1})]})})})},Q=function(){var z,Z=(0,o.useState)({Page:1}),G=f()(Z,2),F=G[0],Y=G[1],D=(0,O.Z)(j.x1.mallAdmin.externalSkuQueryPaging,{manual:!0}),p=((z=D.data)===null||z===void 0?void 0:z.data)||{},e=(0,o.useState)(!1),s=f()(e,2),v=s[0],a=s[1];(0,o.useEffect)(function(){D.run(_()({},F))},[]);var u=(0,o.useState)(void 0),U=f()(u,2),P=U[0],K=U[1],N=(0,O.Z)(j.x1.mallAdmin.externalSkuSaveMapping,{manual:!0,onSuccess:function(i){(0,d._y)(i,function(){E.ZP.success("\u4FDD\u5B58\u6210\u529F"),D.run(_()({},F))})},onFinally:function(){return K(void 0)}}),S=[{title:"\u552F\u4E00\u6807\u8BC6",render:function(i,m){return(0,r.jsx)(B.Z,{children:m.CombineId})}},{title:"\u89C4\u683C\u540D\u79F0",render:function(i,m){var b,X=(b=m.Items)===null||b===void 0?void 0:b.at(0);if(!X)return(0,r.jsx)("span",{children:"--"});var T=[X.GoodsName||"",X.SkuName||""].filter(function(q){return q.length>0});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{children:T.join("-")})})}},{title:"\u5173\u8054\u89C4\u683C",render:function(i,m,b){return(0,r.jsx)(x.Z,{selectedSku:m.Sku||void 0,props:{loading:P===m.CombineId},onChange:function(T){console.log(b,T),K(m.CombineId),N.run({CombineId:m.CombineId,SkuId:T==null?void 0:T.Id})}})}},{title:"\u8BB0\u5F55\u6570\u91CF",render:function(i,m){var b;return(0,r.jsx)("b",{children:((b=m.Items)===null||b===void 0?void 0:b.length)||0})}},{title:"\u6700\u65B0\u66F4\u65B0\u65F6\u95F4",render:function(i,m){return(0,r.jsx)(A.Z,{timeStr:m.CreationTime})}}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R,{show:v,close:function(){return a(!1)},ok:function(){a(!1),D.run(_()({},F))}}),(0,r.jsx)(L.Z,{extra:(0,r.jsxs)(y.Z,{direction:"horizontal",children:[(0,r.jsx)(g.ZP,{icon:(0,r.jsx)(C.Z,{stroke:1}),size:"small",loading:D.loading,type:"dashed",onClick:function(){D.run(_()({},F))}}),(0,r.jsx)(g.ZP,{type:"primary",size:"small",onClick:function(){a(!0)},children:"\u5BFC\u5165"})]}),children:(0,r.jsx)(l.Z,{loading:D.loading,columns:S,dataSource:p.Items||[],expandable:{expandedRowRender:function(i){return(0,r.jsx)(r.Fragment,{children:JSON.stringify(i)})}},pagination:{total:p.TotalCount,pageSize:p.PageSize,current:p.PageIndex,onChange:function(i){var m=_()(_()({},F),{},{Page:i});D.run(m),Y(m)}}})})]})}},30967:function(w,M,n){n.d(M,{HK:function(){return l},c2:function(){return g},x1:function(){return y}});var c=n(17061),_=n.n(c),h=n(42122),f=n.n(h),O=n(17156),E=n.n(O),B=n(76857),L=n(60379),y=function(){var o=new L.V0;return o.instance=B.M,o}(),g=function(){var o=new L.V0;return o.instance=B.M,o}(),l=function(){var o=E()(_()().mark(function A(x){return _()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(x){d.next=2;break}return d.abrupt("return");case 2:return d.next=4,y.mall.commonSaveActivityLog(f()(f()({},x),{},{Id:void 0}));case 4:return d.abrupt("return",d.sent);case 5:case"end":return d.stop()}},A)}));return function(x){return o.apply(this,arguments)}}()},85980:function(w,M,n){var c=n(97582),_=n(23279),h=n.n(_),f=n(67294),O=n(3930),E=n(45210),B=n(92770),L=n(31663);function y(g,l){var o;L.Z&&((0,B.mf)(g)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof g)));var A=(0,O.Z)(g),x=(o=l==null?void 0:l.wait)!==null&&o!==void 0?o:1e3,j=(0,f.useMemo)(function(){return h()(function(){for(var d=[],C=0;C<arguments.length;C++)d[C]=arguments[C];return A.current.apply(A,(0,c.ev)([],(0,c.CR)(d),!1))},x,l)},[]);return(0,E.Z)(function(){j.cancel()}),{run:j,cancel:j.cancel,flush:j.flush}}M.Z=y},66309:function(w,M,n){n.d(M,{Z:function(){return p}});var c=n(67294),_=n(93967),h=n.n(_),f=n(98423),O=n(98787),E=n(69760),B=n(96159),L=n(45353),y=n(53124),g=n(11568),l=n(10274),o=n(14747),A=n(83262),x=n(83559);const j=e=>{const{paddingXXS:s,lineWidth:v,tagPaddingHorizontal:a,componentCls:u,calc:U}=e,P=U(a).sub(v).equal(),K=U(s).sub(v).equal();return{[u]:Object.assign(Object.assign({},(0,o.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:P,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,g.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${u}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${u}-close-icon`]:{marginInlineStart:K,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${u}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${u}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:P}}),[`${u}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},d=e=>{const{lineWidth:s,fontSizeIcon:v,calc:a}=e,u=e.fontSizeSM;return(0,A.IX)(e,{tagFontSize:u,tagLineHeight:(0,g.bf)(a(e.lineHeightSM).mul(u).equal()),tagIconSize:a(v).sub(a(s).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},C=e=>({defaultBg:new l.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var $=(0,x.I$)("Tag",e=>{const s=d(e);return j(s)},C),W=function(e,s){var v={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(v[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(e);u<a.length;u++)s.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(e,a[u])&&(v[a[u]]=e[a[u]]);return v},V=c.forwardRef((e,s)=>{const{prefixCls:v,style:a,className:u,checked:U,onChange:P,onClick:K}=e,N=W(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:S,tag:t}=c.useContext(y.E_),i=ee=>{P==null||P(!U),K==null||K(ee)},m=S("tag",v),[b,X,T]=$(m),q=h()(m,`${m}-checkable`,{[`${m}-checkable-checked`]:U},t==null?void 0:t.className,u,X,T);return b(c.createElement("span",Object.assign({},N,{ref:s,style:Object.assign(Object.assign({},a),t==null?void 0:t.style),className:q,onClick:i})))}),r=n(98719);const R=e=>(0,r.Z)(e,(s,v)=>{let{textColor:a,lightBorderColor:u,lightColor:U,darkColor:P}=v;return{[`${e.componentCls}${e.componentCls}-${s}`]:{color:a,background:U,borderColor:u,"&-inverse":{color:e.colorTextLightSolid,background:P,borderColor:P},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var Q=(0,x.bk)(["Tag","preset"],e=>{const s=d(e);return R(s)},C);function z(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const Z=(e,s,v)=>{const a=z(v);return{[`${e.componentCls}${e.componentCls}-${s}`]:{color:e[`color${v}`],background:e[`color${a}Bg`],borderColor:e[`color${a}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var G=(0,x.bk)(["Tag","status"],e=>{const s=d(e);return[Z(s,"success","Success"),Z(s,"processing","Info"),Z(s,"error","Error"),Z(s,"warning","Warning")]},C),F=function(e,s){var v={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(v[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(e);u<a.length;u++)s.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(e,a[u])&&(v[a[u]]=e[a[u]]);return v};const D=c.forwardRef((e,s)=>{const{prefixCls:v,className:a,rootClassName:u,style:U,children:P,icon:K,color:N,onClose:S,bordered:t=!0,visible:i}=e,m=F(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:b,direction:X,tag:T}=c.useContext(y.E_),[q,ee]=c.useState(!0),ie=(0,f.Z)(m,["closeIcon","closable"]);c.useEffect(()=>{i!==void 0&&ee(i)},[i]);const te=(0,O.o2)(N),re=(0,O.yT)(N),ne=te||re,ce=Object.assign(Object.assign({backgroundColor:N&&!ne?N:void 0},T==null?void 0:T.style),U),H=b("tag",v),[de,_e,me]=$(H),fe=h()(H,T==null?void 0:T.className,{[`${H}-${N}`]:ne,[`${H}-has-color`]:N&&!ne,[`${H}-hidden`]:!q,[`${H}-rtl`]:X==="rtl",[`${H}-borderless`]:!t},a,u,_e,me),oe=k=>{k.stopPropagation(),S==null||S(k),!k.defaultPrevented&&ee(!1)},[,ve]=(0,E.Z)((0,E.w)(e),(0,E.w)(T),{closable:!1,closeIconRender:k=>{const he=c.createElement("span",{className:`${H}-close-icon`,onClick:oe},k);return(0,B.wm)(k,he,J=>({onClick:ue=>{var ae;(ae=J==null?void 0:J.onClick)===null||ae===void 0||ae.call(J,ue),oe(ue)},className:h()(J==null?void 0:J.className,`${H}-close-icon`)}))}}),ge=typeof m.onClick=="function"||P&&P.type==="a",le=K||null,Ce=le?c.createElement(c.Fragment,null,le,P&&c.createElement("span",null,P)):P,se=c.createElement("span",Object.assign({},ie,{ref:s,className:fe,style:ce}),Ce,ve,te&&c.createElement(Q,{key:"preset",prefixCls:H}),re&&c.createElement(G,{key:"status",prefixCls:H}));return de(ge?c.createElement(L.Z,{component:"Tag"},se):se)});D.CheckableTag=V;var p=D},50472:function(w,M,n){n.d(M,{Z:function(){return _}});var c=n(33733);var _=(0,c.Z)("outline","reload","IconReload",[["path",{d:"M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1 7.935 1.007 9.425 4.747",key:"svg-0"}],["path",{d:"M20 4v5h-5",key:"svg-1"}]])}}]);
