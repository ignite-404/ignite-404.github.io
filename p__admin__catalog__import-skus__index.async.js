!(function(){"use strict";var Pe=Object.defineProperty,Se=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var ce=(h,u,e)=>u in h?Pe(h,u,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[u]=e,te=(h,u)=>{for(var e in u||(u={}))_e.call(u,e)&&ce(h,e,u[e]);if(ne)for(var e of ne(u))me.call(u,e)&&ce(h,e,u[e]);return h},fe=(h,u)=>Se(h,xe(u));var ve=(h,u)=>{var e={};for(var t in h)_e.call(h,t)&&u.indexOf(t)<0&&(e[t]=h[t]);if(h!=null&&ne)for(var t of ne(h))u.indexOf(t)<0&&me.call(h,t)&&(e[t]=h[t]);return e};(self.webpackChunk=self.webpackChunk||[]).push([[5193],{96256:function(h,u,e){var t=e(97857),m=e.n(t),C=e(19632),f=e.n(C),b=e(5574),j=e.n(b),R=e(85980),T=e(34041),O=e(57381),v=e(67294),l=e(85893);u.Z=function(o){var A=o.onSearch,P=o.value,D=o.onChange,c=o.style,p=o.initItem,L=o.placeholder,W=o.props,I=(0,v.useState)(!1),V=j()(I,2),s=V[0],Z=V[1],Q=(0,v.useState)([]),z=j()(Q,2),K=z[0],G=z[1],w=(0,R.Z)(function(S){Z(!0),A(S).then(function(y){G(y||[])}).finally(function(){return Z(!1)})},{wait:500});(0,v.useEffect)(function(){},[]);var Y=function(){var y=f()(K);return p&&!y.find(function(n){return n.value===p.value})&&y.push(p),y};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(T.Z,m()({style:m()({minWidth:300},c),loading:s,value:P,showSearch:!0,allowClear:!0,filterOption:!1,onSearch:function(y){w.run(y)},onChange:function(y){var n=K.find(function(i){return i.value==y});D&&D(n)},onClear:function(){D&&D(void 0)},placeholder:L||"\u8F93\u5165\u5173\u952E\u8BCD",notFoundContent:s&&(0,l.jsx)(O.Z,{size:"small"}),options:Y()},W))})}},1288:function(h,u,e){var t=e(78957),m=e(83062),C=e(46629),f=e(85893);u.Z=function(b){var j,R=b.timeStr,T=b.fallback,O=b.onlyDate,v=b.prefix,l=(j=(0,C.mg)(R))===null||j===void 0?void 0:j.add(C.Mg,"hour");if(!l)return T||null;var o=(0,C.ND)().utc().add(C.Mg,"hour"),A=l.isSame(o,"year"),P=l.diff(o,"day"),D=A?l.format(C.AK):l.format(C.vc),c=function(){return(0,f.jsxs)("div",{children:[(0,f.jsxs)(t.Z,{direction:"horizontal",children:[(0,f.jsx)("div",{children:l.fromNow()}),(0,f.jsx)("div",{children:l.format(C.On)})]}),(0,f.jsx)("div",{children:l.format(C.t9)})]})};return(0,f.jsx)(m.Z,{title:c(),children:(0,f.jsxs)(t.Z,{direction:"horizontal",children:[v,(0,f.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:O?l.format(C.vc):l.format(C.dq)})]})})}},48746:function(h,u,e){var t=e(15009),m=e.n(t),C=e(99289),f=e.n(C),b=e(96256),j=e(35291),R=e(30967),T=e(42838),O=e(85893);u.Z=function(v){var l=v.selectedSku,o=v.onChange,A=v.style,P=v.props,D=function(){var c=f()(m()().mark(function p(L){var W,I,V;return m()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!(0,T.Wq)(L)){Z.next=2;break}return Z.abrupt("return",[]);case 2:return Z.next=4,R.x1.mallAdmin.skuQuerySkuForSelection({Keywords:L,Take:20});case 4:return I=Z.sent,V=I==null||(W=I.data)===null||W===void 0||(W=W.Data)===null||W===void 0?void 0:W.map(function(Q){return{label:(0,j.CQ)(Q)||"--",value:Q.Id||"--"}}),Z.abrupt("return",V||[]);case 7:case"end":return Z.stop()}},p)}));return function(L){return c.apply(this,arguments)}}();return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(b.Z,{style:A,props:P,onSearch:function(){var c=f()(m()().mark(function p(L){return m()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,D(L);case 2:return I.abrupt("return",I.sent);case 3:case"end":return I.stop()}},p)}));return function(p){return c.apply(this,arguments)}}(),placeholder:"\u641C\u7D22\u5546\u54C1...",value:(l==null?void 0:l.Id)||void 0,initItem:l==null?void 0:{label:(0,j.CQ)(l)||"",value:l.Id||""},onChange:function(p){o&&o(p==null?void 0:{Id:p.value,Name:p.label})}})})}},47176:function(h,u,e){e.r(u),e.d(u,{default:function(){return Q}});var t=e(97857),m=e.n(t),C=e(5574),f=e.n(C),b=e(68421),j=e(45360),R=e(66309),T=e(4393),O=e(78957),v=e(14726),l=e(80799),o=e(67294),A=e(1288),P=e(48746),D=e(30967),c=e(42838),p=e(50472),L=e(85576),W=e(29127),I=e(25278),V=e(76857),s=e(85893),Z=function(z){var K=z.show,G=z.close,w=z.ok,Y=(0,o.useState)([]),S=f()(Y,2),y=S[0],n=S[1],i=(0,o.useState)(""),E=f()(i,2),a=E[0],d=E[1],$=function(r){var _=new FormData;return _.append("collection",r,r.name),V.M.post("/api/mall-admin/external-sku/upload-and-parse-excel",_)},x=(0,b.Z)($,{manual:!0,onSuccess:function(r,_){(0,c._y)(r,function(){var g,U=((g=r.data)===null||g===void 0?void 0:g.Data)||[];U.length<=0&&j.ZP.warning("\u8868\u683C\u4E2D\u6CA1\u6709\u6570\u636E"),n(U)})}}),N=(0,b.Z)(D.x1.mallAdmin.externalSkuInsertMany,{manual:!0,onSuccess:function(r,_){(0,c._y)(r,function(){j.ZP.success("\u4FDD\u5B58\u6210\u529F"),w()})}});(0,o.useEffect)(function(){K||n([])},[K]);var F=[{title:"\u552F\u4E00\u6807\u8BC6",render:function(r,_){return"".concat(_.ExternalSkuId,"@").concat(a||"--")}},{title:"\u89C4\u683C\u540D\u79F0",render:function(r,_){return _.SkuName||"--"}},{title:"\u4EF7\u683C",render:function(r,_){return(0,c.lb)(_.Price||0)}}];return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(L.Z,{open:K,onCancel:function(){G()},onOk:function(){G()},width:"95%",children:(0,s.jsxs)(O.Z,{direction:"vertical",style:{width:"100%"},children:[(0,s.jsxs)(O.Z,{direction:"horizontal",children:[(0,s.jsx)(W.Z,{fileList:[],showUploadList:!1,multiple:!1,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",customRequest:function(r){var _=r.file;_&&x.run(_)},children:(0,s.jsx)(v.ZP,{size:"large",type:"primary",loading:x.loading,children:"\u4E0A\u4F20\u8868\u683C"})}),(0,s.jsx)(I.Z,{size:"large",value:a,onChange:function(r){return d(r.target.value)},placeholder:"\u6570\u636E\u5206\u7EC4"}),(0,s.jsx)(v.ZP,{size:"large",disabled:y.length<=0||(0,c.Wq)(a),onClick:function(){var r=y.map(function(_){return m()(m()({},_),{},{SystemName:a})});N.run(r)},loading:N.loading,children:"\u5BFC\u5165\u6570\u636E"}),(0,s.jsx)(v.ZP,{size:"large",type:"dashed",disabled:y.length<=0,onClick:function(){return n([])},children:"\u6E05\u7A7A\u6570\u636E"})]}),(0,s.jsx)(l.Z,{columns:F,dataSource:y,pagination:!1})]})})})},Q=function(){var z,K=(0,o.useState)({Page:1}),G=f()(K,2),w=G[0],Y=G[1],S=(0,b.Z)(D.x1.mallAdmin.externalSkuQueryPaging,{manual:!0}),y=((z=S.data)===null||z===void 0?void 0:z.data)||{},n=(0,o.useState)(!1),i=f()(n,2),E=i[0],a=i[1];(0,o.useEffect)(function(){S.run(m()({},w))},[]);var d=(0,o.useState)(void 0),$=f()(d,2),x=$[0],N=$[1],F=(0,b.Z)(D.x1.mallAdmin.externalSkuSaveMapping,{manual:!0,onSuccess:function(_){(0,c._y)(_,function(){j.ZP.success("\u4FDD\u5B58\u6210\u529F"),S.run(m()({},w))})},onFinally:function(){return N(void 0)}}),M=[{title:"\u552F\u4E00\u6807\u8BC6",render:function(_,g){return(0,s.jsx)(R.Z,{children:g.CombineId})}},{title:"\u89C4\u683C\u540D\u79F0",render:function(_,g){var U,X=(U=g.Items)===null||U===void 0?void 0:U.at(0);if(!X)return(0,s.jsx)("span",{children:"--"});var B=[X.GoodsName||"",X.SkuName||""].filter(function(q){return q.length>0});return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("span",{children:B.join("-")})})}},{title:"\u5173\u8054\u89C4\u683C",render:function(_,g,U){return(0,s.jsx)(P.Z,{selectedSku:g.Sku||void 0,props:{loading:x===g.CombineId},onChange:function(B){console.log(U,B),N(g.CombineId),F.run({CombineId:g.CombineId,SkuId:B==null?void 0:B.Id})}})}},{title:"\u8BB0\u5F55\u6570\u91CF",render:function(_,g){var U;return(0,s.jsx)("b",{children:((U=g.Items)===null||U===void 0?void 0:U.length)||0})}},{title:"\u6700\u65B0\u66F4\u65B0\u65F6\u95F4",render:function(_,g){return(0,s.jsx)(A.Z,{timeStr:g.CreationTime})}}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z,{show:E,close:function(){return a(!1)},ok:function(){a(!1),S.run(m()({},w))}}),(0,s.jsx)(T.Z,{extra:(0,s.jsxs)(O.Z,{direction:"horizontal",children:[(0,s.jsx)(v.ZP,{icon:(0,s.jsx)(p.Z,{stroke:1}),size:"small",loading:S.loading,type:"dashed",onClick:function(){S.run(m()({},w))}}),(0,s.jsx)(v.ZP,{type:"primary",size:"small",onClick:function(){a(!0)},children:"\u5BFC\u5165"})]}),children:(0,s.jsx)(l.Z,{loading:S.loading,columns:M,dataSource:y.Items||[],expandable:{expandedRowRender:function(_){return(0,s.jsx)(s.Fragment,{children:JSON.stringify(_)})}},pagination:{total:y.TotalCount,pageSize:y.PageSize,current:y.PageIndex,onChange:function(_){var g=m()(m()({},w),{},{Page:_});S.run(g),Y(g)}}})})]})}},30967:function(h,u,e){e.d(u,{HK:function(){return l},c2:function(){return v},x1:function(){return O}});var t=e(15009),m=e.n(t),C=e(97857),f=e.n(C),b=e(99289),j=e.n(b),R=e(76857),T=e(60379),O=function(){var o=new T.V0;return o.instance=R.M,o}(),v=function(){var o=new T.V0;return o.instance=R.M,o}(),l=function(){var o=j()(m()().mark(function A(P){return m()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(P){c.next=2;break}return c.abrupt("return");case 2:return c.next=4,O.mall.commonSaveActivityLog(f()(f()({},P),{},{Id:void 0}));case 4:return c.abrupt("return",c.sent);case 5:case"end":return c.stop()}},A)}));return function(P){return o.apply(this,arguments)}}()},85980:function(h,u,e){var t=e(97582),m=e(23279),C=e.n(m),f=e(67294),b=e(3930),j=e(45210),R=e(92770),T=e(31663);function O(v,l){var o;T.Z&&((0,R.mf)(v)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof v)));var A=(0,b.Z)(v),P=(o=l==null?void 0:l.wait)!==null&&o!==void 0?o:1e3,D=(0,f.useMemo)(function(){return C()(function(){for(var c=[],p=0;p<arguments.length;p++)c[p]=arguments[p];return A.current.apply(A,(0,t.ev)([],(0,t.CR)(c),!1))},P,l)},[]);return(0,j.Z)(function(){D.cancel()}),{run:D,cancel:D.cancel,flush:D.flush}}u.Z=O},66309:function(h,u,e){e.d(u,{Z:function(){return y}});var t=e(67294),m=e(93967),C=e.n(m),f=e(98423),b=e(98787),j=e(69760),R=e(96159),T=e(45353),O=e(53124),v=e(11568),l=e(10274),o=e(14747),A=e(83262),P=e(83559);const D=n=>{const{paddingXXS:i,lineWidth:E,tagPaddingHorizontal:a,componentCls:d,calc:$}=n,x=$(a).sub(E).equal(),N=$(i).sub(E).equal();return{[d]:Object.assign(Object.assign({},(0,o.Wf)(n)),{display:"inline-block",height:"auto",marginInlineEnd:n.marginXS,paddingInline:x,fontSize:n.tagFontSize,lineHeight:n.tagLineHeight,whiteSpace:"nowrap",background:n.defaultBg,border:`${(0,v.bf)(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderRadius:n.borderRadiusSM,opacity:1,transition:`all ${n.motionDurationMid}`,textAlign:"start",position:"relative",[`&${d}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:n.defaultColor},[`${d}-close-icon`]:{marginInlineStart:N,fontSize:n.tagIconSize,color:n.colorTextDescription,cursor:"pointer",transition:`all ${n.motionDurationMid}`,"&:hover":{color:n.colorTextHeading}},[`&${d}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${n.iconCls}-close, ${n.iconCls}-close:hover`]:{color:n.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${d}-checkable-checked):hover`]:{color:n.colorPrimary,backgroundColor:n.colorFillSecondary},"&:active, &-checked":{color:n.colorTextLightSolid},"&-checked":{backgroundColor:n.colorPrimary,"&:hover":{backgroundColor:n.colorPrimaryHover}},"&:active":{backgroundColor:n.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${n.iconCls} + span, > span + ${n.iconCls}`]:{marginInlineStart:x}}),[`${d}-borderless`]:{borderColor:"transparent",background:n.tagBorderlessBg}}},c=n=>{const{lineWidth:i,fontSizeIcon:E,calc:a}=n,d=n.fontSizeSM;return(0,A.IX)(n,{tagFontSize:d,tagLineHeight:(0,v.bf)(a(n.lineHeightSM).mul(d).equal()),tagIconSize:a(E).sub(a(i).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:n.defaultBg})},p=n=>({defaultBg:new l.C(n.colorFillQuaternary).onBackground(n.colorBgContainer).toHexString(),defaultColor:n.colorText});var L=(0,P.I$)("Tag",n=>{const i=c(n);return D(i)},p),W=function(n,i){var E={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(E[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(n);d<a.length;d++)i.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(n,a[d])&&(E[a[d]]=n[a[d]]);return E},V=t.forwardRef((n,i)=>{const{prefixCls:E,style:a,className:d,checked:$,onChange:x,onClick:N}=n,F=W(n,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:M,tag:r}=t.useContext(O.E_),_=ee=>{x==null||x(!$),N==null||N(ee)},g=M("tag",E),[U,X,B]=L(g),q=C()(g,`${g}-checkable`,{[`${g}-checkable-checked`]:$},r==null?void 0:r.className,d,X,B);return U(t.createElement("span",Object.assign({},F,{ref:i,style:Object.assign(Object.assign({},a),r==null?void 0:r.style),className:q,onClick:_})))}),s=e(98719);const Z=n=>(0,s.Z)(n,(i,E)=>{let{textColor:a,lightBorderColor:d,lightColor:$,darkColor:x}=E;return{[`${n.componentCls}${n.componentCls}-${i}`]:{color:a,background:$,borderColor:d,"&-inverse":{color:n.colorTextLightSolid,background:x,borderColor:x},[`&${n.componentCls}-borderless`]:{borderColor:"transparent"}}}});var Q=(0,P.bk)(["Tag","preset"],n=>{const i=c(n);return Z(i)},p);function z(n){return typeof n!="string"?n:n.charAt(0).toUpperCase()+n.slice(1)}const K=(n,i,E)=>{const a=z(E);return{[`${n.componentCls}${n.componentCls}-${i}`]:{color:n[`color${E}`],background:n[`color${a}Bg`],borderColor:n[`color${a}Border`],[`&${n.componentCls}-borderless`]:{borderColor:"transparent"}}}};var G=(0,P.bk)(["Tag","status"],n=>{const i=c(n);return[K(i,"success","Success"),K(i,"processing","Info"),K(i,"error","Error"),K(i,"warning","Warning")]},p),w=function(n,i){var E={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(E[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,a=Object.getOwnPropertySymbols(n);d<a.length;d++)i.indexOf(a[d])<0&&Object.prototype.propertyIsEnumerable.call(n,a[d])&&(E[a[d]]=n[a[d]]);return E};const S=t.forwardRef((n,i)=>{const{prefixCls:E,className:a,rootClassName:d,style:$,children:x,icon:N,color:F,onClose:M,bordered:r=!0,visible:_}=n,g=w(n,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:U,direction:X,tag:B}=t.useContext(O.E_),[q,ee]=t.useState(!0),ge=(0,f.Z)(g,["closeIcon","closable"]);t.useEffect(()=>{_!==void 0&&ee(_)},[_]);const re=(0,b.o2)(F),le=(0,b.yT)(F),ae=re||le,he=Object.assign(Object.assign({backgroundColor:F&&!ae?F:void 0},B==null?void 0:B.style),$),H=U("tag",E),[Ce,pe,Ee]=L(H),je=C()(H,B==null?void 0:B.className,{[`${H}-${F}`]:ae,[`${H}-has-color`]:F&&!ae,[`${H}-hidden`]:!q,[`${H}-rtl`]:X==="rtl",[`${H}-borderless`]:!r},a,d,pe,Ee),se=k=>{k.stopPropagation(),M==null||M(k),!k.defaultPrevented&&ee(!1)},[,be]=(0,j.Z)((0,j.w)(n),(0,j.w)(B),{closable:!1,closeIconRender:k=>{const ye=t.createElement("span",{className:`${H}-close-icon`,onClick:se},k);return(0,R.wm)(k,ye,J=>({onClick:de=>{var oe;(oe=J==null?void 0:J.onClick)===null||oe===void 0||oe.call(J,de),se(de)},className:C()(J==null?void 0:J.className,`${H}-close-icon`)}))}}),Oe=typeof g.onClick=="function"||x&&x.type==="a",ue=N||null,De=ue?t.createElement(t.Fragment,null,ue,x&&t.createElement("span",null,x)):x,ie=t.createElement("span",Object.assign({},ge,{ref:i,className:je,style:he}),De,be,re&&t.createElement(Q,{key:"preset",prefixCls:H}),le&&t.createElement(G,{key:"status",prefixCls:H}));return Ce(Oe?t.createElement(T.Z,{component:"Tag"},ie):ie)});S.CheckableTag=V;var y=S},33733:function(h,u,e){e.d(u,{Z:function(){return C}});var t=e(67294);var m={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};const C=(f,b,j,R)=>{const T=(0,t.forwardRef)((p,c)=>{var L=p,{color:O="currentColor",size:v=24,stroke:l=2,title:o,className:A,children:P}=L,D=ve(L,["color","size","stroke","title","className","children"]);return(0,t.createElement)("svg",te(te(fe(te({ref:c},m[f]),{width:v,height:v,className:["tabler-icon",`tabler-icon-${b}`,A].join(" ")}),f==="filled"?{fill:O}:{strokeWidth:l,stroke:O}),D),[o&&(0,t.createElement)("title",{key:"svg-title"},o),...R.map(([W,I])=>(0,t.createElement)(W,I)),...Array.isArray(P)?P:[P]])});return T.displayName=`${j}`,T}},50472:function(h,u,e){e.d(u,{Z:function(){return m}});var t=e(33733);var m=(0,t.Z)("outline","reload","IconReload",[["path",{d:"M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1 7.935 1.007 9.425 4.747",key:"svg-0"}],["path",{d:"M20 4v5h-5",key:"svg-1"}]])}}]);
}());