"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5900],{64080:function(W,g,e){var t=e(21274),d=e(85893);g.Z=function(c){var m=c.loading,p=c.hasMore;return m?(0,d.jsx)(t.Z,{}):p?null:(0,d.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:(0,d.jsx)("span",{className:"text-slate-400",children:"\u6CA1\u6709\u66F4\u591A\u4E86"})})}},70566:function(W,g,e){e.r(g),e.d(g,{default:function(){return k}});var t=e(19632),d=e.n(t),c=e(15009),m=e.n(c),p=e(97857),h=e.n(p),T=e(99289),l=e.n(T),n=e(5574),a=e.n(n),f=e(68770),O=e(7134),s=e(74911),o=e(35195),r=e(67294),v=e(96911),y=e(64080),R=e(46153),Z=e(30967),L=e(46629),F=e(42838),N=e(38787),G=e(66058),X=e(35301),w=e(18266),V=e(54666),_=e(85893),z=function(j){var P=(0,s.Z)(j,function(C){var E;return((E=(0,L.mg)(C.CreationTime))===null||E===void 0||(E=E.add(L.Mg,"hour"))===null||E===void 0?void 0:E.format(L.vc))||"--"}),A=(0,o.Z)(Object.keys(P),function(C){var E;return((E=(0,L.mg)(C))===null||E===void 0?void 0:E.valueOf())||0});return A.map(function(C){return{key:C,items:P[C]||[]}})};function k(){var $=(0,r.useState)({Page:1}),j=a()($,2),P=j[0],A=j[1],C=(0,r.useState)(!1),E=a()(C,2),Q=E[0],J=E[1],te=(0,r.useState)(void 0),Y=a()(te,2),q=Y[0],ee=Y[1],b=(0,f.Z)(function(){var K=l()(m()().mark(function M(u){var x,S;return m()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,Z.x1.mall.notificationPaging(h()(h()({},P),{},{Page:((u==null||(x=u.res)===null||x===void 0?void 0:x.PageIndex)||0)+1}));case 2:return S=H.sent,H.abrupt("return",{list:S.data.Items||[],res:S.data});case 4:case"end":return H.stop()}},M)}));return function(M){return K.apply(this,arguments)}}(),{target:window.document,isNoMore:function(M){var u;return(M==null||(u=M.res)===null||u===void 0?void 0:u.IsEmpty)||!1},reloadDeps:[P]}),B=b.data,i=b.loading,D=b.loadingMore,U=b.noMore,I=b.mutate,ne=function(M){M.Read||(ee(M.Id),Z.x1.mall.notificationUpdateStatus({Id:M.Id,Read:!0}).then(function(u){(0,F._y)(u,function(){var x=[].concat(d()(se.filter(function(S){return S.Id!=M.Id})),[h()(h()({},M),{},{Read:!0})]);I(h()(h()({},B),{},{list:x}))})}).finally(function(){ee(void 0)}))};(0,r.useEffect)(function(){I(void 0)},[P]);var se=(B==null?void 0:B.list)||[],oe=function(){return(0,_.jsx)(N.A,{isLoading:Q,variant:"light",onClick:function(){confirm("\u6E05\u7A7A\u6240\u6709\u6D88\u606F\uFF1F")&&(J(!0),Z.x1.mall.notificationDeleteAll({}).then(function(u){(0,F._y)(u,function(){var x=h()(h()({},P),{},{Page:1});A(x)})}).finally(function(){J(!1)}))},children:"\u6E05\u7A7A"})},re=z(se);return(0,F.G5)(re)?(0,_.jsx)(v.Z,{}):(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(R.Z,{children:(0,_.jsxs)("div",{className:"container max-w-lg",children:[(0,_.jsx)("div",{className:"mb-1 flex flex-row items-center justify-end",children:oe()}),(0,_.jsx)(G.X,{variant:"light",disabledKeys:q?[q]:void 0,children:re.map(function(K,M){return(0,_.jsx)(X.y,{title:K.key,showDivider:!0,children:K.items.map(function(u,x){return(0,_.jsxs)(w.R,{startContent:(0,_.jsx)(O.C,{icon:(0,_.jsx)(V.Z,{stroke:1}),style:{backgroundColor:"green"}}),description:u.Content,endContent:(0,L.Gl)(u.CreationTime),onClick:function(){ne(u)},children:[u.Read&&(0,_.jsx)("span",{children:u.Title}),u.Read||(0,_.jsx)("b",{children:u.Title})]},u.Id||x)})},M)})}),(0,_.jsx)(y.Z,{loading:i||D,hasMore:!U})]})})})}},68770:function(W,g,e){e.d(g,{Z:function(){return O}});var t=e(97582),d=e(67294),c=e(83204),m=e(22638),p=e(68421),h=e(77598),T=e(48002),l=function(s){return s===document||s===document.documentElement||s===document.body?Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop):s.scrollTop},n=function(s){return s.scrollHeight||Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)},a=function(s){return s.clientHeight||Math.max(document.documentElement.clientHeight,document.body.clientHeight)},f=function(s,o){o===void 0&&(o={});var r=o.target,v=o.isNoMore,y=o.threshold,R=y===void 0?100:y,Z=o.reloadDeps,L=Z===void 0?[]:Z,F=o.manual,N=o.onBefore,G=o.onSuccess,X=o.onError,w=o.onFinally,V=(0,t.CR)((0,d.useState)(),2),_=V[0],z=V[1],k=(0,t.CR)((0,d.useState)(!1),2),$=k[0],j=k[1],P=(0,d.useMemo)(function(){return v?v(_):!1},[_]),A=(0,p.Z)(function(i){return(0,t.mG)(void 0,void 0,void 0,function(){var D,U,I;return(0,t.Jh)(this,function(ne){switch(ne.label){case 0:return[4,s(i)];case 1:return D=ne.sent(),z(i?(0,t.pi)((0,t.pi)({},D),{list:(0,t.ev)((0,t.ev)([],(0,t.CR)((I=i.list)!==null&&I!==void 0?I:[]),!1),(0,t.CR)(D.list),!1)}):(0,t.pi)((0,t.pi)({},D),{list:(0,t.ev)([],(0,t.CR)((U=D.list)!==null&&U!==void 0?U:[]),!1)})),[2,D]}})})},{manual:F,onFinally:function(i,D,U){j(!1),w==null||w(D,U)},onBefore:function(){return N==null?void 0:N()},onSuccess:function(i){setTimeout(function(){B()}),G==null||G(i)},onError:function(i){return X==null?void 0:X(i)}}),C=A.loading,E=A.error,Q=A.run,J=A.runAsync,te=A.cancel,Y=(0,m.Z)(function(){P||(j(!0),Q(_))}),q=(0,m.Z)(function(){return P?Promise.reject():(j(!0),J(_))}),ee=function(){return j(!1),Q()},b=function(){return j(!1),J()},B=function(){var i=(0,T.n)(r);if(i){i=i===document?document.documentElement:i;var D=l(i),U=n(i),I=a(i);U-D<=I+R&&Y()}};return(0,c.Z)("scroll",function(){C||$||B()},{target:r}),(0,h.Z)(function(){Q()},(0,t.ev)([],(0,t.CR)(L),!1)),{data:_,loading:!$&&C,error:E,loadingMore:$,noMore:P,loadMore:Y,loadMoreAsync:q,reload:(0,m.Z)(ee),reloadAsync:(0,m.Z)(b),mutate:z,cancel:te}},O=f},57838:function(W,g,e){e.d(g,{Z:function(){return d}});var t=e(67294);function d(){const[,c]=t.useReducer(m=>m+1,0);return c}},74443:function(W,g,e){e.d(g,{ZP:function(){return h},c4:function(){return c},m9:function(){return T}});var t=e(67294),d=e(29691);const c=["xxl","xl","lg","md","sm","xs"],m=l=>({xs:`(max-width: ${l.screenXSMax}px)`,sm:`(min-width: ${l.screenSM}px)`,md:`(min-width: ${l.screenMD}px)`,lg:`(min-width: ${l.screenLG}px)`,xl:`(min-width: ${l.screenXL}px)`,xxl:`(min-width: ${l.screenXXL}px)`}),p=l=>{const n=l,a=[].concat(c).reverse();return a.forEach((f,O)=>{const s=f.toUpperCase(),o=`screen${s}Min`,r=`screen${s}`;if(!(n[o]<=n[r]))throw new Error(`${o}<=${r} fails : !(${n[o]}<=${n[r]})`);if(O<a.length-1){const v=`screen${s}Max`;if(!(n[r]<=n[v]))throw new Error(`${r}<=${v} fails : !(${n[r]}<=${n[v]})`);const R=`screen${a[O+1].toUpperCase()}Min`;if(!(n[v]<=n[R]))throw new Error(`${v}<=${R} fails : !(${n[v]}<=${n[R]})`)}}),l};function h(){const[,l]=(0,d.ZP)(),n=m(p(l));return t.useMemo(()=>{const a=new Map;let f=-1,O={};return{matchHandlers:{},dispatch(s){return O=s,a.forEach(o=>o(O)),a.size>=1},subscribe(s){return a.size||this.register(),f+=1,a.set(f,s),s(O),f},unsubscribe(s){a.delete(s),a.size||this.unregister()},unregister(){Object.keys(n).forEach(s=>{const o=n[s],r=this.matchHandlers[o];r==null||r.mql.removeListener(r==null?void 0:r.listener)}),a.clear()},register(){Object.keys(n).forEach(s=>{const o=n[s],r=y=>{let{matches:R}=y;this.dispatch(Object.assign(Object.assign({},O),{[s]:R}))},v=window.matchMedia(o);v.addListener(r),this.matchHandlers[o]={mql:v,listener:r},r(v)})},responsiveMap:n}},[l])}const T=(l,n)=>{if(n&&typeof n=="object")for(let a=0;a<c.length;a++){const f=c[a];if(l[f]&&n[f]!==void 0)return n[f]}}},25378:function(W,g,e){var t=e(67294),d=e(8410),c=e(57838),m=e(74443);function p(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const T=(0,t.useRef)({}),l=(0,c.Z)(),n=(0,m.ZP)();return(0,d.Z)(()=>{const a=n.subscribe(f=>{T.current=f,h&&l()});return()=>n.unsubscribe(a)},[]),T.current}g.Z=p},54666:function(W,g,e){e.d(g,{Z:function(){return d}});var t=e(33733);var d=(0,t.Z)("outline","message","IconMessage",[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]])}}]);
