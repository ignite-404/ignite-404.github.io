"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5900],{50112:function(B,g,e){var i=e(21274),t=e(85893);g.Z=function(p){var c=p.loading,y=p.hasMore;return c?(0,t.jsx)(i.Z,{}):y?null:(0,t.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:(0,t.jsx)("span",{className:"text-slate-400",children:"\u6CA1\u6709\u66F4\u591A\u4E86"})})}},85685:function(B,g,e){e.d(g,{Z:function(){return R}});var i=e(38295),t=e(47650),p=e(66419),c=e(38787),y=e(48135),m=e(85893);function R(u){var o=u.children,f=u.rightButtons,h=u.leftButtons,A=(0,i.o)(),_=function(){window.history.length>1?t.m8.back():t.m8.push({pathname:"/"})},d=function(){return(0,m.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,p.G5)(h)&&(0,m.jsxs)("div",{className:"flex-row-center cursor-pointer gap-1",onClick:function(O){O.preventDefault(),O.stopPropagation(),_()},children:[(0,m.jsx)(c.A,{size:"lg",color:"default",radius:"full",variant:"light",isIconOnly:!0,onClick:function(O){O.preventDefault(),O.stopPropagation(),_()},children:(0,m.jsx)(y.Z,{stroke:1})}),(0,m.jsx)("h1",{className:"text-title m-0 p-0",children:window.document.title||A.getAppName()})]}),h==null?void 0:h.map(function(E){return E})]})};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"container max-w-lg",children:[(0,m.jsxs)("div",{className:"flex-row-between py-1",children:[d(),(0,m.jsx)("div",{className:"flex-row-center gap-2",children:f==null?void 0:f.map(function(v){return v})})]}),(0,m.jsx)("div",{children:o})]})})}},72640:function(B,g,e){var i=e(32983),t=e(85893);g.Z=function(){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:100},children:(0,t.jsx)(i.Z,{})})})}},70566:function(B,g,e){e.r(g),e.d(g,{default:function(){return l}});var i=e(19632),t=e.n(i),p=e(15009),c=e.n(p),y=e(97857),m=e.n(y),R=e(99289),u=e.n(R),o=e(5574),f=e.n(o),h=e(68770),A=e(68421),_=e(7134),d=e(67294),v=e(72640),E=e(50112),O=e(85685),T=e(35291),L=e(30699),z=e(46629),K=e(66419),w=e(38787),$=e(79818),M=e(35301),N=e(18266),a=e(54666),n=e(85893);function l(){var s=(0,d.useState)({Page:1}),r=f()(s,2),x=r[0],Q=r[1],Z=(0,d.useState)(void 0),J=f()(Z,2),Y=J[0],G=J[1],S=(0,h.Z)(function(){var j=u()(c()().mark(function C(P){var b,F;return c()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,L.x1.mall.notificationPaging(m()(m()({},x),{},{Page:((P==null||(b=P.res)===null||b===void 0?void 0:b.PageIndex)||0)+1}));case 2:return F=X.sent,X.abrupt("return",{list:F.data.Items||[],res:F.data});case 4:case"end":return X.stop()}},C)}));return function(C){return j.apply(this,arguments)}}(),{target:window.document,isNoMore:function(C){var P;return(C==null||(P=C.res)===null||P===void 0?void 0:P.IsEmpty)||!1},reloadDeps:[x]}),H=S.data,V=S.loading,ee=S.loadingMore,ne=S.noMore,k=S.mutate,q=function(C){C.Read||(G(C.Id),L.x1.mall.notificationUpdateStatus({Id:C.Id,Read:!0}).then(function(P){(0,K._y)(P,function(){var b=[].concat(t()(D.filter(function(F){return F.Id!=C.Id})),[m()(m()({},C),{},{Read:!0})]);k(m()(m()({},H),{},{list:b}))})}).finally(function(){G(void 0)}))};(0,d.useEffect)(function(){k(void 0)},[x]);var D=(H==null?void 0:H.list)||[],U=(0,A.Z)(L.x1.mall.notificationDeleteAll,{manual:!0,onSuccess:function(C,P){(0,K._y)(C,function(){var b=m()(m()({},x),{},{Page:1});Q(b)})}}),I=function(){return(0,n.jsx)(w.A,{isLoading:U.loading,variant:"light",onClick:function(){confirm("\u6E05\u7A7A\u6240\u6709\u6D88\u606F\uFF1F")&&U.run({})},children:"\u6E05\u7A7A"})},W=(0,T.Wq)(D,function(j){return j.CreationTime});return(0,K.G5)(W)?(0,n.jsx)(v.Z,{}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(O.Z,{children:(0,n.jsxs)("div",{className:"container max-w-lg",children:[(0,n.jsx)("div",{className:"mb-1 flex flex-row items-center justify-end",children:I()}),(0,n.jsx)($.X,{variant:"light",disabledKeys:Y?[Y]:void 0,children:W.map(function(j,C){return(0,n.jsx)(M.y,{title:j.key,showDivider:!0,children:j.value.map(function(P,b){return(0,n.jsxs)(N.R,{startContent:(0,n.jsx)(_.C,{icon:(0,n.jsx)(a.Z,{stroke:1}),style:{backgroundColor:"green"}}),description:P.Content,endContent:(0,z.Gl)(P.CreationTime),onClick:function(){q(P)},children:[P.Read&&(0,n.jsx)("span",{children:P.Title}),P.Read||(0,n.jsx)("b",{children:P.Title})]},P.Id||b.toString())})},C)})}),(0,n.jsx)(E.Z,{loading:V||ee,hasMore:!ne})]})})})}},38295:function(B,g,e){e.d(g,{o:function(){return N}});var i=e(15009),t=e.n(i),p=e(99289),c=e.n(p),y=e(19632),m=e.n(y),R=e(47650),u=e(30699),o=e(85134),f=e(66419),h=function(n){var l=M.mallSettings||{},s=[l.StoreNickName,l.StoreEnglishName];n?s=[l.StoreOfficialName,l.StoreOfficialEnglishName].concat(m()(s)):s=[].concat(m()(s),[l.StoreOfficialName,l.StoreOfficialEnglishName]);var r=s.filter(function(x){return!(0,f.Wq)(x)}).at(0);return r||o.v.app.name||o.v.app.english_name},A=function(){var a=c()(t()().mark(function n(){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,u.x1.mall.notificationUnReadCount().then(function(r){M.notificationCount=r.data.Data||0});case 2:case"end":return s.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),_=function(){var a=c()(t()().mark(function n(){var l;return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.x1.mallAdmin.gradeListGrades();case 2:l=r.sent,M.grades=l.data.Data||[];case 4:case"end":return r.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),d=function(){var a=c()(t()().mark(function n(){var l;return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.x1.mallAdmin.storeQueryStores();case 2:l=r.sent,M.stores=l.data.Data||[];case 4:case"end":return r.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),v=function(){var a=c()(t()().mark(function n(){var l;return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.x1.mall.shoppingCartCount();case 2:l=r.sent,M.shoppingCartCount=l.data.Data||0;case 4:case"end":return r.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),E=function(){var a=c()(t()().mark(function n(){var l;return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.x1.mall.storeGetCurrentStore();case 2:l=r.sent,M.currentStore=l.data.Data||{};case 4:case"end":return r.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),O=function(){var a=c()(t()().mark(function n(){var l;return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.x1.mall.storeMostNearbyStore();case 2:l=r.sent,M.mostNearbyStore=l.data.Data||{};case 4:case"end":return r.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),T=function(){var a=c()(t()().mark(function n(){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,u.x1.platform.userAuth().then(function(r){M.userAuthResult=r.data||{}});case 2:case"end":return s.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),L=function(){var a=c()(t()().mark(function n(){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,u.x1.sys.adminAuth().then(function(r){M.adminAuthResult=r.data||{}});case 2:case"end":return s.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),z=function(){var a=c()(t()().mark(function n(){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,u.x1.sys.manageAdminQueryAdminPermissions().then(function(r){M.adminPermissions=r.data||{}});case 2:case"end":return s.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),K=function(){var a=c()(t()().mark(function n(){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,u.x1.mallManager.storeManagerPermissionGetMyPermission().then(function(r){M.managerPermissions=r.data||{}});case 2:case"end":return s.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),w=function(){var a=c()(t()().mark(function n(){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,u.x1.mallManager.storeManagerAuth().then(function(r){M.storeManagerAuthResult=r.data||{}});case 2:case"end":return s.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),$=function(){var a=c()(t()().mark(function n(){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,u.x1.mall.userStoreUserAuth().then(function(r){M.storeUserAuthResult=r.data||{}});case 2:case"end":return s.stop()}},n)}));return function(){return a.apply(this,arguments)}}(),M=(0,R.sj)({queryUserAuthResult:T,getAppName:h,queryAdminAuthResult:L,queryStoreManagerAuthResult:w,queryStoreUserAuthResult:$,queryAdminPermission:z,queryStoreManagerPermission:K,queryGrades:_,queryStores:d,queryNotificationCount:A,queryShoppingCartCount:v,queryCurrentStore:E,queryMostNearbyStore:O,messageHistory:[],grades:[],stores:[],notificationCount:0,headerHeight:0,bottomHeight:0,mallSettings:{},shoppingCartCount:0,currentStore:void 0,mostNearbyStore:void 0,userAuthResult:void 0,adminAuthResult:void 0,adminPermissions:void 0,storeUserAuthResult:void 0,storeManagerAuthResult:void 0,managerPermissions:void 0,get user(){var a;return(a=this.userAuthResult)===null||a===void 0?void 0:a.User},get admin(){var a;return(a=this.adminAuthResult)===null||a===void 0?void 0:a.Admin},get storeUser(){var a;return(a=this.storeUserAuthResult)===null||a===void 0?void 0:a.StoreUser},get storeManager(){var a;return(a=this.storeManagerAuthResult)===null||a===void 0?void 0:a.StoreManager}}),N=function(){return(0,R.ey)(M)}},68770:function(B,g,e){e.d(g,{Z:function(){return A}});var i=e(97582),t=e(67294),p=e(83204),c=e(22638),y=e(68421),m=e(77598),R=e(48002),u=function(_){return _===document||_===document.documentElement||_===document.body?Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop):_.scrollTop},o=function(_){return _.scrollHeight||Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)},f=function(_){return _.clientHeight||Math.max(document.documentElement.clientHeight,document.body.clientHeight)},h=function(_,d){d===void 0&&(d={});var v=d.target,E=d.isNoMore,O=d.threshold,T=O===void 0?100:O,L=d.reloadDeps,z=L===void 0?[]:L,K=d.manual,w=d.onBefore,$=d.onSuccess,M=d.onError,N=d.onFinally,a=(0,i.CR)((0,t.useState)(),2),n=a[0],l=a[1],s=(0,i.CR)((0,t.useState)(!1),2),r=s[0],x=s[1],Q=(0,t.useMemo)(function(){return E?E(n):!1},[n]),Z=(0,y.Z)(function(D){return(0,i.mG)(void 0,void 0,void 0,function(){var U,I,W;return(0,i.Jh)(this,function(j){switch(j.label){case 0:return[4,_(D)];case 1:return U=j.sent(),l(D?(0,i.pi)((0,i.pi)({},U),{list:(0,i.ev)((0,i.ev)([],(0,i.CR)((W=D.list)!==null&&W!==void 0?W:[]),!1),(0,i.CR)(U.list),!1)}):(0,i.pi)((0,i.pi)({},U),{list:(0,i.ev)([],(0,i.CR)((I=U.list)!==null&&I!==void 0?I:[]),!1)})),[2,U]}})})},{manual:K,onFinally:function(D,U,I){x(!1),N==null||N(U,I)},onBefore:function(){return w==null?void 0:w()},onSuccess:function(D){setTimeout(function(){q()}),$==null||$(D)},onError:function(D){return M==null?void 0:M(D)}}),J=Z.loading,Y=Z.error,G=Z.run,S=Z.runAsync,H=Z.cancel,V=(0,c.Z)(function(){Q||(x(!0),G(n))}),ee=(0,c.Z)(function(){return Q?Promise.reject():(x(!0),S(n))}),ne=function(){return x(!1),G()},k=function(){return x(!1),S()},q=function(){var D=(0,R.n)(v);if(D){D=D===document?document.documentElement:D;var U=u(D),I=o(D),W=f(D);I-U<=W+T&&V()}};return(0,p.Z)("scroll",function(){J||r||q()},{target:v}),(0,m.Z)(function(){G()},(0,i.ev)([],(0,i.CR)(z),!1)),{data:n,loading:!r&&J,error:Y,loadingMore:r,noMore:Q,loadMore:V,loadMoreAsync:ee,reload:(0,c.Z)(ne),reloadAsync:(0,c.Z)(k),mutate:l,cancel:H}},A=h},57838:function(B,g,e){e.d(g,{Z:function(){return t}});var i=e(67294);function t(){const[,p]=i.useReducer(c=>c+1,0);return p}},74443:function(B,g,e){e.d(g,{ZP:function(){return m},c4:function(){return p},m9:function(){return R}});var i=e(67294),t=e(29691);const p=["xxl","xl","lg","md","sm","xs"],c=u=>({xs:`(max-width: ${u.screenXSMax}px)`,sm:`(min-width: ${u.screenSM}px)`,md:`(min-width: ${u.screenMD}px)`,lg:`(min-width: ${u.screenLG}px)`,xl:`(min-width: ${u.screenXL}px)`,xxl:`(min-width: ${u.screenXXL}px)`}),y=u=>{const o=u,f=[].concat(p).reverse();return f.forEach((h,A)=>{const _=h.toUpperCase(),d=`screen${_}Min`,v=`screen${_}`;if(!(o[d]<=o[v]))throw new Error(`${d}<=${v} fails : !(${o[d]}<=${o[v]})`);if(A<f.length-1){const E=`screen${_}Max`;if(!(o[v]<=o[E]))throw new Error(`${v}<=${E} fails : !(${o[v]}<=${o[E]})`);const T=`screen${f[A+1].toUpperCase()}Min`;if(!(o[E]<=o[T]))throw new Error(`${E}<=${T} fails : !(${o[E]}<=${o[T]})`)}}),u};function m(){const[,u]=(0,t.ZP)(),o=c(y(u));return i.useMemo(()=>{const f=new Map;let h=-1,A={};return{matchHandlers:{},dispatch(_){return A=_,f.forEach(d=>d(A)),f.size>=1},subscribe(_){return f.size||this.register(),h+=1,f.set(h,_),_(A),h},unsubscribe(_){f.delete(_),f.size||this.unregister()},unregister(){Object.keys(o).forEach(_=>{const d=o[_],v=this.matchHandlers[d];v==null||v.mql.removeListener(v==null?void 0:v.listener)}),f.clear()},register(){Object.keys(o).forEach(_=>{const d=o[_],v=O=>{let{matches:T}=O;this.dispatch(Object.assign(Object.assign({},A),{[_]:T}))},E=window.matchMedia(d);E.addListener(v),this.matchHandlers[d]={mql:E,listener:v},v(E)})},responsiveMap:o}},[u])}const R=(u,o)=>{if(o&&typeof o=="object")for(let f=0;f<p.length;f++){const h=p[f];if(u[h]&&o[h]!==void 0)return o[h]}}},25378:function(B,g,e){var i=e(67294),t=e(8410),p=e(57838),c=e(74443);function y(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const R=(0,i.useRef)({}),u=(0,p.Z)(),o=(0,c.ZP)();return(0,t.Z)(()=>{const f=o.subscribe(h=>{R.current=h,m&&u()});return()=>o.unsubscribe(f)},[]),R.current}g.Z=y},54666:function(B,g,e){e.d(g,{Z:function(){return t}});var i=e(33733);var t=(0,i.Z)("outline","message","IconMessage",[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]])}}]);
