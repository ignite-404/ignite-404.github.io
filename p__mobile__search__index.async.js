"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4570],{50112:function(W,f,e){var E=e(21274),s=e(85893);f.Z=function(m){var r=m.loading,d=m.hasMore;return r?(0,s.jsx)(E.Z,{}):d?null:(0,s.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:(0,s.jsx)("span",{className:"text-slate-400",children:"\u6CA1\u6709\u66F4\u591A\u4E86"})})}},66972:function(W,f,e){e.d(f,{Z:function(){return _}});var E=e(95813),s=e(38787),m=e(69047),r=e(13129),d=e(85893);function _(l){var c=l.keywords,t=l.onSearch,D=l.onChange,g=l.placeholder,o=l.addonAfter,B=l.addonBefore,M=l.hideSearchButton,O=l.hideSearchIcon,I=l.style,j=function(){t&&t((0,E.gB)([c,g]))},Z=function(){if(g&&!(0,E.Wq)(g))return"".concat(g,"...")},R=function(){return(0,d.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:[O||(0,d.jsx)(s.A,{size:"sm",isIconOnly:!0,variant:"light",children:(0,d.jsx)(r.Z,{stroke:1})}),B]})},y=function(){return(0,d.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:[o,M||(0,d.jsx)(s.A,{size:"sm",color:"danger",variant:"light",onClick:function(){j()},children:"\u641C \u7D22"})]})};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("form",{onSubmit:function(z){z.preventDefault(),j()},children:(0,d.jsx)(m.Y,{style:I,className:"px-0",fullWidth:!0,size:"md",variant:"bordered",color:"danger",value:c,onChange:function(z){D&&D(z.target.value)},placeholder:Z()||"\u641C\u7D22...",startContent:R(),endContent:y()})})})}},14887:function(W,f,e){e.d(f,{Z:function(){return D}});var E=e(97857),s=e.n(E),m=e(50209),r=e(95813),d=e(45837),_=e(19314),l=e(35291),c=e(94442),t=e(85893);function D(g){var o=g.model,B=g.count,M=g.lazy;if((0,r.Wq)(o==null?void 0:o.Id))return null;var O=(0,l.LK)(o,{width:250,height:250});return o.Published,(0,t.jsxs)(d.w,s()(s()({shadow:"none",className:"w-full",isHoverable:!0,isPressable:!0},g),{},{children:[(0,t.jsx)(_.G,{className:"overflow-visible p-0",children:(0,t.jsx)(c.Z,{rate:3/3,shadow:"none",radius:"lg",isZoomed:!0,loading:M?"lazy":"eager",src:O||void 0,className:"object-cover",classNames:{img:"object-cover"},width:"100%",alt:""})}),(0,t.jsx)(_.G,{className:"p-2",children:(0,t.jsxs)("div",{className:"w-full flex-col-top",children:[(0,t.jsx)("div",{className:"text-nowrap",children:o.Name||"--"}),(0,r.Wq)(o.AdminComment)||(0,t.jsx)("span",{className:"text-overline text-sm",children:o.AdminComment}),(0,t.jsx)(m.Z,{skus:o.Skus||[],count:B})]})})]}))}},37087:function(W,f,e){e.d(f,{Z:function(){return d}});var E=e(67294),s=e(95813),m=e(38016),r=e(85893);function d(_){var l,c,t=_.model;if(t==null)return null;if(t.PriceModel==null||t.PriceModel.Empty)return(0,r.jsx)(m.e,{content:"\u4EF7\u683C\u767B\u5F55\u53EF\u89C1",color:"warning",showArrow:!0,children:(0,r.jsx)("span",{className:"text-nowrap font-light text-slate-400",children:"\u767B\u5F55\u89C1\u4EF7\u683C"})});var D=((l=t.PriceModel)===null||l===void 0?void 0:l.BasePrice)||0,g=((c=t.PriceModel)===null||c===void 0?void 0:c.FinalPrice)||0,o=(0,E.useMemo)(function(){var M=[];if(t.PriceModel==null)return M;if(t.PriceModel.DiscountModel!=null){var O=t.PriceModel.DiscountModel.DiscountPercentage||0;M.push("\u6298\u6263-".concat(t.PriceModel.DiscountModel.Name,":").concat(O*100,"%"))}if(t.PriceModel.GradePriceModel!=null){var I=t.PriceModel.GradePriceModel.PriceOffset||0;if(I!=0){var j;M.push("".concat(((j=t.PriceModel.GradePriceModel.Grade)===null||j===void 0?void 0:j.Name)||"\u4F1A\u5458\u4EF7",":").concat(I))}}return M},[t]),B=function(){return(0,r.jsxs)("div",{style:{display:"inline-block"},children:[D==g||(0,r.jsx)("span",{className:"text-slate-400",style:{textDecoration:"line-through",fontSize:"9px",whiteSpace:"nowrap",fontWeight:"lighter"},children:"".concat((0,s.lb)(D))}),(0,r.jsx)("span",{className:"text-nowrap text-black",children:(0,s.lb)(g)})]})};return(0,r.jsxs)(r.Fragment,{children:[o.length<=0&&B(),o.length<=0||(0,r.jsx)(m.e,{color:"warning",showArrow:!0,content:(0,r.jsx)("p",{children:o.map(function(M,O){return(0,r.jsxs)("p",{children:[O+1,":",M]},O)})}),children:B()})]})}},50209:function(W,f,e){var E=e(71016),s=e(74715),m=e(85893);f.Z=function(r){var d=r.skus,_=r.count,l=_||1,c=d.length;return c<=0?(0,m.jsx)("div",{className:"font-mono text-sm font-light text-slate-400",children:"\u6682\u65E0\u53EF\u552E"}):(0,m.jsxs)(m.Fragment,{children:[(0,E.Z)(d,l).map(function(t,D){return(0,m.jsx)(s.Z,{model:t},D)}),c>l&&(0,m.jsx)("div",{className:"text-caption text-sm",children:"\u4E00\u5171".concat(c,"\u79CD\u6B3E\u5F0F")})]})}},74715:function(W,f,e){var E=e(37087),s=e(85893);f.Z=function(m){var r=m.model;return(0,s.jsxs)("div",{className:"flex-row-between",children:[(0,s.jsx)("span",{className:"text-caption",children:r.Name||"--"}),(0,s.jsx)("span",{className:"ml-1",children:(0,s.jsx)(E.Z,{model:r})})]})}},94442:function(W,f,e){var E=e(97857),s=e.n(E),m=e(15009),r=e.n(m),d=e(99289),_=e.n(d),l=e(82052),c=e(68421),t=e(9383),D=e(67294),g=e(85893);f.Z=function(o){var B=o.width,M=o.rate,O=(0,D.useRef)(null),I=(0,l.Z)(O),j=I==null?void 0:I.width,Z=function(){var y=_()(r()().mark(function L(){return r()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!(M!=null&&j!=null)){K.next=2;break}return K.abrupt("return",j*M);case 2:return K.abrupt("return",void 0);case 3:case"end":return K.stop()}},L)}));return function(){return y.apply(this,arguments)}}(),R=(0,c.Z)(Z,{manual:!0,debounceWait:30});return(0,D.useEffect)(function(){R.run()},[j]),(0,g.jsx)("div",{ref:O,style:{display:"block",padding:0,margin:0,width:B!=null?B:"100%"},children:(0,g.jsx)(t.J,s()({width:j||void 0,height:R.data||void 0,radius:"none"},o))})}},85685:function(W,f,e){e.d(f,{Z:function(){return l}});var E=e(38295),s=e(95813),m=e(38787),r=e(48135),d=e(76021),_=e(85893);function l(c){var t=c.children,D=c.rightButtons,g=c.leftButtons,o=(0,E.o)(),B=function(){window.history.length>1?d.m8.back():d.m8.push({pathname:"/"})},M=function(){return(0,_.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.G5)(g)&&(0,_.jsxs)("div",{className:"flex-row-center cursor-pointer gap-1",onClick:function(j){j.preventDefault(),j.stopPropagation(),B()},children:[(0,_.jsx)(m.A,{size:"lg",color:"default",radius:"full",variant:"light",isIconOnly:!0,onClick:function(j){j.preventDefault(),j.stopPropagation(),B()},children:(0,_.jsx)(r.Z,{stroke:1})}),(0,_.jsx)("h1",{className:"text-title m-0 p-0",children:window.document.title||o.getAppName()})]}),g==null?void 0:g.map(function(I){return I})]})};return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"container max-w-lg",children:[(0,_.jsxs)("div",{className:"flex-row-between py-1",children:[M(),(0,_.jsx)("div",{className:"flex-row-center gap-2",children:D==null?void 0:D.map(function(O){return O})})]}),(0,_.jsx)("div",{children:t})]})})}},46555:function(W,f,e){var E=e(13690),s=e(38787),m=e(99599),r=e(85893);f.Z=function(d){var _=d.hide,l=(0,E.Z)(window.document),c=(l==null?void 0:l.top)||0;return c<100||_?null:(0,r.jsx)("div",{className:"ease-in-out",style:{position:"fixed",bottom:70,right:16,zIndex:9999},children:(0,r.jsx)(s.A,{color:"primary",size:"sm",isIconOnly:!0,radius:"full",variant:"solid",onClick:function(){window&&window.scrollTo({left:0,top:0})},children:(0,r.jsx)(m.Z,{stroke:1})})})}},72640:function(W,f,e){var E=e(32983),s=e(85893);f.Z=function(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:100},children:(0,s.jsx)(E.Z,{})})})}},9830:function(W,f,e){e.r(f),e.d(f,{default:function(){return ae}});var E=e(15009),s=e.n(E),m=e(97857),r=e.n(m),d=e(99289),_=e.n(d),l=e(5574),c=e.n(l),t=e(72640),D=e(84179),g=e(68770),o=e(67294),B=e(50112),M=e(14887),O=e(85685),I=e(46555),j=e(35291),Z=e(30699),R=e(76021),y=e(95813),L=e(66972),z=e(38016),K=e(38787),V=e(10130),$=e(75968),n=e(85893);function J(h){var a=h.query,x=h.onSearch,C=(0,o.useState)({}),P=c()(C,2),i=P[0],A=P[1],T=(0,o.useState)(!1),p=c()(T,2),N=p[0],F=p[1],w=function(u){if(!(u.TagId||u.BrandId||u.CategoryId)){console.log("\u6CA1\u6709\u641C\u7D22\u6761\u4EF6");return}F(!0),Z.x1.mall.searchSearchOptions(u).then(function(U){A(U.data.Data||{})}).finally(function(){F(!1)})};(0,o.useEffect)(function(){console.log("query",a),w(a)},[a]);var b=function(){var u;return(0,y.Wq)(a.BrandId)?null:(0,n.jsx)($.z,{size:"sm",isCloseable:!0,onClose:function(){x&&x(r()(r()({},a),{},{BrandId:void 0}))},children:((u=i.Brand)===null||u===void 0?void 0:u.Name)||"\u54C1\u724C"})},H=function(){var u;return(0,y.Wq)(a.CategoryId)?null:(0,n.jsx)($.z,{size:"sm",isCloseable:!0,onClose:function(){x&&x(r()(r()({},a),{},{CategoryId:void 0}))},children:((u=i.Category)===null||u===void 0?void 0:u.Name)||"\u7C7B\u76EE"})},S=function(){var u;return(0,y.Wq)(a.TagId)?null:(0,n.jsx)($.z,{size:"sm",isCloseable:!0,onClose:function(){x&&x(r()(r()({},a),{},{TagId:void 0}))},children:((u=i.Tag)===null||u===void 0?void 0:u.Name)||"\u6807\u7B7E"})};return N||!(i.Tag||i.Brand||i.Category)?null:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[b(),H(),S()]})})}var Q=function(a){return(0,y.Wq)(a.Keywords)&&(0,y.Wq)(a.TagId)&&(0,y.Wq)(a.BrandId)&&(0,y.Wq)(a.CategoryId)};function Y(h){var a=h.finalQuery,x=h.onSearch,C=(0,o.useState)(""),P=c()(C,2),i=P[0],A=P[1];return(0,o.useEffect)(function(){A(a.Keywords||"")},[a.Keywords]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"my-2 flex flex-row items-center justify-end gap-2",children:[(0,n.jsx)("div",{style:{flexGrow:1},children:(0,n.jsx)(L.Z,{hideSearchButton:!Q(a),addonBefore:(0,n.jsx)(J,{query:a,onSearch:function(p){x(r()(r()({},p),{},{Page:1}))}}),keywords:i,onChange:function(p){A(p)},onSearch:function(p){x(r()(r()({},a),{},{Keywords:i,Page:1}))}})}),(0,n.jsx)(z.e,{content:"\u54C1\u724C",showArrow:!0,color:"warning",children:(0,n.jsx)(K.A,{isIconOnly:!0,variant:"light",radius:"full",onClick:function(){R.m8.push({pathname:"/brand"})},children:(0,n.jsx)(V.Z,{stroke:1})})})]})})}var k=e(65885),q=e(21274);function ee(h){var a=h.model,x=h.query,C=h.onChange,P=a.Brands||[];return(0,y.G5)(P)?null:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"px-2 py-1",children:[(0,n.jsx)("div",{className:"text-slate-500",children:"\u70ED\u95E8\u54C1\u724C"}),(0,n.jsx)("div",{className:"mt-1",children:P.map(function(i,A){return(0,n.jsx)(K.A,{size:"sm",variant:"light",color:"primary",onClick:function(){C(r()(r()({},x),{},{BrandId:i.Id}))},children:"".concat(i.Name)},A)})})]})})}function ne(h){var a,x=h.query,C=h.onChange,P=h.model;return(0,n.jsx)(n.Fragment,{children:(0,y.G5)(P.Keywords)||(0,n.jsxs)("div",{className:"px-2 py-1",children:[(0,n.jsx)("div",{className:"mb-1 text-slate-300",children:"\u70ED\u95E8\u5173\u952E\u8BCD"}),(0,n.jsx)("div",{className:"mt-1",children:(a=P.Keywords)===null||a===void 0?void 0:a.map(function(i,A){return(0,n.jsx)(K.A,{size:"sm",variant:"light",color:"primary",onClick:function(){C(r()(r()({},x),{},{Keywords:i}))},children:i},A)})})]})})}function re(h){var a=h.model,x=h.query,C=h.onChange,P=a.Tags||[];return(0,y.G5)(P)?null:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"px-2 py-1",children:[(0,n.jsx)("div",{className:"mb-2 text-slate-500",children:"\u6807\u7B7E"}),(0,n.jsx)("div",{children:P.map(function(i,A){return(0,n.jsx)($.z,{size:"sm",className:"mb-1 mr-1",onClick:function(){C(r()(r()({},x),{},{TagId:i.Id}))},children:i.Name},A)})})]})})}var te=function(h){var a=h.query,x=h.onChange,C=(0,k.Z)("search.page.data",{serializer:function(v){return JSON.stringify(v||{})},deserializer:function(v){return(0,y.Jp)(v)||{}},defaultValue:void 0}),P=c()(C,2),i=P[0],A=P[1],T=i||{},p=(0,o.useState)(!1),N=c()(p,2),F=N[0],w=N[1],b=i==null&&F,H=function(){w(!0),Z.x1.mall.searchSearchView({}).then(function(v){(0,y._y)(v,function(){A(v.data.Data||{})})}).finally(function(){w(!1)})};return(0,o.useEffect)(function(){H()},[]),(0,n.jsxs)(n.Fragment,{children:[b&&(0,n.jsx)(q.Z,{}),(0,n.jsx)(ne,{model:T,query:a,onChange:x}),(0,n.jsx)(ee,{model:T,query:a,onChange:x}),(0,n.jsx)(re,{model:T,query:a,onChange:x})]})};function ae(){(0,D.Z)("\u641C\u7D22");var h=(0,R.TH)(),a=(0,o.useState)((0,j.dD)(h.search)),x=c()(a,2),C=x[0],P=x[1],i=(0,g.Z)(function(){var S=_()(s()().mark(function v(u){var U,X;return s()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,Z.x1.mall.searchSearchGoodsList(r()(r()({},C),{},{Page:((u==null||(U=u.res)===null||U===void 0?void 0:U.PageIndex)||0)+1}));case 2:return X=G.sent,G.abrupt("return",{list:X.data.Items||[],res:X.data});case 4:case"end":return G.stop()}},v)}));return function(v){return S.apply(this,arguments)}}(),{manual:!0,target:window.document,isNoMore:function(v){var u;return(v==null||(u=v.res)===null||u===void 0?void 0:u.IsEmpty)||!1}}),A=i.loading,T=i.loadingMore,p=i.noMore,N=i.data,F=i.mutate,w=i.reload,b=(N==null?void 0:N.list)||[];(0,o.useEffect)(function(){F({list:[]}),Q(C)||w(),(0,j.bj)(r()(r()({},C),{},{Page:void 0,PageSize:void 0,IsPublished:void 0,SkipCalculateTotalCount:void 0}))},[C]),(0,o.useEffect)(function(){var S=R.m8.listen(function(v){P((0,j.dD)(v.location.search))});return function(){S()}},[]);var H=function(){return Q(C)?(0,n.jsx)(te,{query:C,onChange:function(u){P(r()({},u))}}):b.length<=0?(0,n.jsx)(t.Z,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"px-1",children:(0,n.jsx)("div",{className:"grid grid-cols-2 gap-5 md:grid-cols-3 lg:grid-cols-4",children:b.map(function(v,u){return(0,n.jsx)("div",{children:(0,n.jsx)(M.Z,{model:v,lazy:!1,onClick:function(){(0,y.E4)(v.Id)}})},u)})})}),(0,n.jsx)("div",{style:{marginTop:10},children:(0,n.jsx)(B.Z,{loading:A||T,hasMore:!p})})]})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(O.Z,{children:[(0,n.jsx)(I.Z,{}),(0,n.jsx)("div",{className:"mb-2 px-1",children:(0,n.jsx)(Y,{finalQuery:C,onSearch:function(v){P(v)}})}),(0,n.jsx)("div",{className:"mb-1",children:H()})]})})}}}]);
