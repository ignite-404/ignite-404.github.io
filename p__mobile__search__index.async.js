"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4570],{50112:function(U,v,e){var f=e(21274),s=e(85893);v.Z=function(_){var r=_.loading,u=_.hasMore;return r?(0,s.jsx)(f.Z,{}):u?null:(0,s.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:(0,s.jsx)("span",{className:"text-slate-400",children:"\u6CA1\u6709\u66F4\u591A\u4E86"})})}},66972:function(U,v,e){e.d(v,{Z:function(){return d}});var f=e(95813),s=e(22897),_=e(48741),r=e(13129),u=e(85893);function d(c){var l=c.keywords,t=c.onSearch,P=c.onChange,E=c.placeholder,o=c.addonAfter,I=c.addonBefore,x=c.hideSearchButton,M=c.hideSearchIcon,T=c.style,B=function(){t&&t((0,f.gB)([l,E]))},F=function(){if(E&&!(0,f.Wq)(E))return"".concat(E,"...")},N=function(){return(0,u.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:[M||(0,u.jsx)(s.A,{size:"sm",isIconOnly:!0,variant:"light",children:(0,u.jsx)(r.Z,{stroke:1})}),I]})},O=function(){return(0,u.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:[o,x||(0,u.jsx)(s.A,{size:"sm",color:"danger",variant:"light",onPress:function(){B()},children:"\u641C \u7D22"})]})};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("form",{onSubmit:function(Z){Z.preventDefault(),B()},children:(0,u.jsx)(_.Y,{style:T,className:"px-0",fullWidth:!0,size:"md",variant:"bordered",color:"danger",value:l,onChange:function(Z){P&&P(Z.target.value)},placeholder:F()||"\u641C\u7D22...",startContent:N(),endContent:O()})})})}},14887:function(U,v,e){e.d(v,{Z:function(){return P}});var f=e(97857),s=e.n(f),_=e(50209),r=e(95813),u=e(90845),d=e(19314),c=e(35291),l=e(94442),t=e(85893);function P(E){var o=E.model,I=E.count,x=E.lazy;if((0,r.Wq)(o==null?void 0:o.Id))return null;var M=(0,c.LK)(o,{width:250,height:250});return o.Published,(0,t.jsxs)(u.w,s()(s()({shadow:"none",className:"w-full",isHoverable:!0,isPressable:!0},E),{},{children:[(0,t.jsx)(d.G,{className:"overflow-visible p-0",children:(0,t.jsx)(l.Z,{rate:3/3,shadow:"none",radius:"lg",isZoomed:!0,loading:x?"lazy":"eager",src:M||void 0,className:"object-cover",classNames:{img:"object-cover"},width:"100%",alt:""})}),(0,t.jsx)(d.G,{className:"p-2",children:(0,t.jsxs)("div",{className:"w-full flex-col-top",children:[(0,t.jsx)("div",{className:"text-nowrap",children:o.Name||"--"}),(0,r.Wq)(o.AdminComment)||(0,t.jsx)("span",{className:"text-overline text-sm",children:o.AdminComment}),(0,t.jsx)(_.Z,{skus:o.Skus||[],count:I})]})})]}))}},37087:function(U,v,e){e.d(v,{Z:function(){return u}});var f=e(67294),s=e(95813),_=e(63743),r=e(85893);function u(d){var c,l,t=d.model;if(t==null)return null;if(t.PriceModel==null||t.PriceModel.Empty)return(0,r.jsx)(_.e,{content:"\u4EF7\u683C\u767B\u5F55\u53EF\u89C1",color:"warning",showArrow:!0,children:(0,r.jsx)("span",{className:"text-nowrap font-light text-slate-400",children:"\u767B\u5F55\u89C1\u4EF7\u683C"})});var P=((c=t.PriceModel)===null||c===void 0?void 0:c.BasePrice)||0,E=((l=t.PriceModel)===null||l===void 0?void 0:l.FinalPrice)||0,o=(0,f.useMemo)(function(){var x=[];if(t.PriceModel==null)return x;if(t.PriceModel.DiscountModel!=null){var M=t.PriceModel.DiscountModel.DiscountPercentage||0;x.push("\u6298\u6263-".concat(t.PriceModel.DiscountModel.Name,":").concat(M*100,"%"))}if(t.PriceModel.GradePriceModel!=null){var T=t.PriceModel.GradePriceModel.PriceOffset||0;if(T!=0){var B;x.push("".concat(((B=t.PriceModel.GradePriceModel.Grade)===null||B===void 0?void 0:B.Name)||"\u4F1A\u5458\u4EF7",":").concat(T))}}return x},[t]),I=function(){return(0,r.jsxs)("div",{style:{display:"inline-block"},children:[P==E||(0,r.jsx)("span",{className:"text-slate-400",style:{textDecoration:"line-through",fontSize:"9px",whiteSpace:"nowrap",fontWeight:"lighter"},children:"".concat((0,s.lb)(P))}),(0,r.jsx)("span",{className:"text-nowrap text-black",children:(0,s.lb)(E)})]})};return(0,r.jsxs)(r.Fragment,{children:[o.length<=0&&I(),o.length<=0||(0,r.jsx)(_.e,{color:"warning",showArrow:!0,content:(0,r.jsx)("p",{children:o.map(function(x,M){return(0,r.jsxs)("p",{children:[M+1,":",x]},M)})}),children:I()})]})}},50209:function(U,v,e){var f=e(71016),s=e(74715),_=e(85893);v.Z=function(r){var u=r.skus,d=r.count,c=d||1,l=u.length;return l<=0?(0,_.jsx)("div",{className:"font-mono text-sm font-light text-slate-400",children:"\u6682\u65E0\u53EF\u552E"}):(0,_.jsxs)(_.Fragment,{children:[(0,f.Z)(u,c).map(function(t,P){return(0,_.jsx)(s.Z,{model:t},P)}),l>c&&(0,_.jsx)("div",{className:"text-caption text-sm",children:"\u4E00\u5171".concat(l,"\u79CD\u6B3E\u5F0F")})]})}},74715:function(U,v,e){var f=e(37087),s=e(85893);v.Z=function(_){var r=_.model;return(0,s.jsxs)("div",{className:"flex-row-between",children:[(0,s.jsx)("span",{className:"text-caption",children:r.Name||"--"}),(0,s.jsx)("span",{className:"ml-1",children:(0,s.jsx)(f.Z,{model:r})})]})}},94442:function(U,v,e){var f=e(97857),s=e.n(f),_=e(15009),r=e.n(_),u=e(99289),d=e.n(u),c=e(5574),l=e.n(c),t=e(82052),P=e(68421),E=e(18207),o=e(67294),I=e(85893);v.Z=function(x){var M=x.width,T=x.rate,B=x.minHeightBeforeLoaded,F=(0,o.useState)(!1),N=l()(F,2),O=N[0],K=N[1],Z=function(){if(!O)return B||void 0},H=(0,o.useRef)(null),Q=(0,t.Z)(H),R=Q==null?void 0:Q.width,n=function(){var G=d()(r()().mark(function X(){return r()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(T!=null&&R!=null)){b.next=2;break}return b.abrupt("return",R*T);case 2:return b.abrupt("return",void 0);case 3:case"end":return b.stop()}},X)}));return function(){return G.apply(this,arguments)}}(),V=(0,P.Z)(n,{manual:!0,debounceWait:90});return(0,o.useEffect)(function(){V.run()},[R,T]),(0,I.jsx)("div",{ref:H,style:{display:"block",width:M!=null?M:"100%"},children:(0,I.jsx)(E.J,s()({showSkeleton:!0,width:R||void 0,height:V.data||void 0,radius:"none",onLoad:function(){K(!0)},style:{minHeight:Z()||void 0}},x))})}},85685:function(U,v,e){e.d(v,{Z:function(){return c}});var f=e(38295),s=e(95813),_=e(22897),r=e(48135),u=e(76021),d=e(85893);function c(l){var t=l.children,P=l.rightButtons,E=l.leftButtons,o=(0,f.o)(),I=function(){window.history.length>1?u.m8.back():u.m8.push({pathname:"/"})},x=function(){return(0,d.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.G5)(E)&&(0,d.jsxs)("div",{className:"flex-row-center cursor-pointer gap-1",onClick:function(B){B.preventDefault(),B.stopPropagation(),I()},children:[(0,d.jsx)(_.A,{size:"lg",color:"default",radius:"full",variant:"light",isIconOnly:!0,onPress:function(){I()},children:(0,d.jsx)(r.Z,{stroke:1})}),(0,d.jsx)("h1",{className:"text-title m-0 p-0",children:window.document.title||o.getAppName()})]}),E==null?void 0:E.map(function(T){return T})]})};return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"container max-w-lg",children:[(0,d.jsxs)("div",{className:"flex-row-between py-1",children:[x(),(0,d.jsx)("div",{className:"flex-row-center gap-2",children:P==null?void 0:P.map(function(M){return M})})]}),(0,d.jsx)("div",{children:t})]})})}},46555:function(U,v,e){var f=e(13690),s=e(22897),_=e(99599),r=e(85893);v.Z=function(u){var d=u.threshold,c=u.hide,l=(0,f.Z)(window.document),t=(l==null?void 0:l.top)||0,P=d||1e3;return t<P||c?null:(0,r.jsx)("div",{className:"ease-in-out",style:{position:"fixed",bottom:70,right:16,zIndex:3},children:(0,r.jsx)(s.A,{color:"success",size:"sm",isIconOnly:!0,radius:"full",variant:"solid",onPress:function(){window&&window.scrollTo({left:0,top:0,behavior:"smooth"})},children:(0,r.jsx)(_.Z,{stroke:1})})})}},72640:function(U,v,e){var f=e(32983),s=e(85893);v.Z=function(){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:100},children:(0,s.jsx)(f.Z,{})})})}},9830:function(U,v,e){e.r(v),e.d(v,{default:function(){return re}});var f=e(15009),s=e.n(f),_=e(97857),r=e.n(_),u=e(99289),d=e.n(u),c=e(5574),l=e.n(c),t=e(72640),P=e(84179),E=e(68770),o=e(67294),I=e(50112),x=e(14887),M=e(85685),T=e(46555),B=e(35291),F=e(30699),N=e(76021),O=e(95813),K=e(66972),Z=e(63743),H=e(22897),Q=e(10130),R=e(97197),n=e(85893);function V(m){var a=m.query,g=m.onSearch,S=(0,o.useState)({}),j=l()(S,2),i=j[0],y=j[1],D=(0,o.useState)(!1),p=l()(D,2),$=p[0],W=p[1],C=function(h){if(!(h.TagId||h.BrandId||h.CategoryId)){console.log("\u6CA1\u6709\u641C\u7D22\u6761\u4EF6");return}W(!0),F.x1.mall.searchSearchOptions(h).then(function(J){y(J.data.Data||{})}).finally(function(){W(!1)})};(0,o.useEffect)(function(){console.log("query",a),C(a)},[a]);var A=function(){var h;return(0,O.Wq)(a.BrandId)?null:(0,n.jsx)(R.z,{size:"sm",isCloseable:!0,onClose:function(){g&&g(r()(r()({},a),{},{BrandId:void 0}))},children:((h=i.Brand)===null||h===void 0?void 0:h.Name)||"\u54C1\u724C"})},z=function(){var h;return(0,O.Wq)(a.CategoryId)?null:(0,n.jsx)(R.z,{size:"sm",isCloseable:!0,onClose:function(){g&&g(r()(r()({},a),{},{CategoryId:void 0}))},children:((h=i.Category)===null||h===void 0?void 0:h.Name)||"\u7C7B\u76EE"})},w=function(){var h;return(0,O.Wq)(a.TagId)?null:(0,n.jsx)(R.z,{size:"sm",isCloseable:!0,onClose:function(){g&&g(r()(r()({},a),{},{TagId:void 0}))},children:((h=i.Tag)===null||h===void 0?void 0:h.Name)||"\u6807\u7B7E"})};return $||!(i.Tag||i.Brand||i.Category)?null:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[A(),z(),w()]})})}var G=function(a){return(0,O.Wq)(a.Keywords)&&(0,O.Wq)(a.TagId)&&(0,O.Wq)(a.BrandId)&&(0,O.Wq)(a.CategoryId)};function X(m){var a=m.finalQuery,g=m.onSearch,S=(0,o.useState)(""),j=l()(S,2),i=j[0],y=j[1];return(0,o.useEffect)(function(){y(a.Keywords||"")},[a.Keywords]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"my-2 flex flex-row items-center justify-end gap-2",children:[(0,n.jsx)("div",{style:{flexGrow:1},children:(0,n.jsx)(K.Z,{hideSearchButton:!G(a),addonBefore:(0,n.jsx)(V,{query:a,onSearch:function(p){g(r()(r()({},p),{},{Page:1}))}}),keywords:i,onChange:function(p){y(p)},onSearch:function(p){g(r()(r()({},a),{},{Keywords:i,Page:1}))}})}),(0,n.jsx)(Z.e,{content:"\u54C1\u724C",showArrow:!0,color:"warning",children:(0,n.jsx)(H.A,{isIconOnly:!0,variant:"light",radius:"full",onPress:function(){N.m8.push({pathname:"/brand"})},children:(0,n.jsx)(Q.Z,{stroke:1})})})]})})}var Y=e(65885),b=e(21274);function k(m){var a=m.model,g=m.query,S=m.onChange,j=a.Brands||[];return(0,O.G5)(j)?null:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"px-2 py-1",children:[(0,n.jsx)("div",{className:"text-slate-500",children:"\u70ED\u95E8\u54C1\u724C"}),(0,n.jsx)("div",{className:"mt-1",children:j.map(function(i,y){return(0,n.jsx)(H.A,{size:"sm",variant:"light",color:"primary",onPress:function(){S(r()(r()({},g),{},{BrandId:i.Id}))},children:"".concat(i.Name)},y)})})]})})}function q(m){var a,g=m.query,S=m.onChange,j=m.model;return(0,n.jsx)(n.Fragment,{children:(0,O.G5)(j.Keywords)||(0,n.jsxs)("div",{className:"px-2 py-1",children:[(0,n.jsx)("div",{className:"mb-1 text-slate-300",children:"\u70ED\u95E8\u5173\u952E\u8BCD"}),(0,n.jsx)("div",{className:"mt-1",children:(a=j.Keywords)===null||a===void 0?void 0:a.map(function(i,y){return(0,n.jsx)(H.A,{size:"sm",variant:"light",color:"primary",onPress:function(){S(r()(r()({},g),{},{Keywords:i}))},children:i},y)})})]})})}function ee(m){var a=m.model,g=m.query,S=m.onChange,j=a.Tags||[];return(0,O.G5)(j)?null:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"px-2 py-1",children:[(0,n.jsx)("div",{className:"mb-2 text-slate-500",children:"\u6807\u7B7E"}),(0,n.jsx)("div",{children:j.map(function(i,y){return(0,n.jsx)(R.z,{size:"sm",className:"mb-1 mr-1",onClick:function(){S(r()(r()({},g),{},{TagId:i.Id}))},children:i.Name},y)})})]})})}var ne=function(m){var a=m.query,g=m.onChange,S=(0,Y.Z)("search.page.data",{serializer:function(L){return JSON.stringify(L||{})},deserializer:function(L){return(0,O.Jp)(L)||{}},defaultValue:void 0}),j=l()(S,2),i=j[0],y=j[1],D=i||{},p=(0,o.useState)(!1),$=l()(p,2),W=$[0],C=$[1],A=i==null&&W,z=function(){C(!0),F.x1.mall.searchSearchView({}).then(function(L){(0,O._y)(L,function(){y(L.data.Data||{})})}).finally(function(){C(!1)})};return(0,o.useEffect)(function(){z()},[]),(0,n.jsxs)(n.Fragment,{children:[A&&(0,n.jsx)(b.Z,{}),(0,n.jsx)(q,{model:D,query:a,onChange:g}),(0,n.jsx)(k,{model:D,query:a,onChange:g}),(0,n.jsx)(ee,{model:D,query:a,onChange:g})]})};function re(){var m;(0,P.Z)("\u641C\u7D22");var a=(0,N.TH)(),g=(0,B.dD)(a.search),S=(0,o.useState)(g||{}),j=l()(S,2),i=j[0],y=j[1],D=(0,E.Z)(function(){var W=d()(s()().mark(function C(A){var z,w;return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,F.x1.mall.searchSearchGoodsList(r()(r()({},i),{},{Page:((A==null||(z=A.res)===null||z===void 0?void 0:z.PageIndex)||0)+1}));case 2:return w=h.sent,h.abrupt("return",{list:w.data.Items||[],res:w.data});case 4:case"end":return h.stop()}},C)}));return function(C){return W.apply(this,arguments)}}(),{manual:!0,target:window.document,isNoMore:function(C){var A;return(C==null||(A=C.res)===null||A===void 0?void 0:A.IsEmpty)||!1}}),p=((m=D.data)===null||m===void 0?void 0:m.list)||[];(0,o.useEffect)(function(){D.mutate(void 0),G(i)||D.reload(),(0,B.bj)(r()(r()({},i),{},{Page:void 0,PageSize:void 0,IsPublished:void 0,SkipCalculateTotalCount:void 0}))},[i]),(0,o.useEffect)(function(){var W=N.m8.listen(function(C){y((0,B.dD)(C.location.search))});return function(){W()}},[]);var $=function(){return G(i)?(0,n.jsx)(ne,{query:i,onChange:function(A){y(r()({},A))}}):p.length<=0?(0,n.jsx)(t.Z,{}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"grid grid-cols-2 gap-5 md:grid-cols-3 lg:grid-cols-4",children:p.map(function(C,A){return(0,n.jsx)("div",{children:(0,n.jsx)(x.Z,{model:C,lazy:!1,onPress:function(){(0,O.E4)(C.Id)}})},A)})})})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T.Z,{}),(0,n.jsx)(M.Z,{}),(0,n.jsx)("div",{className:"mb-2 px-1",children:(0,n.jsx)(X,{finalQuery:i,onSearch:function(C){y(C)}})}),(0,n.jsxs)("div",{className:"mb-1",children:[(0,n.jsx)("div",{className:"px-1",children:$()}),(0,n.jsx)("div",{style:{marginTop:10},children:(0,n.jsx)(I.Z,{loading:D.loading||D.loadingMore,hasMore:!D.noMore})})]})]})}}}]);
