"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4570],{93560:function(L,_,n){var m=n(13690),r=n(38787),d=n(99599),t=n(85893);_.Z=function(l){var u=l.hide,s=(0,m.Z)(window.document),c=(s==null?void 0:s.top)||0;return c<100||u?null:(0,t.jsx)("div",{className:"ease-in-out",style:{position:"fixed",bottom:70,right:16,zIndex:9999},children:(0,t.jsx)(r.A,{color:"primary",size:"sm",isIconOnly:!0,radius:"full",variant:"solid",onClick:function(){window&&window.scrollTo({left:0,top:0})},children:(0,t.jsx)(d.Z,{stroke:1})})})}},96911:function(L,_,n){var m=n(32983),r=n(85893);_.Z=function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingTop:100},children:(0,r.jsx)(m.Z,{})})})}},33816:function(L,_,n){var m=n(70025),r=n(85893);_.Z=function(d){var t=d.open,l=d.onClose,u=d.children;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(m.Z,{open:t,onClose:function(){l&&l()},pureBody:!0,showCloseButton:!0,children:u})})}},70025:function(L,_,n){var m=n(97857),r=n.n(m),d=n(86597),t=n(38787),l=n(94087),u=n(78967),s=n(87740),c=n(96476),D=n(77373),i=n(85893);_.Z=function(a){var C=a.open,P=a.onClose,E=a.children,A=a.title,T=a.action,y=a.pureBody,N=a.showCloseButton,Z=a.bodyStyle,z=a.props,R=function(){return y?E:(0,i.jsx)(d.I,{style:Z,children:(0,i.jsx)("div",{style:{minHeight:300},children:E})})},U=function(){return N?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{style:{position:"relative"},children:(0,i.jsx)("div",{style:{position:"absolute",display:"inline",right:"20px",top:"20px",zIndex:1},children:(0,i.jsx)(t.A,{isIconOnly:!0,size:"sm",radius:"full",color:"danger",onClick:function(){P&&P()},children:(0,i.jsx)(D.Z,{stroke:1})})})})}):null};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.R,r()(r()({className:"overflow-hidden",backdrop:"blur",isOpen:C,onClose:P,hideCloseButton:!0,isDismissable:!0,scrollBehavior:"outside"},z),{},{children:(0,i.jsx)(u.A,{children:function(){return(0,i.jsxs)(i.Fragment,{children:[U(),A==null||(0,i.jsx)(s.k,{className:"flex flex-col gap-1",children:A}),R(),T&&(0,i.jsx)(c.R,{children:T})]})}})}))})}},64080:function(L,_,n){var m=n(21274),r=n(85893);_.Z=function(d){var t=d.loading,l=d.hasMore;return t?(0,r.jsx)(m.Z,{}):l?null:(0,r.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:(0,r.jsx)("span",{className:"text-slate-400",children:"\u6CA1\u6709\u66F4\u591A\u4E86"})})}},66972:function(L,_,n){n.d(_,{Z:function(){return u}});var m=n(66419),r=n(38787),d=n(69047),t=n(13129),l=n(85893);function u(s){var c=s.keywords,D=s.onSearch,i=s.onChange,a=s.placeholder,C=s.addonAfter,P=s.addonBefore,E=s.hideSearchButton,A=s.hideSearchIcon,T=s.style,y=function(){D&&D((0,m.gB)([c,a]))},N=function(){if(a&&!(0,m.Wq)(a))return"".concat(a,"...")},Z=function(){return(0,l.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:[A||(0,l.jsx)(r.A,{size:"sm",isIconOnly:!0,variant:"light",children:(0,l.jsx)(t.Z,{stroke:1})}),P]})},z=function(){return(0,l.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:[C,E||(0,l.jsx)(r.A,{size:"sm",color:"danger",variant:"light",onClick:function(){y()},children:"\u641C \u7D22"})]})};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("form",{onSubmit:function(U){U.preventDefault(),y()},children:(0,l.jsx)(d.Y,{style:T,className:"px-0",fullWidth:!0,size:"md",variant:"bordered",color:"danger",value:c,onChange:function(U){i&&i(U.target.value)},placeholder:N()||"\u641C\u7D22...",startContent:Z(),endContent:z()})})})}},14887:function(L,_,n){n.d(_,{Z:function(){return C}});var m=n(97857),r=n.n(m),d=n(50209),t=n(66419),l=n(12241),u=n(45837),s=n(19314),c=n(67294),D=n(35291),i=n(93338),a=n(85893);function C(P){var E=P.model,A=P.count,T=P.lazy;if((0,t.Wq)(E==null?void 0:E.Id))return null;var y=(0,c.useMemo)(function(){return(0,D.LK)(E,{width:250,height:250})},[E.GoodsPictures]);return E.Published?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(u.w,r()(r()({shadow:"none",className:"w-full",isHoverable:!0,isPressable:!0},P),{},{children:[(0,a.jsx)(s.G,{className:"overflow-visible p-0",children:(0,a.jsx)(i.Z,{rate:3/3,shadow:"none",radius:"lg",isZoomed:!0,loading:T?"lazy":"eager",src:y||void 0,className:"object-cover",classNames:{img:"object-cover"},width:"100%",alt:""})}),(0,a.jsx)(s.G,{className:"p-2",children:(0,a.jsxs)("div",{className:"w-full flex-col-top",children:[(0,a.jsx)("div",{className:"text-nowrap",children:E.Name||"--"}),(0,t.Wq)(E.AdminComment)||(0,a.jsx)("span",{className:"text-overline text-sm",children:E.AdminComment}),(0,a.jsx)(d.Z,{skus:E.Skus||[],count:A})]})})]}))}):(0,a.jsx)(l.Z,{model:E})}},4303:function(L,_,n){n.d(_,{Z:function(){return l}});var m=n(33816),r=n(66419),d=n(44300),t=n(85893);function l(u){var s=u.detailId,c=u.onClose,D=!(0,r.Wq)(s);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(m.Z,{open:D,onClose:c,children:s&&s.length>0&&(0,t.jsx)(d.Z,{goodsId:s})})})}},50209:function(L,_,n){var m=n(71016),r=n(74715),d=n(85893);_.Z=function(t){var l=t.skus,u=t.count,s=u||1,c=l.length;return c<=0?(0,d.jsx)("div",{className:"font-mono text-sm font-light text-slate-400",children:"\u6682\u65E0\u53EF\u552E"}):(0,d.jsxs)(d.Fragment,{children:[(0,m.Z)(l,s).map(function(D,i){return(0,d.jsx)(r.Z,{model:D},i)}),c>s&&(0,d.jsx)("div",{className:"text-caption text-sm",children:"\u4E00\u5171".concat(c,"\u79CD\u6B3E\u5F0F")})]})}},74715:function(L,_,n){var m=n(37087),r=n(85893);_.Z=function(d){var t=d.model;return(0,r.jsxs)("div",{className:"flex-row-between",children:[(0,r.jsx)("span",{className:"text-caption",children:t.Name||"--"}),(0,r.jsx)("span",{className:"ml-1",children:(0,r.jsx)(m.Z,{model:t})})]})}},85685:function(L,_,n){n.d(_,{Z:function(){return s}});var m=n(38295),r=n(47650),d=n(66419),t=n(38787),l=n(48135),u=n(85893);function s(c){var D=c.children,i=c.rightButtons,a=c.leftButtons,C=(0,m.o)(),P=function(){window.history.length>1?r.m8.back():r.m8.push({pathname:"/"})},E=function(){return(0,u.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,d.G5)(a)&&(0,u.jsxs)("div",{className:"flex-row-center cursor-pointer gap-1",onClick:function(y){y.preventDefault(),y.stopPropagation(),P()},children:[(0,u.jsx)(t.A,{size:"lg",color:"default",radius:"full",variant:"light",isIconOnly:!0,onClick:function(y){y.preventDefault(),y.stopPropagation(),P()},children:(0,u.jsx)(l.Z,{stroke:1})}),(0,u.jsx)("h1",{className:"text-title m-0 p-0",children:window.document.title||C.getAppName()})]}),a==null?void 0:a.map(function(T){return T})]})};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"container max-w-lg",children:[(0,u.jsxs)("div",{className:"flex-row-between py-1",children:[E(),(0,u.jsx)("div",{className:"flex-row-center gap-2",children:i==null?void 0:i.map(function(A){return A})})]}),(0,u.jsx)("div",{children:D})]})})}},9830:function(L,_,n){n.r(_),n.d(_,{default:function(){return un}});var m=n(15009),r=n.n(m),d=n(97857),t=n.n(d),l=n(99289),u=n.n(l),s=n(5574),c=n.n(s),D=n(84179),i=n(68770),a=n(96911),C=n(67294),P=n(93560),E=n(64080),A=n(14887),T=n(4303),y=n(85685),N=n(35291),Z=n(30699),z=n(47650),R=n(66972),U=n(38016),w=n(38787),nn=n(10130),S=n(66419),Y=n(75968),e=n(85893);function en(v){var o=v.query,f=v.onSearch,B=(0,C.useState)({}),x=c()(B,2),h=x[0],O=x[1],g=(0,C.useState)(!1),I=c()(g,2),p=I[0],$=I[1],H=function(j){if(!(j.TagId||j.BrandId||j.CategoryId)){console.log("\u6CA1\u6709\u641C\u7D22\u6761\u4EF6");return}$(!0),Z.x1.mall.searchSearchOptions(j).then(function(Q){O(Q.data.Data||{})}).finally(function(){$(!1)})};(0,C.useEffect)(function(){console.log("query",o),H(o)},[o]);var V=function(){var j;return(0,S.Wq)(o.BrandId)?null:(0,e.jsx)(Y.z,{size:"sm",isCloseable:!0,onClose:function(){f&&f(t()(t()({},o),{},{BrandId:void 0}))},children:((j=h.Brand)===null||j===void 0?void 0:j.Name)||"\u54C1\u724C"})},F=function(){var j;return(0,S.Wq)(o.CategoryId)?null:(0,e.jsx)(Y.z,{size:"sm",isCloseable:!0,onClose:function(){f&&f(t()(t()({},o),{},{CategoryId:void 0}))},children:((j=h.Category)===null||j===void 0?void 0:j.Name)||"\u7C7B\u76EE"})},b=function(){var j;return(0,S.Wq)(o.TagId)?null:(0,e.jsx)(Y.z,{size:"sm",isCloseable:!0,onClose:function(){f&&f(t()(t()({},o),{},{TagId:void 0}))},children:((j=h.Tag)===null||j===void 0?void 0:j.Name)||"\u6807\u7B7E"})};return p||!(h.Tag||h.Brand||h.Category)?null:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[V(),F(),b()]})})}var k=function(o){return(0,S.Wq)(o.Keywords)&&(0,S.Wq)(o.TagId)&&(0,S.Wq)(o.BrandId)&&(0,S.Wq)(o.CategoryId)};function tn(v){var o=v.finalQuery,f=v.onSearch,B=(0,C.useState)(""),x=c()(B,2),h=x[0],O=x[1];return(0,C.useEffect)(function(){O(o.Keywords||"")},[o.Keywords]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"my-2 flex flex-row items-center justify-end gap-2",children:[(0,e.jsx)("div",{style:{flexGrow:1},children:(0,e.jsx)(R.Z,{hideSearchButton:!k(o),addonBefore:(0,e.jsx)(en,{query:o,onSearch:function(I){f(t()(t()({},I),{},{Page:1}))}}),keywords:h,onChange:function(I){O(I)},onSearch:function(I){f(t()(t()({},o),{},{Keywords:h,Page:1}))}})}),(0,e.jsx)(U.e,{content:"\u54C1\u724C",showArrow:!0,color:"warning",children:(0,e.jsx)(w.A,{isIconOnly:!0,variant:"light",radius:"full",onClick:function(){z.m8.push({pathname:"/brand"})},children:(0,e.jsx)(nn.Z,{stroke:1})})})]})})}var rn=n(65885),on=n(21274);function an(v){var o=v.model,f=v.query,B=v.onChange,x=o.Brands||[];return(0,S.G5)(x)?null:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"px-2 py-1",children:[(0,e.jsx)("div",{className:"text-slate-500",children:"\u70ED\u95E8\u54C1\u724C"}),(0,e.jsx)("div",{className:"mt-1",children:x.map(function(h,O){return(0,e.jsx)(w.A,{size:"sm",variant:"light",color:"primary",onClick:function(){B(t()(t()({},f),{},{BrandId:h.Id}))},children:"".concat(h.Name)},O)})})]})})}function sn(v){var o,f=v.query,B=v.onChange,x=v.model;return(0,e.jsx)(e.Fragment,{children:(0,S.G5)(x.Keywords)||(0,e.jsxs)("div",{className:"px-2 py-1",children:[(0,e.jsx)("div",{className:"mb-1 text-slate-300",children:"\u70ED\u95E8\u5173\u952E\u8BCD"}),(0,e.jsx)("div",{className:"mt-1",children:(o=x.Keywords)===null||o===void 0?void 0:o.map(function(h,O){return(0,e.jsx)(w.A,{size:"sm",variant:"light",color:"primary",onClick:function(){B(t()(t()({},f),{},{Keywords:h}))},children:h},O)})})]})})}function ln(v){var o=v.model,f=v.query,B=v.onChange,x=o.Tags||[];return(0,S.G5)(x)?null:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"px-2 py-1",children:[(0,e.jsx)("div",{className:"mb-2 text-slate-500",children:"\u6807\u7B7E"}),(0,e.jsx)("div",{children:x.map(function(h,O){return(0,e.jsx)(Y.z,{size:"sm",className:"mb-1 mr-1",onClick:function(){B(t()(t()({},f),{},{TagId:h.Id}))},children:h.Name},O)})})]})})}var dn=function(v){var o=v.query,f=v.onChange,B=(0,rn.Z)("search.page.data",{serializer:function(W){return JSON.stringify(W||{})},deserializer:function(W){return(0,S.ZP)(W)},defaultValue:void 0}),x=c()(B,2),h=x[0],O=x[1],g=h||{},I=(0,C.useState)(!1),p=c()(I,2),$=p[0],H=p[1],V=h==null&&$,F=function(){H(!0),Z.x1.mall.searchSearchView({}).then(function(W){(0,S._y)(W,function(){O(W.data.Data||{})})}).finally(function(){H(!1)})};return(0,C.useEffect)(function(){F()},[]),(0,e.jsxs)(e.Fragment,{children:[V&&(0,e.jsx)(on.Z,{}),(0,e.jsx)(sn,{model:g,query:o,onChange:f}),(0,e.jsx)(an,{model:g,query:o,onChange:f}),(0,e.jsx)(ln,{model:g,query:o,onChange:f})]})};function un(){(0,D.Z)("\u641C\u7D22");var v=(0,z.TH)(),o=(0,C.useState)(void 0),f=c()(o,2),B=f[0],x=f[1],h=(0,C.useState)((0,N.dD)(v.search)),O=c()(h,2),g=O[0],I=O[1],p=(0,i.Z)(function(){var G=u()(r()().mark(function M(K){var J,q;return r()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,Z.x1.mall.searchSearchGoodsList(t()(t()({},g),{},{Page:((K==null||(J=K.res)===null||J===void 0?void 0:J.PageIndex)||0)+1}));case 2:return q=X.sent,X.abrupt("return",{list:q.data.Items||[],res:q.data});case 4:case"end":return X.stop()}},M)}));return function(M){return G.apply(this,arguments)}}(),{manual:!0,target:window.document,isNoMore:function(M){var K;return(M==null||(K=M.res)===null||K===void 0?void 0:K.IsEmpty)||!1}}),$=p.loading,H=p.loadingMore,V=p.noMore,F=p.data,b=p.mutate,W=p.reload,j=(F==null?void 0:F.list)||[];(0,C.useEffect)(function(){b({list:[]}),k(g)||W(),(0,N.bj)(t()(t()({},g),{},{Page:void 0,PageSize:void 0,IsPublished:void 0,SkipCalculateTotalCount:void 0}))},[g]),(0,C.useEffect)(function(){var G=z.m8.listen(function(M){I((0,N.dD)(M.location.search))});return function(){G()}},[]);var Q=function(){return k(g)?(0,e.jsx)(dn,{query:g,onChange:function(K){I(t()({},K))}}):j.length<=0?(0,e.jsx)(a.Z,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"px-1",children:(0,e.jsx)("div",{className:"gap-5 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:j.map(function(M,K){return(0,e.jsx)("div",{children:(0,e.jsx)(A.Z,{model:M,lazy:!1,onClick:function(){M.Id&&x(M.Id)}})},K)})})}),(0,e.jsx)("div",{style:{marginTop:10},children:(0,e.jsx)(E.Z,{loading:$||H,hasMore:!V})})]})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(y.Z,{children:[(0,e.jsx)(P.Z,{}),(0,e.jsx)(T.Z,{detailId:B,onClose:function(){x("")}}),(0,e.jsx)("div",{className:"mb-2 px-1",children:(0,e.jsx)(tn,{finalQuery:g,onSearch:function(M){I(M)}})}),(0,e.jsx)("div",{className:"mb-1",children:Q()})]})})}}}]);
