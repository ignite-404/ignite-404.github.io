"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5900],{64080:function(b,g,e){var t=e(21274),d=e(85893);g.Z=function(c){var f=c.loading,U=c.hasMore;return f?(0,d.jsx)(t.Z,{}):U?null:(0,d.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:(0,d.jsx)("span",{className:"text-slate-400",children:"\u6CA1\u6709\u66F4\u591A\u4E86"})})}},70566:function(b,g,e){e.r(g),e.d(g,{default:function(){return k}});var t=e(861),d=e.n(t),c=e(17061),f=e.n(c),U=e(42122),h=e.n(U),y=e(17156),l=e.n(y),n=e(27424),o=e.n(n),m=e(68770),O=e(7134),r=e(74911),a=e(35195),s=e(67294),v=e(96911),p=e(64080),x=e(46153),Z=e(30967),L=e(46629),F=e(42838),N=e(38787),G=e(66058),X=e(35301),w=e(18266),V=e(54666),_=e(85893),z=function(A){var P=(0,r.Z)(A,function(C){var E;return((E=(0,L.mg)(C.CreationTime))===null||E===void 0||(E=E.add(L.Mg,"hour"))===null||E===void 0?void 0:E.format(L.vc))||"--"}),R=(0,a.Z)(Object.keys(P),function(C){var E;return((E=(0,L.mg)(C))===null||E===void 0?void 0:E.valueOf())||0});return R.map(function(C){return{key:C,items:P[C]||[]}})};function k(){var $=(0,s.useState)({Page:1}),A=o()($,2),P=A[0],R=A[1],C=(0,s.useState)(!1),E=o()(C,2),Q=E[0],Y=E[1],te=(0,s.useState)(void 0),J=o()(te,2),q=J[0],ee=J[1],B=(0,m.Z)(function(){var W=l()(f()().mark(function M(u){var j,S;return f()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,Z.x1.mall.notificationPaging(h()(h()({},P),{},{Page:((u==null||(j=u.res)===null||j===void 0?void 0:j.PageIndex)||0)+1}));case 2:return S=H.sent,H.abrupt("return",{list:S.data.Items||[],res:S.data});case 4:case"end":return H.stop()}},M)}));return function(M){return W.apply(this,arguments)}}(),{target:window.document,isNoMore:function(M){var u;return(M==null||(u=M.res)===null||u===void 0?void 0:u.IsEmpty)||!1},reloadDeps:[P]}),K=B.data,i=B.loading,D=B.loadingMore,T=B.noMore,I=B.mutate,ne=function(M){M.Read||(ee(M.Id),Z.x1.mall.notificationUpdateStatus({Id:M.Id,Read:!0}).then(function(u){(0,F._y)(u,function(){var j=[].concat(d()(re.filter(function(S){return S.Id!=M.Id})),[h()(h()({},M),{},{Read:!0})]);I(h()(h()({},K),{},{list:j}))})}).finally(function(){ee(void 0)}))};(0,s.useEffect)(function(){I(void 0)},[P]);var re=(K==null?void 0:K.list)||[],ae=function(){return(0,_.jsx)(N.A,{isLoading:Q,variant:"light",onClick:function(){confirm("\u6E05\u7A7A\u6240\u6709\u6D88\u606F\uFF1F")&&(Y(!0),Z.x1.mall.notificationDeleteAll({}).then(function(u){(0,F._y)(u,function(){var j=h()(h()({},P),{},{Page:1});R(j)})}).finally(function(){Y(!1)}))},children:"\u6E05\u7A7A"})},se=z(re);return(0,F.G5)(se)?(0,_.jsx)(v.Z,{}):(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(x.Z,{children:(0,_.jsxs)("div",{className:"container max-w-lg",children:[(0,_.jsx)("div",{className:"mb-1 flex flex-row items-center justify-end",children:ae()}),(0,_.jsx)(G.X,{variant:"light",disabledKeys:q?[q]:void 0,children:se.map(function(W,M){return(0,_.jsx)(X.y,{title:W.key,showDivider:!0,children:W.items.map(function(u,j){return(0,_.jsxs)(w.R,{startContent:(0,_.jsx)(O.C,{icon:(0,_.jsx)(V.Z,{stroke:1}),style:{backgroundColor:"green"}}),description:u.Content,endContent:(0,L.Gl)(u.CreationTime),onClick:function(){ne(u)},children:[u.Read&&(0,_.jsx)("span",{children:u.Title}),u.Read||(0,_.jsx)("b",{children:u.Title})]},u.Id||j)})},M)})}),(0,_.jsx)(p.Z,{loading:i||D,hasMore:!T})]})})})}},68770:function(b,g,e){e.d(g,{Z:function(){return O}});var t=e(97582),d=e(67294),c=e(83204),f=e(22638),U=e(68421),h=e(77598),y=e(48002),l=function(r){return r===document||r===document.documentElement||r===document.body?Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop):r.scrollTop},n=function(r){return r.scrollHeight||Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)},o=function(r){return r.clientHeight||Math.max(document.documentElement.clientHeight,document.body.clientHeight)},m=function(r,a){a===void 0&&(a={});var s=a.target,v=a.isNoMore,p=a.threshold,x=p===void 0?100:p,Z=a.reloadDeps,L=Z===void 0?[]:Z,F=a.manual,N=a.onBefore,G=a.onSuccess,X=a.onError,w=a.onFinally,V=(0,t.__read)((0,d.useState)(),2),_=V[0],z=V[1],k=(0,t.__read)((0,d.useState)(!1),2),$=k[0],A=k[1],P=(0,d.useMemo)(function(){return v?v(_):!1},[_]),R=(0,U.Z)(function(i){return(0,t.__awaiter)(void 0,void 0,void 0,function(){var D,T,I;return(0,t.__generator)(this,function(ne){switch(ne.label){case 0:return[4,r(i)];case 1:return D=ne.sent(),z(i?(0,t.__assign)((0,t.__assign)({},D),{list:(0,t.__spreadArray)((0,t.__spreadArray)([],(0,t.__read)((I=i.list)!==null&&I!==void 0?I:[]),!1),(0,t.__read)(D.list),!1)}):(0,t.__assign)((0,t.__assign)({},D),{list:(0,t.__spreadArray)([],(0,t.__read)((T=D.list)!==null&&T!==void 0?T:[]),!1)})),[2,D]}})})},{manual:F,onFinally:function(i,D,T){A(!1),w==null||w(D,T)},onBefore:function(){return N==null?void 0:N()},onSuccess:function(i){setTimeout(function(){K()}),G==null||G(i)},onError:function(i){return X==null?void 0:X(i)}}),C=R.loading,E=R.error,Q=R.run,Y=R.runAsync,te=R.cancel,J=(0,f.Z)(function(){P||(A(!0),Q(_))}),q=(0,f.Z)(function(){return P?Promise.reject():(A(!0),Y(_))}),ee=function(){return A(!1),Q()},B=function(){return A(!1),Y()},K=function(){var i=(0,y.n)(s);if(i){i=i===document?document.documentElement:i;var D=l(i),T=n(i),I=o(i);T-D<=I+x&&J()}};return(0,c.Z)("scroll",function(){C||$||K()},{target:s}),(0,h.Z)(function(){Q()},(0,t.__spreadArray)([],(0,t.__read)(L),!1)),{data:_,loading:!$&&C,error:E,loadingMore:$,noMore:P,loadMore:J,loadMoreAsync:q,reload:(0,f.Z)(ee),reloadAsync:(0,f.Z)(B),mutate:z,cancel:te}},O=m},57838:function(b,g,e){e.d(g,{Z:function(){return d}});var t=e(67294);function d(){const[,c]=t.useReducer(f=>f+1,0);return c}},74443:function(b,g,e){e.d(g,{ZP:function(){return h},c4:function(){return c},m9:function(){return y}});var t=e(67294),d=e(29691);const c=["xxl","xl","lg","md","sm","xs"],f=l=>({xs:`(max-width: ${l.screenXSMax}px)`,sm:`(min-width: ${l.screenSM}px)`,md:`(min-width: ${l.screenMD}px)`,lg:`(min-width: ${l.screenLG}px)`,xl:`(min-width: ${l.screenXL}px)`,xxl:`(min-width: ${l.screenXXL}px)`}),U=l=>{const n=l,o=[].concat(c).reverse();return o.forEach((m,O)=>{const r=m.toUpperCase(),a=`screen${r}Min`,s=`screen${r}`;if(!(n[a]<=n[s]))throw new Error(`${a}<=${s} fails : !(${n[a]}<=${n[s]})`);if(O<o.length-1){const v=`screen${r}Max`;if(!(n[s]<=n[v]))throw new Error(`${s}<=${v} fails : !(${n[s]}<=${n[v]})`);const x=`screen${o[O+1].toUpperCase()}Min`;if(!(n[v]<=n[x]))throw new Error(`${v}<=${x} fails : !(${n[v]}<=${n[x]})`)}}),l};function h(){const[,l]=(0,d.ZP)(),n=f(U(l));return t.useMemo(()=>{const o=new Map;let m=-1,O={};return{matchHandlers:{},dispatch(r){return O=r,o.forEach(a=>a(O)),o.size>=1},subscribe(r){return o.size||this.register(),m+=1,o.set(m,r),r(O),m},unsubscribe(r){o.delete(r),o.size||this.unregister()},unregister(){Object.keys(n).forEach(r=>{const a=n[r],s=this.matchHandlers[a];s==null||s.mql.removeListener(s==null?void 0:s.listener)}),o.clear()},register(){Object.keys(n).forEach(r=>{const a=n[r],s=p=>{let{matches:x}=p;this.dispatch(Object.assign(Object.assign({},O),{[r]:x}))},v=window.matchMedia(a);v.addListener(s),this.matchHandlers[a]={mql:v,listener:s},s(v)})},responsiveMap:n}},[l])}const y=(l,n)=>{if(n&&typeof n=="object")for(let o=0;o<c.length;o++){const m=c[o];if(l[m]&&n[m]!==void 0)return n[m]}}},25378:function(b,g,e){var t=e(67294),d=e(8410),c=e(57838),f=e(74443);function U(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const y=(0,t.useRef)({}),l=(0,c.Z)(),n=(0,f.ZP)();return(0,d.Z)(()=>{const o=n.subscribe(m=>{y.current=m,h&&l()});return()=>n.unsubscribe(o)},[]),y.current}g.Z=U},54666:function(b,g,e){e.d(g,{Z:function(){return d}});var t=e(33733);var d=(0,t.Z)("outline","message","IconMessage",[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]])}}]);
