"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7084],{24731:function(T,n,e){e.r(n);var E=e(27424),m=e.n(E),v=e(38018),o=e(67294),g=e(21274),D=e(30967),r=e(47650),t=e(42838),a=e(85893);n.default=function(){var M=(0,o.useState)(!1),u=m()(M,2),h=u[0],i=u[1],c=(0,r.TH)(),O=function(_){i(!0);var d="usewechatprofile",P=localStorage.getItem(d)=="true";localStorage.removeItem(d),D.x1.platform.wechatMpAuthWxMpOAuthCodeLogin({Code:_,UseWechatProfile:P}).then(function(s){if(s.data.Error)return(0,t.Ti)(s.data.Error.Message||"\u64CD\u4F5C\u672A\u80FD\u5982\u671F\u5B8C\u6210"),!1;var A=s.data.Data||{},f=A.AccessToken;if((0,t.Wq)(f)){(0,t.Ti)("\u65E0\u6CD5\u83B7\u53D6token");return}else{(0,t.M8)(f),(0,t.cQ)("\u767B\u5F55\u6210\u529F\uFF0C\u5373\u5C06\u8DF3\u8F6C");var C=localStorage.getItem("login_next")||"/";setTimeout(function(){window.location.href=C},500)}return!0}).finally(function(){i(!1)})};return(0,o.useEffect)(function(){var l;console.log(c);var _=(l=v.parse(c.search))===null||l===void 0?void 0:l.code;(0,t.Wq)(_)?r.m8.push({pathname:"/"}):O(_)},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"container max-w-lg",children:[h&&(0,a.jsx)(g.Z,{}),(0,a.jsx)("div",{className:"flex flex-row items-center justify-center py-5",children:(0,a.jsx)("h5",{className:"text-lg",children:"\u767B\u5F55\u4E2D..."})})]})})}}}]);
