"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7084],{24731:function(h,o,e){e.r(o);var m=e(27424),i=e.n(m),E=e(38018),t=e(67294),f=e(21274),D=e(30967),u=e(47650),n=e(42838),s=e(85893);o.default=function(){var g=(0,t.useState)(!1),c=i()(g,2),a=c[0],r=c[1],l=(0,u.TH)(),M=function(d){r(!0);var O="usewechatprofile",C=localStorage.getItem(O)=="true";localStorage.removeItem(O),D.x1.platform.wechatMpAuthWxMpOAuthCodeLogin({Code:d,UseWechatProfile:C}).then(function(v){if(v.data.Error)return(0,n.Ti)(v.data.Error.Message||"\u64CD\u4F5C\u672A\u80FD\u5982\u671F\u5B8C\u6210"),!1;var A=v.data.Data||{},P=A.AccessToken;if((0,n.Wq)(P)){(0,n.Ti)("\u65E0\u6CD5\u83B7\u53D6token");return}else{(0,n.M8)(P),(0,n.cQ)("\u767B\u5F55\u6210\u529F\uFF0C\u5373\u5C06\u8DF3\u8F6C");var U=localStorage.getItem("login_next")||"/";setTimeout(function(){window.location.href=U},500)}return!0}).finally(function(){r(!1)})};return(0,t.useEffect)(function(){var _;console.log(l);var d=(_=E.parse(l.search))===null||_===void 0?void 0:_.code;(0,n.Wq)(d)?u.m8.push({pathname:"/"}):M(d)},[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"container max-w-lg",children:[a&&(0,s.jsx)(f.Z,{}),(0,s.jsx)("div",{className:"flex flex-row items-center justify-center py-5",children:(0,s.jsx)("h5",{className:"text-lg",children:"\u767B\u5F55\u4E2D..."})})]})})}},30967:function(h,o,e){e.d(o,{HK:function(){return c},c2:function(){return g},x1:function(){return s}});var m=e(17061),i=e.n(m),E=e(42122),t=e.n(E),f=e(17156),D=e.n(f),u=e(76857),n=e(60379),s=function(){var a=new n.V0;return a.instance=u.M,a}(),g=function(){var a=new n.V0;return a.instance=u.M,a}(),c=function(){var a=D()(i()().mark(function r(l){return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(l){_.next=2;break}return _.abrupt("return");case 2:return _.next=4,s.mall.commonSaveActivityLog(t()(t()({},l),{},{Id:void 0}));case 4:return _.abrupt("return",_.sent);case 5:case"end":return _.stop()}},r)}));return function(l){return a.apply(this,arguments)}}()}}]);
