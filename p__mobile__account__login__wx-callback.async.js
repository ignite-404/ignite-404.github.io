"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7084],{24731:function(j,r,_){_.r(r);var c=_(5574),i=_.n(c),E=_(38018),u=_(67294),f=_(21274),D=_(30967),t=_(47650),s=_(42838),n=_(85893);r.default=function(){var g=(0,u.useState)(!1),d=i()(g,2),a=d[0],o=d[1],l=(0,t.TH)(),M=function(m){o(!0);var O="usewechatprofile",h=localStorage.getItem(O)=="true";localStorage.removeItem(O),D.x1.platform.wechatMpAuthWxMpOAuthCodeLogin({Code:m,UseWechatProfile:h}).then(function(v){if(v.data.Error)return(0,s.Ti)(v.data.Error.Message||"\u64CD\u4F5C\u672A\u80FD\u5982\u671F\u5B8C\u6210"),!1;var p=v.data.Data||{},P=p.AccessToken;if((0,s.Wq)(P)){(0,s.Ti)("\u65E0\u6CD5\u83B7\u53D6token");return}else{(0,s.M8)(P),(0,s.cQ)("\u767B\u5F55\u6210\u529F\uFF0C\u5373\u5C06\u8DF3\u8F6C");var A=localStorage.getItem("login_next")||"/";setTimeout(function(){window.location.href=A},500)}return!0}).finally(function(){o(!1)})};return(0,u.useEffect)(function(){var e;console.log(l);var m=(e=E.parse(l.search))===null||e===void 0?void 0:e.code;(0,s.Wq)(m)?t.m8.push({pathname:"/"}):M(m)},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"container max-w-lg",children:[a&&(0,n.jsx)(f.Z,{}),(0,n.jsx)("div",{className:"flex flex-row items-center justify-center py-5",children:(0,n.jsx)("h5",{className:"text-lg",children:"\u767B\u5F55\u4E2D..."})})]})})}},30967:function(j,r,_){_.d(r,{HK:function(){return d},c2:function(){return g},x1:function(){return n}});var c=_(15009),i=_.n(c),E=_(97857),u=_.n(E),f=_(99289),D=_.n(f),t=_(76857),s=_(60379),n=function(){var a=new s.V0;return a.instance=t.M,a}(),g=function(){var a=new s.V0;return a.instance=t.M,a}(),d=function(){var a=D()(i()().mark(function o(l){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.mall.commonSaveActivityLog(u()(u()({},l),{},{Id:void 0}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},o)}));return function(l){return a.apply(this,arguments)}}()}}]);
