"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7084],{24731:function(x,n,e){e.r(n);var f=e(5574),E=e.n(f),v=e(38018),o=e(67294),g=e(21274),D=e(30699),u=e(47650),_=e(66419),t=e(85893);n.default=function(){var M=(0,o.useState)(!1),r=E()(M,2),h=r[0],i=r[1],c=(0,u.TH)(),O=function(s){i(!0);var d="usewechatprofile",P=localStorage.getItem(d)=="true";localStorage.removeItem(d),D.x1.platform.wechatMpAuthWxMpOAuthCodeLogin({Code:s,UseWechatProfile:P}).then(function(l){if(l.data.Error)return(0,_.Ti)(l.data.Error.Message||"\u64CD\u4F5C\u672A\u80FD\u5982\u671F\u5B8C\u6210"),!1;var A=l.data.Data||{},m=A.AccessToken;if((0,_.Wq)(m)){(0,_.Ti)("\u65E0\u6CD5\u83B7\u53D6token");return}else{(0,_.M8)(m),(0,_.cQ)("\u767B\u5F55\u6210\u529F\uFF0C\u5373\u5C06\u8DF3\u8F6C");var T=localStorage.getItem("login_next")||"/";setTimeout(function(){window.location.href=T},500)}return!0}).finally(function(){i(!1)})};return(0,o.useEffect)(function(){var a;console.log(c);var s=(a=v.parse(c.search))===null||a===void 0?void 0:a.code;(0,_.Wq)(s)?u.m8.push({pathname:"/"}):O(s)},[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"container max-w-lg",children:[h&&(0,t.jsx)(g.Z,{}),(0,t.jsx)("div",{className:"flex flex-row items-center justify-center py-5",children:(0,t.jsx)("h5",{className:"text-lg",children:"\u767B\u5F55\u4E2D..."})})]})})}}}]);
