"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3685],{53045:function(_,B,n){n.r(B),n.d(B,{default:function(){return w}});var f=n(27424),m=n.n(f),U=n(23806),O=n(30967),A=n(14726),Y=n(4393),H=n(80799),l=n(67294),J=n(17061),K=n.n(J),X=n(17156),L=n.n(X),k=n(42122),D=n.n(k),T=n(45360),V=n(85576),W=n(78957),G=n(57381),r=n(11346),p=n(25278),t=n(74590),a=n(42838),e=n(85893),i=function(g){var v=g.show,C=g.hide,u=g.data,j=g.ok,I=(0,l.useState)(!1),S=m()(I,2),N=S[0],y=S[1],Z=(0,l.useState)({}),R=m()(Z,2),F=R[0],E=R[1],$=function(o){y(!0),O.x1.mallManager.storeManagerPermissionSaveRole(D()({},o)).then(function(M){(0,a._y)(M,function(){T.ZP.success("\u4FDD\u5B58\u6210\u529F"),j()})}).finally(function(){y(!1)})};return(0,l.useEffect)(function(){E(D()({},u))},[u]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(V.Z,{title:"\u89D2\u8272",open:v,onCancel:function(){return C()},footer:(0,e.jsxs)(W.Z,{children:[(0,e.jsx)(t.Z,{action:L()(K()().mark(function h(){var o;return K()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,O.x1.sys.manageRoleDelete({Id:F.Id});case 2:o=d.sent,(0,a._y)(o,function(){C(),j()});case 4:case"end":return d.stop()}},h)})),hide:(0,a.Wq)(F.Id)}),(0,e.jsx)(A.ZP,{type:"primary",onClick:function(){$(F)},children:"\u4FDD\u5B58"})]}),children:(0,e.jsx)(G.Z,{spinning:N,children:(0,e.jsxs)(r.Z,{labelCol:{flex:"110px"},labelAlign:"right",wrapperCol:{flex:1},children:[(0,e.jsx)(r.Z.Item,{label:"\u540D\u79F0",rules:[{required:!0},{max:10}],children:(0,e.jsx)(p.Z,{value:F.Name||"",onChange:function(o){E(D()(D()({},F),{},{Name:o.target.value}))}})}),(0,e.jsx)(r.Z.Item,{label:"\u63CF\u8FF0",rules:[{max:50}],children:(0,e.jsx)(p.Z,{value:F.Description||"",onChange:function(o){E(D()(D()({},F),{},{Description:o.target.value}))}})})]})})})})},s=n(68994),z=n(66309),b=n(56774),Q=function(g){var v=g.model,C=g.ok,u=(0,l.useState)(!1),j=m()(u,2),I=j[0],S=j[1],N=(0,l.useState)(!1),y=m()(N,2),Z=y[0],R=y[1],F=(0,l.useState)([]),E=m()(F,2),$=E[0],h=E[1];(0,l.useEffect)(function(){h(v.PermissionKeys||[])},[v]);var o=function(c){R(!0),O.x1.mallManager.storeManagerPermissionSetRolePermissions({Key:v.Id,Value:c||[]}).then(function(x){(0,a._y)(x,function(){T.ZP.success("\u4FDD\u5B58\u6210\u529F"),S(!1),C&&C()})}).finally(function(){R(!1)})},M=function(){var c=v.PermissionKeys||[],x=s.zM.filter(function(P){return c.indexOf(P.key)>=0});return(0,e.jsx)("div",{children:x.map(function(P,q){return(0,e.jsx)(z.Z,{style:{marginRight:5,marginBottom:5},children:P.name},q)})})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{children:[(0,e.jsxs)(W.Z,{direction:"horizontal",children:[M(),(0,e.jsx)(A.ZP,{type:"link",onClick:function(){S(!0)},children:"\u4FEE\u6539"})]}),(0,e.jsx)(V.Z,{title:"\u7ED1\u5B9A\u6743\u9650",confirmLoading:Z,open:I,onCancel:function(){S(!1)},onOk:function(){o($)},children:(0,e.jsx)(b.Z,{selectedKeys:$,onChange:function(c){return h(c)},permissions:s.al})})]})})},w=function(){var g=(0,l.useState)(!0),v=m()(g,2),C=v[0],u=v[1],j=(0,l.useState)([]),I=m()(j,2),S=I[0],N=I[1],y=(0,l.useState)({Page:1}),Z=m()(y,2),R=Z[0],F=Z[1],E=(0,l.useState)(void 0),$=m()(E,2),h=$[0],o=$[1],M=function(){u(!0),O.x1.mallManager.storeManagerPermissionListRoles({}).then(function(x){(0,a._y)(x,function(){N(x.data.Data||[])})}).finally(function(){u(!1)})},d=[{title:"\u540D\u79F0",render:function(x,P){return P.Name}},{title:"\u63CF\u8FF0",render:function(x,P){return P.Description||"--"}},{title:"\u6743\u9650",render:function(x,P){return(0,e.jsx)(Q,{model:P,ok:function(){M()}})}},{title:"\u65F6\u95F4",render:function(x){return(0,e.jsx)(U.Z,{model:x})}},{title:"\u64CD\u4F5C",width:200,render:function(x,P){return(0,e.jsx)(A.ZP.Group,{children:(0,e.jsx)(A.ZP,{type:"link",onClick:function(){o(P)},children:"\u7F16\u8F91"})})}}];return(0,l.useEffect)(function(){M()},[R]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i,{show:h!=null,hide:function(){return o(void 0)},data:h||{},ok:function(){o(void 0),M()}}),(0,e.jsx)(Y.Z,{title:"\u89D2\u8272",extra:(0,e.jsx)(A.ZP,{type:"primary",onClick:function(){o({})},children:"\u65B0\u589E"}),children:(0,e.jsx)(H.Z,{loading:C,columns:d,dataSource:S,pagination:!1})})]})}},85576:function(_,B,n){n.d(B,{Z:function(){return p}});var f=n(56080),m=n(38657),U=n(56745),O=n(67294),A=n(93967),Y=n.n(A),H=n(40974),l=n(8745),J=n(53124),K=n(35792),X=n(32409),L=n(4941),k=n(71194),D=function(t,a){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&a.indexOf(i)<0&&(e[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)a.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(e[i[s]]=t[i[s]]);return e};const T=t=>{const{prefixCls:a,className:e,closeIcon:i,closable:s,type:z,title:b,children:Q,footer:w}=t,g=D(t,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:v}=O.useContext(J.E_),C=v(),u=a||v("modal"),j=(0,K.Z)(C),[I,S,N]=(0,k.ZP)(u,j),y=`${u}-confirm`;let Z={};return z?Z={closable:s!=null?s:!1,title:"",footer:"",children:O.createElement(X.O,Object.assign({},t,{prefixCls:u,confirmPrefixCls:y,rootPrefixCls:C,content:Q}))}:Z={closable:s!=null?s:!0,title:b,footer:w!==null&&O.createElement(L.$,Object.assign({},t)),children:Q},I(O.createElement(H.s,Object.assign({prefixCls:u,className:Y()(S,`${u}-pure-panel`,z&&y,z&&`${y}-${z}`,e,N,j)},g,{closeIcon:(0,L.b)(u,i),closable:s},Z)))};var V=(0,l.i)(T),W=n(94423);function G(t){return(0,f.ZP)((0,f.uW)(t))}const r=U.Z;r.useModal=W.Z,r.info=function(a){return(0,f.ZP)((0,f.cw)(a))},r.success=function(a){return(0,f.ZP)((0,f.vq)(a))},r.error=function(a){return(0,f.ZP)((0,f.AQ)(a))},r.warning=G,r.warn=G,r.confirm=function(a){return(0,f.ZP)((0,f.Au)(a))},r.destroyAll=function(){for(;m.Z.length;){const a=m.Z.pop();a&&a()}},r.config=f.ai,r._InternalPanelDoNotUseOrYouWillBeFired=V;var p=r}}]);
