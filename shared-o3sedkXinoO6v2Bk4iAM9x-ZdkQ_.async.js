(self.webpackChunk=self.webpackChunk||[]).push([[2825],{8045:function(se,k,s){"use strict";var Z=s(97857),P=s.n(Z),$=s(14726),S=s(67294),M=s(85893);k.Z=function(A){var z=A.loading,W=A.inputProps,F=A.onSelect,H=A.uploadButtonProps,U=(0,S.useRef)(null);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{style:{display:"none"},children:(0,M.jsx)("input",P()(P()({ref:U,type:"file",multiple:!1},W),{},{onChange:function(g){try{var C=g.target.files;C&&F&&F(C)}finally{U.current&&(U.current.value="",U.current.files=null)}}}))}),(0,M.jsx)($.ZP,P()(P()({size:"small",loading:z,type:"dashed"},H),{},{onClick:function(){var g;(g=U.current)===null||g===void 0||g.click()},children:"\u9009\u62E9\u56FE\u7247"}))]})}},6786:function(se,k,s){"use strict";var Z=s(15009),P=s.n(Z),$=s(99289),S=s.n($),M=s(97857),A=s.n(M),z=s(98163),W=s(45360),F=s(14726),H=s(78957),U=s(85134),V=s(55932),g=s(55793),C=s(42838),Q=s(8045),B=s(68421),d=s(85893);k.Z=function(u){var b=u.data,h=u.ok,j=u.remove,f=u.loadingSave,R=u.width,X=u.defaultImage,m=u.imageProps,_e=u.uploadButtonProps,ue=u.removeButtonProps,G=(0,V.Kk)(b,{width:R||100}),ce=function(){var K=G||X;return(0,C.Wq)(K)?null:(0,d.jsx)(z.Z,A()({src:K||"",alt:"",width:R||50},m))},fe=function(){var I=S()(P()().mark(function K(L){var ee;return P()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(0,g.Or)(L.name)){e.next=4;break}return W.ZP.error("\u53EA\u652F\u6301 ".concat((0,g.MU)().join("\u3001")," \u683C\u5F0F\u7684\u56FE\u7247")),e.abrupt("return");case 4:return e.next=6,(0,g.yE)(L,U.v.upload.maxSize);case 6:if(L=e.sent,!(L.size>U.v.upload.maxSize)){e.next=10;break}return W.ZP.error("\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC71MB"),e.abrupt("return");case 10:return e.next=12,(0,g.ku)(L);case 12:ee=e.sent,ee&&h&&h(ee),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0),W.ZP.error("\u4E0A\u4F20\u9047\u5230\u9519\u8BEF");case 20:case"end":return e.stop()}},K,null,[[0,16]])}));return function(L){return I.apply(this,arguments)}}(),le=(0,B.Z)(fe,{manual:!0}),q=function(){return(0,C.Wq)(G)||!j?null:(0,d.jsx)(F.ZP,A()(A()({size:"small",type:"dashed",danger:!0,onClick:function(){confirm("\u5220\u9664\uFF1F")&&j&&j()}},ue),{},{children:"\u79FB\u9664\u56FE\u7247"}))};return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(H.Z,{direction:"horizontal",children:[ce(),(0,d.jsxs)(H.Z,{direction:"vertical",children:[(0,d.jsx)(Q.Z,{loading:f||le.loading,inputProps:{accept:"image/*",multiple:!1},onSelect:function(K){var L=K.item(0);L&&le.run(L)},uploadButtonProps:_e}),q()]})]})})}},55793:function(se,k,s){"use strict";s.d(k,{MU:function(){return F},Or:function(){return H},jP:function(){return Q},ku:function(){return g},yE:function(){return V}});var Z=s(15009),P=s.n(Z),$=s(99289),S=s.n($),M=s(76857),A=s(42838),z=s(98005),W=s.n(z),F=function(){return["jpg","jpeg","png","gif"]},H=function(d){var u,b=((u=(0,A.mD)(d))===null||u===void 0?void 0:u.toLowerCase())||"";return F().indexOf(b)>=0},U=function(d,u,b,h){return new Promise(function(j,f){var R=new(W())(d,{maxHeight:u,maxWidth:b,quality:h,success:function(m){j(m)},error:function(m){f(m)}});console.log(R)})},V=function(){var B=S()(P()().mark(function d(u,b){var h,j,f,R;return P()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!(u.size<=b)){m.next=2;break}return m.abrupt("return",u);case 2:return m.next=4,U(u,void 0,void 0,.9);case 4:if(u=m.sent,!(u.size<=b)){m.next=7;break}return m.abrupt("return",u);case 7:h=5,j=300,f=1e3,R=0;case 11:if(!(++R<=h)){m.next=22;break}return m.next=14,U(u,f,f,1);case 14:if(u=m.sent,!(u.size<=b)){m.next=17;break}return m.abrupt("return",u);case 17:if(f-=j,!(f<=0)){m.next=20;break}return m.abrupt("break",22);case 20:m.next=11;break;case 22:return m.abrupt("return",u);case 23:case"end":return m.stop()}},d)}));return function(u,b){return B.apply(this,arguments)}}(),g=function(){var B=S()(P()().mark(function d(u){var b,h;return P()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,C([u]);case 2:if(b=f.sent,h=b.at(0),h){f.next=6;break}throw new Error("response error");case 6:return f.abrupt("return",h);case 7:case"end":return f.stop()}},d)}));return function(u){return B.apply(this,arguments)}}(),C=function(){var B=S()(P()().mark(function d(u){var b,h;return P()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return b=new FormData,u.forEach(function(R,X){b.append("formFileCollection",R,R.name)}),f.next=4,M.M.post("/api/platform/storage/upload",b);case 4:if(h=f.sent,!h.data.Error){f.next=7;break}throw new Error(h.data.Error.Message||"upload error");case 7:return f.abrupt("return",h.data.Data||[]);case 8:case"end":return f.stop()}},d)}));return function(u){return B.apply(this,arguments)}}(),Q=function(d){return new Promise(function(u,b){var h=new FileReader;h.onload=function(){u(h.result)},h.onerror=function(j){b(j)},h.readAsDataURL(d)})}},98005:function(se){(function(k,s){se.exports=s()})(this,function(){"use strict";function k(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);e&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),r.push.apply(r,t)}return r}function s(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?k(Object(r),!0).forEach(function(t){S(a,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(r,t))})}return a}function Z(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function P(a,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,z(t.key),t)}}function $(a,e,r){return e&&P(a.prototype,e),r&&P(a,r),Object.defineProperty(a,"prototype",{writable:!1}),a}function S(a,e,r){return e=z(e),e in a?Object.defineProperty(a,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[e]=r,a}function M(){return M=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(a[t]=r[t])}return a},M.apply(this,arguments)}function A(a,e){if(typeof a!="object"||a===null)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var t=r.call(a,e||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function z(a){var e=A(a,"string");return typeof e=="symbol"?e:String(e)}var W={exports:{}};(function(a){typeof window!="undefined"&&function(e){var r=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,t=e.Blob&&function(){try{return!!new Blob}catch(l){return!1}}(),n=t&&e.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch(l){return!1}}(),i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,v=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,c=(t||i)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(l){var _,p,E,T,y,o,x,D,N;if(_=l.match(v),!_)throw new Error("invalid data URI");for(p=_[2]?_[1]:"text/plain"+(_[3]||";charset=US-ASCII"),E=!!_[4],T=l.slice(_[0].length),E?y=atob(T):y=decodeURIComponent(T),o=new ArrayBuffer(y.length),x=new Uint8Array(o),D=0;D<y.length;D+=1)x[D]=y.charCodeAt(D);return t?new Blob([n?x:o],{type:p}):(N=new i,N.append(o),N.getBlob(p))};e.HTMLCanvasElement&&!r.toBlob&&(r.mozGetAsFile?r.toBlob=function(l,_,p){var E=this;setTimeout(function(){p&&r.toDataURL&&c?l(c(E.toDataURL(_,p))):l(E.mozGetAsFile("blob",_))})}:r.toDataURL&&c&&(r.msToBlob?r.toBlob=function(l,_,p){var E=this;setTimeout(function(){(_&&_!=="image/png"||p)&&r.toDataURL&&c?l(c(E.toDataURL(_,p))):l(E.msToBlob(_))})}:r.toBlob=function(l,_,p){var E=this;setTimeout(function(){l(c(E.toDataURL(_,p)))})})),a.exports?a.exports=c:e.dataURLtoBlob=c}(window)})(W);var F=W.exports,H=function(e){return typeof Blob=="undefined"?!1:e instanceof Blob||Object.prototype.toString.call(e)==="[object Blob]"},U={strict:!0,checkOrientation:!0,retainExif:!1,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},V=typeof window!="undefined"&&typeof window.document!="undefined",g=V?window:{},C=function(e){return e>0&&e<1/0},Q=Array.prototype.slice;function B(a){return Array.from?Array.from(a):Q.call(a)}var d=/^image\/.+$/;function u(a){return d.test(a)}function b(a){var e=u(a)?a.substr(6):"";return e==="jpeg"&&(e="jpg"),".".concat(e)}var h=String.fromCharCode;function j(a,e,r){var t="",n;for(r+=e,n=e;n<r;n+=1)t+=h(a.getUint8(n));return t}var f=g.btoa;function R(a,e){for(var r=[],t=8192,n=new Uint8Array(a);n.length>0;)r.push(h.apply(null,B(n.subarray(0,t)))),n=n.subarray(t);return"data:".concat(e,";base64,").concat(f(r.join("")))}function X(a){var e=new DataView(a),r;try{var t,n,i;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var v=e.byteLength,c=2;c+1<v;){if(e.getUint8(c)===255&&e.getUint8(c+1)===225){n=c;break}c+=1}if(n){var l=n+4,_=n+10;if(j(e,l,4)==="Exif"){var p=e.getUint16(_);if(t=p===18761,(t||p===19789)&&e.getUint16(_+2,t)===42){var E=e.getUint32(_+4,t);E>=8&&(i=_+E)}}}if(i){var T=e.getUint16(i,t),y,o;for(o=0;o<T;o+=1)if(y=i+o*12+2,e.getUint16(y,t)===274){y+=8,r=e.getUint16(y,t),e.setUint16(y,1,t);break}}}catch(x){r=1}return r}function m(a){var e=0,r=1,t=1;switch(a){case 2:r=-1;break;case 3:e=-180;break;case 4:t=-1;break;case 5:e=90,t=-1;break;case 6:e=90;break;case 7:e=90,r=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:r,scaleY:t}}var _e=/\.\d*(?:0|9){12}\d*$/;function ue(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return _e.test(a)?Math.round(a*e)/e:a}function G(a){var e=a.aspectRatio,r=a.height,t=a.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",i=C(t),v=C(r);if(i&&v){var c=r*e;(n==="contain"||n==="none")&&c>t||n==="cover"&&c<t?r=t/e:t=r*e}else i?r=t/e:v&&(t=r*e);return{width:t,height:r}}function ce(a){for(var e=B(new Uint8Array(a)),r=e.length,t=[],n=0;n+3<r;){var i=e[n],v=e[n+1];if(i===255&&v===218)break;if(i===255&&v===216)n+=2;else{var c=e[n+2]*256+e[n+3],l=n+c+2,_=e.slice(n,l);t.push(_),n=l}}return t.reduce(function(p,E){return E[0]===255&&E[1]===225?p.concat(E):p},[])}function fe(a,e){var r=B(new Uint8Array(a));if(r[2]!==255||r[3]!==224)return a;var t=r[4]*256+r[5],n=[255,216].concat(e,r.slice(4+t));return new Uint8Array(n)}var le=g.ArrayBuffer,q=g.FileReader,I=g.URL||g.webkitURL,K=/\.\w+$/,L=g.Compressor,ee=function(){function a(e,r){Z(this,a),this.file=e,this.exif=[],this.image=new Image,this.options=s(s({},U),r),this.aborted=!1,this.result=null,this.init()}return $(a,[{key:"init",value:function(){var r=this,t=this.file,n=this.options;if(!H(t)){this.fail(new Error("The first argument must be a File or Blob object."));return}var i=t.type;if(!u(i)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!I||!q){this.fail(new Error("The current browser does not support image compression."));return}le||(n.checkOrientation=!1,n.retainExif=!1);var v=i==="image/jpeg",c=v&&n.checkOrientation,l=v&&n.retainExif;if(I&&!c&&!l)this.load({url:I.createObjectURL(t)});else{var _=new q;this.reader=_,_.onload=function(p){var E=p.target,T=E.result,y={},o=1;c&&(o=X(T),o>1&&M(y,m(o))),l&&(r.exif=ce(T)),c||l?!I||o>1?y.url=R(T,i):y.url=I.createObjectURL(t):y.url=T,r.load(y)},_.onabort=function(){r.fail(new Error("Aborted to read the image with FileReader."))},_.onerror=function(){r.fail(new Error("Failed to read the image with FileReader."))},_.onloadend=function(){r.reader=null},c||l?_.readAsArrayBuffer(t):_.readAsDataURL(t)}}},{key:"load",value:function(r){var t=this,n=this.file,i=this.image;i.onload=function(){t.draw(s(s({},r),{},{naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight}))},i.onabort=function(){t.fail(new Error("Aborted to load the image."))},i.onerror=function(){t.fail(new Error("Failed to load the image."))},g.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(g.navigator.userAgent)&&(i.crossOrigin="anonymous"),i.alt=n.name,i.src=r.url}},{key:"draw",value:function(r){var t=this,n=r.naturalWidth,i=r.naturalHeight,v=r.rotate,c=v===void 0?0:v,l=r.scaleX,_=l===void 0?1:l,p=r.scaleY,E=p===void 0?1:p,T=this.file,y=this.image,o=this.options,x=document.createElement("canvas"),D=x.getContext("2d"),N=Math.abs(c)%180===90,me=(o.resize==="contain"||o.resize==="cover")&&C(o.width)&&C(o.height),re=Math.max(o.maxWidth,0)||1/0,te=Math.max(o.maxHeight,0)||1/0,ae=Math.max(o.minWidth,0)||0,ne=Math.max(o.minHeight,0)||0,Y=n/i,O=o.width,w=o.height;if(N){var ge=[te,re];re=ge[0],te=ge[1];var be=[ne,ae];ae=be[0],ne=be[1];var Ee=[w,O];O=Ee[0],w=Ee[1]}me&&(Y=O/w);var ye=G({aspectRatio:Y,width:re,height:te},"contain");re=ye.width,te=ye.height;var Pe=G({aspectRatio:Y,width:ae,height:ne},"cover");if(ae=Pe.width,ne=Pe.height,me){var De=G({aspectRatio:Y,width:O,height:w},o.resize);O=De.width,w=De.height}else{var Oe=G({aspectRatio:Y,width:O,height:w}),we=Oe.width;O=we===void 0?n:we;var Be=Oe.height;w=Be===void 0?i:Be}O=Math.floor(ue(Math.min(Math.max(O,ae),re))),w=Math.floor(ue(Math.min(Math.max(w,ne),te)));var Le=-O/2,We=-w/2,Fe=O,Ke=w,de=[];if(me){var Me=0,Ue=0,he=n,ve=i,je=G({aspectRatio:Y,width:n,height:i},{contain:"cover",cover:"contain"}[o.resize]);he=je.width,ve=je.height,Me=(n-he)/2,Ue=(i-ve)/2,de.push(Me,Ue,he,ve)}if(de.push(Le,We,Fe,Ke),N){var Re=[w,O];O=Re[0],w=Re[1]}x.width=O,x.height=w,u(o.mimeType)||(o.mimeType=T.type);var Te="transparent";T.size>o.convertSize&&o.convertTypes.indexOf(o.mimeType)>=0&&(o.mimeType="image/jpeg");var xe=o.mimeType==="image/jpeg";if(xe&&(Te="#fff"),D.fillStyle=Te,D.fillRect(0,0,O,w),o.beforeDraw&&o.beforeDraw.call(this,D,x),!this.aborted&&(D.save(),D.translate(O/2,w/2),D.rotate(c*Math.PI/180),D.scale(_,E),D.drawImage.apply(D,[y].concat(de)),D.restore(),o.drew&&o.drew.call(this,D,x),!this.aborted)){var Ae=function(ie){if(!t.aborted){var Ce=function(oe){return t.done({naturalWidth:n,naturalHeight:i,result:oe})};if(ie&&xe&&o.retainExif&&t.exif&&t.exif.length>0){var Ie=function(oe){return Ce(F(R(fe(oe,t.exif),o.mimeType)))};if(ie.arrayBuffer)ie.arrayBuffer().then(Ie).catch(function(){t.fail(new Error("Failed to read the compressed image with Blob.arrayBuffer()."))});else{var J=new q;t.reader=J,J.onload=function(pe){var oe=pe.target;Ie(oe.result)},J.onabort=function(){t.fail(new Error("Aborted to read the compressed image with FileReader."))},J.onerror=function(){t.fail(new Error("Failed to read the compressed image with FileReader."))},J.onloadend=function(){t.reader=null},J.readAsArrayBuffer(ie)}}else Ce(ie)}};x.toBlob?x.toBlob(Ae,o.mimeType,o.quality):Ae(F(x.toDataURL(o.mimeType,o.quality)))}}},{key:"done",value:function(r){var t=r.naturalWidth,n=r.naturalHeight,i=r.result,v=this.file,c=this.image,l=this.options;if(I&&c.src.indexOf("blob:")===0&&I.revokeObjectURL(c.src),i)if(l.strict&&!l.retainExif&&i.size>v.size&&l.mimeType===v.type&&!(l.width>t||l.height>n||l.minWidth>t||l.minHeight>n||l.maxWidth<t||l.maxHeight<n))i=v;else{var _=new Date;i.lastModified=_.getTime(),i.lastModifiedDate=_,i.name=v.name,i.name&&i.type!==v.type&&(i.name=i.name.replace(K,b(i.type)))}else i=v;this.result=i,l.success&&l.success.call(this,i)}},{key:"fail",value:function(r){var t=this.options;if(t.error)t.error.call(this,r);else throw r}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=L,a}},{key:"setDefaults",value:function(r){M(U,r)}}]),a}();return ee})}}]);
