"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3685],{74590:function(k,F,n){var l=n(15009),i=n.n(l),g=n(99289),s=n.n(g),u=n(5574),E=n.n(u),Z=n(83062),C=n(28036),H=n(67294),$=n(85893);F.Z=function(y){var W=y.action,j=y.confirmText,b=y.hide,B=(0,H.useState)(!1),P=E()(B,2),A=P[0],L=P[1],h=j||"\u786E\u5B9A\u5220\u9664\uFF1F",Y=function(){var f=s()(i()().mark(function m(){return i()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(confirm(h)){v.next=2;break}return v.abrupt("return");case 2:return L(!0),v.prev=3,v.next=6,W();case 6:return v.prev=6,L(!1),v.finish(6);case 9:case"end":return v.stop()}},m,null,[[3,,6,9]])}));return function(){return f.apply(this,arguments)}}();return b?null:(0,$.jsx)($.Fragment,{children:(0,$.jsx)(Z.Z,{title:h,children:(0,$.jsx)(C.ZP,{loading:A,danger:!0,type:"link",onClick:function(){Y()},children:"\u5220\u9664"})})})}},23806:function(k,F,n){var l=n(1288),i=n(85893);F.Z=function(g){var s=g.model,u=g.fallback;if(s==null||s==null)return null;var E=s==null?void 0:s.CreationTime,Z=s==null?void 0:s.LastModificationTime;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{style:{},children:[(0,i.jsx)("div",{children:(0,i.jsx)(l.Z,{prefix:(0,i.jsx)("span",{children:"\u521B\u5EFA\uFF1A"}),onlyDate:!0,timeStr:E,fallback:u})}),(0,i.jsx)("div",{children:(0,i.jsx)(l.Z,{prefix:(0,i.jsx)("span",{children:"\u4FEE\u6539\uFF1A"}),onlyDate:!0,timeStr:Z,fallback:u})})]})})}},1288:function(k,F,n){var l=n(78957),i=n(83062),g=n(46629),s=n(85893);F.Z=function(u){var E,Z=u.timeStr,C=u.fallback,H=u.onlyDate,$=u.prefix,y=(E=(0,g.QW)(Z))===null||E===void 0?void 0:E.local();if(!y)return C||null;var W=(0,g.ND)().utc().local(),j=y.isSame(W,"year"),b=y.diff(W,"day"),B=j?y.format(g.AK):y.format(g.vc),P=function(){return(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.Z,{direction:"horizontal",children:[(0,s.jsx)("div",{children:y.fromNow()}),(0,s.jsx)("div",{children:y.format(g.On)})]}),(0,s.jsx)("div",{children:y.format(g.t9)})]})};return(0,s.jsx)(i.Z,{title:P(),children:(0,s.jsxs)(l.Z,{direction:"horizontal",children:[$,(0,s.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:H?y.format(g.vc):y.format(g.dq)})]})})}},70635:function(k,F,n){var l=n(19632),i=n.n(l),g=n(84567),s=n(4393),u=n(85893);F.Z=function(E){var Z=E.selectedKeys,C=E.onChange,H=E.permissions,$=function(j){return(0,u.jsx)(g.Z,{checked:Z.indexOf(j.key)>=0,onChange:function(B){var P=Z.filter(function(A){return A!=j.key});B.target.checked&&P.push(j.key),C(P)},children:j.name})},y=function(j){var b=j.permissions.every(function(B){return Z.indexOf(B.key)>=0});return(0,u.jsx)(s.Z,{size:"small",title:j.name,style:{marginBottom:10},extra:(0,u.jsx)(g.Z,{checked:b,onChange:function(P){var A=j.permissions.map(function(h){return h.key}),L=Z.filter(function(h){return A.indexOf(h)<0});P.target.checked&&(L=[].concat(i()(L),i()(A))),C(L)},children:"\u5168\u9009"}),children:j.permissions.map(function(B,P){return(0,u.jsx)("span",{style:{marginRight:10,marginBottom:10},children:$(B)},P)})})};return(0,u.jsx)("div",{style:{},children:H.map(function(W,j){return(0,u.jsx)("div",{children:y(W)},j)})})}},53045:function(k,F,n){n.r(F),n.d(F,{default:function(){return te}});var l=n(5574),i=n.n(l),g=n(23806),s=n(30699),u=n(28036),E=n(4393),Z=n(80799),C=n(67294),H=n(15009),$=n.n(H),y=n(99289),W=n.n(y),j=n(97857),b=n.n(j),B=n(45360),P=n(85576),A=n(78957),L=n(57381),h=n(11346),Y=n(65233),f=n(74590),m=n(95813),o=n(85893),v=function(K){var N=K.show,e=K.hide,r=K.data,c=K.ok,t=(0,C.useState)(!1),a=i()(t,2),D=a[0],d=a[1],_=(0,C.useState)({}),R=i()(_,2),U=R[0],M=R[1],z=function(S){d(!0),s.x1.mallManager.storeManagerPermissionSaveRole(b()({},S)).then(function(G){(0,m._y)(G,function(){B.ZP.success("\u4FDD\u5B58\u6210\u529F"),c()})}).finally(function(){d(!1)})};return(0,C.useEffect)(function(){M(b()({},r))},[r]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(P.Z,{title:"\u89D2\u8272",open:N,onCancel:function(){return e()},footer:(0,o.jsxs)(A.Z,{children:[(0,o.jsx)(f.Z,{action:W()($()().mark(function p(){var S;return $()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,s.x1.sys.manageRoleDelete({Id:U.Id});case 2:S=x.sent,(0,m._y)(S,function(){e(),c()});case 4:case"end":return x.stop()}},p)})),hide:(0,m.Wq)(U.Id)}),(0,o.jsx)(u.ZP,{type:"primary",onClick:function(){z(U)},children:"\u4FDD\u5B58"})]}),children:(0,o.jsx)(L.Z,{spinning:D,children:(0,o.jsxs)(h.Z,{labelCol:{flex:"110px"},labelAlign:"right",wrapperCol:{flex:1},children:[(0,o.jsx)(h.Z.Item,{label:"\u540D\u79F0",rules:[{required:!0},{max:10}],children:(0,o.jsx)(Y.Z,{value:U.Name||"",onChange:function(S){M(b()(b()({},U),{},{Name:S.target.value}))}})}),(0,o.jsx)(h.Z.Item,{label:"\u63CF\u8FF0",rules:[{max:50}],children:(0,o.jsx)(Y.Z,{value:U.Description||"",onChange:function(S){M(b()(b()({},U),{},{Description:S.target.value}))}})})]})})})})},O=n(35291),X=n(66309),ne=n(70635),w=function(K){var N=K.model,e=K.ok,r=(0,C.useState)(!1),c=i()(r,2),t=c[0],a=c[1],D=(0,C.useState)(!1),d=i()(D,2),_=d[0],R=d[1],U=(0,C.useState)([]),M=i()(U,2),z=M[0],p=M[1];(0,C.useEffect)(function(){p(N.PermissionKeys||[])},[N]);var S=function(T){R(!0),s.x1.mallManager.storeManagerPermissionSetRolePermissions({Key:N.Id,Value:T||[]}).then(function(I){(0,m._y)(I,function(){B.ZP.success("\u4FDD\u5B58\u6210\u529F"),a(!1),e&&e()})}).finally(function(){R(!1)})},G=function(){var T=N.PermissionKeys||[],I=O.zM.filter(function(V){return T.indexOf(V.key)>=0});return(0,o.jsx)("div",{children:I.map(function(V,q){return(0,o.jsx)(X.Z,{style:{marginRight:5,marginBottom:5},children:V.name},q)})})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{children:[(0,o.jsxs)(A.Z,{direction:"horizontal",children:[G(),(0,o.jsx)(u.ZP,{type:"link",onClick:function(){a(!0)},children:"\u4FEE\u6539"})]}),(0,o.jsx)(P.Z,{title:"\u7ED1\u5B9A\u6743\u9650",confirmLoading:_,open:t,onCancel:function(){a(!1)},onOk:function(){S(z)},children:(0,o.jsx)(ne.Z,{selectedKeys:z,onChange:function(T){return p(T)},permissions:O.al})})]})})},te=function(){var K=(0,C.useState)(!0),N=i()(K,2),e=N[0],r=N[1],c=(0,C.useState)([]),t=i()(c,2),a=t[0],D=t[1],d=(0,C.useState)({Page:1}),_=i()(d,2),R=_[0],U=_[1],M=(0,C.useState)(void 0),z=i()(M,2),p=z[0],S=z[1],G=function(){r(!0),s.x1.mallManager.storeManagerPermissionListRoles({}).then(function(I){(0,m._y)(I,function(){D(I.data.Data||[])})}).finally(function(){r(!1)})},x=[{title:"\u540D\u79F0",render:function(I,V){return V.Name}},{title:"\u63CF\u8FF0",render:function(I,V){return V.Description||"--"}},{title:"\u6743\u9650",render:function(I,V){return(0,o.jsx)(w,{model:V,ok:function(){G()}})}},{title:"\u65F6\u95F4",render:function(I){return(0,o.jsx)(g.Z,{model:I})}},{title:"\u64CD\u4F5C",width:200,render:function(I,V){return(0,o.jsx)(u.ZP.Group,{children:(0,o.jsx)(u.ZP,{type:"link",onClick:function(){S(V)},children:"\u7F16\u8F91"})})}}];return(0,C.useEffect)(function(){G()},[R]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(v,{show:p!=null,hide:function(){return S(void 0)},data:p||{},ok:function(){S(void 0),G()}}),(0,o.jsx)(E.Z,{title:"\u89D2\u8272",extra:(0,o.jsx)(u.ZP,{type:"primary",onClick:function(){S({})},children:"\u65B0\u589E"}),children:(0,o.jsx)(Z.Z,{loading:e,columns:x,dataSource:a,pagination:!1})})]})}},85576:function(k,F,n){n.d(F,{Z:function(){return Y}});var l=n(56080),i=n(38657),g=n(56745),s=n(67294),u=n(93967),E=n.n(u),Z=n(40974),C=n(8745),H=n(53124),$=n(35792),y=n(32409),W=n(4941),j=n(71194),b=function(f,m){var o={};for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&m.indexOf(v)<0&&(o[v]=f[v]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,v=Object.getOwnPropertySymbols(f);O<v.length;O++)m.indexOf(v[O])<0&&Object.prototype.propertyIsEnumerable.call(f,v[O])&&(o[v[O]]=f[v[O]]);return o};const B=f=>{const{prefixCls:m,className:o,closeIcon:v,closable:O,type:X,title:ne,children:w,footer:te}=f,K=b(f,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:N}=s.useContext(H.E_),e=N(),r=m||N("modal"),c=(0,$.Z)(e),[t,a,D]=(0,j.ZP)(r,c),d=`${r}-confirm`;let _={};return X?_={closable:O!=null?O:!1,title:"",footer:"",children:s.createElement(y.O,Object.assign({},f,{prefixCls:r,confirmPrefixCls:d,rootPrefixCls:e,content:w}))}:_={closable:O!=null?O:!0,title:ne,footer:te!==null&&s.createElement(W.$,Object.assign({},f)),children:w},t(s.createElement(Z.s,Object.assign({prefixCls:r,className:E()(a,`${r}-pure-panel`,X&&d,X&&`${d}-${X}`,o,D,c)},K,{closeIcon:(0,W.b)(r,v),closable:O},_)))};var P=(0,C.i)(B),A=n(94423);function L(f){return(0,l.ZP)((0,l.uW)(f))}const h=g.Z;h.useModal=A.Z,h.info=function(m){return(0,l.ZP)((0,l.cw)(m))},h.success=function(m){return(0,l.ZP)((0,l.vq)(m))},h.error=function(m){return(0,l.ZP)((0,l.AQ)(m))},h.warning=L,h.warn=L,h.confirm=function(m){return(0,l.ZP)((0,l.Au)(m))},h.destroyAll=function(){for(;i.Z.length;){const m=i.Z.pop();m&&m()}},h.config=l.ai,h._InternalPanelDoNotUseOrYouWillBeFired=P;var Y=h},66309:function(k,F,n){n.d(F,{Z:function(){return N}});var l=n(67294),i=n(93967),g=n.n(i),s=n(98423),u=n(98787),E=n(69760),Z=n(96159),C=n(45353),H=n(53124),$=n(11568),y=n(10274),W=n(14747),j=n(83262),b=n(83559);const B=e=>{const{paddingXXS:r,lineWidth:c,tagPaddingHorizontal:t,componentCls:a,calc:D}=e,d=D(t).sub(c).equal(),_=D(r).sub(c).equal();return{[a]:Object.assign(Object.assign({},(0,W.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:d,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,$.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${a}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${a}-close-icon`]:{marginInlineStart:_,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${a}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${a}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:d}}),[`${a}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},P=e=>{const{lineWidth:r,fontSizeIcon:c,calc:t}=e,a=e.fontSizeSM;return(0,j.IX)(e,{tagFontSize:a,tagLineHeight:(0,$.bf)(t(e.lineHeightSM).mul(a).equal()),tagIconSize:t(c).sub(t(r).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},A=e=>({defaultBg:new y.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var L=(0,b.I$)("Tag",e=>{const r=P(e);return B(r)},A),h=function(e,r){var c={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(c[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(c[t[a]]=e[t[a]]);return c},f=l.forwardRef((e,r)=>{const{prefixCls:c,style:t,className:a,checked:D,onChange:d,onClick:_}=e,R=h(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:U,tag:M}=l.useContext(H.E_),z=I=>{d==null||d(!D),_==null||_(I)},p=U("tag",c),[S,G,x]=L(p),T=g()(p,`${p}-checkable`,{[`${p}-checkable-checked`]:D},M==null?void 0:M.className,a,G,x);return S(l.createElement("span",Object.assign({},R,{ref:r,style:Object.assign(Object.assign({},t),M==null?void 0:M.style),className:T,onClick:z})))}),m=n(98719);const o=e=>(0,m.Z)(e,(r,c)=>{let{textColor:t,lightBorderColor:a,lightColor:D,darkColor:d}=c;return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:t,background:D,borderColor:a,"&-inverse":{color:e.colorTextLightSolid,background:d,borderColor:d},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var v=(0,b.bk)(["Tag","preset"],e=>{const r=P(e);return o(r)},A);function O(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const X=(e,r,c)=>{const t=O(c);return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:e[`color${c}`],background:e[`color${t}Bg`],borderColor:e[`color${t}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var ne=(0,b.bk)(["Tag","status"],e=>{const r=P(e);return[X(r,"success","Success"),X(r,"processing","Info"),X(r,"error","Error"),X(r,"warning","Warning")]},A),w=function(e,r){var c={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(c[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(c[t[a]]=e[t[a]]);return c};const K=l.forwardRef((e,r)=>{const{prefixCls:c,className:t,rootClassName:a,style:D,children:d,icon:_,color:R,onClose:U,bordered:M=!0,visible:z}=e,p=w(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:S,direction:G,tag:x}=l.useContext(H.E_),[T,I]=l.useState(!0),V=(0,s.Z)(p,["closeIcon","closable"]);l.useEffect(()=>{z!==void 0&&I(z)},[z]);const q=(0,u.o2)(R),ae=(0,u.yT)(R),re=q||ae,ue=Object.assign(Object.assign({backgroundColor:R&&!re?R:void 0},x==null?void 0:x.style),D),Q=S("tag",c),[de,fe,me]=L(Q),ve=g()(Q,x==null?void 0:x.className,{[`${Q}-${R}`]:re,[`${Q}-has-color`]:R&&!re,[`${Q}-hidden`]:!T,[`${Q}-rtl`]:G==="rtl",[`${Q}-borderless`]:!M},t,a,fe,me),le=ee=>{ee.stopPropagation(),U==null||U(ee),!ee.defaultPrevented&&I(!1)},[,ge]=(0,E.Z)((0,E.w)(e),(0,E.w)(x),{closable:!1,closeIconRender:ee=>{const xe=l.createElement("span",{className:`${Q}-close-icon`,onClick:le},ee);return(0,Z.wm)(ee,xe,J=>({onClick:ce=>{var oe;(oe=J==null?void 0:J.onClick)===null||oe===void 0||oe.call(J,ce),le(ce)},className:g()(J==null?void 0:J.className,`${Q}-close-icon`)}))}}),he=typeof p.onClick=="function"||d&&d.type==="a",se=_||null,Ce=se?l.createElement(l.Fragment,null,se,d&&l.createElement("span",null,d)):d,ie=l.createElement("span",Object.assign({},V,{ref:r,className:ve,style:ue}),Ce,ge,q&&l.createElement(v,{key:"preset",prefixCls:Q}),ae&&l.createElement(ne,{key:"status",prefixCls:Q}));return de(he?l.createElement(C.Z,{component:"Tag"},ie):ie)});K.CheckableTag=f;var N=K}}]);
