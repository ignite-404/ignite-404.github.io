"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5900],{64080:function(b,g,e){var t=e(21274),c=e(85893);g.Z=function(d){var f=d.loading,A=d.hasMore;return f?(0,c.jsx)(t.Z,{}):A?null:(0,c.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:(0,c.jsx)("span",{className:"text-slate-400",children:"\u6CA1\u6709\u66F4\u591A\u4E86"})})}},70566:function(b,g,e){e.r(g),e.d(g,{default:function(){return k}});var t=e(861),c=e.n(t),d=e(17061),f=e.n(d),A=e(42122),h=e.n(A),I=e(17156),_=e.n(I),n=e(27424),a=e.n(n),m=e(68770),O=e(7134),r=e(74911),o=e(35195),s=e(67294),v=e(96911),y=e(64080),U=e(46153),Z=e(30967),L=e(46629),F=e(42838),N=e(38787),G=e(66058),X=e(35301),w=e(18266),V=e(54666),l=e(85893),z=function(R){var P=(0,r.Z)(R,function(C){var E;return((E=(0,L.mg)(C.CreationTime))===null||E===void 0||(E=E.add(L.Mg,"hour"))===null||E===void 0?void 0:E.format(L.vc))||"--"}),x=(0,o.Z)(Object.keys(P),function(C){var E;return((E=(0,L.mg)(C))===null||E===void 0?void 0:E.valueOf())||0});return x.map(function(C){return{key:C,items:P[C]||[]}})};function k(){var $=(0,s.useState)({Page:1}),R=a()($,2),P=R[0],x=R[1],C=(0,s.useState)(!1),E=a()(C,2),Q=E[0],J=E[1],te=(0,s.useState)(void 0),Y=a()(te,2),q=Y[0],ee=Y[1],B=(0,m.Z)(function(){var W=_()(f()().mark(function M(u){var j,S;return f()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,Z.x1.mall.notificationPaging(h()(h()({},P),{},{Page:((u==null||(j=u.res)===null||j===void 0?void 0:j.PageIndex)||0)+1}));case 2:return S=H.sent,H.abrupt("return",{list:S.data.Items||[],res:S.data});case 4:case"end":return H.stop()}},M)}));return function(M){return W.apply(this,arguments)}}(),{target:window.document,isNoMore:function(M){var u;return(M==null||(u=M.res)===null||u===void 0?void 0:u.IsEmpty)||!1},reloadDeps:[P]}),K=B.data,i=B.loading,D=B.loadingMore,T=B.noMore,p=B.mutate,ne=function(M){M.Read||(ee(M.Id),Z.x1.mall.notificationUpdateStatus({Id:M.Id,Read:!0}).then(function(u){(0,F._y)(u,function(){var j=[].concat(c()(re.filter(function(S){return S.Id!=M.Id})),[h()(h()({},M),{},{Read:!0})]);p(h()(h()({},K),{},{list:j}))})}).finally(function(){ee(void 0)}))};(0,s.useEffect)(function(){p(void 0)},[P]);var re=(K==null?void 0:K.list)||[],oe=function(){return(0,l.jsx)(N.A,{isLoading:Q,variant:"light",onClick:function(){confirm("\u6E05\u7A7A\u6240\u6709\u6D88\u606F\uFF1F")&&(J(!0),Z.x1.mall.notificationDeleteAll({}).then(function(u){(0,F._y)(u,function(){var j=h()(h()({},P),{},{Page:1});x(j)})}).finally(function(){J(!1)}))},children:"\u6E05\u7A7A"})},se=z(re);return(0,F.G5)(se)?(0,l.jsx)(v.Z,{}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(U.Z,{children:(0,l.jsxs)("div",{className:"container max-w-lg",children:[(0,l.jsx)("div",{className:"mb-1 flex flex-row items-center justify-end",children:oe()}),(0,l.jsx)(G.X,{variant:"light",disabledKeys:q?[q]:void 0,children:se.map(function(W,M){return(0,l.jsx)(X.y,{title:W.key,showDivider:!0,children:W.items.map(function(u,j){return(0,l.jsxs)(w.R,{startContent:(0,l.jsx)(O.C,{icon:(0,l.jsx)(V.Z,{stroke:1}),style:{backgroundColor:"green"}}),description:u.Content,endContent:(0,L.Gl)(u.CreationTime),onClick:function(){ne(u)},children:[u.Read&&(0,l.jsx)("span",{children:u.Title}),u.Read||(0,l.jsx)("b",{children:u.Title})]},u.Id||j)})},M)})}),(0,l.jsx)(y.Z,{loading:i||D,hasMore:!T})]})})})}},68770:function(b,g,e){e.d(g,{Z:function(){return O}});var t=e(97582),c=e(67294),d=e(83204),f=e(22638),A=e(68421),h=e(77598),I=e(48002),_=function(r){return r===document||r===document.documentElement||r===document.body?Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop):r.scrollTop},n=function(r){return r.scrollHeight||Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)},a=function(r){return r.clientHeight||Math.max(document.documentElement.clientHeight,document.body.clientHeight)},m=function(r,o){o===void 0&&(o={});var s=o.target,v=o.isNoMore,y=o.threshold,U=y===void 0?100:y,Z=o.reloadDeps,L=Z===void 0?[]:Z,F=o.manual,N=o.onBefore,G=o.onSuccess,X=o.onError,w=o.onFinally,V=(0,t.CR)((0,c.useState)(),2),l=V[0],z=V[1],k=(0,t.CR)((0,c.useState)(!1),2),$=k[0],R=k[1],P=(0,c.useMemo)(function(){return v?v(l):!1},[l]),x=(0,A.Z)(function(i){return(0,t.mG)(void 0,void 0,void 0,function(){var D,T,p;return(0,t.Jh)(this,function(ne){switch(ne.label){case 0:return[4,r(i)];case 1:return D=ne.sent(),z(i?(0,t.pi)((0,t.pi)({},D),{list:(0,t.ev)((0,t.ev)([],(0,t.CR)((p=i.list)!==null&&p!==void 0?p:[]),!1),(0,t.CR)(D.list),!1)}):(0,t.pi)((0,t.pi)({},D),{list:(0,t.ev)([],(0,t.CR)((T=D.list)!==null&&T!==void 0?T:[]),!1)})),[2,D]}})})},{manual:F,onFinally:function(i,D,T){R(!1),w==null||w(D,T)},onBefore:function(){return N==null?void 0:N()},onSuccess:function(i){setTimeout(function(){K()}),G==null||G(i)},onError:function(i){return X==null?void 0:X(i)}}),C=x.loading,E=x.error,Q=x.run,J=x.runAsync,te=x.cancel,Y=(0,f.Z)(function(){P||(R(!0),Q(l))}),q=(0,f.Z)(function(){return P?Promise.reject():(R(!0),J(l))}),ee=function(){return R(!1),Q()},B=function(){return R(!1),J()},K=function(){var i=(0,I.n)(s);if(i){i=i===document?document.documentElement:i;var D=_(i),T=n(i),p=a(i);T-D<=p+U&&Y()}};return(0,d.Z)("scroll",function(){C||$||K()},{target:s}),(0,h.Z)(function(){Q()},(0,t.ev)([],(0,t.CR)(L),!1)),{data:l,loading:!$&&C,error:E,loadingMore:$,noMore:P,loadMore:Y,loadMoreAsync:q,reload:(0,f.Z)(ee),reloadAsync:(0,f.Z)(B),mutate:z,cancel:te}},O=m},57838:function(b,g,e){e.d(g,{Z:function(){return c}});var t=e(67294);function c(){const[,d]=t.useReducer(f=>f+1,0);return d}},74443:function(b,g,e){e.d(g,{ZP:function(){return h},c4:function(){return d},m9:function(){return I}});var t=e(67294),c=e(29691);const d=["xxl","xl","lg","md","sm","xs"],f=_=>({xs:`(max-width: ${_.screenXSMax}px)`,sm:`(min-width: ${_.screenSM}px)`,md:`(min-width: ${_.screenMD}px)`,lg:`(min-width: ${_.screenLG}px)`,xl:`(min-width: ${_.screenXL}px)`,xxl:`(min-width: ${_.screenXXL}px)`}),A=_=>{const n=_,a=[].concat(d).reverse();return a.forEach((m,O)=>{const r=m.toUpperCase(),o=`screen${r}Min`,s=`screen${r}`;if(!(n[o]<=n[s]))throw new Error(`${o}<=${s} fails : !(${n[o]}<=${n[s]})`);if(O<a.length-1){const v=`screen${r}Max`;if(!(n[s]<=n[v]))throw new Error(`${s}<=${v} fails : !(${n[s]}<=${n[v]})`);const U=`screen${a[O+1].toUpperCase()}Min`;if(!(n[v]<=n[U]))throw new Error(`${v}<=${U} fails : !(${n[v]}<=${n[U]})`)}}),_};function h(){const[,_]=(0,c.ZP)(),n=f(A(_));return t.useMemo(()=>{const a=new Map;let m=-1,O={};return{matchHandlers:{},dispatch(r){return O=r,a.forEach(o=>o(O)),a.size>=1},subscribe(r){return a.size||this.register(),m+=1,a.set(m,r),r(O),m},unsubscribe(r){a.delete(r),a.size||this.unregister()},unregister(){Object.keys(n).forEach(r=>{const o=n[r],s=this.matchHandlers[o];s==null||s.mql.removeListener(s==null?void 0:s.listener)}),a.clear()},register(){Object.keys(n).forEach(r=>{const o=n[r],s=y=>{let{matches:U}=y;this.dispatch(Object.assign(Object.assign({},O),{[r]:U}))},v=window.matchMedia(o);v.addListener(s),this.matchHandlers[o]={mql:v,listener:s},s(v)})},responsiveMap:n}},[_])}const I=(_,n)=>{if(n&&typeof n=="object")for(let a=0;a<d.length;a++){const m=d[a];if(_[m]&&n[m]!==void 0)return n[m]}}},25378:function(b,g,e){var t=e(67294),c=e(8410),d=e(57838),f=e(74443);function A(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const I=(0,t.useRef)({}),_=(0,d.Z)(),n=(0,f.ZP)();return(0,c.Z)(()=>{const a=n.subscribe(m=>{I.current=m,h&&_()});return()=>n.unsubscribe(a)},[]),I.current}g.Z=A},54666:function(b,g,e){e.d(g,{Z:function(){return c}});var t=e(33733);var c=(0,t.Z)("outline","message","IconMessage",[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]])}}]);
