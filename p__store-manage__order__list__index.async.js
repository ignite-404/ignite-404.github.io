"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5892],{52662:function(k,S,n){n.r(S),n.d(S,{default:function(){return We}});var i=n(97857),r=n.n(i),ee=n(5574),O=n.n(ee),ne=n(68421),te=n(55241),U=n(78957),K=n(66309),G=n(28036),re=n(85576),J=n(4393),X=n(32983),ae=n(80799),le=n(24383),D=n(67294),oe=n(23806),se=n(11518),b=n(15801),I=n(9518),ie=n(90730),t=n(35291),v=n(30699),p=n(95813),j=n(54666),m=n(96357),$=n(99646),de=n(92783),Z=n(11346),ue=n(71230),x=n(15746),w=n(65233),R=n(34041),B=n(96864),L=n(84567),y=n(46629),ce=n(36378),fe=n(27771),Q=n(77226),Y=n(74073);function he(C,h){return(0,Y.Z)(h,function(g){return[g,C[g]]})}var ge=he,me=n(23353),pe=n(84910);function xe(C){var h=-1,g=Array(C.size);return C.forEach(function(P){g[++h]=[P,P]}),g}var Se=xe,je="[object Map]",Ze="[object Set]";function ye(C){return function(h){var g=(0,me.Z)(h);return g==je?(0,pe.Z)(h):g==Ze?Se(h):ge(h,C(h))}}var Ce=ye,Pe=n(17179),Ie=Ce(Pe.Z),Me=Ie,Ee=n(33733);var Te=(0,Ee.Z)("outline","star","IconStar",[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]]),Ae=n(70781),De=n(43821),Oe=n(25092),Fe=n(80355),Re=n(55046),e=n(85893),ve=function(h){var g=r()(r()({},h),{},{Sn:void 0,StartTime:void 0,EndTime:void 0,Page:void 0,PageSize:void 0,SkipCalculateTotalCount:void 0}),P=function W(M,F){if(F>8||(++F,!M))return null;if((0,ce.Z)(M))return M;if((0,fe.Z)(M)){var z=M;return(0,p.G5)(z)?null:z.map(function(d){return W(d,F)}).filter(function(d){return!(0,p.Wq)(d)}).sort(function(d,T){return(d==null?void 0:d.localeCompare(T||""))||0}).join(",")}return(0,Q.Z)(M)?Me(M).map(function(d){return{key:d[0],value:W(d[1],F)||""}}).filter(function(d){return!(0,p.Wq)(d.value)}).sort(function(d,T){return d.key.localeCompare(T.key)}).map(function(d){return"".concat(d.key,"=").concat(d.value)}).join("&"):M.toString()};return P(g,0)},q=[{value:"process-required",label:(0,e.jsxs)(U.Z,{direction:"horizontal",split:(0,e.jsx)("b",{children:"&"}),children:[(0,e.jsx)("span",{children:"\u5F85\u914D\u9001"}),(0,e.jsx)("span",{children:"\u5F85\u81EA\u63D0"})]}),icon:(0,e.jsx)(Te,{stroke:1,color:"orange"}),filter:{ToService:!0,ShippingMethodId:[t.sx.Delivery,t.sx.Pickup],DeliveryStatus:[t.ld.NotShipping,t.ld.Shipping]}},{value:"delivery-required",label:"\u5F85\u914D\u9001",icon:(0,e.jsx)(Ae.Z,{stroke:1}),filter:{ToService:!0,ShippingMethodId:[t.sx.Delivery],DeliveryStatus:[t.ld.NotShipping,t.ld.Shipping]}},{value:"pickup-required",label:"\u5F85\u81EA\u63D0",icon:(0,e.jsx)(De.Z,{stroke:1}),filter:{ToService:!0,ShippingMethodId:[t.sx.Pickup],DeliveryStatus:[t.ld.NotShipping,t.ld.Shipping]}},{value:"payment-required",label:"\u5F85\u4ED8\u6B3E",icon:(0,e.jsx)(Oe.Z,{stroke:1}),filter:{PaymentStatus:[t.bG.Pending],Status:[t.iF.Pending,t.iF.Processing]}},{value:"aftersales",label:"\u552E\u540E\u4E2D",icon:(0,e.jsx)(Fe.Z,{stroke:1}),filter:{IsAfterSales:!0,IsAfterSalesPending:!0}},{value:"all",label:"\u5168\u90E8\u8BA2\u5355",icon:(0,e.jsx)(Re.Z,{stroke:1}),filter:{}}],Be=function(C){var h,g,P,W=C.query,M=C.onSearch,F=(0,D.useState)(""),z=O()(F,2),d=z[0],T=z[1],_=(0,D.useState)({}),H=O()(_,2),o=H[0],E=H[1],V=ve(o),u=(h=q.find(function(a){return ve(a.filter)==V}))===null||h===void 0?void 0:h.value;(0,D.useEffect)(function(){console.log("model finger print:",V),console.log("matched preset id:",u),console.log("all finger print:",q.map(function(a){return ve(a.filter)}))},[V]),(0,D.useEffect)(function(){u&&d!=u&&T(u)},[u]);var c=function(l){var f=r()(r()({},l),{},{Page:1});f.IsAfterSales||(f.IsAfterSales=void 0),f.IsAfterSalesPending||(f.IsAfterSalesPending=void 0),f.ToService||(f.ToService=void 0),console.log("triggerSearch order",f),M&&M(f)};(0,D.useEffect)(function(){E(r()({},W))},[W]);var s=["delivery-required","pickup-required"],A=(0,t.tC)();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(de.Z,{block:!0,style:{marginBottom:10},size:"large",value:d,options:q.filter(function(a){return!a.hide}).filter(function(a){var l;return!A||s.indexOf(((l=a.value)===null||l===void 0?void 0:l.toLowerCase())||"")<0}),onChange:function(l){var f;T(l);var N=((f=q.find(function(ze){return ze.value==l}))===null||f===void 0?void 0:f.filter)||{};c(N)}}),(0,e.jsx)(J.Z,{bordered:!1,style:{marginBottom:10},children:(0,e.jsx)(Z.Z,{labelCol:{span:8},autoComplete:"off",children:(0,e.jsxs)(ue.Z,{gutter:10,children:[(0,e.jsx)(x.Z,{span:6,children:(0,e.jsx)(Z.Z.Item,{label:"\u8BA2\u5355\u53F7",children:(0,e.jsx)(w.Z,{value:o.Sn||"",onChange:function(l){E(r()(r()({},o),{},{Sn:l.target.value}))}})})}),(0,e.jsx)(x.Z,{span:6,children:(0,e.jsx)(Z.Z.Item,{label:"\u8BA2\u5355\u72B6\u6001",children:(0,e.jsx)(R.Z,{value:o.Status||[],mode:"multiple",allowClear:!0,options:t.iK.map(function(a){return{label:a.name,value:a.id}}),onChange:function(l){E(r()(r()({},o),{},{Status:l||[]}))}})})}),(0,e.jsx)(x.Z,{span:6,children:(0,e.jsx)(Z.Z.Item,{label:"\u652F\u4ED8\u72B6\u6001",children:(0,e.jsx)(R.Z,{mode:"multiple",value:o.PaymentStatus||[],allowClear:!0,options:t.Qq.map(function(a){return{label:a.name,value:a.id}}),onChange:function(l){E(r()(r()({},o),{},{PaymentStatus:l||[]}))}})})}),(0,e.jsx)(x.Z,{span:6,children:(0,e.jsx)(Z.Z.Item,{label:"\u65F6\u95F4\u8303\u56F4",children:(0,e.jsx)(B.default.RangePicker,{format:"YYYY-MM-DD",picker:"date",allowClear:!0,value:[(g=(0,y.QW)(o.StartTime))===null||g===void 0?void 0:g.add(y.Mg,"hour"),(P=(0,y.QW)(o.EndTime))===null||P===void 0?void 0:P.add(y.Mg,"hour")],onChange:function(l){var f,N;E(r()(r()({},o),{},{StartTime:l==null||(f=l.at(0))===null||f===void 0||(f=f.add(-y.Mg,"hour"))===null||f===void 0?void 0:f.format(y.dq),EndTime:l==null||(N=l.at(1))===null||N===void 0||(N=N.add(-y.Mg,"hour"))===null||N===void 0?void 0:N.format(y.dq)}))},presets:[{label:"\u8FC7\u53BB\u4E00\u5468",value:[y.ND.utc().add(y.Mg,"hour").add(-1,"week"),y.ND.utc().add(y.Mg,"hour")]}]})})}),(0,e.jsx)(x.Z,{span:6,children:(0,e.jsx)(Z.Z.Item,{label:"\u5F85\u670D\u52A1",tooltip:"\u5DF2\u652F\u4ED8\u6216\u8005\u8D27\u5230\u4ED8\u6B3E",children:(0,e.jsx)(L.Z,{checked:o.ToService||!1,onChange:function(l){E(r()(r()({},o),{},{ToService:l.target.checked}))}})})}),(0,e.jsx)(x.Z,{span:6,children:(0,e.jsx)(Z.Z.Item,{label:"\u4EA4\u4ED8\u65B9\u5F0F",children:(0,e.jsx)(R.Z,{mode:"multiple",value:o.ShippingMethodId,allowClear:!0,options:t.yd.map(function(a){return{label:a.name,value:a.id}}),onChange:function(l){E(r()(r()({},o),{},{ShippingMethodId:l}))}})})}),(0,e.jsx)(x.Z,{span:6,children:(0,e.jsx)(Z.Z.Item,{label:"\u4EA4\u4ED8\u72B6\u6001",children:(0,e.jsx)(R.Z,{mode:"multiple",value:o.DeliveryStatus||[],allowClear:!0,options:t.uc.map(function(a){return{label:a.name,value:a.id}}),onChange:function(l){E(r()(r()({},o),{},{DeliveryStatus:l||[]}))}})})}),(0,e.jsx)(x.Z,{span:6}),(0,e.jsx)(x.Z,{span:6,children:(0,e.jsx)(Z.Z.Item,{label:"\u6709\u552E\u540E",children:(0,e.jsx)(L.Z,{checked:o.IsAfterSales||!1,onChange:function(l){E(r()(r()({},o),{},{IsAfterSales:l.target.checked||void 0,IsAfterSalesPending:l.target.checked?o.IsAfterSalesPending:void 0,AfterSalesStatus:l.target.checked?o.AfterSalesStatus:void 0}))}})})}),o.IsAfterSales&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(x.Z,{span:6,children:(0,e.jsx)(Z.Z.Item,{label:"\u552E\u540E\u4E2D",children:(0,e.jsx)(L.Z,{checked:o.IsAfterSalesPending||!1,onChange:function(l){E(r()(r()({},o),{},{IsAfterSalesPending:l.target.checked||void 0}))}})})}),(0,e.jsx)(x.Z,{span:6,children:(0,e.jsx)(Z.Z.Item,{label:"\u552E\u540E\u72B6\u6001",children:(0,e.jsx)(R.Z,{mode:"multiple",value:o.AfterSalesStatus||[],allowClear:!0,options:t.GP.map(function(a){return{label:a.name,value:a.id}}),onChange:function(l){E(r()(r()({},o),{},{AfterSalesStatus:l||[]}))}})})})]}),(0,e.jsx)(x.Z,{span:6,children:(0,e.jsx)(U.Z,{children:(0,e.jsx)(G.ZP,{type:"primary",htmlType:"submit",onClick:function(){return c(o)},children:"\u641C\u7D22"})})}),(0,e.jsx)(x.Z,{span:6})]})})})]})},We=function(){var C,h=(0,D.useState)({ToService:!0,ShippingMethodId:[t.sx.Delivery,t.sx.Pickup],DeliveryStatus:[t.ld.NotShipping,t.ld.Shipping],Page:1}),g=O()(h,2),P=g[0],W=g[1],M=(0,D.useState)(""),F=O()(M,2),z=F[0],d=F[1],T=(0,ne.Z)(v.x1.mallManager.orderQueryOrderPaging,{manual:!0}),_=((C=T.data)===null||C===void 0?void 0:C.data)||{},H=(0,t.Wq)(_.Items||[],function(u){return u.CreationTime}),o=function(){T.run(r()({},P))};(0,D.useEffect)(function(){o()},[P]);var E=function(c){return(0,p.Wq)(c.Remark)?null:(0,e.jsx)(te.Z,{title:"\u5907\u6CE8",content:c.Remark,trigger:["hover"],children:(0,e.jsx)(j.Z,{stroke:1})})},V=[{title:"\u8BA2\u5355\u53F7",render:function(c,s){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsx)("b",{children:s.OrderSn||"--"})}),(0,e.jsxs)(U.Z,{direction:"horizontal",children:[(0,e.jsx)(K.Z,{color:"blue",children:(0,t.Dp)(s)}),(0,e.jsx)(K.Z,{color:"red",children:(0,t.wr)(s)}),E(s)]})]})}},{title:"\u603B\u91D1\u989D",render:function(c,s){return(0,e.jsx)(K.Z,{color:"warning",children:(0,e.jsx)("b",{children:(0,p.lb)(s.TotalPrice||0)})})}},{title:"\u652F\u4ED8\u72B6\u6001",render:function(c,s){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ie.Z,{model:s}),(s.PaidTotalPrice||0)>0&&(0,e.jsxs)("p",{style:{color:"gray"},children:["\u5DF2\u652F\u4ED8",(0,p.lb)(s.PaidTotalPrice||0)]}),(s.RefundedAmount||0)>0&&(0,e.jsxs)("p",{style:{color:"red"},children:["\u5DF2\u9000\u6B3E",(0,p.lb)(s.RefundedAmount||0)]})]})}},{title:"\u4EA4\u4ED8\u72B6\u6001",render:function(c,s){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(b.Z,{model:s})})}},{title:"\u8BA2\u5355\u72B6\u6001",render:function(c,s){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(I.Z,{model:s})})}},{title:"\u4E70\u5BB6\u4FE1\u606F",render:function(c,s){var A;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(se.Z,{model:(A=s.StoreUser)===null||A===void 0?void 0:A.User})})}},{title:"\u65F6\u95F4",render:function(c,s){return(0,e.jsx)(oe.Z,{model:s})}},{title:"\u64CD\u4F5C",fixed:"right",width:100,render:function(c,s){return(0,e.jsx)(G.ZP.Group,{children:(0,e.jsx)(G.ZP,{type:"link",onClick:function(){d(s.Id||"")},children:"\u67E5\u770B"})})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(re.Z,{title:"\u8BE6\u60C5",open:!(0,p.Wq)(z),onCancel:function(){d("")},footer:!1,forceRender:!0,width:"100%",children:(0,e.jsx)($.Z,{detailId:z})}),(0,e.jsx)(Be,{query:P,onSearch:function(c){W(c)}}),(0,e.jsxs)(J.Z,{bordered:!1,loading:T.loading,children:[H.length<=0&&(0,e.jsx)(X.Z,{}),H.map(function(u,c){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-title",children:u.key}),(0,e.jsx)(ae.Z,{rowKey:function(A){return A.Id||""},loading:T.loading,columns:V,dataSource:u.value||[],expandable:{expandedRowRender:function(A){return(0,p.G5)(A.Items)||(0,e.jsx)("div",{style:{padding:10,border:"5px dashed orange"},children:(0,e.jsx)(m.Z,{items:A.Items||[]})})}},pagination:!1})]},c)}),(0,e.jsx)("div",{className:"flex-row-right hidden",children:(0,e.jsx)(le.Z,{showSizeChanger:!1,pageSize:20,current:P.Page,total:_.TotalCount,onChange:function(c){W(r()(r()({},P),{},{Page:c}))}})})]})]})}},85576:function(k,S,n){n.d(S,{Z:function(){return ie}});var i=n(56080),r=n(38657),ee=n(56745),O=n(67294),ne=n(93967),te=n.n(ne),U=n(40974),K=n(8745),G=n(53124),re=n(35792),J=n(32409),X=n(4941),ae=n(71194),le=function(t,v){var p={};for(var j in t)Object.prototype.hasOwnProperty.call(t,j)&&v.indexOf(j)<0&&(p[j]=t[j]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,j=Object.getOwnPropertySymbols(t);m<j.length;m++)v.indexOf(j[m])<0&&Object.prototype.propertyIsEnumerable.call(t,j[m])&&(p[j[m]]=t[j[m]]);return p};const D=t=>{const{prefixCls:v,className:p,closeIcon:j,closable:m,type:$,title:de,children:Z,footer:ue}=t,x=le(t,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:w}=O.useContext(G.E_),R=w(),B=v||w("modal"),L=(0,re.Z)(R),[y,ce,fe]=(0,ae.ZP)(B,L),Q=`${B}-confirm`;let Y={};return $?Y={closable:m!=null?m:!1,title:"",footer:"",children:O.createElement(J.O,Object.assign({},t,{prefixCls:B,confirmPrefixCls:Q,rootPrefixCls:R,content:Z}))}:Y={closable:m!=null?m:!0,title:de,footer:ue!==null&&O.createElement(X.$,Object.assign({},t)),children:Z},y(O.createElement(U.s,Object.assign({prefixCls:B,className:te()(ce,`${B}-pure-panel`,$&&Q,$&&`${Q}-${$}`,p,fe,L)},x,{closeIcon:(0,X.b)(B,j),closable:m},Y)))};var oe=(0,K.i)(D),se=n(94423);function b(t){return(0,i.ZP)((0,i.uW)(t))}const I=ee.Z;I.useModal=se.Z,I.info=function(v){return(0,i.ZP)((0,i.cw)(v))},I.success=function(v){return(0,i.ZP)((0,i.vq)(v))},I.error=function(v){return(0,i.ZP)((0,i.AQ)(v))},I.warning=b,I.warn=b,I.confirm=function(v){return(0,i.ZP)((0,i.Au)(v))},I.destroyAll=function(){for(;r.Z.length;){const v=r.Z.pop();v&&v()}},I.config=i.ai,I._InternalPanelDoNotUseOrYouWillBeFired=oe;var ie=I},25092:function(k,S,n){n.d(S,{Z:function(){return r}});var i=n(33733);var r=(0,i.Z)("outline","cash","IconCash",[["path",{d:"M7 9m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M14 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M17 9v-2a2 2 0 0 0 -2 -2h-10a2 2 0 0 0 -2 2v6a2 2 0 0 0 2 2h2",key:"svg-2"}]])},55046:function(k,S,n){n.d(S,{Z:function(){return r}});var i=n(33733);var r=(0,i.Z)("outline","home","IconHome",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]])},54666:function(k,S,n){n.d(S,{Z:function(){return r}});var i=n(33733);var r=(0,i.Z)("outline","message","IconMessage",[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]])},43821:function(k,S,n){n.d(S,{Z:function(){return r}});var i=n(33733);var r=(0,i.Z)("outline","pick","IconPick",[["path",{d:"M13 8l-9.383 9.418a2.091 2.091 0 0 0 0 2.967a2.11 2.11 0 0 0 2.976 0l9.407 -9.385",key:"svg-0"}],["path",{d:"M9 3h4.586a1 1 0 0 1 .707 .293l6.414 6.414a1 1 0 0 1 .293 .707v4.586a2 2 0 1 1 -4 0v-3l-5 -5h-3a2 2 0 1 1 0 -4z",key:"svg-1"}]])},70781:function(k,S,n){n.d(S,{Z:function(){return r}});var i=n(33733);var r=(0,i.Z)("outline","truck","IconTruck",[["path",{d:"M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M5 17h-2v-11a1 1 0 0 1 1 -1h9v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5",key:"svg-2"}]])}}]);
