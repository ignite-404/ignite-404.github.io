"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5892],{52662:function(W,Z,n){n.r(Z),n.d(Z,{default:function(){return Fe}});var u=n(97857),t=n.n(u),q=n(5574),T=n.n(q),_=n(68421),ee=n(55241),$=n(78957),L=n(66309),U=n(14726),ne=n(85576),Y=n(4393),H=n(80799),A=n(67294),te=n(23806),re=n(11518),ae=n(15801),le=n(9518),Q=n(94944),r=n(35291),oe=n(30699),o=n(66419),g=n(54666),B=n(96357),y=n(99646),S=n(92783),x=n(11346),se=n(71230),j=n(15746),ie=n(25278),z=n(34041),V=n(96864),k=n(84567),f=n(46629),J=n(36378),de=n(27771),ue=n(77226),ce=n(74073);function K(C,m){return(0,ce.Z)(m,function(p){return[p,C[p]]})}var G=K,ve=n(23353),he=n(84910);function ge(C){var m=-1,p=Array(C.size);return C.forEach(function(P){p[++m]=[P,P]}),p}var me=ge,pe="[object Map]",Se="[object Set]";function xe(C){return function(m){var p=(0,ve.Z)(m);return p==pe?(0,he.Z)(m):p==Se?me(m):G(m,C(m))}}var je=xe,Ze=n(17179),ye=je(Ze.Z),Ce=ye,Pe=n(33733);var Ie=(0,Pe.Z)("outline","star","IconStar",[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]]),Me=n(70781),Ee=n(43821),Ae=n(25092),Te=n(80355),De=n(55046),e=n(85893),fe=function(m){var p=t()(t()({},m),{},{Sn:void 0,StartTime:void 0,EndTime:void 0,Page:void 0,PageSize:void 0,SkipCalculateTotalCount:void 0}),P=function O(I,D){if(D>8||(++D,!I))return null;if((0,J.Z)(I))return I;if((0,de.Z)(I)){var F=I;return(0,o.G5)(F)?null:F.map(function(c){return O(c,D)}).filter(function(c){return!(0,o.Wq)(c)}).sort(function(c,E){return(c==null?void 0:c.localeCompare(E||""))||0}).join(",")}return(0,ue.Z)(I)?Ce(I).map(function(c){return{key:c[0],value:O(c[1],D)||""}}).filter(function(c){return!(0,o.Wq)(c.value)}).sort(function(c,E){return c.key.localeCompare(E.key)}).map(function(c){return"".concat(c.key,"=").concat(c.value)}).join("&"):I.toString()};return P(p,0)},X=[{value:"process-required",label:(0,e.jsxs)($.Z,{direction:"horizontal",split:(0,e.jsx)("b",{children:"&"}),children:[(0,e.jsx)("span",{children:"\u5F85\u914D\u9001"}),(0,e.jsx)("span",{children:"\u5F85\u81EA\u63D0"})]}),icon:(0,e.jsx)(Ie,{stroke:1,color:"orange"}),filter:{ToService:!0,ShippingMethodId:[r.sx.Delivery,r.sx.Pickup],DeliveryStatus:[r.ld.NotShipping,r.ld.Shipping]}},{value:"delivery-required",label:"\u5F85\u914D\u9001",icon:(0,e.jsx)(Me.Z,{stroke:1}),filter:{ToService:!0,ShippingMethodId:[r.sx.Delivery],DeliveryStatus:[r.ld.NotShipping,r.ld.Shipping]}},{value:"pickup-required",label:"\u5F85\u81EA\u63D0",icon:(0,e.jsx)(Ee.Z,{stroke:1}),filter:{ToService:!0,ShippingMethodId:[r.sx.Pickup],DeliveryStatus:[r.ld.NotShipping,r.ld.Shipping]}},{value:"payment-required",label:"\u5F85\u4ED8\u6B3E",icon:(0,e.jsx)(Ae.Z,{stroke:1}),filter:{PaymentStatus:[r.bG.Pending],Status:[r.iF.Pending,r.iF.Processing]}},{value:"aftersales",label:"\u552E\u540E\u4E2D",icon:(0,e.jsx)(Te.Z,{stroke:1}),filter:{IsAfterSales:!0,IsAfterSalesPending:!0}},{value:"all",label:"\u5168\u90E8\u8BA2\u5355",icon:(0,e.jsx)(De.Z,{stroke:1}),filter:{}}],Oe=function(C){var m,p,P,O=C.query,I=C.onSearch,D=(0,A.useState)(""),F=T()(D,2),c=F[0],E=F[1],b=(0,A.useState)({}),w=T()(b,2),s=w[0],M=w[1],h=fe(s),i=(m=X.find(function(a){return fe(a.filter)==h}))===null||m===void 0?void 0:m.value;(0,A.useEffect)(function(){console.log("model finger print:",h),console.log("matched preset id:",i),console.log("all finger print:",X.map(function(a){return fe(a.filter)}))},[h]),(0,A.useEffect)(function(){i&&c!=i&&E(i)},[i]);var d=function(l){var v=t()(t()({},l),{},{Page:1});v.IsAfterSales||(v.IsAfterSales=void 0),v.IsAfterSalesPending||(v.IsAfterSalesPending=void 0),v.ToService||(v.ToService=void 0),console.log("triggerSearch order",v),I&&I(v)};(0,A.useEffect)(function(){M(t()({},O))},[O]);var N=["delivery-required","pickup-required"],Re=(0,r.tC)();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S.Z,{block:!0,style:{marginBottom:10},size:"large",value:c,options:X.filter(function(a){return!a.hide}).filter(function(a){var l;return!Re||N.indexOf(((l=a.value)===null||l===void 0?void 0:l.toLowerCase())||"")<0}),onChange:function(l){var v;E(l);var R=((v=X.find(function(Be){return Be.value==l}))===null||v===void 0?void 0:v.filter)||{};d(R)}}),(0,e.jsx)(Y.Z,{bordered:!1,style:{marginBottom:10},children:(0,e.jsx)(x.Z,{labelCol:{span:8},autoComplete:"off",children:(0,e.jsxs)(se.Z,{gutter:10,children:[(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(x.Z.Item,{label:"\u8BA2\u5355\u53F7",children:(0,e.jsx)(ie.Z,{value:s.Sn||"",onChange:function(l){M(t()(t()({},s),{},{Sn:l.target.value}))}})})}),(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(x.Z.Item,{label:"\u8BA2\u5355\u72B6\u6001",children:(0,e.jsx)(z.Z,{value:s.Status||[],mode:"multiple",allowClear:!0,options:r.iK.map(function(a){return{label:a.name,value:a.id}}),onChange:function(l){M(t()(t()({},s),{},{Status:l||[]}))}})})}),(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(x.Z.Item,{label:"\u652F\u4ED8\u72B6\u6001",children:(0,e.jsx)(z.Z,{mode:"multiple",value:s.PaymentStatus||[],allowClear:!0,options:r.Qq.map(function(a){return{label:a.name,value:a.id}}),onChange:function(l){M(t()(t()({},s),{},{PaymentStatus:l||[]}))}})})}),(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(x.Z.Item,{label:"\u65F6\u95F4\u8303\u56F4",children:(0,e.jsx)(V.default.RangePicker,{format:"YYYY-MM-DD",picker:"date",allowClear:!0,value:[(p=(0,f.mg)(s.StartTime))===null||p===void 0?void 0:p.add(f.Mg,"hour"),(P=(0,f.mg)(s.EndTime))===null||P===void 0?void 0:P.add(f.Mg,"hour")],onChange:function(l){var v,R;M(t()(t()({},s),{},{StartTime:l==null||(v=l.at(0))===null||v===void 0||(v=v.add(-f.Mg,"hour"))===null||v===void 0?void 0:v.format(f.dq),EndTime:l==null||(R=l.at(1))===null||R===void 0||(R=R.add(-f.Mg,"hour"))===null||R===void 0?void 0:R.format(f.dq)}))},presets:[{label:"\u8FC7\u53BB\u4E00\u5468",value:[f.ND.utc().add(f.Mg,"hour").add(-1,"week"),f.ND.utc().add(f.Mg,"hour")]}]})})}),(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(x.Z.Item,{label:"\u5F85\u670D\u52A1",tooltip:"\u5DF2\u652F\u4ED8\u6216\u8005\u8D27\u5230\u4ED8\u6B3E",children:(0,e.jsx)(k.Z,{checked:s.ToService||!1,onChange:function(l){M(t()(t()({},s),{},{ToService:l.target.checked}))}})})}),(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(x.Z.Item,{label:"\u4EA4\u4ED8\u65B9\u5F0F",children:(0,e.jsx)(z.Z,{mode:"multiple",value:s.ShippingMethodId,allowClear:!0,options:r.yd.map(function(a){return{label:a.name,value:a.id}}),onChange:function(l){M(t()(t()({},s),{},{ShippingMethodId:l}))}})})}),(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(x.Z.Item,{label:"\u4EA4\u4ED8\u72B6\u6001",children:(0,e.jsx)(z.Z,{mode:"multiple",value:s.DeliveryStatus||[],allowClear:!0,options:r.uc.map(function(a){return{label:a.name,value:a.id}}),onChange:function(l){M(t()(t()({},s),{},{DeliveryStatus:l||[]}))}})})}),(0,e.jsx)(j.Z,{span:6}),(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(x.Z.Item,{label:"\u6709\u552E\u540E",children:(0,e.jsx)(k.Z,{checked:s.IsAfterSales||!1,onChange:function(l){M(t()(t()({},s),{},{IsAfterSales:l.target.checked||void 0,IsAfterSalesPending:l.target.checked?s.IsAfterSalesPending:void 0,AfterSalesStatus:l.target.checked?s.AfterSalesStatus:void 0}))}})})}),s.IsAfterSales&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(x.Z.Item,{label:"\u552E\u540E\u4E2D",children:(0,e.jsx)(k.Z,{checked:s.IsAfterSalesPending||!1,onChange:function(l){M(t()(t()({},s),{},{IsAfterSalesPending:l.target.checked||void 0}))}})})}),(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)(x.Z.Item,{label:"\u552E\u540E\u72B6\u6001",children:(0,e.jsx)(z.Z,{mode:"multiple",value:s.AfterSalesStatus||[],allowClear:!0,options:r.GP.map(function(a){return{label:a.name,value:a.id}}),onChange:function(l){M(t()(t()({},s),{},{AfterSalesStatus:l||[]}))}})})})]}),(0,e.jsx)(j.Z,{span:6,children:(0,e.jsx)($.Z,{children:(0,e.jsx)(U.ZP,{type:"primary",htmlType:"submit",onClick:function(){return d(s)},children:"\u641C\u7D22"})})}),(0,e.jsx)(j.Z,{span:6})]})})})]})},Fe=function(){var C,m=(0,A.useState)({ToService:!0,ShippingMethodId:[r.sx.Delivery,r.sx.Pickup],DeliveryStatus:[r.ld.NotShipping,r.ld.Shipping],Page:1}),p=T()(m,2),P=p[0],O=p[1],I=(0,A.useState)(""),D=T()(I,2),F=D[0],c=D[1],E=(0,_.Z)(oe.x1.mallManager.orderQueryOrderPaging,{manual:!0}),b=((C=E.data)===null||C===void 0?void 0:C.data)||{},w=function(){E.run(t()({},P))};(0,A.useEffect)(function(){w()},[P]);var s=function(i){return(0,o.Wq)(i.Remark)?null:(0,e.jsx)(ee.Z,{title:"\u5907\u6CE8",content:i.Remark,trigger:["hover"],children:(0,e.jsx)(g.Z,{stroke:1})})},M=[{title:"\u8BA2\u5355\u53F7",render:function(i,d){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsx)("b",{children:d.OrderSn||"--"})}),(0,e.jsxs)($.Z,{direction:"horizontal",children:[(0,e.jsx)(L.Z,{color:"blue",children:(0,r.Dp)(d)}),(0,e.jsx)(L.Z,{color:"red",children:(0,r.wr)(d)}),s(d)]})]})}},{title:"\u603B\u91D1\u989D",render:function(i,d){return(0,e.jsx)(L.Z,{color:"warning",children:(0,e.jsx)("b",{children:(0,o.lb)(d.TotalPrice||0)})})}},{title:"\u652F\u4ED8\u72B6\u6001",render:function(i,d){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Q.Z,{model:d}),(d.PaidTotalPrice||0)>0&&(0,e.jsxs)("p",{style:{color:"gray"},children:["\u5DF2\u652F\u4ED8",(0,o.lb)(d.PaidTotalPrice||0)]}),(d.RefundedAmount||0)>0&&(0,e.jsxs)("p",{style:{color:"red"},children:["\u5DF2\u9000\u6B3E",(0,o.lb)(d.RefundedAmount||0)]})]})}},{title:"\u4EA4\u4ED8\u72B6\u6001",render:function(i,d){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ae.Z,{model:d})})}},{title:"\u8BA2\u5355\u72B6\u6001",render:function(i,d){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(le.Z,{model:d})})}},{title:"\u4E70\u5BB6\u4FE1\u606F",render:function(i,d){var N;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(re.Z,{model:(N=d.StoreUser)===null||N===void 0?void 0:N.User})})}},{title:"\u65F6\u95F4",render:function(i,d){return(0,e.jsx)(te.Z,{model:d})}},{title:"\u64CD\u4F5C",fixed:"right",width:100,render:function(i,d){return(0,e.jsx)(U.ZP.Group,{children:(0,e.jsx)(U.ZP,{type:"link",onClick:function(){c(d.Id||"")},children:"\u67E5\u770B"})})}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ne.Z,{title:"\u8BE6\u60C5",open:!(0,o.Wq)(F),onCancel:function(){c("")},footer:!1,forceRender:!0,width:"100%",children:(0,e.jsx)(y.Z,{detailId:F})}),(0,e.jsx)(Oe,{query:P,onSearch:function(i){O(i)}}),(0,e.jsx)(Y.Z,{bordered:!1,loading:E.loading,children:(0,e.jsx)(H.Z,{rowKey:function(i){return i.Id||""},loading:E.loading,columns:M,dataSource:b.Items||[],expandable:{expandedRowRender:function(i){return(0,o.G5)(i.Items)||(0,e.jsx)("div",{style:{padding:10,border:"5px dashed orange"},children:(0,e.jsx)(B.Z,{items:i.Items||[]})})}},pagination:{showSizeChanger:!1,pageSize:20,current:P.Page,total:b.TotalCount,onChange:function(i){O(t()(t()({},P),{},{Page:i}))}}})})]})}},85576:function(W,Z,n){n.d(Z,{Z:function(){return oe}});var u=n(56080),t=n(38657),q=n(56745),T=n(67294),_=n(93967),ee=n.n(_),$=n(40974),L=n(8745),U=n(53124),ne=n(35792),Y=n(32409),H=n(4941),A=n(71194),te=function(o,g){var B={};for(var y in o)Object.prototype.hasOwnProperty.call(o,y)&&g.indexOf(y)<0&&(B[y]=o[y]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,y=Object.getOwnPropertySymbols(o);S<y.length;S++)g.indexOf(y[S])<0&&Object.prototype.propertyIsEnumerable.call(o,y[S])&&(B[y[S]]=o[y[S]]);return B};const re=o=>{const{prefixCls:g,className:B,closeIcon:y,closable:S,type:x,title:se,children:j,footer:ie}=o,z=te(o,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:V}=T.useContext(U.E_),k=V(),f=g||V("modal"),J=(0,ne.Z)(k),[de,ue,ce]=(0,A.ZP)(f,J),K=`${f}-confirm`;let G={};return x?G={closable:S!=null?S:!1,title:"",footer:"",children:T.createElement(Y.O,Object.assign({},o,{prefixCls:f,confirmPrefixCls:K,rootPrefixCls:k,content:j}))}:G={closable:S!=null?S:!0,title:se,footer:ie!==null&&T.createElement(H.$,Object.assign({},o)),children:j},de(T.createElement($.s,Object.assign({prefixCls:f,className:ee()(ue,`${f}-pure-panel`,x&&K,x&&`${K}-${x}`,B,ce,J)},z,{closeIcon:(0,H.b)(f,y),closable:S},G)))};var ae=(0,L.i)(re),le=n(94423);function Q(o){return(0,u.ZP)((0,u.uW)(o))}const r=q.Z;r.useModal=le.Z,r.info=function(g){return(0,u.ZP)((0,u.cw)(g))},r.success=function(g){return(0,u.ZP)((0,u.vq)(g))},r.error=function(g){return(0,u.ZP)((0,u.AQ)(g))},r.warning=Q,r.warn=Q,r.confirm=function(g){return(0,u.ZP)((0,u.Au)(g))},r.destroyAll=function(){for(;t.Z.length;){const g=t.Z.pop();g&&g()}},r.config=u.ai,r._InternalPanelDoNotUseOrYouWillBeFired=ae;var oe=r},25092:function(W,Z,n){n.d(Z,{Z:function(){return t}});var u=n(33733);var t=(0,u.Z)("outline","cash","IconCash",[["path",{d:"M7 9m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M14 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M17 9v-2a2 2 0 0 0 -2 -2h-10a2 2 0 0 0 -2 2v6a2 2 0 0 0 2 2h2",key:"svg-2"}]])},55046:function(W,Z,n){n.d(Z,{Z:function(){return t}});var u=n(33733);var t=(0,u.Z)("outline","home","IconHome",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]])},54666:function(W,Z,n){n.d(Z,{Z:function(){return t}});var u=n(33733);var t=(0,u.Z)("outline","message","IconMessage",[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]])},43821:function(W,Z,n){n.d(Z,{Z:function(){return t}});var u=n(33733);var t=(0,u.Z)("outline","pick","IconPick",[["path",{d:"M13 8l-9.383 9.418a2.091 2.091 0 0 0 0 2.967a2.11 2.11 0 0 0 2.976 0l9.407 -9.385",key:"svg-0"}],["path",{d:"M9 3h4.586a1 1 0 0 1 .707 .293l6.414 6.414a1 1 0 0 1 .293 .707v4.586a2 2 0 1 1 -4 0v-3l-5 -5h-3a2 2 0 1 1 0 -4z",key:"svg-1"}]])},70781:function(W,Z,n){n.d(Z,{Z:function(){return t}});var u=n(33733);var t=(0,u.Z)("outline","truck","IconTruck",[["path",{d:"M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M5 17h-2v-11a1 1 0 0 1 1 -1h9v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5",key:"svg-2"}]])}}]);
