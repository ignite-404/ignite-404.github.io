"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9267],{3142:function(dn,Q,t){t.r(Q),t.d(Q,{default:function(){return tn}});var O=t(97857),o=t.n(O),H=t(15009),R=t.n(H),J=t(19632),k=t.n(J),M=t(99289),V=t.n(M),X=t(5574),m=t.n(X),U=t(45360),F=t(78957),Y=t(72269),Z=t(14726),z=t(40056),w=t(80799),l=t(67294),q=t(35291),W=t(30699),S=t(66419),I=t(66309),_=t(24435),n=t(85893),nn=function(P){var h,d=P.item,D=P.ok,G=(0,l.useState)(void 0),p=m()(G,2),A=p[0],j=p[1],$=(0,l.useState)(!1),E=m()($,2),x=E[0],C=E[1],i=A||{};(0,l.useEffect)(function(){j(function(c){return o()(o()({},c),d)})},[d]);var b=function(){C(!0),W.x1.mallAdmin.skuUpdateSkuPrice(i).then(function(f){(0,S._y)(f,function(){U.ZP.success("\u4FEE\u6539\u6210\u529F"),D&&D(f.data.Data||i)})}).finally(function(){C(!1)})},B=function(){return A==null||d.Price==i.Price?null:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{style:{padding:10,backgroundColor:"rgb(250,250,250)"},children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{children:"\u4EF7\u683C\u4ECE\uFF1A"}),(0,n.jsx)(I.Z,{color:"red",children:(0,S.lb)(d.Price||0)}),(0,n.jsx)("span",{children:"\u53D8\u4E3A\uFF1A"}),(0,n.jsx)(I.Z,{color:"green",children:(0,S.lb)(i.Price||0)})]}),(0,n.jsx)("p",{children:(0,n.jsxs)(F.Z,{direction:"horizontal",children:[(0,n.jsx)(Z.ZP,{loading:x,type:"primary",onClick:function(){b()},children:"\u4EA7\u751F\u53D8\u66F4\uFF0C\u7ACB\u5373\u4FDD\u5B58\uFF01"}),(0,n.jsx)(Z.ZP,{type:"link",danger:!0,onClick:function(){j(o()({},d))},children:"\u653E\u5F03\u53D8\u66F4"})]})})]})})};return d==null?(0,n.jsx)("p",{children:"error"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(F.Z,{direction:"horizontal",size:"large",children:[(0,n.jsxs)("div",{title:i.Id||void 0,children:[(0,n.jsx)("b",{children:((h=i.Goods)===null||h===void 0?void 0:h.Name)||"--"}),(0,n.jsx)("div",{children:i.Name||"--"})]}),(0,n.jsx)(_.Z,{min:0,max:999999,value:i.Price||0,onChange:function(f){j(function(T){return o()(o()({},T),{},{Price:f||void 0})})}})]}),B()]})},tn=function(){var P=(0,l.useState)(!1),h=m()(P,2),d=h[0],D=h[1],G=(0,l.useState)([]),p=m()(G,2),A=p[0],j=p[1],$=(0,l.useState)([]),E=m()($,2),x=E[0],C=E[1],i=(0,l.useState)(""),b=m()(i,2),B=b[0],c=b[1],f=(0,l.useState)(!0),T=m()(f,2),L=T[0],en=T[1],K=3e3,rn=function(){var v=V()(R()().mark(function a(){var e,u,g,s;return R()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!d){r.next=3;break}return U.ZP.error("\u52A0\u8F7D\u4E2D"),r.abrupt("return");case 3:j(function(y){return[]}),D(!0),e=[],r.prev=6,u=0;case 8:if(!(e.length>K)){r.next=11;break}return r.abrupt("break",24);case 11:return u=u+1,r.next=14,W.x1.mallAdmin.skuQueryByPageOrderByCreationTime({Page:u,PageSize:100,SkipCalculateTotalCount:!0});case 14:if(g=r.sent,s=g.data.Data||[],!(s.length<=0)){r.next=18;break}return r.abrupt("break",24);case 18:return e=[].concat(k()(e),k()(s)),c(function(y){return"\u5DF2\u7ECF\u52A0\u8F7D\u7B2C".concat(u,"\u9875\u6570\u636E\uFF0C\u5171").concat(e.length,"\u6761\uFF0C\u52A0\u8F7D\u7ED3\u675F\u540E\u5448\u73B0")}),r.next=22,new Promise(function(y,cn){return setTimeout(function(){return y()},300)});case 22:r.next=8;break;case 24:c(function(y){return"\u52A0\u8F7D\u5B8C\u6210"});case 25:return r.prev=25,j(function(y){return e}),D(!1),c(function(y){return""}),r.finish(25);case 30:case"end":return r.stop()}},a,null,[[6,,25,30]])}));return function(){return v.apply(this,arguments)}}();(0,l.useEffect)(function(){C(function(v){return un(A)})},[A,L]);var an=function(a){var e,u=(0,q.CQ)(a),g=(0,S.W9)(((e=a.Goods)===null||e===void 0?void 0:e.Name)||"");return o()(o()({},a),{},{pinyin:g,name_for_sorting:u||""})},un=function(a){var e=a.map(function(u){return an(u)});return L&&(e=e.sort(function(u,g){var s;return((s=u.name_for_sorting)===null||s===void 0?void 0:s.localeCompare(g.name_for_sorting||""))||0})),e},sn=[{title:"\u641C\u7D22\u62FC\u97F3",render:function(a,e){return e.pinyin||"--"}},{title:"\u4EF7\u683C\u4FEE\u6539\u5668",render:function(a,e,u){return(0,n.jsx)(nn,{item:e,ok:function(s){if(s){var N=k()(x);N[u]=o()(o()({},e),s),C(function(r){return N})}}})}}],on=function(){return(0,n.jsxs)(F.Z,{direction:"horizontal",children:[(0,n.jsx)("span",{children:"\u6392\u5E8F"}),(0,n.jsx)(Y.Z,{title:"\u6392\u5E8F",checked:L,onChange:function(e){en(e)}})]})},ln=function(){return(0,n.jsxs)(F.Z,{direction:"horizontal",children:[(0,n.jsx)(Z.ZP,{block:!0,loading:d,type:"primary",onClick:function(){rn()},children:"\u52A0\u8F7DSKU"}),(0,n.jsx)(Z.ZP,{type:"dashed",danger:!0,onClick:function(){C(function(e){return[]})},children:"\u6E05\u7A7A"})]})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(F.Z,{direction:"vertical",style:{marginBottom:10},children:[(0,n.jsx)(z.Z,{style:{marginBottom:10},type:"warning",message:"\u8BE5\u9875\u9762\u4F1A\u52A0\u8F7D\u5927\u91CF\u6570\u636E\uFF0C\u53EF\u80FD\u9020\u6210\u6027\u80FD\u4F4E\u4E0B",description:"\u6700\u591A\u52A0\u8F7D".concat(K,"\u4E2Asku")}),(0,S.Wq)(B)||(0,n.jsx)(z.Z,{type:"info",message:B}),x.length>0&&(0,n.jsx)(z.Z,{type:"info",message:"\u4E00\u5171".concat(x.length,"\u6761\u6570\u636E")}),ln(),on()]}),(0,n.jsx)(w.Z,{style:{marginBottom:10},virtual:!0,size:"small",columns:sn,dataSource:x,pagination:!1})]})}}}]);
