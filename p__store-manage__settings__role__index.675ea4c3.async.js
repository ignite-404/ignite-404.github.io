"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3685],{74590:function(k,W,n){var l=n(17061),i=n.n(l),f=n(17156),s=n.n(f),u=n(27424),O=n.n(u),$=n(83062),C=n(14726),H=n(67294),B=n(85893);W.Z=function(y){var L=y.action,j=y.confirmText,D=y.hide,A=(0,H.useState)(!1),P=O()(A,2),R=P[0],K=P[1],h=j||"\u786E\u5B9A\u5220\u9664\uFF1F",Y=function(){var m=s()(i()().mark(function v(){return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(confirm(h)){g.next=2;break}return g.abrupt("return");case 2:return K(!0),g.prev=3,g.next=6,L();case 6:return g.prev=6,K(!1),g.finish(6);case 9:case"end":return g.stop()}},v,null,[[3,,6,9]])}));return function(){return m.apply(this,arguments)}}();return D?null:(0,B.jsx)(B.Fragment,{children:(0,B.jsx)($.Z,{title:h,children:(0,B.jsx)(C.ZP,{loading:R,danger:!0,type:"link",onClick:function(){Y()},children:"\u5220\u9664"})})})}},56774:function(k,W,n){var l=n(861),i=n.n(l),f=n(84567),s=n(4393),u=n(85893);W.Z=function(O){var $=O.selectedKeys,C=O.onChange,H=O.permissions,B=function(j){return(0,u.jsx)(f.Z,{checked:$.indexOf(j.key)>=0,onChange:function(A){var P=$.filter(function(R){return R!=j.key});A.target.checked&&P.push(j.key),C(P)},children:j.name})},y=function(j){var D=j.permissions.every(function(A){return $.indexOf(A.key)>=0});return(0,u.jsx)(s.Z,{size:"small",title:j.name,style:{marginBottom:10},extra:(0,u.jsx)(f.Z,{checked:D,onChange:function(P){var R=j.permissions.map(function(h){return h.key}),K=$.filter(function(h){return R.indexOf(h)<0});P.target.checked&&(K=[].concat(i()(K),i()(R))),C(K)},children:"\u5168\u9009"}),children:j.permissions.map(function(A,P){return(0,u.jsx)("span",{style:{marginRight:10,marginBottom:10},children:B(A)},P)})})};return(0,u.jsx)("div",{style:{},children:H.map(function(L,j){return(0,u.jsx)("div",{children:y(L)},j)})})}},23806:function(k,W,n){var l=n(1288),i=n(85893);W.Z=function(f){var s=f.model,u=f.fallback;if(s==null||s==null)return null;var O=s==null?void 0:s.CreationTime,$=s==null?void 0:s.LastModificationTime;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{style:{},children:[(0,i.jsx)("div",{children:(0,i.jsx)(l.Z,{prefix:(0,i.jsx)("span",{children:"\u521B\u5EFA\uFF1A"}),onlyDate:!0,timeStr:O,fallback:u})}),(0,i.jsx)("div",{children:(0,i.jsx)(l.Z,{prefix:(0,i.jsx)("span",{children:"\u4FEE\u6539\uFF1A"}),onlyDate:!0,timeStr:$,fallback:u})})]})})}},1288:function(k,W,n){var l=n(78957),i=n(83062),f=n(46629),s=n(85893);W.Z=function(u){var O,$=u.timeStr,C=u.fallback,H=u.onlyDate,B=u.prefix,y=(O=(0,f.mg)($))===null||O===void 0?void 0:O.add(f.Mg,"hour");if(!y)return C||null;var L=(0,f.ND)().utc().add(f.Mg,"hour"),j=y.isSame(L,"year"),D=y.diff(L,"day"),A=j?y.format(f.AK):y.format(f.vc),P=function(){return(0,s.jsxs)("div",{children:[(0,s.jsxs)(l.Z,{direction:"horizontal",children:[(0,s.jsx)("div",{children:y.fromNow()}),(0,s.jsx)("div",{children:y.format(f.On)})]}),(0,s.jsx)("div",{children:y.format(f.t9)})]})};return(0,s.jsx)(i.Z,{title:P(),children:(0,s.jsxs)(l.Z,{direction:"horizontal",children:[B,(0,s.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:H?y.format(f.vc):y.format(f.dq)})]})})}},53045:function(k,W,n){n.r(W),n.d(W,{default:function(){return te}});var l=n(27424),i=n.n(l),f=n(23806),s=n(30967),u=n(14726),O=n(4393),$=n(80799),C=n(67294),H=n(17061),B=n.n(H),y=n(17156),L=n.n(y),j=n(42122),D=n.n(j),A=n(45360),P=n(85576),R=n(78957),K=n(57381),h=n(11346),Y=n(25278),m=n(74590),v=n(42838),o=n(85893),g=function(N){var z=N.show,e=N.hide,r=N.data,c=N.ok,t=(0,C.useState)(!1),a=i()(t,2),b=a[0],d=a[1],T=(0,C.useState)({}),U=i()(T,2),F=U[0],I=U[1],_=function(S){d(!0),s.x1.mallManager.storeManagerPermissionSaveRole(D()({},S)).then(function(G){(0,v._y)(G,function(){A.ZP.success("\u4FDD\u5B58\u6210\u529F"),c()})}).finally(function(){d(!1)})};return(0,C.useEffect)(function(){I(D()({},r))},[r]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(P.Z,{title:"\u89D2\u8272",open:z,onCancel:function(){return e()},footer:(0,o.jsxs)(R.Z,{children:[(0,o.jsx)(m.Z,{action:L()(B()().mark(function E(){var S;return B()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,s.x1.sys.manageRoleDelete({Id:F.Id});case 2:S=x.sent,(0,v._y)(S,function(){e(),c()});case 4:case"end":return x.stop()}},E)})),hide:(0,v.Wq)(F.Id)}),(0,o.jsx)(u.ZP,{type:"primary",onClick:function(){_(F)},children:"\u4FDD\u5B58"})]}),children:(0,o.jsx)(K.Z,{spinning:b,children:(0,o.jsxs)(h.Z,{labelCol:{flex:"110px"},labelAlign:"right",wrapperCol:{flex:1},children:[(0,o.jsx)(h.Z.Item,{label:"\u540D\u79F0",rules:[{required:!0},{max:10}],children:(0,o.jsx)(Y.Z,{value:F.Name||"",onChange:function(S){I(D()(D()({},F),{},{Name:S.target.value}))}})}),(0,o.jsx)(h.Z.Item,{label:"\u63CF\u8FF0",rules:[{max:50}],children:(0,o.jsx)(Y.Z,{value:F.Description||"",onChange:function(S){I(D()(D()({},F),{},{Description:S.target.value}))}})})]})})})})},p=n(68994),X=n(66309),ne=n(56774),w=function(N){var z=N.model,e=N.ok,r=(0,C.useState)(!1),c=i()(r,2),t=c[0],a=c[1],b=(0,C.useState)(!1),d=i()(b,2),T=d[0],U=d[1],F=(0,C.useState)([]),I=i()(F,2),_=I[0],E=I[1];(0,C.useEffect)(function(){E(z.PermissionKeys||[])},[z]);var S=function(M){U(!0),s.x1.mallManager.storeManagerPermissionSetRolePermissions({Key:z.Id,Value:M||[]}).then(function(Z){(0,v._y)(Z,function(){A.ZP.success("\u4FDD\u5B58\u6210\u529F"),a(!1),e&&e()})}).finally(function(){U(!1)})},G=function(){var M=z.PermissionKeys||[],Z=p.zM.filter(function(V){return M.indexOf(V.key)>=0});return(0,o.jsx)("div",{children:Z.map(function(V,q){return(0,o.jsx)(X.Z,{style:{marginRight:5,marginBottom:5},children:V.name},q)})})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{children:[(0,o.jsxs)(R.Z,{direction:"horizontal",children:[G(),(0,o.jsx)(u.ZP,{type:"link",onClick:function(){a(!0)},children:"\u4FEE\u6539"})]}),(0,o.jsx)(P.Z,{title:"\u7ED1\u5B9A\u6743\u9650",confirmLoading:T,open:t,onCancel:function(){a(!1)},onOk:function(){S(_)},children:(0,o.jsx)(ne.Z,{selectedKeys:_,onChange:function(M){return E(M)},permissions:p.al})})]})})},te=function(){var N=(0,C.useState)(!0),z=i()(N,2),e=z[0],r=z[1],c=(0,C.useState)([]),t=i()(c,2),a=t[0],b=t[1],d=(0,C.useState)({Page:1}),T=i()(d,2),U=T[0],F=T[1],I=(0,C.useState)(void 0),_=i()(I,2),E=_[0],S=_[1],G=function(){r(!0),s.x1.mallManager.storeManagerPermissionListRoles({}).then(function(Z){(0,v._y)(Z,function(){b(Z.data.Data||[])})}).finally(function(){r(!1)})},x=[{title:"\u540D\u79F0",render:function(Z,V){return V.Name}},{title:"\u63CF\u8FF0",render:function(Z,V){return V.Description||"--"}},{title:"\u6743\u9650",render:function(Z,V){return(0,o.jsx)(w,{model:V,ok:function(){G()}})}},{title:"\u65F6\u95F4",render:function(Z){return(0,o.jsx)(f.Z,{model:Z})}},{title:"\u64CD\u4F5C",width:200,render:function(Z,V){return(0,o.jsx)(u.ZP.Group,{children:(0,o.jsx)(u.ZP,{type:"link",onClick:function(){S(V)},children:"\u7F16\u8F91"})})}}];return(0,C.useEffect)(function(){G()},[U]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(g,{show:E!=null,hide:function(){return S(void 0)},data:E||{},ok:function(){S(void 0),G()}}),(0,o.jsx)(O.Z,{title:"\u89D2\u8272",extra:(0,o.jsx)(u.ZP,{type:"primary",onClick:function(){S({})},children:"\u65B0\u589E"}),children:(0,o.jsx)($.Z,{loading:e,columns:x,dataSource:a,pagination:!1})})]})}},85576:function(k,W,n){n.d(W,{Z:function(){return Y}});var l=n(56080),i=n(38657),f=n(56745),s=n(67294),u=n(93967),O=n.n(u),$=n(40974),C=n(8745),H=n(53124),B=n(35792),y=n(32409),L=n(4941),j=n(71194),D=function(m,v){var o={};for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&v.indexOf(g)<0&&(o[g]=m[g]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,g=Object.getOwnPropertySymbols(m);p<g.length;p++)v.indexOf(g[p])<0&&Object.prototype.propertyIsEnumerable.call(m,g[p])&&(o[g[p]]=m[g[p]]);return o};const A=m=>{const{prefixCls:v,className:o,closeIcon:g,closable:p,type:X,title:ne,children:w,footer:te}=m,N=D(m,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:z}=s.useContext(H.E_),e=z(),r=v||z("modal"),c=(0,B.Z)(e),[t,a,b]=(0,j.ZP)(r,c),d=`${r}-confirm`;let T={};return X?T={closable:p!=null?p:!1,title:"",footer:"",children:s.createElement(y.O,Object.assign({},m,{prefixCls:r,confirmPrefixCls:d,rootPrefixCls:e,content:w}))}:T={closable:p!=null?p:!0,title:ne,footer:te!==null&&s.createElement(L.$,Object.assign({},m)),children:w},t(s.createElement($.s,Object.assign({prefixCls:r,className:O()(a,`${r}-pure-panel`,X&&d,X&&`${d}-${X}`,o,b,c)},N,{closeIcon:(0,L.b)(r,g),closable:p},T)))};var P=(0,C.i)(A),R=n(94423);function K(m){return(0,l.ZP)((0,l.uW)(m))}const h=f.Z;h.useModal=R.Z,h.info=function(v){return(0,l.ZP)((0,l.cw)(v))},h.success=function(v){return(0,l.ZP)((0,l.vq)(v))},h.error=function(v){return(0,l.ZP)((0,l.AQ)(v))},h.warning=K,h.warn=K,h.confirm=function(v){return(0,l.ZP)((0,l.Au)(v))},h.destroyAll=function(){for(;i.Z.length;){const v=i.Z.pop();v&&v()}},h.config=l.ai,h._InternalPanelDoNotUseOrYouWillBeFired=P;var Y=h},66309:function(k,W,n){n.d(W,{Z:function(){return z}});var l=n(67294),i=n(93967),f=n.n(i),s=n(98423),u=n(98787),O=n(69760),$=n(96159),C=n(45353),H=n(53124),B=n(11568),y=n(10274),L=n(14747),j=n(83262),D=n(83559);const A=e=>{const{paddingXXS:r,lineWidth:c,tagPaddingHorizontal:t,componentCls:a,calc:b}=e,d=b(t).sub(c).equal(),T=b(r).sub(c).equal();return{[a]:Object.assign(Object.assign({},(0,L.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:d,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,B.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${a}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${a}-close-icon`]:{marginInlineStart:T,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${a}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${a}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:d}}),[`${a}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},P=e=>{const{lineWidth:r,fontSizeIcon:c,calc:t}=e,a=e.fontSizeSM;return(0,j.IX)(e,{tagFontSize:a,tagLineHeight:(0,B.bf)(t(e.lineHeightSM).mul(a).equal()),tagIconSize:t(c).sub(t(r).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},R=e=>({defaultBg:new y.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var K=(0,D.I$)("Tag",e=>{const r=P(e);return A(r)},R),h=function(e,r){var c={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(c[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(c[t[a]]=e[t[a]]);return c},m=l.forwardRef((e,r)=>{const{prefixCls:c,style:t,className:a,checked:b,onChange:d,onClick:T}=e,U=h(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:F,tag:I}=l.useContext(H.E_),_=Z=>{d==null||d(!b),T==null||T(Z)},E=F("tag",c),[S,G,x]=K(E),M=f()(E,`${E}-checkable`,{[`${E}-checkable-checked`]:b},I==null?void 0:I.className,a,G,x);return S(l.createElement("span",Object.assign({},U,{ref:r,style:Object.assign(Object.assign({},t),I==null?void 0:I.style),className:M,onClick:_})))}),v=n(98719);const o=e=>(0,v.Z)(e,(r,c)=>{let{textColor:t,lightBorderColor:a,lightColor:b,darkColor:d}=c;return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:t,background:b,borderColor:a,"&-inverse":{color:e.colorTextLightSolid,background:d,borderColor:d},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var g=(0,D.bk)(["Tag","preset"],e=>{const r=P(e);return o(r)},R);function p(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const X=(e,r,c)=>{const t=p(c);return{[`${e.componentCls}${e.componentCls}-${r}`]:{color:e[`color${c}`],background:e[`color${t}Bg`],borderColor:e[`color${t}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var ne=(0,D.bk)(["Tag","status"],e=>{const r=P(e);return[X(r,"success","Success"),X(r,"processing","Info"),X(r,"error","Error"),X(r,"warning","Warning")]},R),w=function(e,r){var c={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(c[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(c[t[a]]=e[t[a]]);return c};const N=l.forwardRef((e,r)=>{const{prefixCls:c,className:t,rootClassName:a,style:b,children:d,icon:T,color:U,onClose:F,bordered:I=!0,visible:_}=e,E=w(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:S,direction:G,tag:x}=l.useContext(H.E_),[M,Z]=l.useState(!0),V=(0,s.Z)(E,["closeIcon","closable"]);l.useEffect(()=>{_!==void 0&&Z(_)},[_]);const q=(0,u.o2)(U),ae=(0,u.yT)(U),re=q||ae,ue=Object.assign(Object.assign({backgroundColor:U&&!re?U:void 0},x==null?void 0:x.style),b),Q=S("tag",c),[de,fe,me]=K(Q),ve=f()(Q,x==null?void 0:x.className,{[`${Q}-${U}`]:re,[`${Q}-has-color`]:U&&!re,[`${Q}-hidden`]:!M,[`${Q}-rtl`]:G==="rtl",[`${Q}-borderless`]:!I},t,a,fe,me),le=ee=>{ee.stopPropagation(),F==null||F(ee),!ee.defaultPrevented&&Z(!1)},[,ge]=(0,O.Z)((0,O.w)(e),(0,O.w)(x),{closable:!1,closeIconRender:ee=>{const xe=l.createElement("span",{className:`${Q}-close-icon`,onClick:le},ee);return(0,$.wm)(ee,xe,J=>({onClick:ce=>{var oe;(oe=J==null?void 0:J.onClick)===null||oe===void 0||oe.call(J,ce),le(ce)},className:f()(J==null?void 0:J.className,`${Q}-close-icon`)}))}}),he=typeof E.onClick=="function"||d&&d.type==="a",se=T||null,Ce=se?l.createElement(l.Fragment,null,se,d&&l.createElement("span",null,d)):d,ie=l.createElement("span",Object.assign({},V,{ref:r,className:ve,style:ue}),Ce,ge,q&&l.createElement(g,{key:"preset",prefixCls:Q}),ae&&l.createElement(ne,{key:"status",prefixCls:Q}));return de(he?l.createElement(C.Z,{component:"Tag"},ie):ie)});N.CheckableTag=m;var z=N}}]);
