"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4547],{50112:function(U,E,e){var I=e(21274),m=e(85893);E.Z=function(h){var f=h.loading,n=h.hasMore;return f?(0,m.jsx)(I.Z,{}):n?null:(0,m.jsx)("div",{className:"flex flex-row items-center justify-center gap-2",children:(0,m.jsx)("span",{className:"text-slate-400",children:"\u6CA1\u6709\u66F4\u591A\u4E86"})})}},13386:function(U,E,e){e.d(E,{Z:function(){return N}});var I=e(97857),m=e.n(I),h=e(78957),f=e(15141),n=e(85893),M=function(y){var v,O=y.model;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h.Z,{direction:"horizontal",split:(0,n.jsx)(f.j,{orientation:"vertical"}),children:[O.StickyTop&&(0,n.jsx)("span",{className:"inline text-slate-400",children:"\u7F6E\u9876"}),(v=O.Tags)===null||v===void 0?void 0:v.map(function(T,L){return(0,n.jsx)("span",{className:"inline text-slate-400",children:T.Name},L)})]})})},P=e(50209),s=e(95813),S=e(90845),o=e(19314),x=e(35291),W=e(94442),R=e(61543);function N(y){var v=y.model,O=y.count,T=y.lazy;if(!v.Id)return null;var L=(0,x.LK)(v,{width:250,height:250});return v.Published,(0,n.jsx)(S.w,m()(m()({shadow:"none",className:"w-full p-0",isHoverable:!0,isPressable:!0},y),{},{children:(0,n.jsx)(o.G,{className:"overflow-hidden",children:(0,n.jsxs)("div",{className:"flex flex-row justify-start items-start gap-2",children:[(0,n.jsx)("div",{className:"xs:w-[120px] w-[120px] sm:w-[170px] md:w-[230px]",children:(0,n.jsx)(W.Z,{rate:3/3,radius:"sm",shadow:"none",isZoomed:!0,loading:T?"lazy":"eager",src:L||R.Z,fallbackSrc:(0,n.jsx)("img",{src:R.Z,alt:"",width:"100%",height:"auto"}),className:"object-cover",classNames:{img:"object-cover"},width:"100%",style:{width:"100%"},alt:""})}),(0,n.jsxs)("div",{className:"w-full flex-grow p-1 ml-0",children:[(0,n.jsx)("h5",{className:"mb-1 text-title",children:v.Name||"--"}),(0,n.jsx)(P.Z,{skus:v.Skus||[],count:O}),(0,s.Wq)(v.AdminComment)||(0,n.jsx)("div",{className:"text-overline",children:v.AdminComment||"--"}),(0,n.jsx)(M,{model:v})]})]})})}))}},50209:function(U,E,e){var I=e(71016),m=e(74715),h=e(85893);E.Z=function(f){var n=f.skus,M=f.count,P=M||1,s=n.length;return s<=0?(0,h.jsx)("div",{className:"font-mono text-sm font-light text-slate-400",children:"\u6682\u65E0\u53EF\u552E"}):(0,h.jsxs)(h.Fragment,{children:[(0,I.Z)(n,P).map(function(S,o){return(0,h.jsx)(m.Z,{model:S},o)}),s>P&&(0,h.jsx)("div",{className:"text-caption text-sm",children:"\u4E00\u5171".concat(s,"\u79CD\u6B3E\u5F0F")})]})}},95564:function(U,E,e){var I=e(97857),m=e.n(I),h=e(22897),f=e(87351),n=e(32573),M=e(87740),P=e(86597),s=e(96476),S=e(77373),o=e(85893);E.Z=function(x){var W=x.open,R=x.onClose,N=x.children,y=x.title,v=x.action,O=x.pureBody,T=x.showCloseButton,L=x.bodyStyle,F=x.props,z=function(){return T?(0,o.jsx)("div",{style:{position:"relative"},children:(0,o.jsx)(h.A,{style:{position:"absolute",display:"inline",right:"20px",top:"20px",zIndex:1},isIconOnly:!0,size:"sm",radius:"full",color:"danger",onPress:function(){R&&R()},children:(0,o.jsx)(S.Z,{stroke:1})})}):null};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(f.R,m()(m()({className:"overflow-hidden",backdrop:"blur",isOpen:W,onClose:R,hideCloseButton:!0,isDismissable:!0,scrollBehavior:"outside"},F),{},{children:(0,o.jsxs)(n.A,{children:[z(),y==null||(0,o.jsx)(M.k,{className:"flex flex-col gap-1",children:y}),O&&N,O||(0,o.jsx)(P.I,{style:L,children:(0,o.jsx)("div",{style:{minHeight:300},children:N})}),v&&(0,o.jsx)(s.R,{children:v})]})}))})}},46555:function(U,E,e){var I=e(13690),m=e(22897),h=e(99599),f=e(85893);E.Z=function(n){var M=n.threshold,P=n.hide,s=(0,I.Z)(window.document),S=(s==null?void 0:s.top)||0,o=M||1e3;return S<o||P?null:(0,f.jsx)("div",{className:"ease-in-out",style:{position:"fixed",bottom:70,right:16,zIndex:3},children:(0,f.jsx)(m.A,{color:"success",size:"sm",isIconOnly:!0,radius:"full",variant:"solid",onPress:function(){window&&window.scrollTo({left:0,top:0,behavior:"smooth"})},children:(0,f.jsx)(h.Z,{stroke:1})})})}},22163:function(U,E,e){e.r(E),e.d(E,{default:function(){return ce}});var I=e(5574),m=e.n(I),h=e(84179),f=e(82052),n=e(68421),M=e(35195),P=e(38018),s=e(67294),S=e(21274),o=e(94442),x=e(38295),W=e(30699),R=e(55932),N=e(95813),y=e(76021),v=e(41706),O=e(15009),T=e.n(O),L=e(99289),F=e.n(L),z=e(68770),G=e(50112),$=e(13386),_=e(46555),t=e(85893);function k(i){var u,a=i.categoryId,d=(0,z.Z)(function(){var r=F()(T()().mark(function l(c){var Z,C;return T()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!(0,N.Wq)(a)){j.next=2;break}return j.abrupt("return",{list:[]});case 2:return j.next=4,W.x1.mall.searchSearchGoodsList({CategoryId:a,Page:((c==null||(Z=c.res)===null||Z===void 0?void 0:Z.PageIndex)||0)+1});case 4:return C=j.sent,j.abrupt("return",{list:C.data.Items||[],res:C.data});case 6:case"end":return j.stop()}},l)}));return function(l){return r.apply(this,arguments)}}(),{manual:!1,target:window.document,isNoMore:function(l){var c;return(l==null||(c=l.res)===null||c===void 0?void 0:c.IsEmpty)||!1}}),g=((u=d.data)===null||u===void 0?void 0:u.list)||[];return(0,s.useEffect)(function(){d.mutate({list:[]}),d.reload()},[a]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{}),g==null?void 0:g.map(function(r,l){return(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)($.Z,{model:r,count:2,lazy:!0,onPress:function(){(0,N.E4)(r.Id)}})},l)}),(0,t.jsx)(G.Z,{loading:d.loading||d.loadingMore,hasMore:!d.noMore})]})}var q=e(13690),ee=e(85980),te=e(37085),ne=e(84),se=e(45336),V=e(79479),H=e(7311),X=e(22897),re=e(13129);function ae(){var i=(0,x.o)(),u=(0,s.useRef)(null),a=(0,f.Z)(u),d=(0,q.Z)(window.document),g=((a==null?void 0:a.height)||0)-((d==null?void 0:d.top)||0),r=function(){console.log("category-top-offset",g,"rect",a,"scroll",d),i.headerHeight=Math.max(g,0)},l=(0,ee.Z)(r,{wait:1});return(0,s.useEffect)(function(){r()},[g]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{ref:u,className:"container max-w-lg",children:(0,t.jsxs)(ne.R,{isBlurred:!0,maxWidth:"full",position:"static",style:{background:"none"},children:[(0,t.jsx)(se.H,{className:"hidden",children:(0,t.jsx)("div",{})}),(0,t.jsx)(V.U,{justify:"start",children:(0,t.jsx)(H.k,{children:(0,t.jsx)("h6",{className:"text-title text-lg m-0",children:window.document.title||i.getAppName()})})}),(0,t.jsxs)(V.U,{justify:"end",children:[(0,t.jsx)(H.k,{children:(0,t.jsx)(te.Z,{})}),(0,t.jsx)(H.k,{children:(0,t.jsx)(X.A,{isIconOnly:!0,radius:"full",variant:"light",onPress:function(){y.m8.push({pathname:"/search"})},children:(0,t.jsx)(re.Z,{stroke:1})})})]})]})})})}var le=function(i){var u,a=i.model,d=i.onSubCategorySelect,g=i.selectedSubCategoryId,r=(0,n.Z)(W.x1.mall.categoryByParent,{manual:!0}),l=((u=r.data)===null||u===void 0||(u=u.data)===null||u===void 0?void 0:u.Data)||[];(0,s.useEffect)(function(){r.mutate(),a&&a.Id&&r.run({Id:a.Id})},[a]);var c=function(){return r.loading?(0,t.jsx)("span",{}):l.length<=0?null:(0,t.jsx)(t.Fragment,{children:l.map(function(C,K){return(0,t.jsx)(X.A,{className:"mb-1 mr-1",variant:g==C.Id?"flat":"light",color:"default",size:"sm",radius:"full",onPress:function(){C.Id!=g?d(C.Id):d(void 0)},children:C.Name||"--"},K)})})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"mb-3 p-1",children:[(0,t.jsx)("div",{className:"text-title mb-1",children:a.Name||"--"}),(0,N.Wq)(a.Description)||(0,t.jsx)("p",{className:"text-caption mb-1",children:a.Description}),c()]})})},oe=e(38214),ie=e(13403),de=e(29505);function ue(i){var u=i.selectedId,a=i.onSelect,d=i.data,g=(0,x.o)();return!d||d.length<=0?null:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(oe.n,{isVertical:!0,variant:g.headerHeight<=10?"solid":"light",selectedKey:u||void 0,onSelectionChange:function(l){a(l)},children:d.map(function(r,l){var c=(0,t.jsx)(ie.O,{content:"",color:"danger",shape:"circle",isInvisible:!r.Recommend,children:(0,t.jsx)("span",{children:r.Name})},l);return(0,t.jsx)(de.r,{title:c},r.Id)})})})}function ce(){var i;(0,h.Z)("\u7C7B\u76EE");var u=(0,x.o)(),a=(0,y.TH)(),d=(0,f.Z)(window.document.body),g=(0,s.useRef)(null),r=(0,s.useRef)(null),l=(0,f.Z)(r),c=(0,n.Z)(W.x1.mall.categoryStoreRootCategory,{manual:!0}),Z=((i=c.data)===null||i===void 0||(i=i.data)===null||i===void 0?void 0:i.Data)||[],C=(0,s.useState)(void 0),K=m()(C,2),j=K[0],Y=K[1],ve=(0,s.useState)(void 0),J=m()(ve,2),Q=J[0],me=J[1],p=Z.find(function(A){return A.Id==j}),b=Q||j;(0,s.useEffect)(function(){var A,B=(A=P.parse(a.search))===null||A===void 0?void 0:A.cat,D=(0,M.Z)(Z,function(w){return w.Id==B?-1:0}).at(0);D&&D.Id!=j&&Y(D==null?void 0:D.Id)},[Z]),(0,s.useEffect)(function(){c.run({})},[]),(0,s.useEffect)(function(){window&&window.scrollTo({top:0,left:0})},[b]);var he=function(){var B=(0,R.Kk)(p==null?void 0:p.Picture,{width:300});return B?(0,t.jsx)("div",{className:"mb-2",children:(0,t.jsx)(o.Z,{src:B,alt:(p==null?void 0:p.Name)||"",className:"object-contain",width:"100%"})}):null},fe=function(){var B,D=(B=g.current)===null||B===void 0?void 0:B.getBoundingClientRect().left;return D==null?null:(0,t.jsx)("div",{ref:r,style:{position:"fixed",top:u.headerHeight,bottom:u.bottomHeight,left:D,overflow:"hidden",zIndex:1},children:(0,t.jsx)(v.o,{hideScrollBar:!0,orientation:"vertical",className:"h-full w-full",children:(0,t.jsx)(ue,{selectedId:j||void 0,data:Z,onSelect:function(ge){Y(ge)}})})})},xe=function(){return(0,t.jsxs)("div",{style:{marginLeft:"".concat(((l==null?void 0:l.width)||0)+10,"px")},children:[he(),p==null||(0,t.jsx)(le,{model:p,selectedSubCategoryId:Q,onSubCategorySelect:function(D){me(D)}}),(0,N.Wq)(b)||(0,t.jsx)(k,{categoryId:b})]})};return c.loading?(0,t.jsx)(S.Z,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ae,{}),(0,t.jsxs)("div",{ref:g,className:"container max-w-lg",style:{marginTop:"".concat(10,"px"),position:"relative"},children:[fe(),xe()]})]})}}}]);
