"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6845],{37085:function(J,D,n){n.d(D,{Z:function(){return W}});var z=n(5574),H=n.n(z),F=n(67294),A=n(38295),h=n(66419),$=n(38016),c=n(68421),T=n(66386),r=n(30699),U=n(70025),y=n(78957),p=n(84367),t=n(85893),B=function(v){var e=v.store,o=v.currentId;if(!e)return null;var j=e.Id==o,d=function(f){return(0,t.jsx)("span",{className:"text-sm font-light text-slate-400",children:f})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"my-2 cursor-pointer overflow-hidden rounded-md border-1 border-gray-100 bg-gray-50 p-2 shadow-sm hover:border-gray-200",onClick:function(){confirm("\u786E\u5B9A\u9009\u62E9[".concat(e.Name,"]\u4F5C\u4E3A\u5F53\u524D\u95E8\u5E97\uFF1F"))&&((0,h.LW)(e.Id||""),window.location.reload())},children:(0,t.jsxs)(y.Z,{direction:"vertical",children:[(0,t.jsxs)(y.Z,{direction:"horizontal",children:[(0,t.jsx)("h6",{className:"mb-1",children:e.Name}),j&&(0,t.jsx)("span",{className:"text-red-400",children:"\u5F53\u524D\u9009\u62E9"})]}),(0,t.jsxs)(y.Z,{direction:"horizontal",split:(0,t.jsx)(p.j,{orientation:"vertical"}),children:[(0,h.Wq)(e.Telephone)||(0,t.jsx)("span",{className:"mb-1 text-sm font-light text-slate-400",children:e.Telephone}),(0,h.Wq)(e.AddressDetail)||(0,t.jsx)("span",{className:"mb-1 text-sm font-light text-slate-400",children:e.AddressDetail})]}),(0,t.jsxs)(y.Z,{direction:"horizontal",split:(0,t.jsx)(p.j,{orientation:"vertical"}),children:[e.Opening&&d("\u8425\u4E1A\u4E2D"),e.InvoiceSupported&&d("\u652F\u6301\u5F00\u53D1\u7968"),e.Distance&&e.Distance>0&&d("".concat((e.Distance/1e3).toFixed(2),"km")),e.InServiceArea!=null&&e.InServiceArea&&d("\u5728\u670D\u52A1\u8303\u56F4\u5185")]})]})})})},R=function(v){var e,o=v.show,j=v.close,d=(0,A.o)(),m=(0,c.Z)(r.x1.mall.storeListStores,{manual:!0,onSuccess:function(u,x){(0,h._y)(u,function(){})}}),f=((e=m.data)===null||e===void 0||(e=e.data)===null||e===void 0?void 0:e.Data)||[],N=(0,c.Z)(h.MK,{manual:!0,onSuccess:function(u){console.log("\u5B9A\u4F4D\u7ED3\u679C",u);var x={Lat:u.coords.latitude,Lon:u.coords.longitude};m.run({headers:{"x-location":JSON.stringify(x)}})},onError:function(u){var x;console.log(u),(x=h.iI.message)===null||x===void 0||x.error("\u5B9A\u4F4D\u5931\u8D25\uFF0C\u5C06\u5C55\u793A\u9ED8\u8BA4\u95E8\u5E97"),m.run({})}});(0,F.useEffect)(function(){o&&(alert("\u8BF7\u5141\u8BB8\u6211\u4EEC\u901A\u8FC7\u60A8\u7684\u5B9A\u4F4D\u6765\u83B7\u53D6\u9644\u8FD1\u7684\u95E8\u5E97"),N.run())},[o]);var E=function(){return m.loading||N.loading?(0,t.jsx)(T.Z,{}):(0,h.G5)(f)?(0,t.jsx)("h2",{children:"\u9644\u8FD1\u6CA1\u6709\u53EF\u9009\u95E8\u5E97"}):f==null?void 0:f.map(function(u,x){var I;return(0,t.jsx)("div",{children:(0,t.jsx)(B,{currentId:(I=d.currentStore)===null||I===void 0?void 0:I.Id,store:u})},x)})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(U.Z,{open:o,onClose:function(){return j&&j()},title:"\u9644\u8FD1\u95E8\u5E97",children:E()})})},L=n(45991),W=function(){var v,e,o=(0,A.o)(),j=(0,c.Z)(o.queryCurrentStore,{manual:!0}),d=(0,c.Z)(o.queryMostNearbyStore,{manual:!0}),m=(0,F.useState)(!1),f=H()(m,2),N=f[0],E=f[1];return(0,F.useEffect)(function(){var i,u;o.currentStore!=null&&(i=o.mostNearbyStore)!==null&&i!==void 0&&i.Id&&o.mostNearbyStore.Id!=((u=o.currentStore)===null||u===void 0?void 0:u.Id)&&(confirm("\u662F\u5426\u5207\u6362\u5230\u9644\u8FD1\u7684\u95E8\u5E97\uFF1A[".concat(o.mostNearbyStore.Id,"]"))?((0,h.LW)(o.mostNearbyStore.Id||""),setTimeout(function(){window.location.reload()},500)):o.mostNearbyStore=void 0)},[o.mostNearbyStore,o.currentStore]),(0,F.useEffect)(function(){j.run(),o.mostNearbyStore==null&&d.run()},[]),(0,F.useEffect)(function(){var i;(i=o.currentStore)!==null&&i!==void 0&&i.Id&&!o.currentStore.Opening&&confirm("\u5F53\u524D\u95E8\u5E97[".concat(o.currentStore.Name||"--","]\u5DF2\u7ECF\u95ED\u5E97\uFF0C\u662F\u5426\u66F4\u6362\u95E8\u5E97"))&&E(!0)},[o.currentStore]),j.loading||d.loading?(0,t.jsx)("span",{children:"..."}):(v=o.currentStore)!==null&&v!==void 0&&v.Id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R,{show:N,close:function(){E(!1)}}),(0,t.jsx)($.e,{content:"\u9009\u62E9\u95E8\u5E97",showArrow:!0,color:"warning",children:(0,t.jsxs)("div",{className:"flex-row-center gap-1 cursor-pointer",children:[(0,t.jsx)(L.Z,{stroke:1,size:20}),(0,t.jsx)("span",{className:"text-overline m-0 p-0",onClick:function(){E(!0)},children:((e=o.currentStore)===null||e===void 0?void 0:e.Name)||"--"})]})})]}):(0,t.jsx)("span",{children:"\u65E0\u95E8\u5E97\u4FE1\u606F"})}},1102:function(J,D,n){n.r(D),n.d(D,{default:function(){return V}});var z=n(5574),H=n.n(z),F=n(84179),A=n(65885),h=n(68421),$=n(67294),c=n(66419),T=n(22548),r=n(85893),U=function(a){var s=a.blocks,l=a.showHidden,S=l?s:s==null?void 0:s.filter(function(g){return!g.hide});return!S||(0,c.G5)(S)?null:(0,r.jsx)(r.Fragment,{children:S.map(function(g,P){return(0,r.jsx)("div",{children:(0,r.jsx)(T.Z,{block:g})},P)})})},y=n(21274),p=n(38295),t=n(30699),B=function(){var a,s,l=(0,p.o)();return(0,c.Wq)((a=l.mallSettings)===null||a===void 0?void 0:a.FilingNumber)?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"flex flex-row items-center justify-center py-4",children:(0,r.jsx)("a",{className:"text-sm font-light text-slate-400 no-underline",href:"https://beian.miit.gov.cn/",target:"_blank",children:(s=l.mallSettings)===null||s===void 0?void 0:s.FilingNumber})})})};function R(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(B,{})})}var L=n(37085),W=n(15142),v=n(45336),e=n(79479),o=n(7311),j=n(85134),d=n(55932),m=n(47650);function f(){var a=(0,p.o)(),s=a.mallSettings||{},l=(0,$.useMemo)(function(){var S=[s.FullLogoStorageData,s.SimpleLogoStorageData].map(function(g){return(0,d.Kk)(g,{height:100})});return S.filter(function(g){return!(0,c.Wq)(g)}).at(0)},[s]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(m.rU,{to:{pathname:"/"},children:(0,r.jsx)("img",{src:l||j.v.app.logo.normal,alt:"logo",style:{height:"30px",width:"auto"}})})})}var N=n(35291),E=n(38016),i=n(45820),u=n(17226);function x(){var a,s,l=(0,p.o)(),S=(0,d.SZ)((a=l.storeUser)===null||a===void 0||(a=a.User)===null||a===void 0?void 0:a.Avatar,{height:100});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(E.e,{content:((s=l.storeUser)===null||s===void 0||(s=s.User)===null||s===void 0?void 0:s.NickName)||"Login Your Account",isDisabled:!(0,N.lE)(l.storeUser),color:"warning",showArrow:!0,children:(0,r.jsx)(i.h,{className:"cursor-pointer",showFallback:!0,isBordered:!0,radius:"full",size:"sm",src:S||void 0,fallback:(0,r.jsx)(u.Z,{stroke:1}),color:"default",onClick:function(){(0,N.lE)(l.storeUser)?m.m8.push({pathname:"/ucenter"}):(0,N.rf)()}})})})}function I(){if((0,c.zd)()||(0,c.K1)())return null;var a=!0;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(W.R,{position:"static",className:"px-0",classNames:{base:"px-0",wrapper:"px-0"},children:[(0,r.jsxs)(v.H,{children:[a||(0,r.jsx)(f,{}),a&&(0,r.jsx)(L.Z,{})]}),(0,r.jsxs)(e.U,{justify:"end",className:"flex-shrink-0 flex-nowrap",children:[(0,r.jsx)(o.k,{children:a||(0,r.jsx)(L.Z,{})}),(0,r.jsx)(o.k,{children:(0,r.jsx)(x,{})})]})]})})}var K=n(99380),O=function(){var a,s,l=(0,p.o)();return(0,c.Wq)((a=l.mallSettings)===null||a===void 0?void 0:a.HomePageNotice)?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"mb-3 px-1",children:(0,r.jsx)(K.z,{color:"warning",children:(s=l.mallSettings)===null||s===void 0?void 0:s.HomePageNotice})})})};function V(){var a=(0,p.o)();(0,F.Z)("".concat(a.getAppName(),"-\u9996\u9875"));var s=(0,A.Z)("home.page.data.blocks",{serializer:function(C){return JSON.stringify(C||[])},deserializer:function(C){return(0,c.Jp)(C)||[]},defaultValue:void 0}),l=H()(s,2),S=l[0],g=l[1],P=S||[],k=(0,h.Z)(t.x1.mall.homeHomePageBlocks,{manual:!0,onSuccess:function(C,X){var Z,M=(0,c.Jp)((Z=C.data)===null||Z===void 0||(Z=Z.Data)===null||Z===void 0?void 0:Z.Blocks)||[];g(M)}});return(0,$.useEffect)(function(){k.run()},[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"container mx-auto max-w-lg",style:{minHeight:1e3},children:[(0,r.jsx)(I,{}),k.loading&&(0,r.jsx)(y.Z,{}),(0,r.jsx)(O,{}),(0,r.jsx)(U,{showHidden:!0,blocks:P}),(0,r.jsx)(R,{})]})})}}}]);
