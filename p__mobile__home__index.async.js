"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6845],{37085:function($,I,n){n.d(I,{Z:function(){return L}});var U=n(5574),A=n.n(U),y=n(67294),O=n(38295),x=n(95813),P=n(38016),c=n(68421),T=n(66386),e=n(30699),d=n(95564),i=n(78957),p=n(84367),t=n(85893),Z=function(m){var r=m.store,o=m.currentId;if(!r)return null;var g=r.Id==o,h=function(j){return(0,t.jsx)("span",{className:"text-sm font-light text-slate-400",children:j})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"my-2 cursor-pointer overflow-hidden rounded-md border-1 border-gray-100 bg-gray-50 p-2 shadow-sm hover:border-gray-200",onClick:function(){confirm("\u786E\u5B9A\u9009\u62E9[".concat(r.Name,"]\u4F5C\u4E3A\u5F53\u524D\u95E8\u5E97\uFF1F"))&&((0,x.LW)(r.Id||""),window.location.reload())},children:(0,t.jsxs)(i.Z,{direction:"vertical",children:[(0,t.jsxs)(i.Z,{direction:"horizontal",children:[(0,t.jsx)("h6",{className:"mb-1",children:r.Name}),g&&(0,t.jsx)("span",{className:"text-red-400",children:"\u5F53\u524D\u9009\u62E9"})]}),(0,t.jsxs)(i.Z,{direction:"horizontal",split:(0,t.jsx)(p.j,{orientation:"vertical"}),children:[(0,x.Wq)(r.Telephone)||(0,t.jsx)("span",{className:"mb-1 text-sm font-light text-slate-400",children:r.Telephone}),(0,x.Wq)(r.AddressDetail)||(0,t.jsx)("span",{className:"mb-1 text-sm font-light text-slate-400",children:r.AddressDetail})]}),(0,t.jsxs)(i.Z,{direction:"horizontal",split:(0,t.jsx)(p.j,{orientation:"vertical"}),children:[r.Opening&&h("\u8425\u4E1A\u4E2D"),r.InvoiceSupported&&h("\u652F\u6301\u5F00\u53D1\u7968"),r.Distance&&r.Distance>0&&h("".concat((r.Distance/1e3).toFixed(2),"km")),r.InServiceArea!=null&&r.InServiceArea&&h("\u5728\u670D\u52A1\u8303\u56F4\u5185")]})]})})})},B=function(m){var r,o=m.show,g=m.close,h=(0,O.o)(),f=(0,c.Z)(e.x1.mall.storeListStores,{manual:!0,onSuccess:function(v,S){(0,x._y)(v,function(){})}}),j=((r=f.data)===null||r===void 0||(r=r.data)===null||r===void 0?void 0:r.Data)||[],N=(0,c.Z)(x.MK,{manual:!0,onSuccess:function(v){console.log("\u5B9A\u4F4D\u7ED3\u679C",v);var S={Lat:v.coords.latitude,Lon:v.coords.longitude};f.run({headers:{"x-location":JSON.stringify(S)}})},onError:function(v){var S;console.log(v),(S=x.iI.message)===null||S===void 0||S.error("\u5B9A\u4F4D\u5931\u8D25\uFF0C\u5C06\u5C55\u793A\u9ED8\u8BA4\u95E8\u5E97"),f.run({})}});(0,y.useEffect)(function(){o&&(alert("\u8BF7\u5141\u8BB8\u6211\u4EEC\u901A\u8FC7\u60A8\u7684\u5B9A\u4F4D\u6765\u83B7\u53D6\u9644\u8FD1\u7684\u95E8\u5E97"),N.run())},[o]);var F=function(){return f.loading||N.loading?(0,t.jsx)(T.Z,{}):(0,x.G5)(j)?(0,t.jsx)("h2",{children:"\u9644\u8FD1\u6CA1\u6709\u53EF\u9009\u95E8\u5E97"}):j==null?void 0:j.map(function(v,S){var R;return(0,t.jsx)("div",{children:(0,t.jsx)(Z,{currentId:(R=h.currentStore)===null||R===void 0?void 0:R.Id,store:v})},S)})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(d.Z,{open:o,onClose:function(){return g&&g()},title:"\u9644\u8FD1\u95E8\u5E97",children:F()})})},C=n(45991),L=function(){var m,r,o=(0,O.o)(),g=(0,c.Z)(o.queryCurrentStore,{manual:!0}),h=(0,c.Z)(o.queryMostNearbyStore,{manual:!0}),f=(0,y.useState)(!1),j=A()(f,2),N=j[0],F=j[1];return(0,y.useEffect)(function(){var u,v;o.currentStore!=null&&(u=o.mostNearbyStore)!==null&&u!==void 0&&u.Id&&o.mostNearbyStore.Id!=((v=o.currentStore)===null||v===void 0?void 0:v.Id)&&(confirm("\u662F\u5426\u5207\u6362\u5230\u9644\u8FD1\u7684\u95E8\u5E97\uFF1A[".concat(o.mostNearbyStore.Id,"]"))?((0,x.LW)(o.mostNearbyStore.Id||""),setTimeout(function(){window.location.reload()},500)):o.mostNearbyStore=void 0)},[o.mostNearbyStore,o.currentStore]),(0,y.useEffect)(function(){g.run(),o.mostNearbyStore==null&&h.run()},[]),(0,y.useEffect)(function(){var u;(u=o.currentStore)!==null&&u!==void 0&&u.Id&&!o.currentStore.Opening&&confirm("\u5F53\u524D\u95E8\u5E97[".concat(o.currentStore.Name||"--","]\u5DF2\u7ECF\u95ED\u5E97\uFF0C\u662F\u5426\u66F4\u6362\u95E8\u5E97"))&&F(!0)},[o.currentStore]),g.loading||h.loading?(0,t.jsx)("span",{children:"..."}):(m=o.currentStore)!==null&&m!==void 0&&m.Id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B,{show:N,close:function(){F(!1)}}),(0,t.jsx)(P.e,{content:"\u9009\u62E9\u95E8\u5E97",showArrow:!0,color:"warning",children:(0,t.jsxs)("div",{className:"flex-row-center gap-1 cursor-pointer",children:[(0,t.jsx)(C.Z,{stroke:1,size:20}),(0,t.jsx)("span",{className:"text-overline m-0 p-0",onClick:function(){F(!0)},children:((r=o.currentStore)===null||r===void 0?void 0:r.Name)||"--"})]})})]}):(0,t.jsx)("span",{children:"\u65E0\u95E8\u5E97\u4FE1\u606F"})}},95564:function($,I,n){var U=n(97857),A=n.n(U),y=n(38787),O=n(94087),x=n(78967),P=n(87740),c=n(86597),T=n(96476),e=n(77373),d=n(85893);I.Z=function(i){var p=i.open,t=i.onClose,Z=i.children,B=i.title,C=i.action,L=i.pureBody,m=i.showCloseButton,r=i.bodyStyle,o=i.props,g=function(){return m?(0,d.jsx)("div",{style:{position:"relative"},children:(0,d.jsx)(y.A,{style:{position:"absolute",display:"inline",right:"20px",top:"20px",zIndex:1},isIconOnly:!0,size:"sm",radius:"full",color:"danger",onClick:function(){t&&t()},children:(0,d.jsx)(e.Z,{stroke:1})})}):null};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(O.R,A()(A()({className:"overflow-hidden",backdrop:"blur",isOpen:p,onClose:t,hideCloseButton:!0,isDismissable:!0,scrollBehavior:"outside"},o),{},{children:(0,d.jsxs)(x.A,{children:[g(),B==null||(0,d.jsx)(P.k,{className:"flex flex-col gap-1",children:B}),L&&Z,L||(0,d.jsx)(c.I,{style:r,children:(0,d.jsx)("div",{style:{minHeight:300},children:Z})}),C&&(0,d.jsx)(T.R,{children:C})]})}))})}},18042:function($,I,n){n.r(I),n.d(I,{default:function(){return J}});var U=n(5574),A=n.n(U),y=n(84179),O=n(65885),x=n(68421),P=n(67294),c=n(95813),T=n(22548),e=n(85893),d=function(s){var a=s.blocks,l=s.showHidden,D=l?a:a==null?void 0:a.filter(function(E){return!E.hide});return!D||(0,c.G5)(D)?null:(0,e.jsx)(e.Fragment,{children:D.map(function(E,K){return(0,e.jsx)("div",{children:(0,e.jsx)(T.Z,{block:E})},K)})})},i=n(21274),p=n(38295),t=n(30699),Z=function(){var s,a,l=(0,p.o)();return(0,c.Wq)((s=l.mallSettings)===null||s===void 0?void 0:s.FilingNumber)?null:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"flex flex-row items-center justify-center py-4",children:(0,e.jsx)("a",{className:"text-sm font-light text-slate-400 no-underline",href:"https://beian.miit.gov.cn/",target:"_blank",children:(a=l.mallSettings)===null||a===void 0?void 0:a.FilingNumber})})})};function B(){return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Z,{})})}var C=n(37085),L=n(15142),m=n(45336),r=n(79479),o=n(7311),g=n(85134),h=n(55932),f=n(76021);function j(){var s=(0,p.o)(),a=s.mallSettings||{},l=(0,P.useMemo)(function(){var D=[a.FullLogoStorageData,a.SimpleLogoStorageData].map(function(E){return(0,h.Kk)(E,{height:100})});return D.filter(function(E){return!(0,c.Wq)(E)}).at(0)},[a]);return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(f.rU,{to:{pathname:"/"},children:(0,e.jsx)("img",{src:l||g.v.app.logo.normal,alt:"logo",style:{height:"30px",width:"auto"}})})})}var N=n(35291),F=n(38016),u=n(45820),v=n(17226);function S(){var s,a,l=(0,p.o)(),D=(0,h.SZ)((s=l.storeUser)===null||s===void 0||(s=s.User)===null||s===void 0?void 0:s.Avatar,{height:100});return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(F.e,{content:((a=l.storeUser)===null||a===void 0||(a=a.User)===null||a===void 0?void 0:a.NickName)||"Login Your Account",isDisabled:!(0,N.lE)(l.storeUser),color:"warning",showArrow:!0,children:(0,e.jsx)(u.h,{className:"cursor-pointer",showFallback:!0,isBordered:!0,radius:"full",size:"sm",src:D||void 0,fallback:(0,e.jsx)(v.Z,{stroke:1}),color:"default",onClick:function(){(0,N.lE)(l.storeUser)?f.m8.push({pathname:"/ucenter"}):(0,N.rf)()}})})})}function R(){if((0,c.zd)()||(0,c.K1)())return null;var s=!0;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(L.R,{position:"static",className:"px-0",classNames:{base:"px-0",wrapper:"px-0"},children:[(0,e.jsxs)(m.H,{children:[s||(0,e.jsx)(j,{}),s&&(0,e.jsx)(C.Z,{})]}),(0,e.jsxs)(r.U,{justify:"end",className:"flex-shrink-0 flex-nowrap",children:[(0,e.jsx)(o.k,{children:s||(0,e.jsx)(C.Z,{})}),(0,e.jsx)(o.k,{children:(0,e.jsx)(S,{})})]})]})})}var H=n(99380),G=function(){var s,a,l=(0,p.o)();return(0,c.Wq)((s=l.mallSettings)===null||s===void 0?void 0:s.HomePageNotice)?null:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"mb-3 px-1",children:(0,e.jsx)(H.z,{color:"warning",children:(a=l.mallSettings)===null||a===void 0?void 0:a.HomePageNotice})})})};function J(){var s=(0,p.o)();(0,y.Z)("".concat(s.getAppName(),"-\u9996\u9875"));var a=(0,O.Z)("home.page.data.blocks",{serializer:function(W){return JSON.stringify(W||[])},deserializer:function(W){return(0,c.Jp)(W)||[]},defaultValue:void 0}),l=A()(a,2),D=l[0],E=l[1],K=D||[],z=(0,x.Z)(t.x1.mall.homeHomePageBlocks,{manual:!0,onSuccess:function(W,X){var M,V=(0,c.Jp)((M=W.data)===null||M===void 0||(M=M.Data)===null||M===void 0?void 0:M.Blocks)||[];E(V)}});return(0,P.useEffect)(function(){z.run()},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"container mx-auto max-w-lg",style:{minHeight:1e3},children:[(0,e.jsx)(R,{}),z.loading&&(0,e.jsx)(i.Z,{}),(0,e.jsx)(G,{}),(0,e.jsx)(d,{showHidden:!0,blocks:K}),(0,e.jsx)(B,{})]})})}}}]);
