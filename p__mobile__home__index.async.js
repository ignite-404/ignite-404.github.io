"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6845],{37085:function(V,I,n){n.d(I,{Z:function(){return R}});var z=n(5574),H=n.n(z),N=n(67294),A=n(38295),m=n(66419),$=n(38016),h=n(18874),y=n(68421),r=n(66386),T=n(30699),U=n(70025),f=n(78957),L=n(84367),t=n(85893),B=function(c){var e=c.store,o=c.currentId;if(!e)return null;var S=e.Id==o,d=function(v){return(0,t.jsx)("span",{className:"text-sm font-light text-slate-400",children:v})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"my-2 cursor-pointer overflow-hidden rounded-md border-1 border-gray-100 bg-gray-50 p-2 shadow-sm hover:border-gray-200",onClick:function(){confirm("\u786E\u5B9A\u9009\u62E9[".concat(e.Name,"]\u4F5C\u4E3A\u5F53\u524D\u95E8\u5E97\uFF1F"))&&((0,m.LW)(e.Id||""),window.location.reload())},children:(0,t.jsxs)(f.Z,{direction:"vertical",children:[(0,t.jsxs)(f.Z,{direction:"horizontal",children:[(0,t.jsx)("h6",{className:"mb-1",children:e.Name}),S&&(0,t.jsx)("span",{className:"text-red-400",children:"\u5F53\u524D\u9009\u62E9"})]}),(0,t.jsxs)(f.Z,{direction:"horizontal",split:(0,t.jsx)(L.j,{orientation:"vertical"}),children:[(0,m.Wq)(e.Telephone)||(0,t.jsx)("span",{className:"mb-1 text-sm font-light text-slate-400",children:e.Telephone}),(0,m.Wq)(e.AddressDetail)||(0,t.jsx)("span",{className:"mb-1 text-sm font-light text-slate-400",children:e.AddressDetail})]}),(0,t.jsxs)(f.Z,{direction:"horizontal",split:(0,t.jsx)(L.j,{orientation:"vertical"}),children:[e.Opening&&d("\u8425\u4E1A\u4E2D"),e.InvoiceSupported&&d("\u652F\u6301\u5F00\u53D1\u7968"),e.Distance&&e.Distance>0&&d("".concat((e.Distance/1e3).toFixed(2),"km")),e.InServiceArea!=null&&e.InServiceArea&&d("\u5728\u670D\u52A1\u8303\u56F4\u5185")]})]})})})},P=function(c){var e,o=c.show,S=c.close,d=(0,A.o)(),x=(0,y.Z)(T.x1.mall.storeListStores,{manual:!0,onSuccess:function(i,g){(0,m._y)(i,function(){})}}),v=((e=x.data)===null||e===void 0||(e=e.data)===null||e===void 0?void 0:e.Data)||[],F=(0,y.Z)(m.MK,{manual:!0,onSuccess:function(i){console.log("\u5B9A\u4F4D\u7ED3\u679C",i);var g={Lat:i.coords.latitude,Lon:i.coords.longitude};x.run({headers:{"x-location":JSON.stringify(g)}})},onError:function(i){var g;console.log(i),(g=m.iI.message)===null||g===void 0||g.error("\u5B9A\u4F4D\u5931\u8D25\uFF0C\u5C06\u5C55\u793A\u9ED8\u8BA4\u95E8\u5E97"),x.run({})}});(0,N.useEffect)(function(){o&&(alert("\u8BF7\u5141\u8BB8\u6211\u4EEC\u901A\u8FC7\u60A8\u7684\u5B9A\u4F4D\u6765\u83B7\u53D6\u9644\u8FD1\u7684\u95E8\u5E97"),F.run())},[o]);var E=function(){return x.loading||F.loading?(0,t.jsx)(r.Z,{}):(0,m.G5)(v)?(0,t.jsx)("h2",{children:"\u9644\u8FD1\u6CA1\u6709\u53EF\u9009\u95E8\u5E97"}):v==null?void 0:v.map(function(i,g){var D;return(0,t.jsx)("div",{children:(0,t.jsx)(B,{currentId:(D=d.currentStore)===null||D===void 0?void 0:D.Id,store:i})},g)})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(U.Z,{open:o,onClose:function(){return S&&S()},title:"\u9644\u8FD1\u95E8\u5E97",children:E()})})},R=function(){var c,e,o=(0,A.o)(),S=(0,y.Z)(o.queryCurrentStore,{manual:!0}),d=(0,y.Z)(o.queryMostNearbyStore,{manual:!0}),x=(0,N.useState)(!1),v=H()(x,2),F=v[0],E=v[1];return(0,N.useEffect)(function(){var l,i;o.currentStore!=null&&(l=o.mostNearbyStore)!==null&&l!==void 0&&l.Id&&o.mostNearbyStore.Id!=((i=o.currentStore)===null||i===void 0?void 0:i.Id)&&(confirm("\u662F\u5426\u5207\u6362\u5230\u9644\u8FD1\u7684\u95E8\u5E97\uFF1A[".concat(o.mostNearbyStore.Id,"]"))?((0,m.LW)(o.mostNearbyStore.Id||""),setTimeout(function(){window.location.reload()},500)):o.mostNearbyStore=void 0)},[o.mostNearbyStore,o.currentStore]),(0,N.useEffect)(function(){S.run(),o.mostNearbyStore==null&&d.run()},[]),(0,N.useEffect)(function(){var l;(l=o.currentStore)!==null&&l!==void 0&&l.Id&&!o.currentStore.Opening&&confirm("\u5F53\u524D\u95E8\u5E97[".concat(o.currentStore.Name||"--","]\u5DF2\u7ECF\u95ED\u5E97\uFF0C\u662F\u5426\u66F4\u6362\u95E8\u5E97"))&&E(!0)},[o.currentStore]),S.loading||d.loading?(0,t.jsx)("span",{children:"..."}):(c=o.currentStore)!==null&&c!==void 0&&c.Id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P,{show:F,close:function(){E(!1)}}),(0,t.jsx)($.e,{content:"\u9009\u62E9\u95E8\u5E97",showArrow:!0,color:"warning",children:(0,t.jsx)(h.O,{className:"px-1",size:"sm",onClick:function(){E(!0)},children:((e=o.currentStore)===null||e===void 0?void 0:e.Name)||"--"})})]}):(0,t.jsx)("span",{children:"\u65E0\u95E8\u5E97\u4FE1\u606F"})}},1102:function(V,I,n){n.r(I),n.d(I,{default:function(){return M}});var z=n(5574),H=n.n(z),N=n(84179),A=n(65885),m=n(68421),$=n(67294),h=n(66419),y=n(22548),r=n(85893),T=function(a){var s=a.blocks,u=a.showHidden,p=u?s:s==null?void 0:s.filter(function(j){return!j.hide});return!p||(0,h.G5)(p)?null:(0,r.jsx)(r.Fragment,{children:p.map(function(j,W){return(0,r.jsx)("div",{children:(0,r.jsx)(y.Z,{block:j})},W)})})},U=n(21274),f=n(38295),L=n(30699),t=function(){var a,s,u=(0,f.o)();return(0,h.Wq)((a=u.mallSettings)===null||a===void 0?void 0:a.FilingNumber)?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"flex flex-row items-center justify-center py-4",children:(0,r.jsx)("a",{className:"text-sm font-light text-slate-400 no-underline",href:"https://beian.miit.gov.cn/",target:"_blank",children:(s=u.mallSettings)===null||s===void 0?void 0:s.FilingNumber})})})};function B(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(t,{})})}var P=n(99380),R=function(){var a,s,u=(0,f.o)();return(0,h.Wq)((a=u.mallSettings)===null||a===void 0?void 0:a.HomePageNotice)?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"mb-3 px-1",children:(0,r.jsx)(P.z,{color:"warning",children:(s=u.mallSettings)===null||s===void 0?void 0:s.HomePageNotice})})})},c=n(37085),e=n(15142),o=n(45336),S=n(79479),d=n(7311),x=n(85134),v=n(55932),F=n(47650);function E(){var a=(0,f.o)(),s=a.mallSettings||{},u=(0,$.useMemo)(function(){var p=[s.FullLogoStorageData,s.SimpleLogoStorageData].map(function(j){return(0,v.Kk)(j,{height:100})});return p.filter(function(j){return!(0,h.Wq)(j)}).at(0)},[s]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(F.rU,{to:{pathname:"/"},children:(0,r.jsx)("img",{src:u||x.v.app.logo.normal,alt:"logo",style:{height:"30px",width:"auto"}})})})}var l=n(35291),i=n(38016),g=n(45820),D=n(17226);function k(){var a,s,u=(0,f.o)(),p=(0,v.SZ)((a=u.storeUser)===null||a===void 0||(a=a.User)===null||a===void 0?void 0:a.Avatar,{height:100});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.e,{content:((s=u.storeUser)===null||s===void 0||(s=s.User)===null||s===void 0?void 0:s.NickName)||"Login Your Account",isDisabled:!(0,l.lE)(u.storeUser),color:"warning",showArrow:!0,children:(0,r.jsx)(g.h,{className:"cursor-pointer",showFallback:!0,isBordered:!0,radius:"full",size:"md",src:p||void 0,fallback:(0,r.jsx)(D.Z,{stroke:1}),color:"primary",onClick:function(){(0,l.lE)(u.storeUser)?F.m8.push({pathname:"/ucenter"}):(0,l.rf)()}})})})}function K(){if((0,h.zd)()||(0,h.K1)())return null;var a=!0;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(e.R,{position:"static",className:"px-0",classNames:{base:"px-0",wrapper:"px-0"},children:[(0,r.jsxs)(o.H,{children:[a||(0,r.jsx)(E,{}),a&&(0,r.jsx)(c.Z,{})]}),(0,r.jsxs)(S.U,{justify:"end",className:"flex-shrink-0 flex-nowrap",children:[(0,r.jsx)(d.k,{children:a||(0,r.jsx)(c.Z,{})}),(0,r.jsx)(d.k,{children:(0,r.jsx)(k,{})})]})]})})}function M(){var a=(0,f.o)();(0,N.Z)("".concat(a.getAppName(),"-\u9996\u9875"));var s=(0,A.Z)("home.page.data.blocks",{serializer:function(C){return JSON.stringify(C||[])},deserializer:function(C){return(0,h.ZP)(C)},defaultValue:void 0}),u=H()(s,2),p=u[0],j=u[1],W=p||[],G=(0,m.Z)(L.x1.mall.homeHomePageBlocks,{manual:!0,onSuccess:function(C,Y){var Z,X=(0,h.ZP)((Z=C.data)===null||Z===void 0||(Z=Z.Data)===null||Z===void 0?void 0:Z.Blocks);j(X)}});return(0,$.useEffect)(function(){G.run()},[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"container mx-auto max-w-lg",style:{minHeight:1e3},children:[(0,r.jsx)(K,{}),G.loading&&(0,r.jsx)(U.Z,{}),(0,r.jsx)(R,{}),(0,r.jsx)(T,{showHidden:!0,blocks:W}),(0,r.jsx)(B,{})]})})}}}]);
