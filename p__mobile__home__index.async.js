"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6845],{37085:function(O,I,n){n.d(I,{Z:function(){return W}});var z=n(5574),H=n.n(z),N=n(67294),A=n(38295),h=n(66419),$=n(38016),f=n(18874),y=n(68421),r=n(66386),U=n(30699),B=n(70025),x=n(78957),L=n(84367),t=n(85893),P=function(c){var e=c.store,o=c.currentId;if(!e)return null;var S=e.Id==o,d=function(v){return(0,t.jsx)("span",{className:"text-sm font-light text-slate-400",children:v})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"my-2 cursor-pointer overflow-hidden rounded-md border-1 border-gray-100 bg-gray-50 p-2 shadow-sm hover:border-gray-200",onClick:function(){confirm("\u786E\u5B9A\u9009\u62E9[".concat(e.Name,"]\u4F5C\u4E3A\u5F53\u524D\u95E8\u5E97\uFF1F"))&&((0,h.LW)(e.Id||""),window.location.reload())},children:(0,t.jsxs)(x.Z,{direction:"vertical",children:[(0,t.jsxs)(x.Z,{direction:"horizontal",children:[(0,t.jsx)("h6",{className:"mb-1",children:e.Name}),S&&(0,t.jsx)("span",{className:"text-red-400",children:"\u5F53\u524D\u9009\u62E9"})]}),(0,t.jsxs)(x.Z,{direction:"horizontal",split:(0,t.jsx)(L.j,{orientation:"vertical"}),children:[(0,h.Wq)(e.Telephone)||(0,t.jsx)("span",{className:"mb-1 text-sm font-light text-slate-400",children:e.Telephone}),(0,h.Wq)(e.AddressDetail)||(0,t.jsx)("span",{className:"mb-1 text-sm font-light text-slate-400",children:e.AddressDetail})]}),(0,t.jsxs)(x.Z,{direction:"horizontal",split:(0,t.jsx)(L.j,{orientation:"vertical"}),children:[e.Opening&&d("\u8425\u4E1A\u4E2D"),e.InvoiceSupported&&d("\u652F\u6301\u5F00\u53D1\u7968"),e.Distance&&e.Distance>0&&d("".concat((e.Distance/1e3).toFixed(2),"km")),e.InServiceArea!=null&&e.InServiceArea&&d("\u5728\u670D\u52A1\u8303\u56F4\u5185")]})]})})})},R=function(c){var e,o=c.show,S=c.close,d=(0,A.o)(),g=(0,y.Z)(U.x1.mall.storeListStores,{manual:!0,onSuccess:function(u,j){(0,h._y)(u,function(){})}}),v=((e=g.data)===null||e===void 0||(e=e.data)===null||e===void 0?void 0:e.Data)||[],F=(0,y.Z)(h.MK,{manual:!0,onSuccess:function(u){console.log("\u5B9A\u4F4D\u7ED3\u679C",u);var j={Lat:u.coords.latitude,Lon:u.coords.longitude};g.run({headers:{"x-location":JSON.stringify(j)}})},onError:function(u){var j;console.log(u),(j=h.iI.message)===null||j===void 0||j.error("\u5B9A\u4F4D\u5931\u8D25\uFF0C\u5C06\u5C55\u793A\u9ED8\u8BA4\u95E8\u5E97"),g.run({})}});(0,N.useEffect)(function(){o&&(alert("\u8BF7\u5141\u8BB8\u6211\u4EEC\u901A\u8FC7\u60A8\u7684\u5B9A\u4F4D\u6765\u83B7\u53D6\u9644\u8FD1\u7684\u95E8\u5E97"),F.run())},[o]);var E=function(){return g.loading||F.loading?(0,t.jsx)(r.Z,{}):(0,h.G5)(v)?(0,t.jsx)("h2",{children:"\u9644\u8FD1\u6CA1\u6709\u53EF\u9009\u95E8\u5E97"}):v==null?void 0:v.map(function(u,j){var D;return(0,t.jsx)("div",{children:(0,t.jsx)(P,{currentId:(D=d.currentStore)===null||D===void 0?void 0:D.Id,store:u})},j)})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(B.Z,{open:o,onClose:function(){return S&&S()},title:"\u9644\u8FD1\u95E8\u5E97",children:E()})})},W=function(){var c,e,o=(0,A.o)(),S=(0,y.Z)(o.queryCurrentStore,{manual:!0}),d=(0,y.Z)(o.queryMostNearbyStore,{manual:!0}),g=(0,N.useState)(!1),v=H()(g,2),F=v[0],E=v[1];return(0,N.useEffect)(function(){var l,u;o.currentStore!=null&&(l=o.mostNearbyStore)!==null&&l!==void 0&&l.Id&&o.mostNearbyStore.Id!=((u=o.currentStore)===null||u===void 0?void 0:u.Id)&&(confirm("\u662F\u5426\u5207\u6362\u5230\u9644\u8FD1\u7684\u95E8\u5E97\uFF1A[".concat(o.mostNearbyStore.Id,"]"))?((0,h.LW)(o.mostNearbyStore.Id||""),setTimeout(function(){window.location.reload()},500)):o.mostNearbyStore=void 0)},[o.mostNearbyStore,o.currentStore]),(0,N.useEffect)(function(){S.run(),o.mostNearbyStore==null&&d.run()},[]),(0,N.useEffect)(function(){var l;(l=o.currentStore)!==null&&l!==void 0&&l.Id&&!o.currentStore.Opening&&confirm("\u5F53\u524D\u95E8\u5E97[".concat(o.currentStore.Name||"--","]\u5DF2\u7ECF\u95ED\u5E97\uFF0C\u662F\u5426\u66F4\u6362\u95E8\u5E97"))&&E(!0)},[o.currentStore]),S.loading||d.loading?(0,t.jsx)("span",{children:"..."}):(c=o.currentStore)!==null&&c!==void 0&&c.Id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R,{show:F,close:function(){E(!1)}}),(0,t.jsx)($.e,{content:"\u9009\u62E9\u95E8\u5E97",showArrow:!0,color:"warning",children:(0,t.jsx)(f.O,{className:"px-1",size:"sm",onClick:function(){E(!0)},children:((e=o.currentStore)===null||e===void 0?void 0:e.Name)||"--"})})]}):(0,t.jsx)("span",{children:"\u65E0\u95E8\u5E97\u4FE1\u606F"})}},1102:function(O,I,n){n.r(I),n.d(I,{default:function(){return M}});var z=n(5574),H=n.n(z),N=n(84179),A=n(65885),h=n(68421),$=n(67294),f=n(66419),y=n(22548),r=n(85893),U=function(a){var s=a.blocks,i=a.showHidden,p=i?s:s==null?void 0:s.filter(function(m){return!m.hide});return!p||(0,f.G5)(p)?null:(0,r.jsx)(r.Fragment,{children:p.map(function(m,T){return(0,r.jsx)("div",{children:(0,r.jsx)(y.Z,{block:m})},T)})})},B=n(21274),x=n(38295),L=n(30699),t=function(){var a,s,i=(0,x.o)();return(0,f.Wq)((a=i.mallSettings)===null||a===void 0?void 0:a.FilingNumber)?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"flex flex-row items-center justify-center py-4",children:(0,r.jsx)("a",{className:"text-sm font-light text-slate-400 no-underline",href:"https://beian.miit.gov.cn/",target:"_blank",children:(s=i.mallSettings)===null||s===void 0?void 0:s.FilingNumber})})})};function P(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(t,{})})}var R=n(99380),W=function(){var a,s,i=(0,x.o)();return(0,f.Wq)((a=i.mallSettings)===null||a===void 0?void 0:a.HomePageNotice)?null:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"mb-3 px-1",children:(0,r.jsx)(R.z,{color:"warning",children:(s=i.mallSettings)===null||s===void 0?void 0:s.HomePageNotice})})})},c=n(37085),e=n(15142),o=n(45336),S=n(79479),d=n(7311),g=n(85134),v=n(55932),F=n(47650);function E(){var a=(0,x.o)(),s=a.mallSettings||{},i=(0,$.useMemo)(function(){var p=[s.FullLogoStorageData,s.SimpleLogoStorageData].map(function(m){return(0,v.Kk)(m,{height:100})});return p.filter(function(m){return!(0,f.Wq)(m)}).at(0)},[s]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(F.rU,{to:{pathname:"/"},children:(0,r.jsx)("img",{src:i||g.v.app.logo.normal,alt:"logo",style:{height:"30px",width:"auto"}})})})}var l=n(35291),u=n(38016),j=n(45820),D=n(17226);function V(){var a,s,i=(0,x.o)(),p=(0,v.SZ)((a=i.storeUser)===null||a===void 0||(a=a.User)===null||a===void 0?void 0:a.Avatar,{height:100}),m=(s=i.storeUser)===null||s===void 0||(s=s.User)===null||s===void 0?void 0:s.NickName;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u.e,{content:m||void 0,isTriggerDisabled:!(0,l.lE)(i.storeUser),color:"warning",showArrow:!0,children:(0,r.jsx)(j.h,{className:"cursor-pointer",style:{height:"30px",width:"auto"},showFallback:!0,isBordered:!0,radius:"full",size:"md",src:p||void 0,fallback:(0,r.jsx)(D.Z,{stroke:1}),color:"primary",onClick:function(){(0,l.lE)(i.storeUser)?F.m8.push({pathname:"/ucenter"}):(0,l.rf)()}})})})}function K(){if((0,f.zd)()||(0,f.K1)())return null;var a=!0;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(e.R,{position:"static",className:"px-0",classNames:{base:"px-0",wrapper:"px-0"},children:[(0,r.jsxs)(o.H,{children:[a||(0,r.jsx)(E,{}),a&&(0,r.jsx)(c.Z,{})]}),(0,r.jsxs)(S.U,{justify:"end",className:"flex-shrink-0 flex-nowrap",children:[(0,r.jsx)(d.k,{children:a||(0,r.jsx)(c.Z,{})}),(0,r.jsx)(d.k,{children:(0,r.jsx)(V,{})})]})]})})}function M(){var a=(0,x.o)();(0,N.Z)("".concat(a.getAppName(),"-\u9996\u9875"));var s=(0,A.Z)("home.page.data.blocks",{serializer:function(C){return JSON.stringify(C||[])},deserializer:function(C){return(0,f.ZP)(C)},defaultValue:void 0}),i=H()(s,2),p=i[0],m=i[1],T=p||[],G=(0,h.Z)(L.x1.mall.homeHomePageBlocks,{manual:!0,onSuccess:function(C,J){var Z,X=(0,f.ZP)((Z=C.data)===null||Z===void 0||(Z=Z.Data)===null||Z===void 0?void 0:Z.Blocks);m(X)}});return(0,$.useEffect)(function(){G.run()},[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"container mx-auto max-w-lg",style:{minHeight:1e3},children:[(0,r.jsx)(K,{}),G.loading&&(0,r.jsx)(B.Z,{}),(0,r.jsx)(W,{}),(0,r.jsx)(U,{showHidden:!0,blocks:T}),(0,r.jsx)(P,{})]})})}}}]);
