"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9768],{23806:function(z,b,n){var l=n(1288),m=n(85893);b.Z=function(g){var u=g.model,h=g.fallback;if(u==null||u==null)return null;var S=u==null?void 0:u.CreationTime,y=u==null?void 0:u.LastModificationTime;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{style:{},children:[(0,m.jsx)("div",{children:(0,m.jsx)(l.Z,{prefix:(0,m.jsx)("span",{children:"\u521B\u5EFA\uFF1A"}),onlyDate:!0,timeStr:S,fallback:h})}),(0,m.jsx)("div",{children:(0,m.jsx)(l.Z,{prefix:(0,m.jsx)("span",{children:"\u4FEE\u6539\uFF1A"}),onlyDate:!0,timeStr:y,fallback:h})})]})})}},1288:function(z,b,n){var l=n(78957),m=n(83062),g=n(46629),u=n(85893);b.Z=function(h){var S,y=h.timeStr,E=h.fallback,x=h.onlyDate,R=h.prefix,p=(S=(0,g.mg)(y))===null||S===void 0?void 0:S.add(g.Mg,"hour");if(!p)return E||null;var M=(0,g.ND)().utc().add(g.Mg,"hour"),K=p.isSame(M,"year"),D=p.diff(M,"day"),o=K?p.format(g.AK):p.format(g.vc),w=function(){return(0,u.jsxs)("div",{children:[(0,u.jsxs)(l.Z,{direction:"horizontal",children:[(0,u.jsx)("div",{children:p.fromNow()}),(0,u.jsx)("div",{children:p.format(g.On)})]}),(0,u.jsx)("div",{children:p.format(g.t9)})]})};return(0,u.jsx)(m.Z,{title:w(),children:(0,u.jsxs)(l.Z,{direction:"horizontal",children:[R,(0,u.jsx)("div",{className:"inline-block cursor-pointer hover:bg-orange-500",children:x?p.format(g.vc):p.format(g.dq)})]})})}},11518:function(z,b,n){var l=n(55241),m=n(78957),g=n(7134),u=n(55932),h=n(66419),S=n(8885),y=n(85893);b.Z=function(E){var x=E.model;if(!x)return null;var R=(0,u.SZ)(x.Avatar,{width:100,height:100}),p=(0,h.zO)([x.NickName,x.IdentityName,x.Id].filter(function(M){return M&&M.length>0}).at(0)||"--",10);return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(l.Z,{content:(0,y.jsx)(S.Z,{model:x}),children:(0,y.jsxs)(m.Z,{direction:"horizontal",children:[(0,y.jsx)(g.C,{size:"small",shape:"square",src:R,children:p}),(0,y.jsx)("span",{children:(0,y.jsx)("a",{children:p})})]})})})}},8885:function(z,b,n){var l=n(78957),m=n(7134),g=n(55932),u=n(66419),h=n(85893);b.Z=function(S){var y,E=S.model;if(!E)return null;var x=(0,g.SZ)(E.Avatar,{width:100,height:100}),R=(0,u.zO)([E.NickName,E.IdentityName,E.Id].filter(function(p){return p&&p.length>0}).at(0)||"--",10);return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(l.Z,{direction:"horizontal",children:[(0,h.jsx)("div",{children:(0,h.jsx)(m.C,{src:x,size:100})}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("p",{children:["\u6635\u79F0\uFF1A",R]}),(0,h.jsxs)("p",{children:["\u7528\u6237\u540D\uFF1A",(E==null?void 0:E.IdentityName)||"--"]}),(0,h.jsxs)("p",{children:["\u624B\u673A\u53F7\uFF1A",(E==null||(y=E.UserMobile)===null||y===void 0?void 0:y.MobilePhone)||"--"]})]})]})})}},22229:function(z,b,n){n.r(b),n.d(b,{default:function(){return $}});var l=n(97857),m=n.n(l),g=n(5574),u=n.n(g),h=n(45360),S=n(14726),y=n(4393),E=n(80799),x=n(67294),R=n(23806),p=n(11518),M=n(30699),K=n(66419),D=n(26412),o=n(85893),w=function(L){var j=L.model;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(D.Z,{title:"\u65E5\u5FD7\u7EC6\u8282",bordered:!0,children:[(0,o.jsx)(D.Z.Item,{label:"\u8BF7\u6C42\u5730\u5740",children:j.RequestPath}),(0,o.jsx)(D.Z.Item,{label:"ip\u5730\u5740",children:j.IpAddress}),(0,o.jsx)(D.Z.Item,{label:"\u4F4D\u7F6E",children:[j.GeoCountry,j.GeoCity].filter(function(U){return!(0,K.Wq)(U)}).join("/")}),(0,o.jsx)(D.Z.Item,{label:"\u5750\u6807",children:"".concat(j.Lng,",").concat(j.Lat)}),(0,o.jsx)(D.Z.Item,{label:"\u5BA2\u6237\u7AEF\u4FE1\u606F",children:j.UserAgent}),(0,o.jsx)(D.Z.Item,{label:"\u8BBE\u5907\u7C7B\u578B",children:j.Device}),(0,o.jsx)(D.Z.Item,{label:"\u6D4F\u89C8\u5668\u7C7B\u578B",span:2,children:j.BrowserType}),(0,o.jsx)(D.Z.Item,{label:"\u8BF7\u6C42\u6765\u6E90\u9875\u9762",span:3,children:j.UrlReferrer}),(0,o.jsx)(D.Z.Item,{label:"\u503C",children:j.Value}),(0,o.jsx)(D.Z.Item,{label:"\u8BE6\u7EC6\u53C2\u6570",children:j.Data})]})})},le=w,J=n(11346),se=n(71230),ie=n(15746),de=n(96864),ae=n(34041),P={Login:-1,VisiteGoods:1,SearchGoods:2,PlaceOrder:3,CreatePayment:4,VisitePage:5,GetCoupon:6,AddShoppingCart:7,DeleteShoppingCart:8,AddFavorite:9,DeleteFavorite:10,AuditLog:11},Y=[{id:P.Login,name:"\u767B\u5F55"},{id:P.VisiteGoods,name:"\u67E5\u770B\u5546\u54C1"},{id:P.SearchGoods,name:"\u641C\u7D22\u5546\u54C1"},{id:P.PlaceOrder,name:"\u4E0B\u5355"},{id:P.CreatePayment,name:"\u5524\u8D77\u652F\u4ED8"},{id:P.VisitePage,name:"\u67E5\u770B\u9875\u9762"},{id:P.GetCoupon,name:"\u9886\u53D6\u4F18\u60E0\u5238"},{id:P.AddShoppingCart,name:"\u6DFB\u52A0\u8D2D\u7269\u8F66"},{id:P.DeleteShoppingCart,name:"\u5220\u9664\u8D2D\u7269\u8F66"},{id:P.AddFavorite,name:"\u6DFB\u52A0\u6536\u85CF"},{id:P.DeleteFavorite,name:"\u5220\u9664\u6536\u85CF"},{id:P.AuditLog,name:"\u5BA1\u8BA1\u65E5\u5FD7"}],V={ActivityLogTypes:P,ActivityLogTypesDescription:Y},B=n(46629),ce=function(N){var L,j,U=N.query,H=N.onSearch,X=(0,x.useState)({}),G=u()(X,2),W=G[0],Z=G[1],_=function(t){t.Page=1,H&&H(t)};return(0,x.useEffect)(function(){Z(U)},[]),(0,o.jsx)(y.Z,{bordered:!1,style:{marginBottom:10},children:(0,o.jsx)(J.Z,{children:(0,o.jsxs)(se.Z,{gutter:10,children:[(0,o.jsx)(ie.Z,{span:6,children:(0,o.jsx)(J.Z.Item,{label:"\u65F6\u95F4",children:(0,o.jsx)(de.default.RangePicker,{value:[((L=(0,B.mg)(W.StartTime))===null||L===void 0?void 0:L.add(B.Mg,"hour"))||null,((j=(0,B.mg)(W.EndTime))===null||j===void 0?void 0:j.add(B.Mg,"hour"))||null],onChange:function(t){Z(function(a){var r,i;return m()(m()({},a),{},{StartTime:t==null||(r=t.at(0))===null||r===void 0?void 0:r.add(-B.Mg,"hour").format(B.dq),EndTime:t==null||(i=t.at(1))===null||i===void 0?void 0:i.add(-B.Mg,"hour").format(B.dq)})})}})})}),(0,o.jsx)(ie.Z,{span:6,children:(0,o.jsx)(J.Z.Item,{label:"\u65E5\u5FD7\u7C7B\u578B",children:(0,o.jsx)(ae.Z,{placeholder:"\u65E5\u5FD7\u7C7B\u578B",allowClear:!0,options:V.ActivityLogTypesDescription.map(function(e){return{value:e.id,label:e.name}}),value:W.ActivityLogTypeId,onChange:function(t){Z(function(a){return m()(m()({},a),{},{ActivityLogTypeId:t})})},onClear:function(){Z(function(t){return m()(m()({},t),{},{ActivityLogTypeId:void 0})})}})})}),(0,o.jsx)(ie.Z,{span:6,children:(0,o.jsx)(J.Z.Item,{wrapperCol:{offset:8,span:16},children:(0,o.jsx)(S.ZP,{type:"primary",htmlType:"submit",onClick:function(){return _(W)},children:"\u641C\u7D22"})})})]})})})},$=function(){var N=(0,x.useState)(!0),L=u()(N,2),j=L[0],U=L[1],H=(0,x.useState)({Items:[],TotalCount:0}),X=u()(H,2),G=X[0],W=X[1],Z=(0,x.useState)({Page:1}),_=u()(Z,2),e=_[0],t=_[1],a=(0,x.useState)(0),r=u()(a,2),i=r[0],f=r[1],c=function(s){U(!0),M.x1.mallAdmin.activityLogQueryActivityLogPaging(s).then(function(d){(0,K._y)(d,function(){W(d.data||{})})}).finally(function(){U(!1)})},O=function(s){confirm("\u5220\u9664\uFF1F")&&(f(s.Id),M.x1.mallAdmin.activityLogDeleteActivityLog({Id:s.Id}).then(function(d){(0,K._y)(d,function(){h.ZP.success("\u5220\u9664\u6210\u529F"),c(e)})}).finally(function(){f(void 0)}))},T=[{title:"\u65E5\u5FD7\u5185\u5BB9",render:function(s,d){return d.Comment||"--"}},{title:"\u65E5\u5FD7\u7C7B\u578B",render:function(s,d){var C=V.ActivityLogTypesDescription.find(function(I){return I.id==d.ActivityLogTypeId});return C?(0,o.jsx)("span",{children:C.name||"--"}):"--"}},{title:"\u7BA1\u7406\u5458",render:function(s,d){var C;return(0,o.jsx)(p.Z,{model:(C=d.Admin)===null||C===void 0?void 0:C.User})}},{title:"\u7528\u6237",render:function(s,d){var C;return(0,o.jsx)(p.Z,{model:(C=d.StoreUser)===null||C===void 0?void 0:C.User})}},{title:"\u5730\u5740",render:function(s,d){return d.GeoCity||d.GeoCountry||"--"}},{title:"\u65F6\u95F4",render:function(s,d){return(0,o.jsx)(R.Z,{model:d})}},{fixed:"right",title:"\u64CD\u4F5C",width:200,render:function(s,d){return(0,o.jsx)(S.ZP.Group,{children:(0,o.jsx)(S.ZP,{loading:i==d.Id,type:"link",danger:!0,onClick:function(){O(d)},children:"\u5220\u9664"})})}}];return(0,x.useEffect)(function(){c(e)},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ce,{query:e,onSearch:function(s){t(s),c(s)}}),(0,o.jsx)(y.Z,{title:"\u6D3B\u52A8\u65E5\u5FD7",children:(0,o.jsx)(E.Z,{style:{width:"100%"},rowKey:function(s){return s.Id||0},loading:j,columns:T,dataSource:G.Items||[],expandable:{expandedRowRender:function(s){return(0,o.jsx)("div",{style:{padding:10,border:"5px dashed orange"},children:(0,o.jsx)(le,{model:s})})}},pagination:{showSizeChanger:!1,pageSize:20,current:e.Page,total:G.TotalCount,onChange:function(s){var d=m()(m()({},e),{},{Page:s});t(d),c(d)}}})})]})}},15746:function(z,b,n){var l=n(21584);b.Z=l.Z},26412:function(z,b,n){n.d(b,{Z:function(){return _}});var l=n(67294),m=n(93967),g=n.n(m),u=n(74443),h=n(53124),S=n(98675),y=n(25378),x={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},p=l.createContext({}),M=n(50344),K=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(a[r[i]]=e[r[i]]);return a};const D=e=>(0,M.Z)(e).map(t=>Object.assign(Object.assign({},t==null?void 0:t.props),{key:t.key}));function o(e,t,a){const r=l.useMemo(()=>t||D(a),[t,a]);return l.useMemo(()=>r.map(f=>{var{span:c}=f,O=K(f,["span"]);return Object.assign(Object.assign({},O),{span:typeof c=="number"?c:(0,u.m9)(e,c)})}),[r,e])}function w(e,t,a){let r=e,i=!1;return(a===void 0||a>t)&&(r=Object.assign(Object.assign({},e),{span:t}),i=a!==void 0),[r,i]}function le(e,t){const a=[];let r=[],i=t,f=!1;return e.filter(c=>c).forEach((c,O)=>{const T=c==null?void 0:c.span,v=T||1;if(O===e.length-1){const[s,d]=w(c,i,T);f=f||d,r.push(s),a.push(r);return}if(v<i)i-=v,r.push(c);else{const[s,d]=w(c,i,v);f=f||d,r.push(s),a.push(r),i=t,r=[]}}),[a,f]}var se=(e,t)=>{const[a,r]=(0,l.useMemo)(()=>le(t,e),[t,e]);return a},de=e=>{let{children:t}=e;return t};function ae(e){return e!=null}var Y=e=>{const{itemPrefixCls:t,component:a,span:r,className:i,style:f,labelStyle:c,contentStyle:O,bordered:T,label:v,content:s,colon:d,type:C}=e,I=a;return T?l.createElement(I,{className:g()({[`${t}-item-label`]:C==="label",[`${t}-item-content`]:C==="content"},i),style:f,colSpan:r},ae(v)&&l.createElement("span",{style:c},v),ae(s)&&l.createElement("span",{style:O},s)):l.createElement(I,{className:g()(`${t}-item`,i),style:f,colSpan:r},l.createElement("div",{className:`${t}-item-container`},(v||v===0)&&l.createElement("span",{className:g()(`${t}-item-label`,{[`${t}-item-no-colon`]:!d}),style:c},v),(s||s===0)&&l.createElement("span",{className:g()(`${t}-item-content`),style:O},s)))};function V(e,t,a){let{colon:r,prefixCls:i,bordered:f}=t,{component:c,type:O,showLabel:T,showContent:v,labelStyle:s,contentStyle:d}=a;return e.map((C,I)=>{let{label:q,children:oe,prefixCls:k=i,className:ee,style:te,labelStyle:F,contentStyle:A,span:Q=1,key:ne}=C;return typeof c=="string"?l.createElement(Y,{key:`${O}-${ne||I}`,className:ee,style:te,labelStyle:Object.assign(Object.assign({},s),F),contentStyle:Object.assign(Object.assign({},d),A),span:Q,colon:r,component:c,itemPrefixCls:k,bordered:f,label:T?q:null,content:v?oe:null,type:O}):[l.createElement(Y,{key:`label-${ne||I}`,className:ee,style:Object.assign(Object.assign(Object.assign({},s),te),F),span:1,colon:r,component:c[0],itemPrefixCls:k,bordered:f,label:q,type:"label"}),l.createElement(Y,{key:`content-${ne||I}`,className:ee,style:Object.assign(Object.assign(Object.assign({},d),te),A),span:Q*2-1,component:c[1],itemPrefixCls:k,bordered:f,content:oe,type:"content"})]})}var ce=e=>{const t=l.useContext(p),{prefixCls:a,vertical:r,row:i,index:f,bordered:c}=e;return r?l.createElement(l.Fragment,null,l.createElement("tr",{key:`label-${f}`,className:`${a}-row`},V(i,e,Object.assign({component:"th",type:"label",showLabel:!0},t))),l.createElement("tr",{key:`content-${f}`,className:`${a}-row`},V(i,e,Object.assign({component:"td",type:"content",showContent:!0},t)))):l.createElement("tr",{key:f,className:`${a}-row`},V(i,e,Object.assign({component:c?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},$=n(11568),N=n(14747),L=n(83559),j=n(83262);const U=e=>{const{componentCls:t,labelBg:a}=e;return{[`&${t}-bordered`]:{[`> ${t}-view`]:{border:`${(0,$.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto"},[`${t}-row`]:{borderBottom:`${(0,$.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBottom:"none"},[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${(0,$.bf)(e.padding)} ${(0,$.bf)(e.paddingLG)}`,borderInlineEnd:`${(0,$.bf)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${t}-item-label`]:{color:e.colorTextSecondary,backgroundColor:a,"&::after":{display:"none"}}}},[`&${t}-middle`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${(0,$.bf)(e.paddingSM)} ${(0,$.bf)(e.paddingLG)}`}}},[`&${t}-small`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${(0,$.bf)(e.paddingXS)} ${(0,$.bf)(e.padding)}`}}}}}},H=e=>{const{componentCls:t,extraColor:a,itemPaddingBottom:r,itemPaddingEnd:i,colonMarginRight:f,colonMarginLeft:c,titleMarginBottom:O}=e;return{[t]:Object.assign(Object.assign(Object.assign({},(0,N.Wf)(e)),U(e)),{"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:O},[`${t}-title`]:Object.assign(Object.assign({},N.vS),{flex:"auto",color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:a,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"}},[`${t}-row`]:{"> th, > td":{paddingBottom:r,paddingInlineEnd:i},"> th:last-child, > td:last-child":{paddingInlineEnd:0},"&:last-child":{borderBottom:"none","> th, > td":{paddingBottom:0}}},[`${t}-item-label`]:{color:e.colorTextTertiary,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${(0,$.bf)(c)} ${(0,$.bf)(f)}`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.contentColor,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline",minWidth:"1em"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},X=e=>({labelBg:e.colorFillAlter,titleColor:e.colorText,titleMarginBottom:e.fontSizeSM*e.lineHeightSM,itemPaddingBottom:e.padding,itemPaddingEnd:e.padding,colonMarginRight:e.marginXS,colonMarginLeft:e.marginXXS/2,contentColor:e.colorText,extraColor:e.colorText});var G=(0,L.I$)("Descriptions",e=>{const t=(0,j.IX)(e,{});return H(t)},X),W=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(a[r[i]]=e[r[i]]);return a};const Z=e=>{const{prefixCls:t,title:a,extra:r,column:i,colon:f=!0,bordered:c,layout:O,children:T,className:v,rootClassName:s,style:d,size:C,labelStyle:I,contentStyle:q,items:oe}=e,k=W(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","items"]),{getPrefixCls:ee,direction:te,descriptions:F}=l.useContext(h.E_),A=ee("descriptions",t),Q=(0,y.Z)(),ne=l.useMemo(()=>{var re;return typeof i=="number"?i:(re=(0,u.m9)(Q,Object.assign(Object.assign({},x),i)))!==null&&re!==void 0?re:3},[Q,i]),fe=o(Q,oe,T),ue=(0,S.Z)(C),ve=se(ne,fe),[ge,he,pe]=G(A),ye=l.useMemo(()=>({labelStyle:I,contentStyle:q}),[I,q]);return ge(l.createElement(p.Provider,{value:ye},l.createElement("div",Object.assign({className:g()(A,F==null?void 0:F.className,{[`${A}-${ue}`]:ue&&ue!=="default",[`${A}-bordered`]:!!c,[`${A}-rtl`]:te==="rtl"},v,s,he,pe),style:Object.assign(Object.assign({},F==null?void 0:F.style),d)},k),(a||r)&&l.createElement("div",{className:`${A}-header`},a&&l.createElement("div",{className:`${A}-title`},a),r&&l.createElement("div",{className:`${A}-extra`},r)),l.createElement("div",{className:`${A}-view`},l.createElement("table",null,l.createElement("tbody",null,ve.map((re,me)=>l.createElement(ce,{key:me,index:me,colon:f,prefixCls:A,vertical:O==="vertical",bordered:c,row:re}))))))))};Z.Item=de;var _=Z},71230:function(z,b,n){var l=n(92820);b.Z=l.Z}}]);
